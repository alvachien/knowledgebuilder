!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"82/d":function(e,n,a){"use strict";a.r(n),a.d(n,"AwardModule",function(){return fo});var i=a("ofXK"),c=a("3Pt+"),r=a("QPBi"),l=a("jIBr"),b=a("iasb"),u=a("tyNb"),s=a("0IaG"),d=a("wd/R"),m=a.n(d),f=a("VHTt"),p=a("fXoL"),h=a("o0su"),g=a("/t3+"),v=a("bTqV"),E=a("Qu3c"),C=a("NFeN"),W=a("+0xr"),V=a("M9IT"),k=a("f0Cb"),y=a("kmnG"),w=a("qFsG"),D=a("iadO");function F(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.TargetUser")))}function T(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.targetUser)}}function S(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Quiz.Date")))}function G(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.getRecordDateDisplayString())}}function R(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.Point")))}function U(t,e){if(1&t){var o=p.Xb();p.Wb(0,"td",16),p.Fc(1),p.Wb(2,"button",17),p.ec("click",function(){p.xc(o);var t=e.$implicit;return p.ic().onGetPoints(t.targetUser,t.recordDate)}),p.jc(3,"transloco"),p.Wb(4,"mat-icon"),p.Fc(5,"visibility"),p.Vb(),p.Vb(),p.Vb()}if(2&t){var n=e.$implicit;p.Eb(1),p.Hc(" ",n.point," | "),p.Eb(1),p.pc("matTooltip",p.kc(3,2,"Award.Point"))}}function M(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.AggregatedPoints")))}function x(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.aggPoint)}}function P(t,e){1&t&&p.Rb(0,"tr",18)}function I(t,e){1&t&&p.Rb(0,"tr",19)}function A(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1,"#"),p.Vb())}function j(t,e){if(1&t){var o=p.Xb();p.Wb(0,"td",16),p.Wb(1,"button",24),p.ec("click",function(){p.xc(o);var t=e.$implicit;return p.ic(2).onDeletePoint(t.id)}),p.jc(2,"transloco"),p.Wb(3,"mat-icon"),p.Fc(4,"remove_circle"),p.Vb(),p.Vb(),p.Vb()}if(2&t){var n=e.$implicit;p.Eb(1),p.pc("matTooltip",p.kc(2,2,"Common.Delete")),p.oc("disabled",n.matchedRuleID)}}function O(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.TargetUser")))}function H(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.targetUser)}}function N(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Quiz.Date")))}function $(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.getRecordDateDisplayString())}}function B(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1,"Rule ID"),p.Vb())}function _(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.matchedRuleID)}}function q(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.ContinuousDays")))}function Q(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.countOfDay)}}function L(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.Point")))}function K(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.point)}}function z(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Common.Comment")))}function X(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.comment)}}function Y(t,e){1&t&&p.Rb(0,"tr",18)}function J(t,e){1&t&&p.Rb(0,"tr",19)}function Z(t,e){if(1&t){var o=p.Xb();p.Wb(0,"div"),p.Wb(1,"mat-toolbar"),p.Wb(2,"h3"),p.Fc(3),p.jc(4,"transloco"),p.Vb(),p.Rb(5,"div",0),p.Wb(6,"button",17),p.ec("click",function(){return p.xc(o),p.ic().onHidePoints()}),p.jc(7,"transloco"),p.Wb(8,"mat-icon"),p.Fc(9,"visibility_off"),p.Vb(),p.Vb(),p.Vb(),p.Wb(10,"div",2),p.Wb(11,"div",3),p.Wb(12,"table",4),p.Ub(13,20),p.Ec(14,A,2,0,"th",6),p.Ec(15,j,5,4,"td",7),p.Tb(),p.Ub(16,5),p.Ec(17,O,3,3,"th",6),p.Ec(18,H,2,1,"td",7),p.Tb(),p.Ub(19,8),p.Ec(20,N,3,3,"th",6),p.Ec(21,$,2,1,"td",7),p.Tb(),p.Ub(22,21),p.Ec(23,B,2,0,"th",6),p.Ec(24,_,2,1,"td",7),p.Tb(),p.Ub(25,22),p.Ec(26,q,3,3,"th",6),p.Ec(27,Q,2,1,"td",7),p.Tb(),p.Ub(28,9),p.Ec(29,L,3,3,"th",6),p.Ec(30,K,2,1,"td",7),p.Tb(),p.Ub(31,23),p.Ec(32,z,3,3,"th",6),p.Ec(33,X,2,1,"td",7),p.Tb(),p.Ec(34,Y,1,0,"tr",11),p.Ec(35,J,1,0,"tr",12),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){var n=p.ic();p.Eb(3),p.Jc("",p.kc(4,7,"Award.Point"),", ",n.selectedUser,", ",n.selectedDate,""),p.Eb(3),p.pc("matTooltip",p.kc(7,9,"Common.Hide")),p.Eb(6),p.oc("dataSource",n.dataSourcePoints),p.Eb(22),p.oc("matHeaderRowDef",n.displayedPointColumns),p.Eb(1),p.oc("matRowDefColumns",n.displayedPointColumns)}}var tt,et,ot="table[_ngcontent-%COMP%]{width:100%}.example-form[_ngcontent-%COMP%]{min-width:250px;max-width:500px;width:100%}.example-margin[_ngcontent-%COMP%]{margin:0 10px}",nt=((et=function(){function e(o,n,a){t(this,e),this.oDataSrv=o,this.dialog=n,this.uiUtilSrv=a,this.dataSource=[],this.dataSourcePoints=[],this.recordCount=0,this.displayedColumns=["targetUser","recordDate","point","aggpoint"],this.displayedPointColumns=["action","targetUser","recordDate","matchedRuleID","countOfDay","point","comment"],this.selectedUser="",this.selectedDate="",this.isPointShow=!1}return o(e,[{key:"ngOnInit",value:function(){this.oDataSrv.getAwardUsers().subscribe(),this.refreshList()}},{key:"isExpertMode",get:function(){return this.oDataSrv.expertMode}},{key:"onCreateAward",value:function(){var t=this;this.dialog.open(at,{width:"600px",closeOnNavigation:!1,data:new f.c}).afterClosed().subscribe(function(e){console.log("The dialog was closed with result: "+e),e&&t.oDataSrv.createAwardPoint(e).subscribe({next:function(e){t.refreshList()},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})})}},{key:"refreshList",value:function(){var t=this;this.oDataSrv.getAwardPointReports(100,0).subscribe({next:function(e){t.dataSource=e.items.slice(),t.recordCount=e.totalCount},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})}},{key:"onGetPoints",value:function(t,e){var o=this;this.oDataSrv.getAwardPoints(100,0,void 0,"TargetUser eq '".concat(t,"' AND RecordDate eq ").concat(e.format(f.N))).subscribe({next:function(n){o.selectedUser=t,o.selectedDate=e.format(f.N),o.dataSourcePoints=[],o.dataSourcePoints=n.items.slice(),o.isPointShow=!0},error:function(t){o.uiUtilSrv.showSnackInfo(t)}})}},{key:"onHidePoints",value:function(){this.selectedDate="",this.selectedUser="",this.dataSourcePoints=[],this.isPointShow=!1}},{key:"onDeletePoint",value:function(t){var e=this;this.oDataSrv.deleteAwardPoint(t).subscribe({next:function(t){e.onGetPoints(e.selectedUser,m()(e.selectedDate))},error:function(t){e.uiUtilSrv.showSnackInfo(t)}})}}]),e}()).\u0275fac=function(t){return new(t||et)(p.Qb(h.b),p.Qb(s.b),p.Qb(h.d))},et.\u0275cmp=p.Kb({type:et,selectors:[["app-overview"]],decls:29,vars:13,consts:[[1,"toolbar-spacer"],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","targetUser"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","recordDate"],["matColumnDef","point"],["matColumnDef","aggpoint"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""],["matColumnDef","action"],["matColumnDef","matchedRuleID"],["matColumnDef","countOfDay"],["matColumnDef","comment"],["mat-icon-button","","color","warn",3,"disabled","matTooltip","click"]],template:function(t,e){1&t&&(p.Wb(0,"mat-toolbar"),p.Wb(1,"h3"),p.Fc(2),p.jc(3,"transloco"),p.Vb(),p.Rb(4,"div",0),p.Wb(5,"button",1),p.ec("click",function(){return e.onCreateAward()}),p.jc(6,"transloco"),p.Wb(7,"mat-icon"),p.Fc(8,"add_circle"),p.Vb(),p.Vb(),p.Vb(),p.Wb(9,"div",2),p.Wb(10,"div",3),p.Wb(11,"table",4),p.Ub(12,5),p.Ec(13,F,3,3,"th",6),p.Ec(14,T,2,1,"td",7),p.Tb(),p.Ub(15,8),p.Ec(16,S,3,3,"th",6),p.Ec(17,G,2,1,"td",7),p.Tb(),p.Ub(18,9),p.Ec(19,R,3,3,"th",6),p.Ec(20,U,6,4,"td",7),p.Tb(),p.Ub(21,10),p.Ec(22,M,3,3,"th",6),p.Ec(23,x,2,1,"td",7),p.Tb(),p.Ec(24,P,1,0,"tr",11),p.Ec(25,I,1,0,"tr",12),p.Vb(),p.Vb(),p.Rb(26,"mat-paginator",13),p.Vb(),p.Rb(27,"mat-divider"),p.Ec(28,Z,36,11,"div",14)),2&t&&(p.Eb(2),p.Gc(p.kc(3,9,"Award.Overview")),p.Eb(3),p.pc("matTooltip",p.kc(6,11,"Common.Create")),p.oc("disabled",!e.isExpertMode),p.Eb(6),p.oc("dataSource",e.dataSource),p.Eb(13),p.oc("matHeaderRowDef",e.displayedColumns),p.Eb(1),p.oc("matRowDefColumns",e.displayedColumns),p.Eb(1),p.oc("length",e.recordCount)("pageSize",20),p.Eb(2),p.oc("ngIf",e.isPointShow))},directives:[g.a,v.b,E.a,C.a,W.j,W.c,W.e,W.b,W.g,W.i,V.a,k.a,i.m,W.d,W.a,W.f,W.h],pipes:[r.d],styles:[ot]}),et),at=((tt=function(){function e(o,n){t(this,e),this.dialogRef=o,this.data=n}return o(e,[{key:"onNoClick",value:function(){this.dialogRef.close()}}]),e}()).\u0275fac=function(t){return new(t||tt)(p.Qb(s.g),p.Qb(s.a))},tt.\u0275cmp=p.Kb({type:tt,selectors:[["app-overview-award-point-crtdlg"]],decls:32,vars:20,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"example-form"],["appearance","fill",1,"control-full-width"],["matInput","","name","targetuser",3,"ngModel","ngModelChange"],["appearance","fill"],["matInput","","name","recorddate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["matInput","","type","number","name","point",3,"ngModel","ngModelChange"],["matInput","","name","comment",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"disabled","mat-dialog-close"]],template:function(t,e){if(1&t&&(p.Wb(0,"h1",0),p.Fc(1,"CREATE AWARD POINT"),p.Vb(),p.Wb(2,"div",1),p.Wb(3,"form",2),p.Wb(4,"mat-form-field",3),p.Wb(5,"mat-label"),p.Fc(6),p.jc(7,"transloco"),p.Vb(),p.Wb(8,"input",4),p.ec("ngModelChange",function(t){return e.data.targetUser=t}),p.Vb(),p.Vb(),p.Wb(9,"mat-form-field",5),p.Wb(10,"mat-label"),p.Fc(11),p.jc(12,"transloco"),p.Vb(),p.Wb(13,"input",6),p.ec("ngModelChange",function(t){return e.data.recordDate=t}),p.Vb(),p.Rb(14,"mat-datepicker-toggle",7),p.Rb(15,"mat-datepicker",null,8),p.Vb(),p.Wb(17,"mat-form-field",3),p.Wb(18,"mat-label"),p.Fc(19),p.jc(20,"transloco"),p.Vb(),p.Wb(21,"input",9),p.ec("ngModelChange",function(t){return e.data.point=t}),p.Vb(),p.Vb(),p.Wb(22,"mat-form-field",3),p.Wb(23,"mat-label"),p.Fc(24),p.jc(25,"transloco"),p.Vb(),p.Wb(26,"input",10),p.ec("ngModelChange",function(t){return e.data.comment=t}),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(27,"div",11),p.Wb(28,"button",12),p.ec("click",function(){return e.onNoClick()}),p.Fc(29,"No Thanks"),p.Vb(),p.Wb(30,"button",13),p.Fc(31,"OK"),p.Vb(),p.Vb()),2&t){var o=p.vc(16);p.Eb(6),p.Gc(p.kc(7,12,"Award.TargetUser")),p.Eb(2),p.oc("ngModel",e.data.targetUser),p.Eb(3),p.Gc(p.kc(12,14,"Quiz.Date")),p.Eb(2),p.oc("matDatepicker",o)("ngModel",e.data.recordDate),p.Eb(1),p.oc("for",o),p.Eb(5),p.Gc(p.kc(20,16,"Award.Point")),p.Eb(2),p.oc("ngModel",e.data.point),p.Eb(3),p.Gc(p.kc(25,18,"Common.Comment")),p.Eb(2),p.oc("ngModel",e.data.comment),p.Eb(4),p.oc("disabled",!e.data.isValid())("mat-dialog-close",e.data)}},directives:[s.h,s.e,c.v,c.o,c.p,y.c,y.g,w.b,c.c,c.n,c.q,D.d,D.f,y.i,D.c,c.r,s.c,v.b,s.d],pipes:[r.d],styles:[ot]}),tt),it=a("tPNy");function ct(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1,"#"),p.Vb())}function rt(t,e){if(1&t){var o=p.Xb();p.Wb(0,"td",16),p.Fc(1),p.Wb(2,"button",17),p.ec("click",function(){p.xc(o);var t=e.$implicit;return p.ic().onDisplayRuleGroup(t.id)}),p.jc(3,"transloco"),p.Wb(4,"mat-icon"),p.Fc(5,"launch"),p.Vb(),p.Vb(),p.Wb(6,"button",18),p.ec("click",function(){p.xc(o);var t=e.$implicit;return p.ic().onDeleteRuleGroup(t.id)}),p.jc(7,"transloco"),p.Wb(8,"mat-icon"),p.Fc(9,"remove_circle"),p.Vb(),p.Vb(),p.Vb()}if(2&t){var n=e.$implicit;p.Eb(1),p.Hc("",n.id," | "),p.Eb(1),p.pc("matTooltip",p.kc(3,3,"Common.Display")),p.Eb(4),p.pc("matTooltip",p.kc(7,5,"Common.Delete"))}}function lt(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.TargetUser")))}function bt(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.targetUser)}}function ut(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Type")))}function st(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t){var o=e.$implicit,n=p.ic();p.Eb(1),p.Gc(p.kc(2,1,n.getAwardRuleTypeName(o.ruleType)))}}function dt(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.Validity")))}function mt(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.validity)}}function ft(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1,"Desp"),p.Vb())}function pt(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.desp)}}function ht(t,e){1&t&&p.Rb(0,"tr",19)}function gt(t,e){1&t&&p.Rb(0,"tr",20)}var vt,Et=((vt=function(){function e(o,n,a){t(this,e),this.odataSrv=o,this.dialog=n,this.uiUtilSrv=a,this.dataSource=[],this.displayedColumns=["id","targetUser","ruleType","validity","desp"],this.recordCount=0}return o(e,[{key:"ngOnInit",value:function(){this.odataSrv.getAwardUsers().subscribe(),this.refreshList()}},{key:"isExpertMode",get:function(){return this.odataSrv.expertMode}},{key:"getAwardRuleTypeName",value:function(t){return Object(it.i)(t)}},{key:"onCreateRuleGroup",value:function(){this.uiUtilSrv.navigateAwardRuleGenerationPage()}},{key:"refreshList",value:function(){var t=this;this.odataSrv.getAwardRuleGroups(100,0,void 0).subscribe({next:function(e){t.dataSource=e.items.slice(),t.recordCount=e.totalCount},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})}},{key:"onCopyRuleGroup",value:function(t){}},{key:"onDeleteRuleGroup",value:function(t){var e=this;this.odataSrv.deleteAwardRuleGroup(t).subscribe({next:function(t){e.refreshList()},error:function(t){e.uiUtilSrv.showSnackInfo(t)}})}},{key:"onDisplayRuleGroup",value:function(t){this.uiUtilSrv.navigateAwardRuleGroupDisplayPage(t)}}]),e}()).\u0275fac=function(t){return new(t||vt)(p.Qb(h.b),p.Qb(s.b),p.Qb(h.d))},vt.\u0275cmp=p.Kb({type:vt,selectors:[["app-award-rule"]],decls:30,vars:12,consts:[[1,"toolbar-spacer"],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","targetUser"],["matColumnDef","ruleType"],["matColumnDef","validity"],["matColumnDef","desp"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"matTooltip","click"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(p.Wb(0,"mat-toolbar"),p.Wb(1,"h3"),p.Fc(2),p.jc(3,"transloco"),p.Vb(),p.Rb(4,"div",0),p.Wb(5,"button",1),p.ec("click",function(){return e.onCreateRuleGroup()}),p.jc(6,"transloco"),p.Wb(7,"mat-icon"),p.Fc(8,"add_circle"),p.Vb(),p.Vb(),p.Vb(),p.Wb(9,"div",2),p.Wb(10,"div",3),p.Wb(11,"table",4),p.Ub(12,5),p.Ec(13,ct,2,0,"th",6),p.Ec(14,rt,10,7,"td",7),p.Tb(),p.Ub(15,8),p.Ec(16,lt,3,3,"th",6),p.Ec(17,bt,2,1,"td",7),p.Tb(),p.Ub(18,9),p.Ec(19,ut,3,3,"th",6),p.Ec(20,st,3,3,"td",7),p.Tb(),p.Ub(21,10),p.Ec(22,dt,3,3,"th",6),p.Ec(23,mt,2,1,"td",7),p.Tb(),p.Ub(24,11),p.Ec(25,ft,2,0,"th",6),p.Ec(26,pt,2,1,"td",7),p.Tb(),p.Ec(27,ht,1,0,"tr",12),p.Ec(28,gt,1,0,"tr",13),p.Vb(),p.Vb(),p.Rb(29,"mat-paginator",14),p.Vb()),2&t&&(p.Eb(2),p.Gc(p.kc(3,8,"Award.Rules")),p.Eb(3),p.pc("matTooltip",p.kc(6,10,"Common.Create")),p.oc("disabled",!e.isExpertMode),p.Eb(6),p.oc("dataSource",e.dataSource),p.Eb(16),p.oc("matHeaderRowDef",e.displayedColumns),p.Eb(1),p.oc("matRowDefColumns",e.displayedColumns),p.Eb(1),p.oc("length",e.recordCount)("pageSize",20))},directives:[g.a,v.b,E.a,C.a,W.j,W.c,W.e,W.b,W.g,W.i,V.a,W.d,W.a,W.f,W.h],pipes:[r.d],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),vt),Ct=a("bSwM"),Wt=a("d3UM"),Vt=a("FKr1");function kt(t,e){1&t&&p.Rb(0,"th",23)}function yt(t,e){if(1&t){var o=p.Xb();p.Wb(0,"td",24),p.Wb(1,"button",25),p.ec("click",function(){p.xc(o);var t=e.$implicit;return p.ic().onGetPoints(t.targetUser,t.recordDate)}),p.jc(2,"transloco"),p.Wb(3,"mat-icon"),p.Fc(4,"visibility"),p.Vb(),p.Vb(),p.Wb(5,"button",26),p.ec("click",function(){p.xc(o);var t=e.$implicit;return p.ic().onDeleteTrace(t.targetUser,t.recordDate)}),p.jc(6,"transloco"),p.Wb(7,"mat-icon"),p.Fc(8,"remove_circle"),p.Vb(),p.Vb(),p.Vb()}2&t&&(p.Eb(1),p.pc("matTooltip",p.kc(2,2,"Award.Point")),p.Eb(4),p.pc("matTooltip",p.kc(6,4,"Common.Delete")))}function wt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.TargetUser")))}function Dt(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.targetUser)}}function Ft(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Quiz.Date")))}function Tt(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.getRecordDateDisplayString())}}function St(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.SchoolWorkTime")))}function Gt(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.schoolWorkTime)}}function Rt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.GoToBedTime")))}function Ut(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.goToBedTime)}}function Mt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.HomeworkCount")))}function xt(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.homeWorkCount)}}function Pt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.BodyExerciseCount")))}function It(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.bodyExerciseCount)}}function At(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.ErrorsCollection")))}function jt(t,e){if(1&t&&(p.Wb(0,"td",24),p.Wb(1,"mat-checkbox",27),p.ec("ngModelChange",function(t){return e.$implicit.errorsCollection=t}),p.Vb(),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.oc("ngModel",o.errorsCollection)}}function Ot(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.HandWriting")))}function Ht(t,e){if(1&t&&(p.Wb(0,"td",24),p.Wb(1,"mat-checkbox",27),p.ec("ngModelChange",function(t){return e.$implicit.handWriting=t}),p.Vb(),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.oc("ngModel",o.handWriting)}}function Nt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.CleanDesk")))}function $t(t,e){if(1&t&&(p.Wb(0,"td",24),p.Wb(1,"mat-checkbox",27),p.ec("ngModelChange",function(t){return e.$implicit.cleanDesk=t}),p.Vb(),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.oc("ngModel",o.cleanDesk)}}function Bt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.HouseKeepingCount")))}function _t(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.houseKeepingCount)}}function qt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.PoliteBehavior")))}function Qt(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.politeBehavior)}}function Lt(t,e){1&t&&p.Rb(0,"tr",28)}function Kt(t,e){1&t&&p.Rb(0,"tr",29)}function zt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1,"#"),p.Vb())}function Xt(t,e){if(1&t){var o=p.Xb();p.Wb(0,"td",24),p.Fc(1),p.Wb(2,"button",34),p.ec("click",function(){p.xc(o);var t=e.$implicit;return p.ic(2).onDeletePoint(t.id)}),p.jc(3,"transloco"),p.Wb(4,"mat-icon"),p.Fc(5,"remove_circle"),p.Vb(),p.Vb(),p.Vb()}if(2&t){var n=e.$implicit;p.Eb(1),p.Hc(" ",n.id," | "),p.Eb(1),p.pc("matTooltip",p.kc(3,3,"Common.Delete")),p.oc("disabled",n.matchedRuleID)}}function Yt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.TargetUser")))}function Jt(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.targetUser)}}function Zt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Quiz.Date")))}function te(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.getRecordDateDisplayString())}}function ee(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1,"Rule ID"),p.Vb())}function oe(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.matchedRuleID)}}function ne(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.ContinuousDays")))}function ae(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.countOfDay)}}function ie(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.Point")))}function ce(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.point)}}function re(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Common.Comment")))}function le(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.comment)}}function be(t,e){1&t&&p.Rb(0,"tr",28)}function ue(t,e){1&t&&p.Rb(0,"tr",29)}function se(t,e){if(1&t){var o=p.Xb();p.Wb(0,"div"),p.Wb(1,"mat-toolbar"),p.Wb(2,"h3"),p.Fc(3),p.jc(4,"transloco"),p.Vb(),p.Rb(5,"div",0),p.Wb(6,"button",25),p.ec("click",function(){return p.xc(o),p.ic().onHidePoints()}),p.jc(7,"transloco"),p.Wb(8,"mat-icon"),p.Fc(9,"visibility_off"),p.Vb(),p.Vb(),p.Vb(),p.Wb(10,"div",2),p.Wb(11,"div",3),p.Wb(12,"table",4),p.Ub(13,5),p.Ec(14,zt,2,0,"th",6),p.Ec(15,Xt,6,5,"td",7),p.Tb(),p.Ub(16,8),p.Ec(17,Yt,3,3,"th",6),p.Ec(18,Jt,2,1,"td",7),p.Tb(),p.Ub(19,9),p.Ec(20,Zt,3,3,"th",6),p.Ec(21,te,2,1,"td",7),p.Tb(),p.Ub(22,30),p.Ec(23,ee,2,0,"th",6),p.Ec(24,oe,2,1,"td",7),p.Tb(),p.Ub(25,31),p.Ec(26,ne,3,3,"th",6),p.Ec(27,ae,2,1,"td",7),p.Tb(),p.Ub(28,32),p.Ec(29,ie,3,3,"th",6),p.Ec(30,ce,2,1,"td",7),p.Tb(),p.Ub(31,33),p.Ec(32,re,3,3,"th",6),p.Ec(33,le,2,1,"td",7),p.Tb(),p.Ec(34,be,1,0,"tr",19),p.Ec(35,ue,1,0,"tr",20),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){var n=p.ic();p.Eb(3),p.Jc("",p.kc(4,7,"Award.Point"),", ",n.selectedUser,", ",n.selectedDate,""),p.Eb(3),p.pc("matTooltip",p.kc(7,9,"Common.Hide")),p.Eb(6),p.oc("dataSource",n.dataSourcePoints),p.Eb(22),p.oc("matHeaderRowDef",n.displayedPointColumns),p.Eb(1),p.oc("matRowDefColumns",n.displayedPointColumns)}}function de(t,e){if(1&t&&(p.Wb(0,"mat-option",22),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.oc("value",o.targetUser),p.Eb(1),p.Gc(o.targetUser)}}var me,fe,pe="table[_ngcontent-%COMP%]{width:100%}.example-form[_ngcontent-%COMP%]{min-width:250px;max-width:500px;width:100%}.example-margin[_ngcontent-%COMP%]{margin:0 10px}td[_ngcontent-%COMP%]{padding-right:8px}",he=((fe=function(){function e(o,n,a){t(this,e),this.odataSrv=o,this.dialog=n,this.uiUtilSrv=a,this.dataSourceTrace=[],this.dataSourcePoints=[],this.traceLength=0,this.displayedColumns=["action","targetUser","recordDate","schoolWorkTime","goToBedTime","homeWorkCount","bodyExerciseCount","errorsCollection","handWriting","cleanDesk","houseKeepingCount","politeBehavior"],this.displayedPointColumns=["action","targetUser","recordDate","matchedRuleID","countOfDay","point","comment"],this.selectedUser="",this.selectedDate="",this.isPointShow=!1}return o(e,[{key:"ngOnInit",value:function(){this.odataSrv.getAwardUsers().subscribe(),this.refreshList()}},{key:"isExpertMode",get:function(){return this.odataSrv.expertMode}},{key:"onCreateTrace",value:function(){var t=this;this.dialog.open(ge,{width:"600px",closeOnNavigation:!1,data:new f.j}).afterClosed().subscribe(function(e){console.log("The dialog was closed with result: "+e),e&&t.odataSrv.createDailyTrace(e).subscribe({next:function(e){t.refreshList()},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})})}},{key:"refreshList",value:function(){var t=this;this.odataSrv.getDailyTrace(100,0).subscribe({next:function(e){t.dataSourceTrace=e.items.slice(),t.traceLength=e.totalCount},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})}},{key:"onGetPoints",value:function(t,e){var o=this;this.odataSrv.getAwardPoints(100,0,void 0,"TargetUser eq '".concat(t,"' AND RecordDate eq ").concat(e.format(f.N))).subscribe({next:function(n){o.selectedUser=t,o.selectedDate=e.format(f.N),o.dataSourcePoints=[],o.dataSourcePoints=n.items.slice(),o.isPointShow=!0},error:function(t){o.uiUtilSrv.showSnackInfo(t)}})}},{key:"onDeleteTrace",value:function(t,e){var o=this;this.odataSrv.deleteDailyTrace(t,e).subscribe({next:function(t){o.isPointShow=!1,o.refreshList()},error:function(t){o.uiUtilSrv.showSnackInfo(t)}})}},{key:"onHidePoints",value:function(){this.selectedDate="",this.selectedUser="",this.dataSourcePoints=[],this.isPointShow=!1}},{key:"onDeletePoint",value:function(t){var e=this;this.odataSrv.deleteAwardPoint(t).subscribe({next:function(t){e.onGetPoints(e.selectedUser,m()(e.selectedDate))},error:function(t){e.uiUtilSrv.showSnackInfo(t)}})}}]),e}()).\u0275fac=function(t){return new(t||fe)(p.Qb(h.b),p.Qb(s.b),p.Qb(h.d))},fe.\u0275cmp=p.Kb({type:fe,selectors:[["app-daily-trace"]],decls:53,vars:13,consts:[[1,"toolbar-spacer"],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","targetUser"],["matColumnDef","recordDate"],["matColumnDef","schoolWorkTime"],["matColumnDef","goToBedTime"],["matColumnDef","homeWorkCount"],["matColumnDef","bodyExerciseCount"],["matColumnDef","errorsCollection"],["matColumnDef","handWriting"],["matColumnDef","cleanDesk"],["matColumnDef","houseKeepingCount"],["matColumnDef","politeBehavior"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"matTooltip","click"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["disabled","",3,"ngModel","ngModelChange"],["mat-header-row",""],["mat-row",""],["matColumnDef","matchedRuleID"],["matColumnDef","countOfDay"],["matColumnDef","point"],["matColumnDef","comment"],["mat-icon-button","","color","warn",3,"disabled","matTooltip","click"]],template:function(t,e){1&t&&(p.Wb(0,"mat-toolbar"),p.Wb(1,"h3"),p.Fc(2),p.jc(3,"transloco"),p.Vb(),p.Rb(4,"div",0),p.Wb(5,"button",1),p.ec("click",function(){return e.onCreateTrace()}),p.jc(6,"transloco"),p.Wb(7,"mat-icon"),p.Fc(8,"add_circle"),p.Vb(),p.Vb(),p.Vb(),p.Wb(9,"div",2),p.Wb(10,"div",3),p.Wb(11,"table",4),p.Ub(12,5),p.Ec(13,kt,1,0,"th",6),p.Ec(14,yt,9,6,"td",7),p.Tb(),p.Ub(15,8),p.Ec(16,wt,3,3,"th",6),p.Ec(17,Dt,2,1,"td",7),p.Tb(),p.Ub(18,9),p.Ec(19,Ft,3,3,"th",6),p.Ec(20,Tt,2,1,"td",7),p.Tb(),p.Ub(21,10),p.Ec(22,St,3,3,"th",6),p.Ec(23,Gt,2,1,"td",7),p.Tb(),p.Ub(24,11),p.Ec(25,Rt,3,3,"th",6),p.Ec(26,Ut,2,1,"td",7),p.Tb(),p.Ub(27,12),p.Ec(28,Mt,3,3,"th",6),p.Ec(29,xt,2,1,"td",7),p.Tb(),p.Ub(30,13),p.Ec(31,Pt,3,3,"th",6),p.Ec(32,It,2,1,"td",7),p.Tb(),p.Ub(33,14),p.Ec(34,At,3,3,"th",6),p.Ec(35,jt,2,1,"td",7),p.Tb(),p.Ub(36,15),p.Ec(37,Ot,3,3,"th",6),p.Ec(38,Ht,2,1,"td",7),p.Tb(),p.Ub(39,16),p.Ec(40,Nt,3,3,"th",6),p.Ec(41,$t,2,1,"td",7),p.Tb(),p.Ub(42,17),p.Ec(43,Bt,3,3,"th",6),p.Ec(44,_t,2,1,"td",7),p.Tb(),p.Ub(45,18),p.Ec(46,qt,3,3,"th",6),p.Ec(47,Qt,2,1,"td",7),p.Tb(),p.Ec(48,Lt,1,0,"tr",19),p.Ec(49,Kt,1,0,"tr",20),p.Vb(),p.Vb(),p.Rb(50,"mat-paginator",21),p.Vb(),p.Rb(51,"mat-divider"),p.Ec(52,se,36,11,"div",22)),2&t&&(p.Eb(2),p.Gc(p.kc(3,9,"Award.DailyTrace")),p.Eb(3),p.pc("matTooltip",p.kc(6,11,"Common.Create")),p.oc("disabled",!e.isExpertMode),p.Eb(6),p.oc("dataSource",e.dataSourceTrace),p.Eb(37),p.oc("matHeaderRowDef",e.displayedColumns),p.Eb(1),p.oc("matRowDefColumns",e.displayedColumns),p.Eb(1),p.oc("length",e.traceLength)("pageSize",20),p.Eb(2),p.oc("ngIf",e.isPointShow))},directives:[g.a,v.b,E.a,C.a,W.j,W.c,W.e,W.b,W.g,W.i,V.a,k.a,i.m,W.d,W.a,Ct.a,c.n,c.q,W.f,W.h],pipes:[r.d],styles:[pe]}),fe),ge=((me=function(){function e(o,n,a){t(this,e),this.dialogRef=o,this.odataSrv=n,this.data=a}return o(e,[{key:"arTargetUsers",get:function(){var t=this;return this.odataSrv.bufferedAwardUser.filter(function(e){return e.supervisor===t.odataSrv.currentUser})}},{key:"onNoClick",value:function(){this.dialogRef.close()}}]),e}()).\u0275fac=function(t){return new(t||me)(p.Qb(s.g),p.Qb(h.b),p.Qb(s.a))},me.\u0275cmp=p.Kb({type:me,selectors:[["app-daily-trace-create-dialog"]],decls:61,vars:46,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"example-form"],["appearance","fill",1,"control-full-width"],["required","","name","targetuser",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill"],["matInput","","name","recorddate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["matInput","","type","number","name","schoolworktime",3,"ngModel","ngModelChange"],["matInput","","type","number","name","gotobedtime",3,"ngModel","ngModelChange"],["matInput","","type","number","name","homeworkcount",3,"ngModel","ngModelChange"],["matInput","","type","number","name","bodyexercisecount",3,"ngModel","ngModelChange"],["name","errorcollection",1,"example-margin",3,"ngModel","ngModelChange"],["name","handwriting",1,"example-margin",3,"ngModel","ngModelChange"],["name","cleandesk",1,"example-margin",3,"ngModel","ngModelChange"],["matInput","","type","number","name","housekeepingcount",3,"ngModel","ngModelChange"],["matInput","","type","number","name","politebehavior",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"disabled","mat-dialog-close"],[3,"value"]],template:function(t,e){if(1&t&&(p.Wb(0,"h1",0),p.Fc(1,"CREATE DAILY TRACE"),p.Vb(),p.Wb(2,"div",1),p.Wb(3,"form",2),p.Wb(4,"mat-form-field",3),p.Wb(5,"mat-label"),p.Fc(6),p.jc(7,"transloco"),p.Vb(),p.Wb(8,"mat-select",4),p.ec("ngModelChange",function(t){return e.data.targetUser=t}),p.Ec(9,de,2,2,"mat-option",5),p.Vb(),p.Vb(),p.Wb(10,"mat-form-field",6),p.Wb(11,"mat-label"),p.Fc(12,"Record Date"),p.Vb(),p.Wb(13,"input",7),p.ec("ngModelChange",function(t){return e.data.recordDate=t}),p.Vb(),p.Rb(14,"mat-datepicker-toggle",8),p.Rb(15,"mat-datepicker",null,9),p.Vb(),p.Wb(17,"mat-form-field",3),p.Wb(18,"mat-label"),p.Fc(19),p.jc(20,"transloco"),p.Vb(),p.Wb(21,"input",10),p.ec("ngModelChange",function(t){return e.data.schoolWorkTime=t}),p.Vb(),p.Vb(),p.Wb(22,"mat-form-field",3),p.Wb(23,"mat-label"),p.Fc(24),p.jc(25,"transloco"),p.Vb(),p.Wb(26,"input",11),p.ec("ngModelChange",function(t){return e.data.goToBedTime=t}),p.Vb(),p.Vb(),p.Wb(27,"mat-form-field",3),p.Wb(28,"mat-label"),p.Fc(29),p.jc(30,"transloco"),p.Vb(),p.Wb(31,"input",12),p.ec("ngModelChange",function(t){return e.data.homeWorkCount=t}),p.Vb(),p.Vb(),p.Wb(32,"mat-form-field",3),p.Wb(33,"mat-label"),p.Fc(34),p.jc(35,"transloco"),p.Vb(),p.Wb(36,"input",13),p.ec("ngModelChange",function(t){return e.data.bodyExerciseCount=t}),p.Vb(),p.Vb(),p.Wb(37,"mat-checkbox",14),p.ec("ngModelChange",function(t){return e.data.errorsCollection=t}),p.Fc(38),p.jc(39,"transloco"),p.Vb(),p.Wb(40,"mat-checkbox",15),p.ec("ngModelChange",function(t){return e.data.handWriting=t}),p.Fc(41),p.jc(42,"transloco"),p.Vb(),p.Wb(43,"mat-checkbox",16),p.ec("ngModelChange",function(t){return e.data.cleanDesk=t}),p.Fc(44),p.jc(45,"transloco"),p.Vb(),p.Wb(46,"mat-form-field",3),p.Wb(47,"mat-label"),p.Fc(48),p.jc(49,"transloco"),p.Vb(),p.Wb(50,"input",17),p.ec("ngModelChange",function(t){return e.data.houseKeepingCount=t}),p.Vb(),p.Vb(),p.Wb(51,"mat-form-field",3),p.Wb(52,"mat-label"),p.Fc(53),p.jc(54,"transloco"),p.Vb(),p.Wb(55,"input",18),p.ec("ngModelChange",function(t){return e.data.politeBehavior=t}),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(56,"div",19),p.Wb(57,"button",20),p.ec("click",function(){return e.onNoClick()}),p.Fc(58,"NO THANKS"),p.Vb(),p.Wb(59,"button",21),p.Fc(60,"OK"),p.Vb(),p.Vb()),2&t){var o=p.vc(16);p.Eb(6),p.Gc(p.kc(7,26,"Award.TargetUser")),p.Eb(2),p.oc("ngModel",e.data.targetUser),p.Eb(1),p.oc("ngForOf",e.arTargetUsers),p.Eb(4),p.oc("matDatepicker",o)("ngModel",e.data.recordDate),p.Eb(1),p.oc("for",o),p.Eb(5),p.Gc(p.kc(20,28,"Award.SchoolWorkTime")),p.Eb(2),p.oc("ngModel",e.data.schoolWorkTime),p.Eb(3),p.Gc(p.kc(25,30,"Award.GoToBedTime")),p.Eb(2),p.oc("ngModel",e.data.goToBedTime),p.Eb(3),p.Gc(p.kc(30,32,"Award.HomeworkCount")),p.Eb(2),p.oc("ngModel",e.data.homeWorkCount),p.Eb(3),p.Gc(p.kc(35,34,"Award.BodyExerciseCount")),p.Eb(2),p.oc("ngModel",e.data.bodyExerciseCount),p.Eb(1),p.oc("ngModel",e.data.errorsCollection),p.Eb(1),p.Gc(p.kc(39,36,"Award.ErrorsCollection")),p.Eb(2),p.oc("ngModel",e.data.handWriting),p.Eb(1),p.Gc(p.kc(42,38,"Award.HandWriting")),p.Eb(2),p.oc("ngModel",e.data.cleanDesk),p.Eb(1),p.Gc(p.kc(45,40,"Award.CleanDesk")),p.Eb(4),p.Gc(p.kc(49,42,"Award.HouseKeepingCount")),p.Eb(2),p.oc("ngModel",e.data.houseKeepingCount),p.Eb(3),p.Gc(p.kc(54,44,"Award.PoliteBehavior")),p.Eb(2),p.oc("ngModel",e.data.politeBehavior),p.Eb(4),p.oc("disabled",!e.data.isValid())("mat-dialog-close",e.data)}},directives:[s.h,s.e,c.v,c.o,c.p,y.c,y.g,Wt.a,c.t,c.n,c.q,i.l,w.b,D.d,c.c,D.f,y.i,D.c,c.r,Ct.a,s.c,v.b,s.d,Vt.n],pipes:[r.d],styles:[pe]}),me),ve=a("xHqg"),Ee=a("MutI");function Ce(t,e){1&t&&p.Fc(0,"HEADER")}function We(t,e){if(1&t&&(p.Wb(0,"mat-option",30),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.oc("value",o.targetUser),p.Eb(1),p.Gc(o.targetUser)}}function Ve(t,e){if(1&t&&(p.Wb(0,"mat-option",30),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t){var o=e.$implicit;p.oc("value",o.value),p.Eb(1),p.Gc(p.kc(2,2,o.i18nterm))}}function ke(t,e){1&t&&p.Fc(0,"DIMENSIONS")}function ye(t,e){if(1&t&&(p.Wb(0,"mat-list",31),p.Wb(1,"mat-list-item"),p.Fc(2),p.Vb(),p.Vb()),2&t){var o=e.$implicit;p.Eb(2),p.Gc(o.toString())}}function we(t,e){1&t&&p.Fc(0,"DAYS")}function De(t,e){if(1&t&&(p.Wb(0,"mat-list",31),p.Wb(1,"mat-list-item"),p.Fc(2),p.Vb(),p.Vb()),2&t){var o=e.$implicit;p.Eb(2),p.Gc(o.toString())}}function Fe(t,e){1&t&&p.Fc(0,"POINTS")}function Te(t,e){1&t&&(p.Wb(0,"span"),p.Fc(1," DIMENSION "),p.Vb())}function Se(t,e){if(1&t&&(p.Wb(0,"span"),p.Fc(1),p.Vb()),2&t){var o=p.ic(2).$implicit,n=p.ic();p.Eb(1),p.Hc(" ",n.getColumnHeaderForDays(o)," ")}}function Ge(t,e){if(1&t&&(p.Wb(0,"th",35),p.Ec(1,Te,2,0,"span",36),p.Ec(2,Se,2,1,"span",36),p.Vb()),2&t){var o=p.ic().$implicit;p.Eb(1),p.oc("ngIf","dimension"===o),p.Eb(1),p.oc("ngIf","dimension"!==o)}}function Re(t,e){if(1&t&&(p.Wb(0,"span"),p.Fc(1),p.Vb()),2&t){var o=p.ic().$implicit;p.Eb(1),p.Hc(" ",o.dimInfo.toString()," ")}}function Ue(t,e){if(1&t){var o=p.Xb();p.Wb(0,"span"),p.Wb(1,"input",38),p.ec("ngModelChange",function(t){p.xc(o);var e=p.ic().$implicit,n=p.ic().$implicit;return e.points[n]=t})("ngModelChange",function(t){return p.xc(o),p.ic(3).onPointCellChanged(t)}),p.Vb(),p.Vb()}if(2&t){var n=p.ic().$implicit,a=p.ic().$implicit;p.Eb(1),p.oc("ngModel",n.points[a])}}function Me(t,e){if(1&t&&(p.Wb(0,"td",37),p.Ec(1,Re,2,1,"span",36),p.Ec(2,Ue,2,1,"span",36),p.Vb()),2&t){var o=p.ic().$implicit;p.Eb(1),p.oc("ngIf","dimension"===o),p.Eb(1),p.oc("ngIf","dimension"!==o)}}function xe(t,e){1&t&&(p.Ub(0,32),p.Ec(1,Ge,3,2,"th",33),p.Ec(2,Me,3,2,"td",34),p.Tb()),2&t&&p.oc("matColumnDef",e.$implicit)}function Pe(t,e){1&t&&p.Rb(0,"tr",39)}function Ie(t,e){1&t&&p.Rb(0,"tr",40)}function Ae(t,e){1&t&&p.Fc(0,"DONE")}var je,Oe=function(){function e(){t(this,e),this.from=0,this.to=0,this.typeIsNumber=!0,this.cond=!1}return o(e,[{key:"toString",value:function(){return this.typeIsNumber?"[".concat(this.from," - ").concat(this.to,")"):this.cond.toString()}}]),e}(),He=function(){function e(){t(this,e),this.from=0,this.to=0}return o(e,[{key:"toString",value:function(){return"[".concat(this.from," - ").concat(this.to,")")}}]),e}(),Ne=function e(o){t(this,e),this.points={},this.isEdit=!1,this.dimInfo=o},$e=((je=function(){function e(o,n,a){t(this,e),this._formBuilder=o,this.uiUtilSrv=n,this.odataSrv=a,this.arRuleTypes=[],this.dimensions=[],this.contDays=[],this.displayedColumns=["dimension"],this.dataSource=[],this.pointCompleted=!1,this.createdGroupID=-1,this.arRuleTypes=Object(f.I)(),this.firstFormGroup=this._formBuilder.group({targetuserCtrl:["",c.u.required],validFromCtrl:[void 0,c.u.required],validToCtrl:[void 0,c.u.required],ruleTypeCtrl:[f.h.GoToBedTime,c.u.required],despCtrl:["",c.u.required]}),this.secondFormGroup=this._formBuilder.group({rawCtrl:["",c.u.required]}),this.thirdFormGroup=this._formBuilder.group({rawCtrl:["",c.u.required]})}return o(e,[{key:"arTargetUsers",get:function(){var t=this;return this.odataSrv.bufferedAwardUser.filter(function(e){return e.supervisor===t.odataSrv.currentUser})}},{key:"isExpertMode",get:function(){return this.odataSrv.expertMode}},{key:"ngOnInit",value:function(){var t,e,o,n,a=this;this.odataSrv.getAwardUsers().subscribe(),null===(t=this.firstFormGroup.get("validFromCtrl"))||void 0===t||t.setValue(m()()),null===(e=this.firstFormGroup.get("validToCtrl"))||void 0===e||e.setValue(m()().add(1,"month")),null===(o=this.secondFormGroup.get("rawCtrl"))||void 0===o||o.valueChanges.subscribe(function(t){a.onDimensionChange(t)}),null===(n=this.thirdFormGroup.get("rawCtrl"))||void 0===n||n.valueChanges.subscribe(function(t){a.onContDayChange(t)})}},{key:"selectedRuleType",get:function(){var t,e=null===(t=this.firstFormGroup.get("ruleTypeCtrl"))||void 0===t?void 0:t.value;return void 0!==e?e:f.h.GoToBedTime}},{key:"onInitialDimensions",value:function(){var t,e;switch(this.selectedRuleType){case f.h.HandWritingHabit:case f.h.CleanDeakHabit:case f.h.ErrorCollectionHabit:null===(t=this.secondFormGroup.get("rawCtrl"))||void 0===t||t.disable();break;default:null===(e=this.secondFormGroup.get("rawCtrl"))||void 0===e||e.disable()}}},{key:"onDimensionCompleted",value:function(){switch(this.selectedRuleType){case f.h.HandWritingHabit:case f.h.CleanDeakHabit:case f.h.ErrorCollectionHabit:var t=new Oe;t.typeIsNumber=!1,t.cond=!0,this.dimensions.push(t);var e=new Oe;e.typeIsNumber=!1,e.cond=!1,this.dimensions.push(e)}}},{key:"onDimensionChange",value:function(t){var e=this;switch(this.dimensions=[],this.selectedRuleType){case f.h.BodyExerciseCount:case f.h.HomeWorkCount:case f.h.HouseKeepingCount:case f.h.PoliteBehavior:if(t){var o=t.split(";").map(function(t){if(t){var e=+t;if(!isNaN(e)&&e>0)return Math.trunc(e)}return 0});(o=o.filter(function(t){return t>0})).sort();var n=0;o.forEach(function(t){if(0!==n){var o=new Oe;o.from=n,o.to=t,e.dimensions.push(o)}n=t});var a=new Oe;a.from=n,a.to=9999,this.dimensions.push(a)}break;case f.h.HandWritingHabit:case f.h.CleanDeakHabit:case f.h.ErrorCollectionHabit:break;case f.h.GoToBedTime:case f.h.SchoolWorkTime:default:if(t){var i=t.split(";").map(function(t){if(t){var e=+t;if(!isNaN(e)&&e<=23.99&&e>0)return e}return 0});(i=i.filter(function(t){return t>0})).sort();var c=0;i.forEach(function(t){var o=new Oe;o.from=c,o.to=t,e.dimensions.push(o),c=t});var r=new Oe;r.from=c,r.to=24,this.dimensions.push(r)}}}},{key:"onContDayChange",value:function(t){var e=this;if(this.contDays=[],t){var o=t.split(";").map(function(t){if(t){var e=+t;if(!isNaN(e)&&e>0)return Math.trunc(e)}return 0});(o=o.filter(function(t){return t>0})).sort();var n=0;o.forEach(function(t){if(0!==n){var o=new He;o.from=n,o.to=t,e.contDays.push(o)}n=t});var a=new He;a.from=n,a.to=9999,this.contDays.push(a)}}},{key:"onInitialRules",value:function(){var t,e=this;this.dataSource=[],this.displayedColumns=["dimension"];for(var o=[],n=0;n<this.contDays.length;n++)o.push("days"+n);(t=this.displayedColumns).push.apply(t,o),this.dimensions.forEach(function(t){var n=new Ne(t);o.forEach(function(t){n.points[t]=0}),e.dataSource.push(n)})}},{key:"onPointCellChanged",value:function(t){var e=0;this.dataSource.forEach(function(t){Object.keys(t.points).forEach(function(o){(isNaN(t.points[o])||0===t.points[o])&&e++})}),this.pointCompleted=0===e}},{key:"getColumnHeaderForDays",value:function(t){if(t&&t.startsWith("days")){var e=+t.replace("days","");return this.contDays[e].toString()}return""}},{key:"onSave",value:function(){var t,e,o,n,a=this,i=new f.g;switch(i.desp=null===(t=this.firstFormGroup.get("despCtrl"))||void 0===t?void 0:t.value,i.ruleType=this.selectedRuleType,i.targetUser=null===(e=this.firstFormGroup.get("targetuserCtrl"))||void 0===e?void 0:e.value,i.validFrom=null===(o=this.firstFormGroup.get("validFromCtrl"))||void 0===o?void 0:o.value,i.validTo=null===(n=this.firstFormGroup.get("validToCtrl"))||void 0===n?void 0:n.value,i.ruleType){case f.h.BodyExerciseCount:case f.h.HomeWorkCount:case f.h.HouseKeepingCount:case f.h.PoliteBehavior:this.dataSource.forEach(function(t){Object.keys(t.points).forEach(function(e){var o=new f.f;o.countOfFactLow=t.dimInfo.from,o.countOfFactHigh=t.dimInfo.to;var n=+e.replace("days","");o.daysFrom=a.contDays[n].from,a.contDays[n].to!==Number.POSITIVE_INFINITY&&(o.daysTo=a.contDays[n].to),o.point=t.points[e],i.rules.push(o)})});break;case f.h.HandWritingHabit:case f.h.CleanDeakHabit:case f.h.ErrorCollectionHabit:this.dataSource.forEach(function(t){Object.keys(t.points).forEach(function(e){var o=new f.f;o.doneOfFact=t.dimInfo.cond;var n=+e.replace("days","");o.daysFrom=a.contDays[n].from,o.daysTo=a.contDays[n].to,o.point=t.points[e],i.rules.push(o)})});break;case f.h.GoToBedTime:case f.h.SchoolWorkTime:default:this.dataSource.forEach(function(t){Object.keys(t.points).forEach(function(e){var o=new f.f;o.timeStart=t.dimInfo.from,o.timeEnd=t.dimInfo.to;var n=+e.replace("days","");o.daysFrom=a.contDays[n].from,o.daysTo=a.contDays[n].to,o.point=t.points[e],i.rules.push(o)})})}i.isValid()&&this.odataSrv.createAwardRuleGroup(i).subscribe({next:function(t){a.createdGroupID=t.id},error:function(t){a.uiUtilSrv.showSnackInfo(t)}})}},{key:"openGroup",value:function(){this.uiUtilSrv.navigateAwardRuleGroupDisplayPage(this.createdGroupID)}}]),e}()).\u0275fac=function(t){return new(t||je)(p.Qb(c.d),p.Qb(h.d),p.Qb(h.b))},je.\u0275cmp=p.Kb({type:je,selectors:[["app-award-rule-generation"]],decls:89,vars:31,consts:[[1,"toolbar-spacer"],["linear",""],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["appearance","fill",1,"control-full-width"],["required","","formControlName","targetuserCtrl"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill"],[3,"rangePicker"],["matStartDate","","formControlName","validFromCtrl","placeholder","Start date"],["matEndDate","","formControlName","validToCtrl","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],["required","","formControlName","ruleTypeCtrl"],["matInput","","required","","formControlName","despCtrl"],["mat-button","","color","primary","matStepperNext","",3,"click"],["matInput","","formControlName","rawCtrl"],["dense","",4,"ngFor","ngForOf"],["mat-button","","matStepperPrevious",""],[3,"completed"],["mat-raised-button",""],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-button","","color","primary","matStepperNext","",3,"disabled","click"],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"],[3,"value"],["dense",""],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],[4,"ngIf"],["mat-cell",""],["matInput","","type","number",3,"ngModel","ngModelChange"],["mat-header-row",""],["mat-row",""]],template:function(t,e){if(1&t){var o=p.Xb();p.Wb(0,"mat-toolbar"),p.Wb(1,"h3"),p.Fc(2,"AWARD RULE GENERATION"),p.Vb(),p.Rb(3,"div",0),p.Vb(),p.Wb(4,"mat-vertical-stepper",1,2),p.Wb(6,"mat-step",3),p.Wb(7,"form",4),p.Ec(8,Ce,1,0,"ng-template",5),p.Wb(9,"mat-form-field",6),p.Wb(10,"mat-label"),p.Fc(11),p.jc(12,"transloco"),p.Vb(),p.Wb(13,"mat-select",7),p.Ec(14,We,2,2,"mat-option",8),p.Vb(),p.Vb(),p.Wb(15,"mat-form-field",9),p.Wb(16,"mat-label"),p.Fc(17),p.jc(18,"transloco"),p.Vb(),p.Wb(19,"mat-date-range-input",10),p.Rb(20,"input",11),p.Rb(21,"input",12),p.Vb(),p.Rb(22,"mat-datepicker-toggle",13),p.Rb(23,"mat-date-range-picker",null,14),p.Vb(),p.Wb(25,"mat-form-field",6),p.Wb(26,"mat-label"),p.Fc(27),p.jc(28,"transloco"),p.Vb(),p.Wb(29,"mat-select",15),p.Ec(30,Ve,3,4,"mat-option",8),p.Vb(),p.Vb(),p.Wb(31,"mat-form-field",6),p.Wb(32,"mat-label"),p.Fc(33),p.jc(34,"transloco"),p.Vb(),p.Rb(35,"input",16),p.Vb(),p.Wb(36,"div"),p.Wb(37,"button",17),p.ec("click",function(){return e.onInitialDimensions()}),p.Fc(38,"NEXT"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(39,"mat-step",3),p.Wb(40,"form",4),p.Ec(41,ke,1,0,"ng-template",5),p.Wb(42,"mat-form-field"),p.Wb(43,"mat-label"),p.Fc(44,"Dimension"),p.Vb(),p.Rb(45,"input",18),p.Vb(),p.Ec(46,ye,3,1,"mat-list",19),p.Wb(47,"div"),p.Wb(48,"button",20),p.Fc(49,"BACK"),p.Vb(),p.Wb(50,"button",17),p.ec("click",function(){return e.onDimensionCompleted()}),p.Fc(51,"NEXT"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(52,"mat-step",3),p.Wb(53,"form",4),p.Ec(54,we,1,0,"ng-template",5),p.Wb(55,"mat-form-field"),p.Wb(56,"mat-label"),p.Fc(57,"Continued Days"),p.Vb(),p.Rb(58,"input",18),p.Vb(),p.Ec(59,De,3,1,"mat-list",19),p.Wb(60,"div"),p.Wb(61,"button",20),p.Fc(62,"BACK"),p.Vb(),p.Wb(63,"button",17),p.ec("click",function(){return e.onInitialRules()}),p.Fc(64,"NEXT"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(65,"mat-step",21),p.Ec(66,Fe,1,0,"ng-template",5),p.Wb(67,"mat-toolbar"),p.Wb(68,"button",22),p.Fc(69,"RESET RULES"),p.Vb(),p.Vb(),p.Wb(70,"table",23),p.Ec(71,xe,3,1,"ng-container",24),p.Ec(72,Pe,1,0,"tr",25),p.Ec(73,Ie,1,0,"tr",26),p.Vb(),p.Wb(74,"button",20),p.Fc(75,"BACK"),p.Vb(),p.Wb(76,"button",27),p.ec("click",function(){return e.onSave()}),p.Fc(77,"NEXT"),p.Vb(),p.Vb(),p.Wb(78,"mat-step"),p.Ec(79,Ae,1,0,"ng-template",5),p.Wb(80,"p"),p.Fc(81),p.Vb(),p.Wb(82,"p"),p.Fc(83,"You can either open the group for review or create another one."),p.Vb(),p.Wb(84,"div"),p.Wb(85,"button",28),p.ec("click",function(){return e.openGroup()}),p.Fc(86,"OPEN"),p.Vb(),p.Wb(87,"button",29),p.ec("click",function(){return p.xc(o),p.vc(5).reset()}),p.Fc(88,"CREATE ANOTHER ONE"),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){var n=p.vc(24);p.Eb(6),p.oc("stepControl",e.firstFormGroup),p.Eb(1),p.oc("formGroup",e.firstFormGroup),p.Eb(4),p.Gc(p.kc(12,23,"Award.TargetUser")),p.Eb(3),p.oc("ngForOf",e.arTargetUsers),p.Eb(3),p.Gc(p.kc(18,25,"Award.Validity")),p.Eb(2),p.oc("rangePicker",n),p.Eb(3),p.oc("for",n),p.Eb(5),p.Gc(p.kc(28,27,"Type")),p.Eb(3),p.oc("ngForOf",e.arRuleTypes),p.Eb(3),p.Gc(p.kc(34,29,"Common.Description")),p.Eb(6),p.oc("stepControl",e.secondFormGroup),p.Eb(1),p.oc("formGroup",e.secondFormGroup),p.Eb(6),p.oc("ngForOf",e.dimensions),p.Eb(6),p.oc("stepControl",e.thirdFormGroup),p.Eb(1),p.oc("formGroup",e.thirdFormGroup),p.Eb(6),p.oc("ngForOf",e.contDays),p.Eb(6),p.oc("completed",e.pointCompleted),p.Eb(5),p.oc("dataSource",e.dataSource),p.Eb(1),p.oc("ngForOf",e.displayedColumns),p.Eb(1),p.oc("matHeaderRowDef",e.displayedColumns),p.Eb(1),p.oc("matRowDefColumns",e.displayedColumns),p.Eb(3),p.oc("disabled",!e.pointCompleted),p.Eb(5),p.Hc("Group ",e.createdGroupID," is just create done.")}},directives:[g.a,ve.g,ve.b,c.v,c.o,c.h,ve.c,y.c,y.g,Wt.a,c.t,c.n,c.f,i.l,D.a,D.h,c.c,D.g,D.f,y.i,D.b,w.b,v.b,ve.e,ve.f,W.j,W.g,W.i,Vt.n,Ee.a,Ee.b,W.c,W.e,W.b,W.d,i.m,W.a,c.r,c.q,W.f,W.h],pipes:[r.d],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]{margin-left:8px}.mat-table[_ngcontent-%COMP%]{width:90%;min-height:500px}"]}),je),Be=a("jtHE"),_e=a("Wp6s"),qe=a("7EHt");function Qe(t,e){if(1&t&&(p.Wb(0,"mat-option",28),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.oc("value",o.targetUser),p.Eb(1),p.Gc(o.targetUser)}}function Le(t,e){if(1&t&&(p.Wb(0,"mat-option",28),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t){var o=e.$implicit;p.oc("value",o.value),p.Eb(1),p.Gc(p.kc(2,2,o.i18nterm))}}function Ke(t,e){1&t&&(p.Wb(0,"th",29),p.Fc(1,"#"),p.Vb())}function ze(t,e){if(1&t&&(p.Wb(0,"td",30),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.id)}}function Xe(t,e){1&t&&(p.Wb(0,"th",29),p.Fc(1,"COUNT"),p.Vb())}function Ye(t,e){if(1&t&&(p.Wb(0,"td",30),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.countString)}}function Je(t,e){1&t&&(p.Wb(0,"th",29),p.Fc(1,"DONE"),p.Vb())}function Ze(t,e){if(1&t&&(p.Wb(0,"td",30),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.doneString)}}function to(t,e){1&t&&(p.Wb(0,"th",29),p.Fc(1,"TIME"),p.Vb())}function eo(t,e){if(1&t&&(p.Wb(0,"td",30),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.timeString)}}function oo(t,e){1&t&&(p.Wb(0,"th",29),p.Fc(1,"DAYS"),p.Vb())}function no(t,e){if(1&t&&(p.Wb(0,"td",30),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.dayString)}}function ao(t,e){1&t&&(p.Wb(0,"th",29),p.Fc(1,"POINT"),p.Vb())}function io(t,e){if(1&t&&(p.Wb(0,"td",30),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.point)}}function co(t,e){1&t&&p.Rb(0,"tr",31)}function ro(t,e){1&t&&p.Rb(0,"tr",32)}var lo,bo,uo,so=[{path:"",component:nt},{path:"rules",component:Et},{path:"rule-group-display/:id",component:(lo=function(){function e(o,n,a,i){t(this,e),this.activateRoute=o,this.uiUtilSrv=n,this.odataSrv=a,this.formBuilder=i,this.routerID=-1,this.arRuleTypes=[],this.dataSource=[],this.displayedColumns=[],this.arRuleTypes=Object(f.I)(),this.headerFormGroup=this.formBuilder.group({targetuserCtrl:["",c.u.required],validFromCtrl:[void 0,c.u.required],validToCtrl:[void 0,c.u.required],ruleTypeCtrl:[f.h.GoToBedTime,c.u.required],despCtrl:["",c.u.required]})}return o(e,[{key:"arTargetUsers",get:function(){var t=this;return this.odataSrv.bufferedAwardUser.filter(function(e){return e.supervisor===t.odataSrv.currentUser})}},{key:"isExpertMode",get:function(){return this.odataSrv.expertMode}},{key:"ngOnInit",value:function(){var t=this;this.destroyed$=new Be.a(1),this.odataSrv.getAwardUsers().subscribe(),this.activateRoute.url.subscribe({next:function(e){e instanceof Array&&e.length>0&&"rule-group-display"===e[0].path&&(t.routerID=+e[1].path),-1!==t.routerID&&t.odataSrv.readAwardRuleGroup(t.routerID).subscribe({next:function(e){var o,n,a,i,c;switch(null===(o=t.headerFormGroup.get("targetuserCtrl"))||void 0===o||o.setValue(e.targetUser),null===(n=t.headerFormGroup.get("despCtrl"))||void 0===n||n.setValue(e.desp),null===(a=t.headerFormGroup.get("validFromCtrl"))||void 0===a||a.setValue(e.validFrom),null===(i=t.headerFormGroup.get("validToCtrl"))||void 0===i||i.setValue(e.validTo),null===(c=t.headerFormGroup.get("ruleTypeCtrl"))||void 0===c||c.setValue(e.ruleType),t.headerFormGroup.disable(),e.ruleType){case f.h.BodyExerciseCount:case f.h.HomeWorkCount:case f.h.HouseKeepingCount:case f.h.PoliteBehavior:t.displayedColumns=["id","count","days","point"];break;case f.h.HandWritingHabit:case f.h.CleanDeakHabit:case f.h.ErrorCollectionHabit:t.displayedColumns=["id","done","days","point"];break;case f.h.GoToBedTime:case f.h.SchoolWorkTime:default:t.displayedColumns=["id","time","days","point"]}t.dataSource=e.rules.slice()},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})}},{key:"ngOnDestroy",value:function(){this.destroyed$&&(this.destroyed$.complete(),this.destroyed$=void 0)}},{key:"onReturnToList",value:function(){this.uiUtilSrv.navigateAwardRuleGroupListPage()}},{key:"onCreateNewOne",value:function(){this.uiUtilSrv.navigateAwardRuleGenerationPage()}}]),e}(),lo.\u0275fac=function(t){return new(t||lo)(p.Qb(u.a),p.Qb(h.d),p.Qb(h.b),p.Qb(c.d))},lo.\u0275cmp=p.Kb({type:lo,selectors:[["app-award-rule-display"]],decls:78,vars:32,consts:[["multi","",1,"example-headers-align"],["expanded",""],[3,"formGroup"],["appearance","fill",1,"control-full-width"],["required","","formControlName","targetuserCtrl"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill"],[3,"rangePicker"],["matStartDate","","formControlName","validFromCtrl","placeholder","Start date"],["matEndDate","","formControlName","validToCtrl","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],["required","","formControlName","ruleTypeCtrl"],["matInput","","required","","formControlName","despCtrl"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","count"],["matColumnDef","done"],["matColumnDef","time"],["matColumnDef","days"],["matColumnDef","point"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-button","",3,"click"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){if(1&t&&(p.Wb(0,"mat-card"),p.Wb(1,"mat-card-header"),p.Wb(2,"mat-card-title"),p.Fc(3,"AWARD RULE DISPLAY"),p.Vb(),p.Vb(),p.Wb(4,"mat-card-content"),p.Wb(5,"mat-accordion",0),p.Wb(6,"mat-expansion-panel",1),p.Wb(7,"mat-expansion-panel-header"),p.Wb(8,"mat-panel-title"),p.Fc(9),p.jc(10,"transloco"),p.Vb(),p.Wb(11,"mat-panel-description"),p.Fc(12),p.jc(13,"transloco"),p.Wb(14,"mat-icon"),p.Fc(15,"public"),p.Vb(),p.Vb(),p.Vb(),p.Wb(16,"form",2),p.Wb(17,"mat-form-field",3),p.Wb(18,"mat-label"),p.Fc(19),p.jc(20,"transloco"),p.Vb(),p.Wb(21,"mat-select",4),p.Ec(22,Qe,2,2,"mat-option",5),p.Vb(),p.Vb(),p.Wb(23,"mat-form-field",6),p.Wb(24,"mat-label"),p.Fc(25),p.jc(26,"transloco"),p.Vb(),p.Wb(27,"mat-date-range-input",7),p.Rb(28,"input",8),p.Rb(29,"input",9),p.Vb(),p.Rb(30,"mat-datepicker-toggle",10),p.Rb(31,"mat-date-range-picker",null,11),p.Vb(),p.Wb(33,"mat-form-field",3),p.Wb(34,"mat-label"),p.Fc(35),p.jc(36,"transloco"),p.Vb(),p.Wb(37,"mat-select",12),p.Ec(38,Le,3,4,"mat-option",5),p.Vb(),p.Vb(),p.Wb(39,"mat-form-field",3),p.Wb(40,"mat-label"),p.Fc(41),p.jc(42,"transloco"),p.Vb(),p.Rb(43,"input",13),p.Vb(),p.Vb(),p.Vb(),p.Wb(44,"mat-expansion-panel"),p.Wb(45,"mat-expansion-panel-header"),p.Wb(46,"mat-panel-title"),p.Fc(47,"RULES"),p.Vb(),p.Vb(),p.Wb(48,"div",14),p.Wb(49,"div",15),p.Wb(50,"table",16),p.Ub(51,17),p.Ec(52,Ke,2,0,"th",18),p.Ec(53,ze,2,1,"td",19),p.Tb(),p.Ub(54,20),p.Ec(55,Xe,2,0,"th",18),p.Ec(56,Ye,2,1,"td",19),p.Tb(),p.Ub(57,21),p.Ec(58,Je,2,0,"th",18),p.Ec(59,Ze,2,1,"td",19),p.Tb(),p.Ub(60,22),p.Ec(61,to,2,0,"th",18),p.Ec(62,eo,2,1,"td",19),p.Tb(),p.Ub(63,23),p.Ec(64,oo,2,0,"th",18),p.Ec(65,no,2,1,"td",19),p.Tb(),p.Ub(66,24),p.Ec(67,ao,2,0,"th",18),p.Ec(68,io,2,1,"td",19),p.Tb(),p.Ec(69,co,1,0,"tr",25),p.Ec(70,ro,1,0,"tr",26),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(71,"mat-card-actions"),p.Wb(72,"button",27),p.ec("click",function(){return e.onReturnToList()}),p.Fc(73),p.jc(74,"transloco"),p.Vb(),p.Wb(75,"button",27),p.ec("click",function(){return e.onCreateNewOne()}),p.Fc(76),p.jc(77,"transloco"),p.Vb(),p.Vb(),p.Vb()),2&t){var o=p.vc(32);p.Eb(9),p.Gc(p.kc(10,16,"Header")),p.Eb(3),p.Gc(p.kc(13,18,"HeaderInfo")),p.Eb(4),p.oc("formGroup",e.headerFormGroup),p.Eb(3),p.Gc(p.kc(20,20,"Award.TargetUser")),p.Eb(3),p.oc("ngForOf",e.arTargetUsers),p.Eb(3),p.Gc(p.kc(26,22,"Award.Validity")),p.Eb(2),p.oc("rangePicker",o),p.Eb(3),p.oc("for",o),p.Eb(5),p.Gc(p.kc(36,24,"Type")),p.Eb(3),p.oc("ngForOf",e.arRuleTypes),p.Eb(3),p.Gc(p.kc(42,26,"Common.Description")),p.Eb(9),p.oc("dataSource",e.dataSource),p.Eb(19),p.oc("matHeaderRowDef",e.displayedColumns),p.Eb(1),p.oc("matRowDefColumns",e.displayedColumns),p.Eb(3),p.Gc(p.kc(74,28,"Common.ReturnToList")),p.Eb(3),p.Gc(p.kc(77,30,"Common.CreateAnotherOne"))}},directives:[_e.a,_e.d,_e.g,_e.c,qe.a,qe.c,qe.e,qe.f,qe.d,C.a,c.v,c.o,c.h,y.c,y.g,Wt.a,c.t,c.n,c.f,i.l,D.a,D.h,c.c,D.g,D.f,y.i,D.b,w.b,W.j,W.c,W.e,W.b,W.g,W.i,_e.b,v.b,Vt.n,W.d,W.a,W.f,W.h],pipes:[r.d],styles:[".example-headers-align[_ngcontent-%COMP%]{margin:8px}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%], .example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex-basis:0}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]{margin-left:8px}.example-headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}table[_ngcontent-%COMP%]{width:100%}"]}),lo)},{path:"rule-generation",component:$e},{path:"dailytrace",component:he}],mo=((uo=function e(){t(this,e)}).\u0275fac=function(t){return new(t||uo)},uo.\u0275mod=p.Ob({type:uo}),uo.\u0275inj=p.Nb({imports:[[u.e.forChild(so)],u.e]}),uo),fo=((bo=function e(){t(this,e)}).\u0275fac=function(t){return new(t||bo)},bo.\u0275mod=p.Ob({type:bo}),bo.\u0275inj=p.Nb({imports:[[i.c,c.i,c.s,l.a,r.c,b.a,mo]]}),bo)}}])}();