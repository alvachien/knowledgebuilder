(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{caho:function(e,t,c){"use strict";c.r(t),c.d(t,"PreviewModule",function(){return T});var i=c("ofXK"),o=c("3Pt+"),s=c("QPBi"),n=c("jIBr"),r=c("tyNb"),a=c("VHTt"),b=c("2ChS"),d=c("fXoL"),l=c("o0su"),h=c("MutI"),u=c("FKr1");let m=(()=>{class e{constructor(e,t,c){this._bottomSheetRef=e,this.odataSrv=t,this.data=c}createNewScore(e,t){t.preventDefault();const c=new a.j;c.RefID=this.data.excitemid,c.Score=e,c.User=this.odataSrv.currentUser,this.odataSrv.createExerciseItemUserScore(c).subscribe({next:e=>{this.data.resultFlag=!0,this.data.newScore=e,this._bottomSheetRef.dismiss(this.data)},error:e=>{this.data.resultFlag=!1,this.data.newScore=null,this.data.errorInfo=e,this._bottomSheetRef.dismiss(this.data)}})}}return e.\u0275fac=function(t){return new(t||e)(d.Qb(b.d),d.Qb(l.b),d.Qb(b.a))},e.\u0275cmp=d.Kb({type:e,selectors:[["app-preview-newscore-sheet"]],decls:19,vars:9,consts:[["mat-list-item","",3,"click"],["mat-line",""]],template:function(e,t){1&e&&(d.Wb(0,"mat-nav-list"),d.Wb(1,"a",0),d.ec("click",function(e){return t.createNewScore(0,e)}),d.Wb(2,"span",1),d.Fc(3),d.jc(4,"transloco"),d.Vb(),d.Wb(5,"span",1),d.Fc(6,"Add a new score of 0"),d.Vb(),d.Vb(),d.Wb(7,"a",0),d.ec("click",function(e){return t.createNewScore(60,e)}),d.Wb(8,"span",1),d.Fc(9),d.jc(10,"transloco"),d.Vb(),d.Wb(11,"span",1),d.Fc(12,"Add a new score of 60"),d.Vb(),d.Vb(),d.Wb(13,"a",0),d.ec("click",function(e){return t.createNewScore(100,e)}),d.Wb(14,"span",1),d.Fc(15),d.jc(16,"transloco"),d.Vb(),d.Wb(17,"span",1),d.Fc(18,"Add a new score of 100"),d.Vb(),d.Vb(),d.Vb()),2&e&&(d.Eb(3),d.Hc("",d.kc(4,3,"NewPractice"),": 0"),d.Eb(6),d.Hc("",d.kc(10,5,"NewPractice"),": 60"),d.Eb(6),d.Hc("",d.kc(16,7,"NewPractice"),": 100"))},directives:[h.e,h.b,u.k],pipes:[s.d],encapsulation:2}),e})();var p=c("0MNC"),f=c("dNgK"),v=c("bTqV"),w=c("f0Cb"),g=c("lR5k"),x=c("bSwM"),E=c("Qu3c"),I=c("5RNC"),S=c("kmnG");function j(e,t){if(1&e&&(d.Wb(0,"div",3),d.Wb(1,"h3"),d.Fc(2),d.Vb(),d.Rb(3,"mat-divider"),d.Wb(4,"h3"),d.Fc(5),d.jc(6,"transloco"),d.Vb(),d.Rb(7,"mat-divider"),d.Wb(8,"div",4),d.Rb(9,"markdown",5),d.Vb(),d.Vb()),2&e){const e=d.ic();d.Eb(2),d.Hc("ID: ",e.selectedKnowledge.ID,""),d.Eb(3),d.Ic("",d.kc(6,5,"Title"),": ",e.selectedKnowledge.Title,""),d.Eb(4),d.oc("data",e.selectedKnowledge.Content)("katexOptions",e.mathOptions)}}function k(e,t){1&e&&(d.Wb(0,"mat-label",15),d.Fc(1),d.jc(2,"transloco"),d.Vb()),2&e&&(d.Eb(1),d.Gc(d.kc(2,1,"FontSize")))}function P(e,t){if(1&e&&(d.Wb(0,"mat-label"),d.Wb(1,"span"),d.Fc(2),d.Vb(),d.Fc(3),d.jc(4,"date"),d.Vb()),2&e){const e=d.ic(2);d.Eb(1),d.Gb(e.isSuccessScore?"success-score":"fail-score"),d.Eb(1),d.Gc(e.selectedExerciseUserScore.Score),d.Eb(1),d.Hc(" (",d.lc(4,4,e.selectedExerciseUserScore.TakenDate,"yyyy-M-d"),")")}}function O(e,t){if(1&e&&(d.Wb(0,"h3"),d.Fc(1),d.Vb()),2&e){const e=d.ic(2);d.Eb(1),d.Hc("ID: ",e.selectedExercise.ID,"")}}function V(e,t){if(1&e&&(d.Wb(0,"h3"),d.Fc(1),d.jc(2,"transloco"),d.jc(3,"transloco"),d.Vb()),2&e){const e=d.ic(2);d.Eb(1),d.Ic("",d.kc(2,2,"Type"),": ",d.kc(3,4,e.getExerciseItemTypeName(e.selectedExercise.ItemType)),"")}}function W(e,t){if(1&e&&(d.Wb(0,"h3"),d.Fc(1),d.jc(2,"transloco"),d.Vb()),2&e){const e=d.ic(2);d.Eb(1),d.Ic("",d.kc(2,2,"Tags"),": ",e.selectedExercise.Tags.toString(),"")}}function y(e,t){1&e&&d.Rb(0,"mat-divider")}function M(e,t){if(1&e&&(d.Wb(0,"div",13),d.Rb(1,"mat-divider"),d.Wb(2,"h3"),d.Fc(3),d.jc(4,"transloco"),d.Vb(),d.Rb(5,"markdown",5),d.Vb()),2&e){const e=d.ic(2);d.Bc("font-size",e.fontSize,"px"),d.Eb(3),d.Gc(d.kc(4,5,"Answer")),d.Eb(2),d.oc("data",e.selectedExercise.Answer)("katexOptions",e.mathOptions)}}function F(e,t){if(1&e){const e=d.Xb();d.Wb(0,"div",3),d.Wb(1,"div",6),d.Wb(2,"mat-checkbox",7),d.ec("ngModelChange",function(t){return d.xc(e),d.ic().focusMode=t}),d.jc(3,"transloco"),d.Fc(4),d.jc(5,"transloco"),d.Vb(),d.Wb(6,"mat-checkbox",8),d.ec("ngModelChange",function(t){return d.xc(e),d.ic().hideAnswer=t}),d.jc(7,"transloco"),d.Fc(8),d.jc(9,"transloco"),d.Vb(),d.Ec(10,k,3,3,"mat-label",9),d.Wb(11,"mat-slider",10),d.ec("ngModelChange",function(t){return d.xc(e),d.ic().fontSize=t}),d.jc(12,"transloco"),d.Vb(),d.Vb(),d.Wb(13,"div",6),d.Ec(14,P,5,7,"mat-label",11),d.Wb(15,"button",12),d.ec("click",function(){return d.xc(e),d.ic().onNewScore()}),d.Fc(16),d.jc(17,"transloco"),d.Vb(),d.Vb(),d.Rb(18,"mat-divider"),d.Ec(19,O,2,1,"h3",11),d.Ec(20,V,4,6,"h3",11),d.Ec(21,W,3,4,"h3",11),d.Ec(22,y,1,0,"mat-divider",11),d.Wb(23,"div",13),d.Wb(24,"h3"),d.Fc(25),d.jc(26,"transloco"),d.Vb(),d.Rb(27,"markdown",5),d.Vb(),d.Ec(28,M,6,7,"div",14),d.Vb()}if(2&e){const e=d.ic();d.Eb(2),d.pc("matTooltip",d.kc(3,21,"FocusMode")),d.oc("ngModel",e.focusMode),d.Eb(2),d.Gc(d.kc(5,23,"FocusMode")),d.Eb(2),d.pc("matTooltip",d.kc(7,25,"QuizMode")),d.oc("ngModel",e.hideAnswer),d.Eb(2),d.Gc(d.kc(9,27,"QuizMode")),d.Eb(2),d.oc("ngIf",!e.mobileQuery.matches),d.Eb(1),d.pc("matTooltip",d.kc(12,29,"FontSize")),d.oc("ngModel",e.fontSize),d.Eb(3),d.oc("ngIf",e.selectedExerciseUserScore),d.Eb(2),d.Gc(d.kc(17,31,"NewPractice")),d.Eb(3),d.oc("ngIf",!e.focusMode),d.Eb(1),d.oc("ngIf",!e.focusMode),d.Eb(1),d.oc("ngIf",!e.focusMode),d.Eb(1),d.oc("ngIf",!e.focusMode),d.Eb(1),d.Bc("font-size",e.fontSize,"px"),d.Eb(2),d.Gc(d.kc(26,33,"Content")),d.Eb(2),d.oc("data",e.selectedExercise.Content)("katexOptions",e.mathOptions),d.Eb(1),d.oc("ngIf",!e.hideAnswer)}}const C=[{path:"",component:(()=>{class e{constructor(e,t,c,i,o){this.odataSvc=e,this._bottomSheet=i,this._snackbar=o,this.selectedExerciseUserScore=null,this.listPreviewObjects=[],this.mathOptions={displayMode:!0,throwOnError:!1,errorColor:"#cc0000"},this.focusMode=!1,this.hideAnswer=!1,this.fontSize=20,this.mobileQuery=c.matchMedia("(max-width: 600px)"),this._mobileQueryListener=()=>t.detectChanges(),this.previewIdx=-1}getExerciseItemTypeName(e){return Object(a.E)(e)}get isSuccessScore(){return null!==this.selectedExerciseUserScore&&this.selectedExerciseUserScore.Score>=60}ngOnInit(){this.mobileQuery.addEventListener("change",this._mobileQueryListener),this.listPreviewObjects=this.odataSvc.previewObjList.slice(),this.odataSvc.previewObjList=[],this.listPreviewObjects.length>0&&(this.previewIdx=-1,this.onNextPreviewItem())}ngOnDestroy(){this.mobileQuery.removeEventListener("change",this._mobileQueryListener)}onPreviousPreviewItem(){this.previewIdx>0&&(this.previewIdx--,this.selectedObj=this.listPreviewObjects[this.previewIdx],this.fetchPreviewItem())}onNextPreviewItem(){this.previewIdx<this.listPreviewObjects.length&&(this.previewIdx++,this.selectedObj=this.listPreviewObjects[this.previewIdx],this.fetchPreviewItem())}get isNextPreviewButtonEnabled(){return this.previewIdx<this.listPreviewObjects.length-1}get isPreviousButtonEnabled(){return this.previewIdx>0}fetchPreviewItem(){var e,t;this.previewIdx>-1&&this.previewIdx<this.listPreviewObjects.length&&((null===(e=this.selectedObj)||void 0===e?void 0:e.refType)===a.z.KnowledgeItem?this.odataSvc.readKnowledgeItem(this.listPreviewObjects[this.previewIdx].refId).subscribe({next:e=>{this.selectedKnowledge=e},error:e=>{console.error(e)}}):(null===(t=this.selectedObj)||void 0===t?void 0:t.refType)===a.z.ExerciseItem&&(this.odataSvc.readExerciseItem(this.listPreviewObjects[this.previewIdx].refId).subscribe({next:e=>{this.selectedExercise=e},error:e=>{console.error(e)}}),this.odataSvc.getLastestExerciseItemUserScore(this.listPreviewObjects[this.previewIdx].refId).subscribe({next:e=>{this.selectedExerciseUserScore=e},error:e=>{console.error(e)}})))}onNewScore(){var e;this._bottomSheet.open(m,{data:{excitemid:null===(e=this.selectedExercise)||void 0===e?void 0:e.ID}}).afterDismissed().subscribe(e=>{e.resultFlag?e.newScore&&(this.selectedExerciseUserScore=e.newScore):this._snackbar.open(e.errorInfo,void 0,{duration:1500})})}}return e.\u0275fac=function(t){return new(t||e)(d.Qb(l.b),d.Qb(d.h),d.Qb(p.c),d.Qb(b.b),d.Qb(f.a))},e.\u0275cmp=d.Kb({type:e,selectors:[["app-preview"]],decls:22,vars:22,consts:[[1,"button-row"],["mat-raised-button","",3,"disabled","click"],["class","mat-typography","style","margin: 8px;",4,"ngIf"],[1,"mat-typography",2,"margin","8px"],[1,"control-full-width",2,"margin-top","16px","font-size","large"],["katex","",3,"data","katexOptions"],[1,"button-row",2,"margin","8px"],["color","primary","name","focusmode",2,"margin-left","4px",3,"ngModel","matTooltip","ngModelChange"],["color","primary","name","quizmode",2,"margin-left","4px",3,"ngModel","matTooltip","ngModelChange"],["style","margin-left: 4px;",4,"ngIf"],["thumbLabel","","step","2","min","10","max","40",3,"ngModel","matTooltip","ngModelChange"],[4,"ngIf"],["mat-raised-button","",3,"click"],[1,"control-full-width",2,"margin-top","16px"],["class","control-full-width","style","margin-top: 16px;",3,"font-size",4,"ngIf"],[2,"margin-left","4px"]],template:function(e,t){1&e&&(d.Wb(0,"div",0),d.Wb(1,"div"),d.Fc(2),d.Vb(),d.Wb(3,"button",1),d.ec("click",function(){return t.onPreviousPreviewItem()}),d.Fc(4),d.jc(5,"transloco"),d.Vb(),d.Wb(6,"button",1),d.ec("click",function(){return t.onNextPreviewItem()}),d.Fc(7),d.jc(8,"transloco"),d.Vb(),d.Vb(),d.Rb(9,"mat-divider"),d.Ec(10,j,10,7,"div",2),d.Ec(11,F,29,35,"div",2),d.Rb(12,"mat-divider"),d.Wb(13,"div",0),d.Wb(14,"div"),d.Fc(15),d.Vb(),d.Wb(16,"button",1),d.ec("click",function(){return t.onPreviousPreviewItem()}),d.Fc(17),d.jc(18,"transloco"),d.Vb(),d.Wb(19,"button",1),d.ec("click",function(){return t.onNextPreviewItem()}),d.Fc(20),d.jc(21,"transloco"),d.Vb(),d.Vb()),2&e&&(d.Eb(2),d.Ic(" ",t.previewIdx+1," / ",t.listPreviewObjects.length,""),d.Eb(1),d.oc("disabled",!t.isPreviousButtonEnabled),d.Eb(1),d.Gc(d.kc(5,14,"Common.Previous")),d.Eb(2),d.oc("disabled",!t.isNextPreviewButtonEnabled),d.Eb(1),d.Gc(d.kc(8,16,"Common.Next")),d.Eb(3),d.oc("ngIf",t.selectedObj&&1===t.selectedObj.refType&&t.selectedKnowledge),d.Eb(1),d.oc("ngIf",t.selectedObj&&2===t.selectedObj.refType&&t.selectedExercise),d.Eb(4),d.Ic(" ",t.previewIdx+1," / ",t.listPreviewObjects.length,""),d.Eb(1),d.oc("disabled",!t.isPreviousButtonEnabled),d.Eb(1),d.Gc(d.kc(18,18,"Common.Previous")),d.Eb(2),d.oc("disabled",!t.isNextPreviewButtonEnabled),d.Eb(1),d.Gc(d.kc(21,20,"Common.Next")))},directives:[v.b,w.a,i.m,g.a,x.a,o.m,o.p,E.a,I.a,S.g],pipes:[s.d,i.e],styles:[".button-row[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:16px}.input-fontsize[_ngcontent-%COMP%]{margin-left:24px;width:100px}mat-slide-toggle[_ngcontent-%COMP%]{width:80px}mat-slider[_ngcontent-%COMP%]{margin-left:8px;width:80px}.success-score[_ngcontent-%COMP%]{color:green;font-size:16px}.fail-score[_ngcontent-%COMP%]{color:red;font-size:16px}"]}),e})()}];let N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.Ob({type:e}),e.\u0275inj=d.Nb({imports:[[r.e.forChild(C)],r.e]}),e})(),T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.Ob({type:e}),e.\u0275inj=d.Nb({imports:[[i.c,o.h,o.r,s.c,n.a,g.b,N]]}),e})()}}]);