(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"U+IK":function(t,e,o){"use strict";o.r(e),o.d(e,"KnowledgeItemsModule",function(){return St});var i=o("ofXK"),a=o("3Pt+"),n=o("0LvA"),c=o("lR5k"),r=o("QPBi"),l=o("jIBr"),s=o("dcRk"),b=o("tyNb"),d=o("fXoL"),m=o("M9IT"),u=o("Dh3D"),p=o("VRyK"),h=o("LRne"),g=o("JX91"),f=o("eIep"),v=o("lJxs"),C=o("JIr8"),E=o("VHTt"),V=o("o0su"),w=o("/t3+"),W=o("bTqV"),F=o("Qu3c"),x=o("NFeN"),y=o("+0xr");function k(t,e){1&t&&(d.Wb(0,"th",17),d.Fc(1,"#"),d.Vb())}function I(t,e){if(1&t){const t=d.Xb();d.Wb(0,"td",18),d.Wb(1,"div"),d.Fc(2),d.Wb(3,"button",19),d.jc(4,"transloco"),d.Wb(5,"mat-icon"),d.Fc(6,"launch"),d.Vb(),d.Vb(),d.Wb(7,"button",20),d.jc(8,"transloco"),d.Wb(9,"mat-icon"),d.Fc(10,"edit"),d.Vb(),d.Vb(),d.Wb(11,"button",21),d.ec("click",function(){d.xc(t);const o=e.$implicit;return d.ic().onDeleteItem(o.ID)}),d.jc(12,"transloco"),d.Wb(13,"mat-icon"),d.Fc(14,"remove_circle"),d.Vb(),d.Vb(),d.Vb(),d.Vb()}if(2&t){const t=e.$implicit,o=d.ic();d.Eb(2),d.Hc(" ",t.ID," "),d.Eb(1),d.qc("routerLink","display/",t.ID,""),d.pc("matTooltip",d.kc(4,9,"Common.Display")),d.oc("disabled",!o.isExpertMode),d.Eb(4),d.qc("routerLink","edit/",t.ID,""),d.pc("matTooltip",d.kc(8,11,"Common.Change")),d.oc("disabled",!o.isExpertMode),d.Eb(4),d.pc("matTooltip",d.kc(12,13,"Common.Delete")),d.oc("disabled",!o.isExpertMode)}}function M(t,e){1&t&&(d.Wb(0,"th",17),d.Fc(1),d.jc(2,"transloco"),d.Vb()),2&t&&(d.Eb(1),d.Gc(d.kc(2,1,"Category")))}function j(t,e){if(1&t&&(d.Wb(0,"td",18),d.Fc(1),d.jc(2,"transloco"),d.Vb()),2&t){const t=e.$implicit,o=d.ic();d.Eb(1),d.Gc(d.kc(2,1,o.getKnowledgeItemCategoryName(t.ItemCategory)))}}function O(t,e){1&t&&(d.Wb(0,"th",17),d.Fc(1),d.jc(2,"transloco"),d.Vb()),2&t&&(d.Eb(1),d.Gc(d.kc(2,1,"Title")))}function S(t,e){if(1&t&&(d.Wb(0,"td",18),d.Fc(1),d.Vb()),2&t){const t=e.$implicit;d.Eb(1),d.Gc(t.Title)}}function D(t,e){1&t&&(d.Wb(0,"th",22),d.Fc(1),d.jc(2,"transloco"),d.Vb()),2&t&&(d.Eb(1),d.Gc(d.kc(2,1,"CreatedAt")))}function G(t,e){if(1&t&&(d.Wb(0,"td",18),d.Fc(1),d.jc(2,"date"),d.Vb()),2&t){const t=e.$implicit;d.Eb(1),d.Gc(d.lc(2,1,t.CreatedAt,"yyyy-M-d HH:mm:ss"))}}function T(t,e){1&t&&d.Rb(0,"tr",23)}function R(t,e){1&t&&d.Rb(0,"tr",24)}let P=(()=>{class t{constructor(t,e){this.odataService=t,this.uiUtilSrv=e,this.displayedColumns=["id","category","title","createdat"],this.dataSource=[],this.resultsLength=0,this.isLoadingResults=!0,this.refreshEvent=new d.o}getKnowledgeItemCategoryName(t){return Object(E.L)(t)}get isExpertMode(){return this.odataService.isLoggedin}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),Object(p.a)(this.sort.sortChange,this.paginator.page,this.refreshEvent).pipe(Object(g.a)({}),Object(f.a)(()=>{this.isLoadingResults=!0;const t=this.paginator.pageSize;return this.odataService.getKnowledgeItems(t,t*this.paginator.pageIndex,this.sort.active,this.sort.direction)}),Object(v.a)(t=>(this.isLoadingResults=!1,this.resultsLength=t.totalCount,t.items)),Object(C.a)(()=>(this.isLoadingResults=!1,Object(h.a)([])))).subscribe(t=>this.dataSource=t)}onGoToPreview(){const t=[];this.dataSource.forEach(e=>{t.push({refType:E.D.KnowledgeItem,refId:e.ID})}),this.uiUtilSrv.navigatePreviewPage(t)}onGoToSearch(){this.uiUtilSrv.navigateKnowledgeItemSearchPage()}onDeleteItem(t){this.odataService.deleteExerciseItem(t).subscribe({next:t=>{this.onRefreshList()},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})}onRefreshList(){this.refreshEvent.emit()}resetPaging(){this.paginator.pageIndex=0}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(V.d),d.Qb(V.f))},t.\u0275cmp=d.Kb({type:t,selectors:[["app-knowledge-items"]],viewQuery:function(t,e){if(1&t&&(d.Kc(m.a,1),d.Kc(u.a,1)),2&t){let t;d.uc(t=d.fc())&&(e.paginator=t.first),d.uc(t=d.fc())&&(e.sort=t.first)}},decls:40,vars:21,consts:[[1,"toolbar-spacer"],["mat-icon-button","","color","primary","routerLink","create",3,"disabled","matTooltip"],["mat-icon-button","","color","accent","matTooltip","'Common.Search' | transloco}}",3,"disabled","click"],["mat-icon-button","","color","accent",3,"disabled","matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"example-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","title"],["matColumnDef","createdat"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"disabled","routerLink","matTooltip"],["mat-icon-button","","color","accent",3,"disabled","routerLink","matTooltip"],["mat-icon-button","","color","warn",3,"disabled","matTooltip","click"],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(d.Wb(0,"mat-toolbar-row"),d.Wb(1,"span"),d.Wb(2,"h1"),d.Fc(3),d.jc(4,"transloco"),d.Vb(),d.Vb(),d.Rb(5,"span",0),d.Wb(6,"section"),d.Wb(7,"button",1),d.jc(8,"transloco"),d.Wb(9,"mat-icon"),d.Fc(10,"add_circle"),d.Vb(),d.Vb(),d.Wb(11,"button",2),d.ec("click",function(){return e.onGoToSearch()}),d.Wb(12,"mat-icon"),d.Fc(13,"search"),d.Vb(),d.Vb(),d.Wb(14,"button",3),d.ec("click",function(){return e.onGoToPreview()}),d.jc(15,"transloco"),d.Wb(16,"mat-icon"),d.Fc(17,"slideshow"),d.Vb(),d.Vb(),d.Wb(18,"button",3),d.ec("click",function(){return e.onRefreshList()}),d.jc(19,"transloco"),d.Wb(20,"mat-icon"),d.Fc(21,"refresh"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Wb(22,"div",4),d.Wb(23,"div",5),d.Wb(24,"table",6),d.ec("matSortChange",function(){return e.resetPaging()}),d.Ub(25,7),d.Ec(26,k,2,0,"th",8),d.Ec(27,I,15,15,"td",9),d.Tb(),d.Ub(28,10),d.Ec(29,M,3,3,"th",8),d.Ec(30,j,3,3,"td",9),d.Tb(),d.Ub(31,11),d.Ec(32,O,3,3,"th",8),d.Ec(33,S,2,1,"td",9),d.Tb(),d.Ub(34,12),d.Ec(35,D,3,3,"th",13),d.Ec(36,G,3,4,"td",9),d.Tb(),d.Ec(37,T,1,0,"tr",14),d.Ec(38,R,1,0,"tr",15),d.Vb(),d.Vb(),d.Rb(39,"mat-paginator",16),d.Vb()),2&t&&(d.Eb(3),d.Gc(d.kc(4,13,"KnowledgeItem")),d.Eb(4),d.pc("matTooltip",d.kc(8,15,"Common.Create")),d.oc("disabled",!e.isExpertMode),d.Eb(4),d.oc("disabled",!e.isExpertMode||e.dataSource.length<=0),d.Eb(3),d.pc("matTooltip",d.kc(15,17,"Common.Preview")),d.oc("disabled",!e.isExpertMode||e.dataSource.length<=0),d.Eb(4),d.pc("matTooltip",d.kc(19,19,"Common.Refresh")),d.oc("disabled",!e.isExpertMode),d.Eb(6),d.oc("dataSource",e.dataSource),d.Eb(13),d.oc("matHeaderRowDef",e.displayedColumns),d.Eb(1),d.oc("matRowDefColumns",e.displayedColumns),d.Eb(1),d.oc("length",e.resultsLength)("pageSize",20))},directives:[w.c,W.b,b.c,F.a,x.a,y.j,u.a,y.c,y.e,y.b,y.g,y.i,m.a,y.d,y.a,u.b,y.f,y.h],pipes:[r.d,i.e],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.example-container[_ngcontent-%COMP%]{position:relative;min-height:500px}.example-table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.mat-column-id[_ngcontent-%COMP%]{max-width:100px}.mat-column-createdat[_ngcontent-%COMP%]{max-width:124px}"]}),t})();var $=o("jtHE"),K=o("FtGj"),U=o("rCpU"),L=o("HKRH"),_=o("0IaG"),N=o("Wp6s"),H=o("7EHt"),A=o("kmnG"),X=o("qFsG"),z=o("d3UM"),q=o("A5z7"),Q=o("XiUz"),B=o("FKr1");function J(t,e){if(1&t&&(d.Wb(0,"mat-option",22),d.Fc(1),d.jc(2,"transloco"),d.Vb()),2&t){const t=e.$implicit;d.oc("value",t.value),d.Eb(1),d.Gc(d.kc(2,2,t.i18nterm))}}function Y(t,e){1&t&&(d.Wb(0,"mat-icon",25),d.Fc(1,"cancel"),d.Vb())}function Z(t,e){if(1&t){const t=d.Xb();d.Wb(0,"mat-chip",23),d.ec("removed",function(){d.xc(t);const o=e.$implicit;return d.ic().removeTag(o)}),d.Fc(1),d.Ec(2,Y,2,0,"mat-icon",24),d.Vb()}if(2&t){const t=e.$implicit,o=d.ic();d.oc("selectable",o.selectable)("removable",o.isEditable),d.Eb(1),d.Hc(" ",t," "),d.Eb(1),d.oc("ngIf",o.isEditable)}}function tt(t,e){if(1&t&&(d.Wb(0,"mat-expansion-panel"),d.Wb(1,"mat-expansion-panel-header"),d.Wb(2,"mat-panel-title"),d.Fc(3),d.jc(4,"transloco"),d.Vb(),d.Wb(5,"mat-panel-description"),d.Fc(6),d.jc(7,"transloco"),d.Wb(8,"mat-icon"),d.Fc(9,"info"),d.Vb(),d.Vb(),d.Vb(),d.Wb(10,"div",26),d.Wb(11,"div",27),d.Wb(12,"mat-form-field",8),d.Wb(13,"mat-label"),d.Fc(14),d.jc(15,"transloco"),d.Vb(),d.Rb(16,"input",28),d.jc(17,"transloco"),d.jc(18,"date"),d.Vb(),d.Vb(),d.Wb(19,"div",27),d.Wb(20,"mat-form-field",8),d.Wb(21,"mat-label"),d.Fc(22),d.jc(23,"transloco"),d.Vb(),d.Rb(24,"input",28),d.jc(25,"transloco"),d.jc(26,"date"),d.Vb(),d.Vb(),d.Vb(),d.Vb()),2&t){const t=d.ic();d.Eb(3),d.Gc(d.kc(4,8,"Administrative")),d.Eb(3),d.Gc(d.kc(7,10,"AdministrativeInfo")),d.Eb(8),d.Gc(d.kc(15,12,"CreatedAt")),d.Eb(2),d.pc("placeholder",d.kc(17,14,"CreatedAt")),d.oc("ngModel",d.lc(18,16,t.currentItem.CreatedAt,"yyyy-M-d HH:mm:ss")),d.Eb(6),d.Gc(d.kc(23,19,"ModifiedAt")),d.Eb(2),d.pc("placeholder",d.kc(25,21,"ModifiedAt")),d.oc("ngModel",d.lc(26,23,t.currentItem.ModifiedAt,"yyyy-M-d HH:mm:ss"))}}function et(t,e){if(1&t){const t=d.Xb();d.Wb(0,"mat-toolbar"),d.Wb(1,"h3"),d.Fc(2),d.jc(3,"transloco"),d.Vb(),d.Rb(4,"div",29),d.Wb(5,"button",30),d.ec("click",function(){return d.xc(t),d.ic().openUploadDialog()}),d.Wb(6,"mat-icon"),d.Fc(7,"file_upload"),d.Vb(),d.Vb(),d.Vb()}2&t&&(d.Eb(2),d.Gc(d.kc(3,1,"Content")))}function ot(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div",27),d.Wb(1,"ngx-monaco-editor",31),d.ec("ngModelChange",function(e){return d.xc(t),d.ic().content=e}),d.Vb(),d.Vb()}if(2&t){const t=d.ic();d.Eb(1),d.oc("options",t.editorOptions)("ngModel",t.content)}}let it=(()=>{class t{constructor(t,e,o,i){this.dialog=t,this.activateRoute=e,this.uiUtilSrv=o,this.odataService=i,this.routerID=-1,this.uiMode=U.b.Create,this.currentMode="",this.editorOptions={theme:"vs-dark",wordWrap:"on"},this.content="New Knowledge Item",this.mathOptions={displayMode:!0,throwOnError:!1,errorColor:"#cc0000"},this.selectable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[K.g,K.c],this.tags=[],this.arKnowledgeCtgies=[],this.arKnowledgeCtgies=Object(E.M)(),this.itemFormGroup=new a.g({idControl:new a.e({value:null,disabled:!0}),titleControl:new a.e("",a.u.required),ctgyControl:new a.e({value:E.t.Concept}),tagControl:new a.e})}get isDisplayMode(){return this.uiMode===U.b.Display}get isCreateMode(){return this.uiMode===U.b.Create}get isUpdateMode(){return this.uiMode===U.b.Update}get isEditable(){return this.uiMode===U.b.Create||this.uiMode===U.b.Update}ngOnInit(){this.destroyed$=new $.a(1),this.activateRoute.url.subscribe({next:t=>{var e,o;t instanceof Array&&t.length>0&&("create"===t[0].path?(this.routerID=-1,this.uiMode=U.b.Create,this.currentMode="Common.Create"):"edit"===t[0].path?(this.routerID=+t[1].path,this.uiMode=U.b.Update,this.currentMode="Common.Change"):"display"===t[0].path&&(this.routerID=+t[1].path,this.uiMode=U.b.Display,this.currentMode="Common.Display")),-1!==this.routerID?this.odataService.readKnowledgeItem(this.routerID,this.uiMode===U.b.Update).subscribe({next:t=>{var e,o,i;null===(e=this.itemFormGroup.get("idControl"))||void 0===e||e.setValue(t.ID),null===(o=this.itemFormGroup.get("titleControl"))||void 0===o||o.setValue(t.Title),null===(i=this.itemFormGroup.get("ctgyControl"))||void 0===i||i.setValue(+t.ItemCategory),this.content=t.Content,this.tags=t.Tags,this.currentItem=t,this.isDisplayMode?this.itemFormGroup.disable():this.itemFormGroup.markAsPristine()},error:t=>{console.error(t)}}):(null===(e=this.itemFormGroup.get("idControl"))||void 0===e||e.setValue("NEW"),null===(o=this.itemFormGroup.get("idControl"))||void 0===o||o.disable(),this.itemFormGroup.markAsPristine(),this.itemFormGroup.markAsUntouched())},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})}ngOnDestroy(){this.destroyed$&&(this.destroyed$.complete(),this.destroyed$=void 0)}onOK(){var t,e,o,i;if(this.isCreateMode){if(!this.itemFormGroup.valid)return void(this.itemFormGroup.errors&&this.uiUtilSrv.showSnackInfo(this.itemFormGroup.errors.toString()));const o=new E.s;o.ItemCategory=null===(t=this.itemFormGroup.get("ctgyControl"))||void 0===t?void 0:t.value,o.Content=this.content,o.Title=null===(e=this.itemFormGroup.get("titleControl"))||void 0===e?void 0:e.value,o.Tags=this.tags,this.odataService.createKnowledgeItem(o).subscribe({next:t=>{this.uiUtilSrv.navigateKnowledgeItemDisplayPage(t.ID)},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})}else if(this.isUpdateMode){if(!this.itemFormGroup.valid)return void(this.itemFormGroup.errors&&this.uiUtilSrv.showSnackInfo(this.itemFormGroup.errors.toString()));this.currentItem&&(this.currentItem.ItemCategory=null===(o=this.itemFormGroup.get("ctgyControl"))||void 0===o?void 0:o.value,this.currentItem.Content=this.content,this.currentItem.Title=null===(i=this.itemFormGroup.get("titleControl"))||void 0===i?void 0:i.value,this.currentItem.Tags=this.tags,this.odataService.changeKnowledgeItem(this.currentItem).subscribe({next:t=>{this.uiUtilSrv.navigateKnowledgeItemDisplayPage(t.ID)},error:t=>{this.uiUtilSrv.showSnackInfo(t)}}))}}openUploadDialog(){this.dialog.open(L.a,{width:"50%",height:"50%"}).afterClosed().subscribe({next:t=>{console.log(t),t.forEach(t=>{this.content+=`\n![Img](${t.url})\n          `})}})}addTag(t){const e=t.input,o=t.value;(o||"").trim()&&this.tags.push(o.trim()),e&&(e.value="")}removeTag(t){const e=this.tags.indexOf(t);e>=0&&this.tags.splice(e,1)}onReturnToList(){this.uiUtilSrv.navigateKnowledgeItemListPage()}onCreateNewOne(){this.uiUtilSrv.navigateKnowledgeItemCreatePage()}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(_.b),d.Qb(b.a),d.Qb(V.f),d.Qb(V.d))},t.\u0275cmp=d.Kb({type:t,selectors:[["app-knowledge-item-detail"]],decls:61,vars:44,consts:[["multi","",1,"example-headers-align"],["expanded",""],[3,"formGroup"],[1,"control-full-width"],["matInput","","type","text","placeholder","#","formControlName","idControl"],["matInput","","type","text","formControlName","titleControl","required","","name","title","maxlength","30",3,"placeholder"],["title",""],["align","end"],["appearance","fill",1,"control-full-width"],["required","","formControlName","ctgyControl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","tagControl"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","New tag...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[4,"ngIf"],["fxLayout","row",1,"control-full-width",2,"height","500px"],["fxFlex","50",4,"ngIf"],["fxFlex","",2,"height","100%","overflow-y","scroll"],["katex","",3,"data","katexOptions"],["mat-button","",3,"disabled","click"],["mat-button","",3,"click"],[3,"value"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],["fxLayout","row",1,"control-full-width"],["fxFlex","50"],["matInput","","type","text","disabled","",3,"placeholder","ngModel"],[1,"toolbar-spacer"],["mat-raised-button","",3,"click"],[2,"height","100%",3,"options","ngModel","ngModelChange"]],template:function(t,e){if(1&t&&(d.Wb(0,"mat-card"),d.Wb(1,"mat-card-header"),d.Wb(2,"mat-card-title"),d.Fc(3),d.jc(4,"transloco"),d.Vb(),d.Wb(5,"mat-card-subtitle"),d.Fc(6),d.jc(7,"transloco"),d.Vb(),d.Vb(),d.Wb(8,"mat-card-content"),d.Wb(9,"mat-accordion",0),d.Wb(10,"mat-expansion-panel",1),d.Wb(11,"mat-expansion-panel-header"),d.Wb(12,"mat-panel-title"),d.Fc(13),d.jc(14,"transloco"),d.Vb(),d.Wb(15,"mat-panel-description"),d.Fc(16),d.jc(17,"transloco"),d.Wb(18,"mat-icon"),d.Fc(19,"public"),d.Vb(),d.Vb(),d.Vb(),d.Wb(20,"form",2),d.Wb(21,"mat-form-field",3),d.Wb(22,"mat-label"),d.Fc(23,"#"),d.Vb(),d.Rb(24,"input",4),d.Vb(),d.Wb(25,"mat-form-field",3),d.Rb(26,"input",5,6),d.jc(28,"transloco"),d.Wb(29,"mat-hint",7),d.Fc(30),d.Vb(),d.Vb(),d.Wb(31,"mat-form-field",8),d.Wb(32,"mat-label"),d.Fc(33),d.jc(34,"transloco"),d.Vb(),d.Wb(35,"mat-select",9),d.Ec(36,J,3,4,"mat-option",10),d.Vb(),d.Vb(),d.Wb(37,"mat-form-field",8),d.Wb(38,"mat-label"),d.Fc(39),d.jc(40,"transloco"),d.Vb(),d.Wb(41,"mat-chip-list",11,12),d.Ec(43,Z,3,4,"mat-chip",13),d.Wb(44,"input",14),d.ec("matChipInputTokenEnd",function(t){return e.addTag(t)}),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Ec(45,tt,27,26,"mat-expansion-panel",15),d.Vb(),d.Ec(46,et,8,3,"mat-toolbar",15),d.Wb(47,"div",16),d.Ec(48,ot,2,2,"div",17),d.Wb(49,"div",18),d.Rb(50,"markdown",19),d.Vb(),d.Vb(),d.Vb(),d.Wb(51,"mat-card-actions"),d.Wb(52,"button",20),d.ec("click",function(){return e.onOK()}),d.Fc(53),d.jc(54,"transloco"),d.Vb(),d.Wb(55,"button",21),d.ec("click",function(){return e.onReturnToList()}),d.Fc(56),d.jc(57,"transloco"),d.Vb(),d.Wb(58,"button",20),d.ec("click",function(){return e.onCreateNewOne()}),d.Fc(59),d.jc(60,"transloco"),d.Vb(),d.Vb(),d.Vb()),2&t){const t=d.vc(27),o=d.vc(42);d.Eb(3),d.Gc(d.kc(4,24,"KnowledgeItem")),d.Eb(3),d.Gc(d.kc(7,26,e.currentMode)),d.Eb(7),d.Gc(d.kc(14,28,"Header")),d.Eb(3),d.Gc(d.kc(17,30,"HeaderInfo")),d.Eb(4),d.oc("formGroup",e.itemFormGroup),d.Eb(6),d.pc("placeholder",d.kc(28,32,"Title")),d.Eb(4),d.Hc("",t.value.length," / 30"),d.Eb(3),d.Gc(d.kc(34,34,"Category")),d.Eb(3),d.oc("ngForOf",e.arKnowledgeCtgies),d.Eb(3),d.Gc(d.kc(40,36,"Tags")),d.Eb(4),d.oc("ngForOf",e.tags),d.Eb(1),d.oc("matChipInputFor",o)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",e.addOnBlur),d.Eb(1),d.oc("ngIf",!e.isCreateMode&&e.currentItem),d.Eb(1),d.oc("ngIf",e.isCreateMode),d.Eb(2),d.oc("ngIf",!e.isDisplayMode),d.Eb(2),d.oc("data",e.content)("katexOptions",e.mathOptions),d.Eb(2),d.oc("disabled",!(e.isEditable&&e.itemFormGroup.valid)),d.Eb(1),d.Gc(d.kc(54,38,"Save")),d.Eb(3),d.Gc(d.kc(57,40,"Common.ReturnToList")),d.Eb(2),d.oc("disabled",!e.isDisplayMode),d.Eb(1),d.Gc(d.kc(60,42,"Common.CreateAnotherOne"))}},directives:[N.a,N.d,N.g,N.f,N.c,H.a,H.c,H.e,H.f,H.d,x.a,a.v,a.o,a.h,A.c,A.g,X.b,a.c,a.n,a.f,a.t,a.j,A.f,z.a,i.l,q.c,q.b,i.m,Q.c,Q.a,c.a,N.b,W.b,B.n,q.a,q.d,a.q,w.a,n.a],pipes:[r.d,i.e],styles:[".example-form[_ngcontent-%COMP%]{margin:8px;min-width:150px;max-width:500px;width:100%}.mat-card-actions[_ngcontent-%COMP%]{margin-top:50px}.example-action-buttons[_ngcontent-%COMP%]{padding-bottom:20px}.example-headers-align[_ngcontent-%COMP%]{margin:8px}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%], .example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex-basis:0}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]}),t})();var at=o("2Vo4"),nt=o("nYR2"),ct=o("f0Cb"),rt=o("iadO"),lt=o("bSwM"),st=o("pFkP");function bt(t,e){if(1&t&&(d.Wb(0,"mat-option",25),d.Fc(1),d.jc(2,"transloco"),d.Vb()),2&t){const t=e.$implicit;d.oc("value",t.value),d.Eb(1),d.Hc(" ",d.kc(2,2,t.displayas)," ")}}function dt(t,e){if(1&t&&(d.Wb(0,"mat-option",25),d.Fc(1),d.jc(2,"transloco"),d.Vb()),2&t){const t=e.$implicit;d.oc("value",t.value),d.Eb(1),d.Hc(" ",d.kc(2,2,t.i18nterm)," ")}}function mt(t,e){if(1&t){const t=d.Xb();d.Wb(0,"mat-form-field"),d.Wb(1,"input",26),d.ec("ngModelChange",function(e){return d.xc(t),d.ic().$implicit.value[0]=e}),d.jc(2,"transloco"),d.Vb(),d.Vb()}if(2&t){const t=d.ic().$implicit;d.Eb(1),d.pc("placeholder",d.kc(2,2,"Value")),d.oc("ngModel",t.value[0])}}function ut(t,e){if(1&t){const t=d.Xb();d.Wb(0,"mat-form-field"),d.Wb(1,"input",27),d.ec("ngModelChange",function(e){return d.xc(t),d.ic().$implicit.value[1]=e}),d.jc(2,"transloco"),d.Vb(),d.Vb()}if(2&t){const t=d.ic().$implicit;d.Eb(1),d.pc("placeholder",d.kc(2,2,"Value")),d.oc("ngModel",t.value[1])}}function pt(t,e){if(1&t){const t=d.Xb();d.Wb(0,"mat-form-field"),d.Wb(1,"input",28),d.ec("ngModelChange",function(e){return d.xc(t),d.ic().$implicit.value[0]=e}),d.jc(2,"transloco"),d.Vb(),d.Vb()}if(2&t){const t=d.ic().$implicit;d.Eb(1),d.pc("placeholder",d.kc(2,2,"Value")),d.oc("ngModel",t.value[0])}}function ht(t,e){if(1&t){const t=d.Xb();d.Wb(0,"mat-form-field"),d.Wb(1,"input",29),d.ec("ngModelChange",function(e){return d.xc(t),d.ic().$implicit.value[0]=e}),d.jc(2,"transloco"),d.Vb(),d.Rb(3,"mat-datepicker-toggle",30),d.Rb(4,"mat-datepicker",null,31),d.Vb()}if(2&t){const t=d.vc(5),e=d.ic().$implicit;d.Eb(1),d.pc("placeholder",d.kc(2,4,"Value")),d.oc("ngModel",e.value[0])("matDatepicker",t),d.Eb(2),d.oc("for",t)}}function gt(t,e){if(1&t){const t=d.Xb();d.Wb(0,"mat-form-field"),d.Wb(1,"input",29),d.ec("ngModelChange",function(e){return d.xc(t),d.ic().$implicit.value[1]=e}),d.jc(2,"transloco"),d.Vb(),d.Rb(3,"mat-datepicker-toggle",30),d.Rb(4,"mat-datepicker",null,32),d.Vb()}if(2&t){const t=d.vc(5),e=d.ic().$implicit;d.Eb(1),d.pc("placeholder",d.kc(2,4,"Value")),d.oc("ngModel",e.value[1])("matDatepicker",t),d.Eb(2),d.oc("for",t)}}function ft(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div",33),d.Wb(1,"mat-checkbox",34),d.ec("ngModelChange",function(e){return d.xc(t),d.ic().$implicit.value[0]=e}),d.Vb(),d.Vb()}if(2&t){const t=d.ic().$implicit;d.Eb(1),d.oc("ngModel",t.value[0])}}function vt(t,e){if(1&t){const t=d.Xb();d.Wb(0,"div",17),d.Wb(1,"mat-form-field"),d.Wb(2,"mat-select",18),d.ec("ngModelChange",function(t){return e.$implicit.fieldName=t})("selectionChange",function(){d.xc(t);const o=e.$implicit;return d.ic().onFieldSelectionChanged(o)}),d.jc(3,"transloco"),d.Ec(4,bt,3,4,"mat-option",19),d.Vb(),d.Vb(),d.Wb(5,"mat-form-field"),d.Wb(6,"mat-select",20),d.ec("ngModelChange",function(t){return e.$implicit.operator=t}),d.jc(7,"transloco"),d.Ec(8,dt,3,4,"mat-option",19),d.jc(9,"operatorFilter"),d.Vb(),d.Vb(),d.Ec(10,mt,3,4,"mat-form-field",21),d.Ec(11,ut,3,4,"mat-form-field",21),d.Ec(12,pt,3,4,"mat-form-field",21),d.Ec(13,ht,6,6,"mat-form-field",21),d.Ec(14,gt,6,6,"mat-form-field",21),d.Ec(15,ft,2,1,"div",22),d.Wb(16,"button",23),d.ec("click",function(){return d.xc(t),d.ic().onAddFilter()}),d.Wb(17,"mat-icon"),d.Fc(18,"add"),d.Vb(),d.Vb(),d.Wb(19,"button",24),d.ec("click",function(){d.xc(t);const o=e.index;return d.ic().onRemoveFilter(o)}),d.Wb(20,"mat-icon"),d.Fc(21,"close"),d.Vb(),d.Vb(),d.Vb()}if(2&t){const t=e.$implicit,o=d.ic();d.Eb(2),d.pc("placeholder",d.kc(3,12,"Field")),d.oc("ngModel",t.fieldName),d.Eb(2),d.oc("ngForOf",o.allFields),d.Eb(2),d.pc("placeholder",d.kc(7,14,"Operator")),d.oc("ngModel",t.operator),d.Eb(2),d.oc("ngForOf",d.lc(9,16,o.allOperators,t.valueType)),d.Eb(2),d.oc("ngIf",1===t.valueType),d.Eb(1),d.oc("ngIf",1===t.valueType),d.Eb(1),d.oc("ngIf",2===t.valueType),d.Eb(1),d.oc("ngIf",3===t.valueType),d.Eb(1),d.oc("ngIf",3===t.valueType),d.Eb(1),d.oc("ngIf",4===t.valueType)}}function Ct(t,e){1&t&&(d.Wb(0,"th",35),d.Fc(1,"#"),d.Vb())}function Et(t,e){if(1&t){const t=d.Xb();d.Wb(0,"td",36),d.Wb(1,"div"),d.Fc(2),d.Wb(3,"a",37),d.ec("click",function(){d.xc(t);const o=e.$implicit;return d.ic().onDisplayItem(o.ID)}),d.Fc(4),d.jc(5,"transloco"),d.Vb(),d.Vb(),d.Vb()}if(2&t){const t=e.$implicit;d.Eb(2),d.Hc(" ",t.ID," "),d.Eb(2),d.Gc(d.kc(5,2,"Common.Display"))}}function Vt(t,e){1&t&&(d.Wb(0,"th",35),d.Fc(1),d.jc(2,"transloco"),d.Vb()),2&t&&(d.Eb(1),d.Gc(d.kc(2,1,"Category")))}function wt(t,e){if(1&t&&(d.Wb(0,"td",36),d.Fc(1),d.jc(2,"transloco"),d.Vb()),2&t){const t=e.$implicit,o=d.ic();d.Eb(1),d.Gc(d.kc(2,1,o.getKnowledgeItemCategoryName(t.ItemCategory)))}}function Wt(t,e){1&t&&(d.Wb(0,"th",35),d.Fc(1),d.jc(2,"transloco"),d.Vb()),2&t&&(d.Eb(1),d.Gc(d.kc(2,1,"Title")))}function Ft(t,e){if(1&t&&(d.Wb(0,"td",36),d.Fc(1),d.Vb()),2&t){const t=e.$implicit;d.Eb(1),d.Gc(t.Title)}}function xt(t,e){1&t&&(d.Wb(0,"th",35),d.Fc(1),d.jc(2,"transloco"),d.Vb()),2&t&&(d.Eb(1),d.Gc(d.kc(2,1,"CreatedAt")))}function yt(t,e){if(1&t&&(d.Wb(0,"td",36),d.Fc(1),d.jc(2,"date"),d.Vb()),2&t){const t=e.$implicit;d.Eb(1),d.Gc(d.lc(2,1,t.CreatedAt,"yyyy-M-d HH:mm:ss"))}}function kt(t,e){1&t&&d.Rb(0,"tr",38)}function It(t,e){1&t&&d.Rb(0,"tr",39)}const Mt=[{path:"",component:P},{path:"create",component:it},{path:"display/:id",component:it},{path:"edit/:id",component:it},{path:"search",component:(()=>{class t{constructor(t,e){this.odataService=t,this.uiUtilSrv=e,this.filters=[],this.allOperators=[],this.allFields=[],this.filterEditable=!0,this.pageSize=20,this.pageSizeOptions=[20,40,60,100],this.isLoadingResults=!1,this.subjFilters=new at.a([]),this.displayedColumns=["id","category","title","createdat"],this.dataSource=[],this.resultsLength=0,this.allOperators=E.E.getGeneralFilterOperatorDisplayStrings(),this.allFields=[{displayas:"Content",value:"Content",valueType:2}]}ngOnInit(){this.onAddFilter()}ngAfterViewInit(){this.subjFilters.subscribe(()=>this.paginator.pageIndex=0),Object(p.a)(this.subjFilters,this.paginator.page).pipe(Object(g.a)({}),Object(f.a)(()=>{if(this.subjFilters.value.length<=0)return Object(h.a)([]);this.isLoadingResults=!0;const t=this.prepareFilters(this.subjFilters.value),e=this.paginator.pageSize;return this.odataService.getKnowledgeItems(e,e*this.paginator.pageIndex,void 0,void 0,t)}),Object(nt.a)(()=>this.isLoadingResults=!1),Object(v.a)(t=>(this.resultsLength=t.totalCount,t.items)),Object(C.a)(()=>Object(h.a)(void 0))).subscribe({next:t=>this.dataSource=t,error:t=>this.uiUtilSrv.showSnackInfo(t)})}getKnowledgeItemCategoryName(t){return Object(E.L)(t)}onAddFilter(){this.filters.push(new E.n)}onRemoveFilter(t){this.filters.splice(t,1),0===this.filters.length&&this.onAddFilter()}onFieldSelectionChanged(t){this.allFields.forEach(e=>{e.value===t.fieldName&&(t.valueType=e.valueType)})}prepareFilters(t){let e="";return t.sort((t,e)=>t.fieldName.localeCompare(e.fieldName)),t.forEach(t=>{"Content"===t.fieldName&&(t.operator===E.o.Equal?e=e?`${e} and ${t.fieldName} eq '${t.lowValue}'`:`${t.fieldName} eq '${t.lowValue}'`:t.operator===E.o.Like&&(e=e?`${e} and contains(${t.fieldName},'${t.lowValue}')`:`contains(${t.fieldName},'${t.lowValue}')`))}),e}onSearch(){const t=[];this.filters.forEach(e=>{const o={};switch(o.valueType=+e.valueType,e.valueType){case E.p.boolean:case E.p.date:case E.p.number:break;case E.p.string:o.fieldName=e.fieldName,o.operator=+e.operator,o.lowValue=e.value[0],o.highValue=e.operator===E.o.Between?e.value[1]:""}t.push(o)}),this.subjFilters.next(t)}onDisplayItem(t){this.uiUtilSrv.navigateKnowledgeItemDisplayPage(t)}onGoToPreview(){const t=[];this.dataSource.forEach(e=>{t.push({refType:E.D.KnowledgeItem,refId:e.ID})}),this.uiUtilSrv.navigatePreviewPage(t)}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(V.d),d.Qb(V.f))},t.\u0275cmp=d.Kb({type:t,selectors:[["app-knowledge-item-search"]],viewQuery:function(t,e){if(1&t&&d.Kc(m.a,3),2&t){let t;d.uc(t=d.fc())&&(e.paginator=t.first)}},decls:41,vars:18,consts:[["class","demo-full-width",4,"ngFor","ngForOf"],[1,"control-full-width"],["mat-button","","aria-label","Search",3,"click"],[1,"table-container","mat-elevation-z8"],["color","primary"],["mat-flat-button","","color","primary",3,"click"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","title"],["matColumnDef","createdat"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[1,"demo-full-width"],[3,"placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"placeholder","ngModel","ngModelChange"],[4,"ngIf"],["class","typechkbox",4,"ngIf"],["mat-button","","mat-icon-button","","aria-label","Add",3,"click"],["mat-button","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["matInput","","type","number","name","lvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","","type","number","name","hvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","","type","text","name","lvalue_2",3,"placeholder","ngModel","ngModelChange"],["matInput","",3,"ngModel","matDatepicker","placeholder","ngModelChange"],["matSuffix","",3,"for"],["lvpicker",""],["hvpicker",""],[1,"typechkbox"],[3,"ngModel","ngModelChange"],["mat-header-cell",""],["mat-cell",""],["mat-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(d.Wb(0,"mat-card"),d.Wb(1,"mat-card-header"),d.Wb(2,"mat-card-title"),d.Fc(3),d.jc(4,"transloco"),d.Vb(),d.Wb(5,"mat-card-subtitle"),d.Fc(6),d.jc(7,"transloco"),d.Vb(),d.Vb(),d.Wb(8,"mat-card-content"),d.Wb(9,"div"),d.Ec(10,vt,22,19,"div",0),d.Wb(11,"div",1),d.Wb(12,"button",2),d.ec("click",function(){return e.onSearch()}),d.Wb(13,"mat-icon"),d.Fc(14,"search"),d.Vb(),d.Fc(15),d.jc(16,"transloco"),d.Vb(),d.Vb(),d.Vb(),d.Rb(17,"mat-divider"),d.Wb(18,"div",3),d.Wb(19,"mat-toolbar",4),d.Wb(20,"mat-toolbar-row"),d.Wb(21,"button",5),d.ec("click",function(){return e.onGoToPreview()}),d.Fc(22),d.jc(23,"transloco"),d.Vb(),d.Vb(),d.Vb(),d.Wb(24,"div",6),d.Wb(25,"table",7),d.Ub(26,8),d.Ec(27,Ct,2,0,"th",9),d.Ec(28,Et,6,4,"td",10),d.Tb(),d.Ub(29,11),d.Ec(30,Vt,3,3,"th",9),d.Ec(31,wt,3,3,"td",10),d.Tb(),d.Ub(32,12),d.Ec(33,Wt,3,3,"th",9),d.Ec(34,Ft,2,1,"td",10),d.Tb(),d.Ub(35,13),d.Ec(36,xt,3,3,"th",9),d.Ec(37,yt,3,4,"td",10),d.Tb(),d.Ec(38,kt,1,0,"tr",14),d.Ec(39,It,1,0,"tr",15),d.Vb(),d.Vb(),d.Rb(40,"mat-paginator",16),d.Vb(),d.Vb(),d.Vb()),2&t&&(d.Eb(3),d.Gc(d.kc(4,10,"KnowledgeItem")),d.Eb(3),d.Gc(d.kc(7,12,"Common.Search")),d.Eb(4),d.oc("ngForOf",e.filters),d.Eb(5),d.Hc(" ",d.kc(16,14,"Common.Search")," "),d.Eb(7),d.Gc(d.kc(23,16,"Common.Preview")),d.Eb(3),d.oc("dataSource",e.dataSource),d.Eb(13),d.oc("matHeaderRowDef",e.displayedColumns),d.Eb(1),d.oc("matRowDefColumns",e.displayedColumns),d.Eb(1),d.oc("length",e.resultsLength)("pageSize",20))},directives:[N.a,N.d,N.g,N.f,N.c,i.l,W.b,x.a,ct.a,w.a,w.c,y.j,y.c,y.e,y.b,y.g,y.i,m.a,A.c,z.a,a.n,a.q,i.m,B.n,X.b,a.r,a.c,rt.d,rt.f,A.i,rt.c,lt.a,y.d,y.a,W.a,y.f,y.h],pipes:[r.d,st.a,i.e],styles:[".table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;margin-top:16px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.data-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.mat-column-id[_ngcontent-%COMP%]{max-width:300px;width:250px}.mat-column-itemtype[_ngcontent-%COMP%]{max-width:120px;width:120px}.mat-column-tags[_ngcontent-%COMP%]{max-width:250px;width:150px}.mat-column-created[_ngcontent-%COMP%]{max-width:120px;width:120px}"]}),t})()}];let jt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Ob({type:t}),t.\u0275inj=d.Nb({imports:[[b.e.forChild(Mt)],b.e]}),t})();var Ot=o("iasb");let St=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Ob({type:t}),t.\u0275inj=d.Nb({providers:[],imports:[[i.c,a.i,a.s,l.a,s.a,n.b,c.b.forChild(),jt,r.c,Ot.a]]}),t})()}}]);