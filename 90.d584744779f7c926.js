"use strict";(self.webpackChunkknowledgebuilder=self.webpackChunkknowledgebuilder||[]).push([[90],{90:(ko,F,c)=>{c.r(F),c.d(F,{HabitBuilderModule:()=>wo});var f=c(6895),r=c(4006),A=c(1525),mt=c(2213),ut=c(558),M=c(2054),O=c(9132),t=c(4650),L=c(8739),q=c(6308),pt=c(5439),b=c.n(pt),Y=c(6451),Q=c(9646),J=c(8675),I=c(3900),G=c(8746),B=c(4004),$=c(262),m=c(2701),p=c(2281),x=c(5938),U=c(4859),R=c(7392),s=c(3626),y=c(3683),k=c(266);function dt(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1,"#"),t.qZA())}function _t(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"td",19),t._uU(1),t.TgZ(2,"button",1),t.NdJ("click",function(){const l=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.onDisplayHabit(l.ID))}),t.ALo(3,"transloco"),t.TgZ(4,"mat-icon"),t._uU(5,"launch"),t.qZA()(),t.TgZ(6,"button",20),t.NdJ("click",function(){const l=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.onDeleteHabit(l.ID))}),t.ALo(7,"transloco"),t.TgZ(8,"mat-icon"),t._uU(9,"remove_circle"),t.qZA()()()}if(2&e){const o=a.$implicit;t.xp6(1),t.hij("",o.ID," | "),t.xp6(1),t.s9C("matTooltip",t.lcZ(3,3,"Common.Display")),t.xp6(4),t.s9C("matTooltip",t.lcZ(7,5,"Common.Delete"))}}function ht(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.TargetUser")))}function Ct(e,a){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const o=a.$implicit,i=t.oxw();t.xp6(1),t.AsE("",i.getUserDisplayAs(o.targetUser)," (",o.targetUser,")")}}function gt(e,a){1&e&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Common.Name")))}function ft(e,a){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.name)}}function bt(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Type")))}function Zt(e,a){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const o=a.$implicit,i=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,i.getHabitCategoryName(o.category)))}}function Tt(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Habit.Frequency")))}function At(e,a){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const o=a.$implicit,i=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,i.getHabitFrequencyName(o.frequency)))}}function xt(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Habit.CompleteCategory")))}function Ut(e,a){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const o=a.$implicit,i=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,i.getHabitCompleteCategoryName(o.completeCategory)))}}function qt(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.Validity")))}function Ht(e,a){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.validity)}}function vt(e,a){1&e&&t._UZ(0,"tr",22)}function Dt(e,a){1&e&&t._UZ(0,"tr",23)}let E=(()=>{class e{constructor(o,i,n,l){this.odataSrv=o,this.dialog=i,this.authService=n,this.uiUtilSrv=l,this.dataSource=[],this.displayedColumns=["id","targetUser","name","category","frequency","compCategory","validity"],this.recordCount=0,this.isLoadingResults=!1,this.refreshEvent=new t.vpe}ngOnInit(){this.refreshList()}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,Y.T)(this.sort.sortChange,this.paginator.page,this.refreshEvent).pipe((0,J.O)({}),(0,I.w)(()=>{const o=this.paginator.pageSize,i=o*this.paginator.pageIndex;let n=b()().format(m.Jt);return this.odataSrv.getUserHabits(o,i,this.sort.active,this.sort.direction,`ValidFrom le ${n} and ValidTo ge ${n}`)}),(0,G.x)(()=>this.isLoadingResults=!1),(0,B.U)(o=>(this.recordCount=o.totalCount,o.items)),(0,$.K)(()=>(0,Q.of)([]))).subscribe({next:o=>this.dataSource=o,error:o=>this.uiUtilSrv.showSnackInfo(o)})}getHabitCategoryName(o){return(0,m.xk)(o)}getHabitCompleteCategoryName(o){return(0,m.E0)(o)}getHabitFrequencyName(o){return(0,m.lC)(o)}getUserDisplayAs(o){if(o&&this.authService.userDetail){const i=this.authService.userDetail.awardUsers.findIndex(n=>n.targetUser===o);if(-1!==i)return this.authService.userDetail.awardUsers[i].displayAs}return""}onCreateHabit(){this.uiUtilSrv.navigateHabitCreatePage()}resetPaging(){this.paginator.pageIndex=0}refreshList(){this.refreshEvent.emit()}onDeleteHabit(o){this.odataSrv.deleteUserHabit(o).subscribe({next:i=>{this.refreshList()},error:i=>{this.uiUtilSrv.showSnackInfo(i)}})}onDisplayHabit(o){this.uiUtilSrv.navigateHabitDisplayPage(o)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p.CB),t.Y36(x.uw),t.Y36(p.e8),t.Y36(p.dM))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-habit-list"]],viewQuery:function(o,i){if(1&o&&(t.Gf(L.NW,5),t.Gf(q.YE,5)),2&o){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},decls:36,vars:11,consts:[[1,"toolbar-spacer"],["mat-icon-button","","color","primary",3,"matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","targetUser"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","category"],["matColumnDef","frequency"],["matColumnDef","compCategory"],["matColumnDef","validity"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"matTooltip","click"],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row",""]],template:function(o,i){1&o&&(t.TgZ(0,"mat-toolbar")(1,"h1"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t._UZ(4,"div",0),t.TgZ(5,"button",1),t.NdJ("click",function(){return i.onCreateHabit()}),t.ALo(6,"transloco"),t.TgZ(7,"mat-icon"),t._uU(8,"add_circle"),t.qZA()()(),t.TgZ(9,"div",2)(10,"div",3)(11,"table",4),t.NdJ("matSortChange",function(){return i.resetPaging()}),t.ynx(12,5),t.YNc(13,dt,2,0,"th",6),t.YNc(14,_t,10,7,"td",7),t.BQk(),t.ynx(15,8),t.YNc(16,ht,3,3,"th",6),t.YNc(17,Ct,2,2,"td",7),t.BQk(),t.ynx(18,9),t.YNc(19,gt,3,3,"th",10),t.YNc(20,ft,2,1,"td",7),t.BQk(),t.ynx(21,11),t.YNc(22,bt,3,3,"th",6),t.YNc(23,Zt,3,3,"td",7),t.BQk(),t.ynx(24,12),t.YNc(25,Tt,3,3,"th",6),t.YNc(26,At,3,3,"td",7),t.BQk(),t.ynx(27,13),t.YNc(28,xt,3,3,"th",6),t.YNc(29,Ut,3,3,"td",7),t.BQk(),t.ynx(30,14),t.YNc(31,qt,3,3,"th",6),t.YNc(32,Ht,2,1,"td",7),t.BQk(),t.YNc(33,vt,1,0,"tr",15),t.YNc(34,Dt,1,0,"tr",16),t.qZA()(),t._UZ(35,"mat-paginator",17),t.qZA()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"Habit.Habits")),t.xp6(3),t.s9C("matTooltip",t.lcZ(6,9,"Common.Create")),t.xp6(6),t.Q6J("dataSource",i.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("length",i.recordCount)("pageSize",20))},dependencies:[U.lW,R.Hw,L.NW,q.YE,q.nU,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,y.Ye,k.gM,A.Ot],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}"]}),e})();var h=c(3778),H=c(3238),C=c(3546),d=c(9602),_=c(9549),w=c(4144),v=c(4385);function yt(e,a){if(1&e&&(t.TgZ(0,"mat-option",27),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.targetUser),t.xp6(1),t.Oqu(o.displayAs)}}function wt(e,a){if(1&e&&(t.TgZ(0,"mat-option",27),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.value),t.xp6(1),t.Oqu(t.lcZ(2,2,o.i18nterm))}}function Ot(e,a){if(1&e&&(t.TgZ(0,"mat-option",27),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.value),t.xp6(1),t.hij("",t.lcZ(2,2,o.i18nterm)," ")}}function Lt(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1,"#"),t.qZA())}function Nt(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.ruleID)}}function St(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Habit.ContinuousCompletedCounts")))}function Rt(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.continuousCompletedCounts)}}function kt(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.Point")))}function Pt(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.point)}}function Ft(e,a){1&e&&t._UZ(0,"tr",30)}function Mt(e,a){1&e&&t._UZ(0,"tr",31)}let j=(()=>{class e{constructor(o,i,n,l,u){this.activateRoute=o,this._formBuilder=i,this.uiUtilSrv=n,this.authService=l,this.odataSrv=u,this.routerID=-1,this.uiMode=h.sk.Display,this.currentMode="Common.Display",this.arCategories=[],this.arFrequencies=[],this.arCompleteCategories=[],this.currentObject=new m.ke,this.displayedColumns=["ruleID","completedCountRange","point"],this.arCategories=(0,m.ZP)(),this.arFrequencies=(0,m.AX)(),this.arCompleteCategories=(0,m.nX)(),this.detailFormGroup=this._formBuilder.group({targetuserCtrl:["",r.kI.required],nameCtrl:["",r.kI.required],ctgyCtrl:[m.cb.Positive,r.kI.required],validFromCtrl:[void 0,r.kI.required],validToCtrl:[void 0,r.kI.required],freqCtrl:[m.Hs.Daily,r.kI.required],compCtgyCtrl:[m.Kd.NumberOfTimes,r.kI.required],compCondCtrl:[0],startDateCtrl:[void 0]})}get arTargetUsers(){return this.authService.userDetail?this.authService.userDetail.awardUsers:[]}getUserDisplayAs(o){if(o&&this.authService.userDetail){const i=this.authService.userDetail.awardUsers.findIndex(n=>n.targetUser===o);if(-1!==i)return this.authService.userDetail.awardUsers[i].displayAs}return""}get isDisplayMode(){return this.uiMode===h.sk.Display}get isUpdateMode(){return this.uiMode===h.sk.Update}get isEditable(){return this.uiMode===h.sk.Update}ngOnInit(){this.activateRoute.url.subscribe({next:o=>{o instanceof Array&&o.length>0&&("display"===o[0].path?(this.uiMode=h.sk.Display,this.currentMode="Common.Display",this.routerID=+o[1].path):"edit"===o[0].path&&(this.uiMode=h.sk.Update,this.currentMode="Common.Change",this.routerID=+o[1].path)),-1!==this.routerID&&this.odataSrv.readUserHabit(this.routerID).subscribe({next:i=>{this.currentObject=i,this.detailFormGroup.get("targetuserCtrl")?.setValue(this.currentObject.targetUser),this.detailFormGroup.get("nameCtrl")?.setValue(this.currentObject.name),this.detailFormGroup.get("validFromCtrl")?.setValue(this.currentObject.validFrom),this.detailFormGroup.get("validToCtrl")?.setValue(this.currentObject.validTo),this.detailFormGroup.get("freqCtrl")?.setValue(this.currentObject.frequency),this.detailFormGroup.get("compCtgyCtrl")?.setValue(this.currentObject.completeCategory),this.detailFormGroup.get("compCondCtrl")?.setValue(this.currentObject.completeCondition),this.detailFormGroup.get("startDateCtrl")?.setValue(this.currentObject.startDate),this.uiMode===h.sk.Display?this.detailFormGroup.disable():(this.detailFormGroup.enable(),this.detailFormGroup.markAsPristine())},error:i=>{this.uiUtilSrv.showSnackInfo(i)}})},error:o=>{this.uiUtilSrv.showSnackInfo(o)}})}onSave(){}onBackToList(){this.uiUtilSrv.navigateHabitListPage()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(O.gz),t.Y36(r.QS),t.Y36(p.dM),t.Y36(p.e8),t.Y36(p.CB))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-habit-detail"]],decls:74,vars:43,consts:[[3,"formGroup"],["appearance","fill",1,"control-full-width"],["required","","formControlName","targetuserCtrl"],[3,"value",4,"ngFor","ngForOf"],["matInput","","required","","formControlName","nameCtrl"],["appearance","fill"],[3,"rangePicker"],["matStartDate","","formControlName","validFromCtrl","placeholder","Start date"],["matEndDate","","formControlName","validToCtrl","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],["required","","formControlName","freqCtrl"],["required","","formControlName","compCtgyCtrl"],["matInput","","required","","type","number","formControlName","compCondCtrl"],["matInput","","required","","type","number","formControlName","startDateCtrl"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","ruleID"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","completedCountRange"],["matColumnDef","point"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-button","","color","primary",3,"disabled","click"],["mat-button","",3,"click"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(o,i){if(1&o&&(t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.ALo(7,"transloco"),t.qZA()(),t.TgZ(8,"mat-card-content")(9,"form",0)(10,"mat-form-field",1)(11,"mat-label"),t._uU(12),t.ALo(13,"transloco"),t.qZA(),t.TgZ(14,"mat-select",2),t.YNc(15,yt,2,2,"mat-option",3),t.qZA()(),t.TgZ(16,"mat-form-field",1)(17,"mat-label"),t._uU(18),t.ALo(19,"transloco"),t.qZA(),t._UZ(20,"input",4),t.qZA(),t.TgZ(21,"mat-form-field",5)(22,"mat-label"),t._uU(23),t.ALo(24,"transloco"),t.qZA(),t.TgZ(25,"mat-date-range-input",6),t._UZ(26,"input",7)(27,"input",8),t.qZA(),t._UZ(28,"mat-datepicker-toggle",9)(29,"mat-date-range-picker",null,10),t.qZA(),t.TgZ(31,"mat-form-field",1)(32,"mat-label"),t._uU(33),t.ALo(34,"transloco"),t.qZA(),t.TgZ(35,"mat-select",11),t.YNc(36,wt,3,4,"mat-option",3),t.qZA()(),t.TgZ(37,"mat-form-field",1)(38,"mat-label"),t._uU(39),t.ALo(40,"transloco"),t.qZA(),t.TgZ(41,"mat-select",12),t.YNc(42,Ot,3,4,"mat-option",3),t.qZA()(),t.TgZ(43,"mat-form-field",1)(44,"mat-label"),t._uU(45),t.ALo(46,"transloco"),t.qZA(),t._UZ(47,"input",13),t.qZA(),t.TgZ(48,"mat-form-field",1)(49,"mat-label"),t._uU(50),t.ALo(51,"transloco"),t.qZA(),t._UZ(52,"input",14),t.qZA()(),t.TgZ(53,"div",15)(54,"div",16)(55,"table",17),t.ynx(56,18),t.YNc(57,Lt,2,0,"th",19),t.YNc(58,Nt,2,1,"td",20),t.BQk(),t.ynx(59,21),t.YNc(60,St,3,3,"th",19),t.YNc(61,Rt,2,1,"td",20),t.BQk(),t.ynx(62,22),t.YNc(63,kt,3,3,"th",19),t.YNc(64,Pt,2,1,"td",20),t.BQk(),t.YNc(65,Ft,1,0,"tr",23),t.YNc(66,Mt,1,0,"tr",24),t.qZA()()()(),t.TgZ(67,"mat-card-actions")(68,"button",25),t.NdJ("click",function(){return i.onSave()}),t._uU(69),t.ALo(70,"transloco"),t.qZA(),t.TgZ(71,"button",26),t.NdJ("click",function(){return i.onBackToList()}),t._uU(72),t.ALo(73,"transloco"),t.qZA()()()),2&o){const n=t.MAs(30);t.xp6(3),t.Oqu(t.lcZ(4,21,"Habit.Habit")),t.xp6(3),t.Oqu(t.lcZ(7,23,i.currentMode)),t.xp6(3),t.Q6J("formGroup",i.detailFormGroup),t.xp6(3),t.Oqu(t.lcZ(13,25,"Award.TargetUser")),t.xp6(3),t.Q6J("ngForOf",i.arTargetUsers),t.xp6(3),t.Oqu(t.lcZ(19,27,"Common.Name")),t.xp6(5),t.Oqu(t.lcZ(24,29,"Award.Validity")),t.xp6(2),t.Q6J("rangePicker",n),t.xp6(3),t.Q6J("for",n),t.xp6(5),t.Oqu(t.lcZ(34,31,"Habit.Frequency")),t.xp6(3),t.Q6J("ngForOf",i.arFrequencies),t.xp6(3),t.Oqu(t.lcZ(40,33,"Habit.CompleteCategory")),t.xp6(3),t.Q6J("ngForOf",i.arCompleteCategories),t.xp6(3),t.Oqu(t.lcZ(46,35,"Habit.CompleteCondition")),t.xp6(5),t.Oqu(t.lcZ(51,37,"Habit.StartDate")),t.xp6(5),t.Q6J("dataSource",i.currentObject.arRules),t.xp6(10),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Q6J("disabled",i.isDisplayMode),t.xp6(1),t.Oqu(t.lcZ(70,39,"Common.Save")),t.xp6(3),t.Oqu(t.lcZ(73,41,"Common.ReturnToList"))}},dependencies:[f.sg,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.sg,r.u,H.ey,U.lW,C.a8,C.dk,C.dn,C.n5,C.$j,C.hq,d.nW,d.wx,d.zY,d.By,d._g,_.KE,_.hX,_.R9,w.Nt,v.gD,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,A.Ot],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:200px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}"]}),e})();var Z=c(8425),V=c(6338);function Yt(e,a){1&e&&(t._uU(0),t.ALo(1,"transloco")),2&e&&t.Oqu(t.lcZ(1,1,"Habit.Habit"))}function Qt(e,a){if(1&e&&(t.TgZ(0,"mat-option",38),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.targetUser),t.xp6(1),t.Oqu(o.displayAs)}}function Jt(e,a){if(1&e&&(t.TgZ(0,"mat-option",38),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.value),t.xp6(1),t.Oqu(t.lcZ(2,2,o.i18nterm))}}function It(e,a){if(1&e&&(t.TgZ(0,"mat-option",38),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.value),t.xp6(1),t.hij("",t.lcZ(2,2,o.i18nterm)," ")}}function Gt(e,a){1&e&&(t._uU(0),t.ALo(1,"transloco")),2&e&&t.Oqu(t.lcZ(1,1,"Habit.ContinuousCompletedCounts"))}function Bt(e,a){if(1&e&&(t.TgZ(0,"mat-list",39)(1,"mat-list-item"),t._uU(2),t.qZA()()),2&e){const o=a.$implicit;t.xp6(2),t.Oqu(o.toString())}}function $t(e,a){1&e&&(t._uU(0),t.ALo(1,"transloco")),2&e&&t.Oqu(t.lcZ(1,1,"Award.Point"))}function Et(e,a){1&e&&(t.TgZ(0,"th",40),t._uU(1,"ID"),t.qZA())}function jt(e,a){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.ruleID)}}function Vt(e,a){1&e&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.ContinuousDays")))}function zt(e,a){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.continuousDays)}}function Kt(e,a){1&e&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.Point")))}function Xt(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"td",41)(1,"mat-form-field",42)(2,"input",43),t.NdJ("ngModelChange",function(n){const u=t.CHM(o).$implicit;return t.KtG(u.point=n)})("ngModelChange",function(n){t.CHM(o);const l=t.oxw();return t.KtG(l.onPointCellChanged(n))}),t.qZA()()()}if(2&e){const o=a.$implicit;t.xp6(2),t.Q6J("ngModel",o.point)}}function Wt(e,a){1&e&&t._UZ(0,"tr",44)}function te(e,a){1&e&&t._UZ(0,"tr",45)}function ee(e,a){1&e&&(t._uU(0),t.ALo(1,"transloco")),2&e&&t.Oqu(t.lcZ(1,1,"Common.Done"))}class z{constructor(){this.from=0,this.to=0}toString(){return`[${this.from} - ${this.to})`}}const K=e=>{const a=new m.ke;switch(a.category=m.cb.Positive,a.targetUser=e.get("targetuserCtrl")?.value,a.validFrom=b()(e.get("validFromCtrl")?.value),a.validTo=b()(e.get("validToCtrl")?.value),a.name=e.get("nameCtrl")?.value,a.frequency=e.get("freqCtrl")?.value,a.completeCategory=e.get("compCtgyCtrl")?.value,a.frequency){case m.Hs.Weekly:case m.Hs.Monthly:a.startDate=e.get("startDateCtrl")?.value,a.completeCondition=e.get("compCondCtrl")?.value;break;default:a.completeCategory===m.Kd.NumberOfCount?(a.startDate=void 0,a.completeCondition=e.get("compCondCtrl")?.value):(a.startDate=void 0,a.completeCondition=1)}return a},oe=e=>K(e).isValid?null:{invalidInputs:!0};let ie=(()=>{class e{constructor(o,i,n,l){this._formBuilder=o,this.uiUtilSrv=i,this.authService=n,this.odataSrv=l,this.arRuleTypes=[],this.contDays=[],this.arRules=[],this.displayedColumns=["ruleID","continuousDays","point"],this.pointCompleted=!1,this.createdHabitID=-1,this.arCategories=[],this.arFrequencies=[],this.arCompleteCategories=[],this.arCategories=(0,m.ZP)(),this.arFrequencies=(0,m.AX)(),this.arCompleteCategories=(0,m.nX)(),this.currentObject=new m.ke,this.firstFormGroup=this._formBuilder.group({targetuserCtrl:new r.p4(""),nameCtrl:new r.p4("",r.kI.required),validFromCtrl:new r.p4(b()(),r.kI.required),validToCtrl:new r.p4(b()(),r.kI.required),freqCtrl:new r.p4(m.Hs.Weekly,r.kI.required),compCtgyCtrl:new r.p4(m.Kd.NumberOfTimes,r.kI.required),compCondCtrl:new r.p4,startDateCtrl:new r.p4},{validators:oe}),this.secondFormGroup=this._formBuilder.group({rawCtrl:new r.p4("",r.kI.required)})}get arTargetUsers(){return this.authService.userDetail?this.authService.userDetail.awardUsers:[]}getUserDisplayAs(o){if(o&&this.authService.userDetail){const i=this.authService.userDetail.awardUsers.findIndex(n=>n.targetUser===o);if(-1!==i)return this.authService.userDetail.awardUsers[i].displayAs}return""}ngOnInit(){this.firstFormGroup.get("freqCtrl")?.valueChanges.subscribe(o=>{this.onFreqencyAndCompleteCategoryChange(o)}),this.firstFormGroup.get("compCtgyCtrl")?.valueChanges.subscribe(o=>{this.onFreqencyAndCompleteCategoryChange(o)}),this.secondFormGroup.get("rawCtrl")?.valueChanges.subscribe(o=>{this.onContDayChange(o)})}onFreqencyAndCompleteCategoryChange(o){const i=this.firstFormGroup.get("compCtgyCtrl")?.value;this.firstFormGroup.get("freqCtrl")?.value===m.Hs.Daily?(i===m.Kd.NumberOfTimes?this.firstFormGroup.get("compCondCtrl")?.disable():this.firstFormGroup.get("compCondCtrl")?.enable(),this.firstFormGroup.get("startDateCtrl")?.disable()):(this.firstFormGroup.get("compCondCtrl")?.enable(),this.firstFormGroup.get("startDateCtrl")?.enable())}onContDayChange(o){if(this.contDays=[],o){let n=o.split(";").map(T=>{if(T){const g=+T;if(!isNaN(g)&&g>0)return Math.trunc(g)}return 0});n=n.filter(T=>T>0),n.sort();let l=0;n.forEach(T=>{if(0!==l){const g=new z;g.from=l,g.to=T,this.contDays.push(g)}l=T});const u=new z;u.from=l,u.to=9999,this.contDays.push(u)}}onPointCellChanged(o){let i=0;this.arRules.forEach(n=>{(isNaN(n.point)||0===n.point)&&i++}),this.pointCompleted=0===i}onInitialRules(){this.arRules=[],this.contDays.forEach((o,i)=>{let n=new m.hp;n.ruleID=i+1,n.continuousRecordFrom=o.from,n.continuousRecordTo=o.to,this.arRules.push(n)})}onSave(){let o=K(this.firstFormGroup);!o.isValid||(this.arRules.forEach(i=>{o.arRules.push(i)}),this.odataSrv.createUserHabit(o).subscribe({next:i=>{i&&i.ID&&(this.createdHabitID=i.ID)},error:i=>{this.uiUtilSrv.showSnackInfo(i,1e3)}}))}onGoToList(){this.uiUtilSrv.navigateHabitListPage()}onDisplayHabit(){this.createdHabitID&&this.uiUtilSrv.navigateHabitDisplayPage(this.createdHabitID)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(r.QS),t.Y36(p.dM),t.Y36(p.e8),t.Y36(p.CB))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-habit-create"]],decls:126,vars:86,consts:[[1,"toolbar-spacer"],["linear",""],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["appearance","fill",1,"control-full-width"],["formControlName","targetuserCtrl"],[3,"value",4,"ngFor","ngForOf"],["matInput","","required","","formControlName","nameCtrl"],["appearance","fill"],[3,"rangePicker"],["matStartDate","","formControlName","validFromCtrl","placeholder","Start date"],["matEndDate","","formControlName","validToCtrl","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],["required","","formControlName","freqCtrl"],["required","","formControlName","compCtgyCtrl"],["matInput","","type","number","formControlName","compCondCtrl"],["matInput","","type","number","formControlName","startDateCtrl"],["mat-button","","color","primary","matStepperNext","",3,"disabled"],["matInput","","formControlName","rawCtrl"],["dense","",4,"ngFor","ngForOf"],["mat-button","","matStepperPrevious",""],["mat-button","","color","primary","matStepperNext","",3,"click"],[3,"completed"],["mat-raised-button","","disabled",""],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","ruleID"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","continuousDays"],["matColumnDef","point"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-button","","color","primary","matStepperNext","",3,"disabled","click"],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"],[3,"value"],["dense",""],["mat-header-cell",""],["mat-cell",""],[1,"control-full-width"],["matInput","","type","number",1,"input-point",3,"ngModel","ngModelChange"],["mat-header-row",""],["mat-row",""]],template:function(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"mat-toolbar")(1,"h1"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t._UZ(4,"div",0),t.TgZ(5,"h3"),t._uU(6),t.ALo(7,"transloco"),t.qZA()(),t.TgZ(8,"mat-vertical-stepper",1,2)(10,"mat-step",3)(11,"form",4),t.YNc(12,Yt,2,3,"ng-template",5),t.TgZ(13,"mat-form-field",6)(14,"mat-label"),t._uU(15),t.ALo(16,"transloco"),t.qZA(),t.TgZ(17,"mat-select",7),t.YNc(18,Qt,2,2,"mat-option",8),t.qZA()(),t.TgZ(19,"mat-form-field",6)(20,"mat-label"),t._uU(21),t.ALo(22,"transloco"),t.qZA(),t._UZ(23,"input",9),t.qZA(),t.TgZ(24,"mat-form-field",10)(25,"mat-label"),t._uU(26),t.ALo(27,"transloco"),t.qZA(),t.TgZ(28,"mat-date-range-input",11),t._UZ(29,"input",12)(30,"input",13),t.qZA(),t._UZ(31,"mat-datepicker-toggle",14)(32,"mat-date-range-picker",null,15),t.qZA(),t.TgZ(34,"mat-form-field",6)(35,"mat-label"),t._uU(36),t.ALo(37,"transloco"),t.qZA(),t.TgZ(38,"mat-select",16),t.YNc(39,Jt,3,4,"mat-option",8),t.qZA(),t.TgZ(40,"mat-hint"),t._uU(41),t.ALo(42,"transloco"),t.qZA()(),t.TgZ(43,"mat-form-field",6)(44,"mat-label"),t._uU(45),t.ALo(46,"transloco"),t.qZA(),t.TgZ(47,"mat-select",17),t.YNc(48,It,3,4,"mat-option",8),t.qZA(),t.TgZ(49,"mat-hint"),t._uU(50),t.ALo(51,"transloco"),t.qZA()(),t.TgZ(52,"mat-form-field",6)(53,"mat-label"),t._uU(54),t.ALo(55,"transloco"),t.qZA(),t._UZ(56,"input",18),t.TgZ(57,"mat-hint"),t._uU(58),t.ALo(59,"transloco"),t.qZA()(),t.TgZ(60,"mat-form-field",6)(61,"mat-label"),t._uU(62),t.ALo(63,"transloco"),t.qZA(),t._UZ(64,"input",19),t.TgZ(65,"mat-hint"),t._uU(66),t.ALo(67,"transloco"),t.qZA()()(),t.TgZ(68,"div")(69,"button",20),t._uU(70),t.ALo(71,"transloco"),t.qZA()()(),t.TgZ(72,"mat-step",3)(73,"form",4),t.YNc(74,Gt,2,3,"ng-template",5),t.TgZ(75,"mat-form-field",6)(76,"mat-label"),t._uU(77),t.ALo(78,"transloco"),t.qZA(),t._UZ(79,"input",21),t.qZA()(),t.YNc(80,Bt,3,1,"mat-list",22),t.TgZ(81,"div")(82,"button",23),t._uU(83),t.ALo(84,"transloco"),t.qZA(),t.TgZ(85,"button",24),t.NdJ("click",function(){return i.onInitialRules()}),t._uU(86),t.ALo(87,"transloco"),t.qZA()()(),t.TgZ(88,"mat-step",25),t.YNc(89,$t,2,3,"ng-template",5),t.TgZ(90,"mat-toolbar")(91,"button",26),t._uU(92,"RESET RULES"),t.qZA()(),t.TgZ(93,"table",27),t.ynx(94,28),t.YNc(95,Et,2,0,"th",29),t.YNc(96,jt,2,1,"td",30),t.BQk(),t.ynx(97,31),t.YNc(98,Vt,3,3,"th",29),t.YNc(99,zt,2,1,"td",30),t.BQk(),t.ynx(100,32),t.YNc(101,Kt,3,3,"th",29),t.YNc(102,Xt,3,1,"td",30),t.BQk(),t.YNc(103,Wt,1,0,"tr",33),t.YNc(104,te,1,0,"tr",34),t.qZA(),t.TgZ(105,"button",23),t._uU(106),t.ALo(107,"transloco"),t.qZA(),t.TgZ(108,"button",35),t.NdJ("click",function(){return i.onSave()}),t._uU(109),t.ALo(110,"transloco"),t.qZA()(),t.TgZ(111,"mat-step"),t.YNc(112,ee,2,3,"ng-template",5),t.TgZ(113,"p"),t._uU(114),t.ALo(115,"transloco"),t.qZA(),t.TgZ(116,"p"),t._uU(117),t.ALo(118,"transloco"),t.qZA(),t.TgZ(119,"div")(120,"button",36),t.NdJ("click",function(){return i.onDisplayHabit()}),t._uU(121),t.ALo(122,"transloco"),t.qZA(),t.TgZ(123,"button",37),t.NdJ("click",function(){t.CHM(n);const u=t.MAs(9);return t.KtG(u.reset())}),t._uU(124),t.ALo(125,"transloco"),t.qZA()()()()}if(2&o){const n=t.MAs(33);t.xp6(2),t.Oqu(t.lcZ(3,40,"Habit.Habit")),t.xp6(4),t.Oqu(t.lcZ(7,42,"Common.Create")),t.xp6(4),t.Q6J("stepControl",i.firstFormGroup),t.xp6(1),t.Q6J("formGroup",i.firstFormGroup),t.xp6(4),t.Oqu(t.lcZ(16,44,"Award.TargetUser")),t.xp6(3),t.Q6J("ngForOf",i.arTargetUsers),t.xp6(3),t.Oqu(t.lcZ(22,46,"Common.Name")),t.xp6(5),t.Oqu(t.lcZ(27,48,"Award.Validity")),t.xp6(2),t.Q6J("rangePicker",n),t.xp6(3),t.Q6J("for",n),t.xp6(5),t.Oqu(t.lcZ(37,50,"Habit.Frequency")),t.xp6(3),t.Q6J("ngForOf",i.arFrequencies),t.xp6(2),t.Oqu(t.lcZ(42,52,"Habit.FrequencyHint")),t.xp6(4),t.Oqu(t.lcZ(46,54,"Habit.CompleteCategory")),t.xp6(3),t.Q6J("ngForOf",i.arCompleteCategories),t.xp6(2),t.Oqu(t.lcZ(51,56,"Habit.CompleteCategoryHint")),t.xp6(4),t.Oqu(t.lcZ(55,58,"Habit.CompleteCondition")),t.xp6(4),t.Oqu(t.lcZ(59,60,"Habit.CompleteConditionHint")),t.xp6(4),t.Oqu(t.lcZ(63,62,"Habit.StartDate")),t.xp6(4),t.Oqu(t.lcZ(67,64,"Habit.StartDateHint")),t.xp6(3),t.Q6J("disabled",!i.firstFormGroup.valid),t.xp6(1),t.Oqu(t.lcZ(71,66,"Common.Next")),t.xp6(2),t.Q6J("stepControl",i.secondFormGroup),t.xp6(1),t.Q6J("formGroup",i.secondFormGroup),t.xp6(4),t.Oqu(t.lcZ(78,68,"Habit.ContinuousCompletedCounts")),t.xp6(3),t.Q6J("ngForOf",i.contDays),t.xp6(3),t.Oqu(t.lcZ(84,70,"Common.Previous")),t.xp6(3),t.Oqu(t.lcZ(87,72,"Common.Next")),t.xp6(2),t.Q6J("completed",i.pointCompleted),t.xp6(5),t.Q6J("dataSource",i.arRules),t.xp6(10),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Oqu(t.lcZ(107,74,"Common.Previous")),t.xp6(2),t.Q6J("disabled",!i.pointCompleted),t.xp6(1),t.Oqu(t.lcZ(110,76,"Common.Next")),t.xp6(5),t.AsE("",t.lcZ(115,78,"AwardRuleGroupCreatedInfo1"),", ID: ",i.createdHabitID," "),t.xp6(3),t.Oqu(t.lcZ(118,80,"AwardRuleGroupCreatedInfo2")),t.xp6(4),t.Oqu(t.lcZ(122,82,"Common.Display")),t.xp6(3),t.Oqu(t.lcZ(125,84,"Common.CreateAnotherOne"))}},dependencies:[f.sg,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.On,r.sg,r.u,H.ey,U.lW,Z.C0,Z.VY,Z.Vq,Z.Ic,Z.fd,d.nW,d.wx,d.zY,d.By,d._g,_.KE,_.bx,_.hX,_.R9,w.Nt,V.i$,V.Tg,v.gD,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,y.Ye,A.Ot],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.input-point[_ngcontent-%COMP%]{text-align:center}"]}),e})();var ae=c(7556);function ne(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.TargetUser")))}function re(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const o=a.$implicit,i=t.oxw();t.xp6(1),t.AsE("",i.getUserDisplayAs(o.targetUser)," (",o.targetUser,")")}}function le(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Common.Name")))}function se(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.habitName," ")}}function ce(e,a){1&e&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Quiz.Date")))}function me(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.recordDateString)}}function ue(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Habit.SubID")))}function pe(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"td",20),t._uU(1),t.TgZ(2,"button",1),t.NdJ("click",function(){const l=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.onDisplayRecord(l))}),t.ALo(3,"transloco"),t.TgZ(4,"mat-icon"),t._uU(5,"launch"),t.qZA()(),t.TgZ(6,"button",22),t.NdJ("click",function(){const l=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.onDeleteRecord(l))}),t.ALo(7,"transloco"),t.TgZ(8,"mat-icon"),t._uU(9,"remove_circle"),t.qZA()()()}if(2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.subID," "),t.xp6(1),t.s9C("matTooltip",t.lcZ(3,3,"Common.Display")),t.xp6(4),t.s9C("matTooltip",t.lcZ(7,5,"Common.Delete"))}}function de(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Habit.CompleteFact")))}function _e(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.completeFact)}}function he(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Habit.Rule")))}function Ce(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.ruleID)}}function ge(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.ContinuousDays")))}function fe(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.continuousCount)}}function be(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Common.Comment")))}function Ze(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.comment)}}function Te(e,a){1&e&&t._UZ(0,"tr",23)}function Ae(e,a){1&e&&t._UZ(0,"tr",24)}let X=(()=>{class e{constructor(o,i,n,l){this.odataSrv=o,this.dialog=i,this.authService=n,this.uiUtilSrv=l,this.arRecords=[],this.displayedColumns=["targetUser","habitname","recordDate","subID","completeFact","ruleID","contDays","comment"],this.recordCount=0,this.isLoadingResults=!1,this.refreshEvent=new t.vpe}getUserDisplayAs(o){if(o&&this.authService.userDetail){const i=this.authService.userDetail.awardUsers.findIndex(n=>n.targetUser===o);if(-1!==i)return this.authService.userDetail.awardUsers[i].displayAs}return""}ngOnInit(){}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,Y.T)(this.sort.sortChange,this.paginator.page,this.refreshEvent).pipe((0,J.O)({}),(0,I.w)(()=>{const o=this.paginator.pageSize;return this.odataSrv.getUserHabitRecordViews(o,o*this.paginator.pageIndex,this.sort.active,this.sort.direction)}),(0,G.x)(()=>this.isLoadingResults=!1),(0,B.U)(o=>(this.recordCount=o.totalCount,o.items)),(0,$.K)(()=>(0,Q.of)([]))).subscribe({next:o=>this.arRecords=o,error:o=>this.uiUtilSrv.showSnackInfo(o)})}onCreateRecord(){this.uiUtilSrv.navigateHabitRecordCreatePage()}onRefreshList(){this.refreshEvent.emit()}resetPaging(){this.paginator.pageIndex=0}onDisplayRecord(o){this.uiUtilSrv.currentUserHabitRecord=o,this.uiUtilSrv.navigateHabitRecordDisplayPage()}onDeleteRecord(o){this.odataSrv.deleteUserHabitRecord(o.habitID,o.recordDateString,o.subID).subscribe({next:i=>{this.uiUtilSrv.showSnackInfo("Delete successfully")},error:i=>{this.uiUtilSrv.showSnackInfo(i)}})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p.CB),t.Y36(x.uw),t.Y36(ae.e),t.Y36(p.dM))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-habit-record-list"]],viewQuery:function(o,i){if(1&o&&(t.Gf(L.NW,5),t.Gf(q.YE,5)),2&o){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},decls:39,vars:11,consts:[[1,"toolbar-spacer"],["mat-icon-button","","color","primary",3,"matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","targetUser"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","habitname"],["matColumnDef","recordDate"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","subID"],["matColumnDef","completeFact"],["matColumnDef","ruleID"],["matColumnDef","contDays"],["matColumnDef","comment"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-icon-button","","color","warn",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""]],template:function(o,i){1&o&&(t.TgZ(0,"mat-toolbar")(1,"h1"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t._UZ(4,"div",0),t.TgZ(5,"button",1),t.NdJ("click",function(){return i.onCreateRecord()}),t.ALo(6,"transloco"),t.TgZ(7,"mat-icon"),t._uU(8,"add_circle"),t.qZA()()(),t.TgZ(9,"div",2)(10,"div",3)(11,"table",4),t.NdJ("matSortChange",function(){return i.resetPaging()}),t.ynx(12,5),t.YNc(13,ne,3,3,"th",6),t.YNc(14,re,2,2,"td",7),t.BQk(),t.ynx(15,8),t.YNc(16,le,3,3,"th",6),t.YNc(17,se,2,1,"td",7),t.BQk(),t.ynx(18,9),t.YNc(19,ce,3,3,"th",10),t.YNc(20,me,2,1,"td",7),t.BQk(),t.ynx(21,11),t.YNc(22,ue,3,3,"th",6),t.YNc(23,pe,10,7,"td",7),t.BQk(),t.ynx(24,12),t.YNc(25,de,3,3,"th",6),t.YNc(26,_e,2,1,"td",7),t.BQk(),t.ynx(27,13),t.YNc(28,he,3,3,"th",6),t.YNc(29,Ce,2,1,"td",7),t.BQk(),t.ynx(30,14),t.YNc(31,ge,3,3,"th",6),t.YNc(32,fe,2,1,"td",7),t.BQk(),t.ynx(33,15),t.YNc(34,be,3,3,"th",6),t.YNc(35,Ze,2,1,"td",7),t.BQk(),t.YNc(36,Te,1,0,"tr",16),t.YNc(37,Ae,1,0,"tr",17),t.qZA()(),t._UZ(38,"mat-paginator",18),t.qZA()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"Habit.Records")),t.xp6(3),t.s9C("matTooltip",t.lcZ(6,9,"Common.Create")),t.xp6(6),t.Q6J("dataSource",i.arRecords),t.xp6(25),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("length",i.recordCount)("pageSize",20))},dependencies:[U.lW,R.Hw,L.NW,q.YE,q.nU,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,y.Ye,k.gM,A.Ot],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}"]}),e})();function xe(e,a){if(1&e&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.targetUser),t.xp6(1),t.Oqu(o.displayAs)}}let W=(()=>{class e{constructor(o,i,n,l,u){this._formBuilder=o,this.activateRoute=i,this.uiUtilSrv=n,this.authService=l,this.odataSrv=u,this.uiMode=h.sk.Create,this.currentMode="Common.Display",this.currentObject=null,this.detailFormGroup=this._formBuilder.group({targetuserCtrl:new r.p4("",r.kI.required),habitIDCtrl:new r.p4(-1),dateCtrl:new r.p4(b()(),r.kI.required),subIDCtrl:new r.p4(1,r.kI.required),compFactCtrl:new r.p4(1,r.kI.required),commentCtrl:new r.p4("")})}get arTargetUsers(){return this.authService.userDetail?this.authService.userDetail.awardUsers:[]}getUserDisplayAs(o){if(o&&this.authService.userDetail){const i=this.authService.userDetail.awardUsers.findIndex(n=>n.targetUser===o);if(-1!==i)return this.authService.userDetail.awardUsers[i].displayAs}return""}get isDisplayMode(){return this.uiMode===h.sk.Display}get isCreateMode(){return this.uiMode===h.sk.Create}get isUpdateMode(){return this.uiMode===h.sk.Update}get isEditable(){return this.uiMode===h.sk.Create||this.uiMode===h.sk.Update}ngOnInit(){this.activateRoute.url.subscribe({next:o=>{o instanceof Array&&o.length>0&&("record"===o[0].path&&"display"===o[1].path?(this.uiMode=h.sk.Display,this.currentMode="Common.Display"):"record"===o[0].path&&"edit"===o[1].path&&(this.uiMode=h.sk.Update,this.currentMode="Common.Change")),this.uiUtilSrv.currentUserHabitRecord?(this.detailFormGroup.get("targetuserCtrl")?.setValue(this.uiUtilSrv.currentUserHabitRecord.targetUser),this.detailFormGroup.get("habitIDCtrl")?.setValue(this.uiUtilSrv.currentUserHabitRecord.habitID),this.detailFormGroup.get("dateCtrl")?.setValue(this.uiUtilSrv.currentUserHabitRecord.recordDate),this.detailFormGroup.get("subIDCtrl")?.setValue(this.uiUtilSrv.currentUserHabitRecord.subID),this.detailFormGroup.get("compFactCtrl")?.setValue(this.uiUtilSrv.currentUserHabitRecord.completeFact),this.detailFormGroup.get("commentCtrl")?.setValue(this.uiUtilSrv.currentUserHabitRecord.comment),this.uiMode===h.sk.Display?this.detailFormGroup.disable():this.detailFormGroup.enable(),this.uiUtilSrv.clearHabitRecordDisplay()):(this.uiMode=h.sk.Invalid,this.detailFormGroup.disable())},error:o=>{this.uiUtilSrv.showSnackInfo(o)}})}onOK(){}onReturnToList(){this.uiUtilSrv.navigateHabitRecordListPage()}onCreateNewOne(){this.detailFormGroup.reset()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(r.QS),t.Y36(O.gz),t.Y36(p.dM),t.Y36(p.e8),t.Y36(p.CB))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-habit-record-detail"]],decls:59,vars:42,consts:[[3,"formGroup"],["appearance","fill",1,"control-full-width"],["required","","formControlName","targetuserCtrl"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","formControlName","habitIDCtrl"],["appearance","fill"],["matInput","","formControlName","dateCtrl",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["matInput","","type","number","formControlName","subIDCtrl"],["matInput","","type","number","formControlName","compFactCtrl"],["matInput","","type","string","formControlName","commentCtrl"],["mat-button","","color","primary",3,"disabled","click"],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"],[3,"value"]],template:function(o,i){if(1&o&&(t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.ALo(7,"transloco"),t.qZA()(),t.TgZ(8,"mat-card-content")(9,"form",0)(10,"mat-form-field",1)(11,"mat-label"),t._uU(12),t.ALo(13,"transloco"),t.qZA(),t.TgZ(14,"mat-select",2),t.YNc(15,xe,2,2,"mat-option",3),t.qZA()(),t.TgZ(16,"mat-form-field",1)(17,"mat-label"),t._uU(18,"#"),t.qZA(),t._UZ(19,"input",4),t.qZA(),t.TgZ(20,"mat-form-field",5)(21,"mat-label"),t._uU(22),t.ALo(23,"transloco"),t.qZA(),t._UZ(24,"input",6)(25,"mat-datepicker-toggle",7)(26,"mat-datepicker",null,8),t.qZA(),t.TgZ(28,"mat-form-field",1)(29,"mat-label"),t._uU(30),t.ALo(31,"transloco"),t.qZA(),t._UZ(32,"input",9),t.TgZ(33,"mat-hint"),t._uU(34),t.ALo(35,"transloco"),t.qZA()(),t.TgZ(36,"mat-form-field",1)(37,"mat-label"),t._uU(38),t.ALo(39,"transloco"),t.qZA(),t._UZ(40,"input",10),t.TgZ(41,"mat-hint"),t._uU(42),t.ALo(43,"transloco"),t.qZA()(),t.TgZ(44,"mat-form-field",1)(45,"mat-label"),t._uU(46),t.ALo(47,"transloco"),t.qZA(),t._UZ(48,"input",11),t.qZA()()(),t.TgZ(49,"mat-card-actions")(50,"button",12),t.NdJ("click",function(){return i.onOK()}),t._uU(51),t.ALo(52,"transloco"),t.qZA(),t.TgZ(53,"button",13),t.NdJ("click",function(){return i.onReturnToList()}),t._uU(54),t.ALo(55,"transloco"),t.qZA(),t.TgZ(56,"button",14),t.NdJ("click",function(){return i.onCreateNewOne()}),t._uU(57),t.ALo(58,"transloco"),t.qZA()()()),2&o){const n=t.MAs(27);t.xp6(3),t.Oqu(t.lcZ(4,18,"Habit.Record")),t.xp6(3),t.Oqu(t.lcZ(7,20,i.currentMode)),t.xp6(3),t.Q6J("formGroup",i.detailFormGroup),t.xp6(3),t.Oqu(t.lcZ(13,22,"Award.TargetUser")),t.xp6(3),t.Q6J("ngForOf",i.arTargetUsers),t.xp6(7),t.Oqu(t.lcZ(23,24,"Quiz.Date")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(5),t.Oqu(t.lcZ(31,26,"Habit.SubID")),t.xp6(4),t.Oqu(t.lcZ(35,28,"Habit.SubIDHint")),t.xp6(4),t.Oqu(t.lcZ(39,30,"Habit.CompleteFact")),t.xp6(4),t.Oqu(t.lcZ(43,32,"Habit.CompleteFactHint")),t.xp6(4),t.Oqu(t.lcZ(47,34,"Common.Comment")),t.xp6(4),t.Q6J("disabled",!(i.isEditable&&i.detailFormGroup.valid)),t.xp6(1),t.Oqu(t.lcZ(52,36,"Common.Save")),t.xp6(3),t.Oqu(t.lcZ(55,38,"Common.ReturnToList")),t.xp6(2),t.Q6J("disabled",!i.isDisplayMode),t.xp6(1),t.Oqu(t.lcZ(58,40,"Common.CreateAnotherOne"))}},dependencies:[f.sg,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.sg,r.u,H.ey,U.lW,C.a8,C.dk,C.dn,C.n5,C.$j,C.hq,d.Mq,d.hl,d.nW,_.KE,_.bx,_.hX,_.R9,w.Nt,v.gD,A.Ot]}),e})();var tt=c(4128),Ue=c(6709);function qe(e,a){1&e&&(t._uU(0),t.ALo(1,"transloco")),2&e&&t.Oqu(t.lcZ(1,1,"Habit.PickAnUser"))}function He(e,a){if(1&e&&(t.TgZ(0,"mat-option",27),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.targetUser),t.xp6(1),t.Oqu(o.displayAs)}}function ve(e,a){1&e&&(t._uU(0),t.ALo(1,"transloco")),2&e&&t.Oqu(t.lcZ(1,1,"Habit.AvailableHabits"))}function De(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1,"ID"),t.qZA())}function ye(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.HabitID)}}function we(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Common.Name")))}function Oe(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.HabitName)}}function Le(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Habit.Frequency")))}function Ne(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const o=a.$implicit,i=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,i.getHabitFrequencyName(o.Frequency)))}}function Se(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Habit.CompleteCategory")))}function Re(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const o=a.$implicit,i=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,i.getHabitCompleteCategoryName(o.CompleteCategory)))}}function ke(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Habit.CompleteFact")))}function Pe(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"div")(1,"mat-checkbox",33),t.NdJ("ngModelChange",function(n){t.CHM(o);const l=t.oxw().$implicit;return t.KtG(l.CompleteFact=n)}),t.qZA()()}if(2&e){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",o.CompleteFact)}}function Fe(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"div")(1,"mat-form-field")(2,"input",34),t.NdJ("ngModelChange",function(n){t.CHM(o);const l=t.oxw().$implicit;return t.KtG(l.CompleteFact=n)}),t.ALo(3,"transloco"),t.qZA()()()}if(2&e){const o=t.oxw().$implicit;t.xp6(2),t.s9C("placeholder",t.lcZ(3,2,"Value")),t.Q6J("ngModel",o.CompleteFact)}}function Me(e,a){1&e&&(t.TgZ(0,"div"),t._uU(1,"Nothing display"),t.qZA())}function Ye(e,a){if(1&e&&(t.TgZ(0,"td",29)(1,"div",30),t.YNc(2,Pe,2,1,"div",31),t.YNc(3,Fe,4,4,"div",31),t.YNc(4,Me,2,0,"div",32),t.qZA()()),2&e){const o=a.$implicit;t.xp6(1),t.Q6J("ngSwitch",o.completeCategoryString),t.xp6(1),t.Q6J("ngSwitchCase",0),t.xp6(1),t.Q6J("ngSwitchCase",1)}}function Qe(e,a){1&e&&t._UZ(0,"tr",35)}function Je(e,a){1&e&&t._UZ(0,"tr",36)}function Ie(e,a){1&e&&(t._uU(0),t.ALo(1,"transloco")),2&e&&t.Oqu(t.lcZ(1,1,"Common.Done"))}class Ge{constructor(){this.HabitID=void 0,this.HabitName="",this.Frequency=m.Hs.Daily,this.CompleteCategory=m.Kd.NumberOfTimes,this.CompleteFact=null}get completeCategoryString(){return(+this.CompleteCategory).toString()}}let Be=(()=>{class e{constructor(o,i,n,l){this._formBuilder=o,this.uiUtilSrv=i,this.authService=n,this.odataSrv=l,this.currentObject=null,this.arHabits=[],this.displayedColumns=["hid","name","frequency","compCategory","compFact"],this.firstFormGroup=this._formBuilder.group({targetuserCtrl:new r.p4("",r.kI.required),dateCtrl:new r.p4(b()(),r.kI.required)})}get arTargetUsers(){return this.authService.userDetail?this.authService.userDetail.awardUsers:[]}getUserDisplayAs(o){if(o&&this.authService.userDetail){const i=this.authService.userDetail.awardUsers.findIndex(n=>n.targetUser===o);if(-1!==i)return this.authService.userDetail.awardUsers[i].displayAs}return""}getHabitCompleteCategoryName(o){return(0,m.E0)(o)}getHabitFrequencyName(o){return(0,m.lC)(o)}ngOnInit(){}onUserSelected(){let o=this.firstFormGroup.get("targetuserCtrl")?.value,i=this.firstFormGroup.get("dateCtrl")?.value.format(m.Jt);this.odataSrv.getUserHabits(100,0,void 0,void 0,`TargetUser eq '${o}' and ValidFrom le ${i} and ValidTo ge ${i}`).subscribe({next:n=>{this.arHabits=[],n.items.forEach(l=>{let u=new Ge;u.HabitID=l.ID,u.HabitName=l.name,u.Frequency=l.frequency,u.CompleteCategory=l.completeCategory,u.CompleteFact=null,this.arHabits.push(u)})},error:n=>{this.uiUtilSrv.showSnackInfo(n,1500)}})}get isHabitStepCompleted(){if(!this.arHabits)return!1;let o=!1;return this.arHabits.forEach(i=>{i.CompleteFact&&(o=!0)}),o}onSaveRecord(){let o=[];this.arHabits.forEach(i=>{if(null!==i.CompleteFact){const n=new m.Dh;n.completeFact=+i.CompleteFact,n.habitID=i.HabitID,n.recordDate=this.firstFormGroup.get("dateCtrl")?.value,o.push(this.odataSrv.createUserHabitRecord(n))}}),(0,tt.D)(o).subscribe({next:i=>{console.log(i)},error:i=>{this.uiUtilSrv.showSnackInfo(i,1500)}})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(r.QS),t.Y36(p.dM),t.Y36(p.e8),t.Y36(p.CB))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-habit-record-create"]],decls:64,vars:35,consts:[[1,"toolbar-spacer"],["linear",""],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["appearance","fill",1,"control-full-width"],["required","","formControlName","targetuserCtrl"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill"],["matInput","","formControlName","dateCtrl",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["mat-button","","color","primary","matStepperNext","",3,"disabled","click"],[3,"completed"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","hid"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","frequency"],["matColumnDef","compCategory"],["matColumnDef","compFact"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-button","","matStepperPrevious",""],["mat-button","","color","warn",3,"click"],[3,"value"],["mat-header-cell",""],["mat-cell",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"ngModel","ngModelChange"],["matInput","","type","number","name","compfact_num",3,"placeholder","ngModel","ngModelChange"],["mat-header-row",""],["mat-row",""]],template:function(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"mat-toolbar")(1,"h1"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t._UZ(4,"div",0),t.qZA(),t.TgZ(5,"mat-vertical-stepper",1,2)(7,"mat-step",3)(8,"form",4),t.YNc(9,qe,2,3,"ng-template",5),t.TgZ(10,"mat-form-field",6)(11,"mat-label"),t._uU(12),t.ALo(13,"transloco"),t.qZA(),t.TgZ(14,"mat-select",7),t.YNc(15,He,2,2,"mat-option",8),t.qZA()(),t.TgZ(16,"mat-form-field",9)(17,"mat-label"),t._uU(18),t.ALo(19,"transloco"),t.qZA(),t._UZ(20,"input",10)(21,"mat-datepicker-toggle",11)(22,"mat-datepicker",null,12),t.qZA()(),t.TgZ(24,"div")(25,"button",13),t.NdJ("click",function(){return i.onUserSelected()}),t._uU(26),t.ALo(27,"transloco"),t.qZA()()(),t.TgZ(28,"mat-step",14),t.YNc(29,ve,2,3,"ng-template",5),t.TgZ(30,"table",15),t.ynx(31,16),t.YNc(32,De,2,0,"th",17),t.YNc(33,ye,2,1,"td",18),t.BQk(),t.ynx(34,19),t.YNc(35,we,3,3,"th",17),t.YNc(36,Oe,2,1,"td",18),t.BQk(),t.ynx(37,20),t.YNc(38,Le,3,3,"th",17),t.YNc(39,Ne,3,3,"td",18),t.BQk(),t.ynx(40,21),t.YNc(41,Se,3,3,"th",17),t.YNc(42,Re,3,3,"td",18),t.BQk(),t.ynx(43,22),t.YNc(44,ke,3,3,"th",17),t.YNc(45,Ye,5,3,"td",18),t.BQk(),t.YNc(46,Qe,1,0,"tr",23),t.YNc(47,Je,1,0,"tr",24),t.qZA(),t.TgZ(48,"div")(49,"button",25),t._uU(50),t.ALo(51,"transloco"),t.qZA(),t.TgZ(52,"button",13),t.NdJ("click",function(){return i.onSaveRecord()}),t._uU(53),t.ALo(54,"transloco"),t.qZA()()(),t.TgZ(55,"mat-step"),t.YNc(56,Ie,2,3,"ng-template",5),t.TgZ(57,"p"),t._uU(58),t.ALo(59,"transloco"),t.qZA(),t.TgZ(60,"div")(61,"button",26),t.NdJ("click",function(){t.CHM(n);const u=t.MAs(6);return t.KtG(u.reset())}),t._uU(62),t.ALo(63,"transloco"),t.qZA()()()()}if(2&o){const n=t.MAs(23);t.xp6(2),t.Oqu(t.lcZ(3,19,"Habit.Records")),t.xp6(5),t.Q6J("stepControl",i.firstFormGroup),t.xp6(1),t.Q6J("formGroup",i.firstFormGroup),t.xp6(4),t.Oqu(t.lcZ(13,21,"Award.TargetUser")),t.xp6(3),t.Q6J("ngForOf",i.arTargetUsers),t.xp6(3),t.Oqu(t.lcZ(19,23,"Quiz.Date")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(4),t.Q6J("disabled",!i.firstFormGroup.valid),t.xp6(1),t.Oqu(t.lcZ(27,25,"Common.Next")),t.xp6(2),t.Q6J("completed",i.isHabitStepCompleted),t.xp6(2),t.Q6J("dataSource",i.arHabits),t.xp6(16),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(3),t.Oqu(t.lcZ(51,27,"Common.Previous")),t.xp6(2),t.Q6J("disabled",!i.isHabitStepCompleted),t.xp6(1),t.Oqu(t.lcZ(54,29,"Common.Next")),t.xp6(5),t.Oqu(t.lcZ(59,31,"Habit.HabitRecordCreatedInfo")),t.xp6(4),t.Oqu(t.lcZ(63,33,"Common.CreateAnotherOne"))}},dependencies:[f.sg,f.RF,f.n9,f.ED,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.On,r.sg,r.u,H.ey,U.lW,Ue.oG,Z.C0,Z.VY,Z.Vq,Z.Ic,Z.fd,d.Mq,d.hl,d.nW,_.KE,_.hX,_.R9,w.Nt,v.gD,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,y.Ye,A.Ot],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}"]}),e})();var $e=c(4850);function Ee(e,a){if(1&e&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.targetUser),t.xp6(1),t.Oqu(o.displayAs)}}function je(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1,"#"),t.qZA())}function Ve(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"td",24),t._uU(1),t.TgZ(2,"button",25),t.NdJ("click",function(){const l=t.CHM(o).$implicit,u=t.oxw(2);return t.KtG(u.onDeleteManualPoint(l.ID))}),t.ALo(3,"transloco"),t.TgZ(4,"mat-icon"),t._uU(5,"remove_circle"),t.qZA()()()}if(2&e){const o=a.$implicit;t.xp6(1),t.hij("",o.ID," | "),t.xp6(1),t.s9C("matTooltip",t.lcZ(3,2,"Common.Delete"))}}function ze(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.TargetUser")))}function Ke(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit,i=t.oxw(2);t.xp6(1),t.AsE("",i.getUserDisplayAs(o.targetUser)," (",o.targetUser,")")}}function Xe(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Quiz.Date")))}function We(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.recordDateString)}}function to(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.Point")))}function eo(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.point)}}function oo(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Common.Comment")))}function io(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.comment)}}function ao(e,a){1&e&&t._UZ(0,"tr",26)}function no(e,a){1&e&&t._UZ(0,"tr",27)}function ro(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"div",11)(1,"mat-toolbar")(2,"h3"),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t._UZ(5,"div",0),t.TgZ(6,"button",7),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.onHideManualPoints())}),t.ALo(7,"transloco"),t.TgZ(8,"mat-icon"),t._uU(9,"visibility_off"),t.qZA()()(),t.TgZ(10,"div",12)(11,"table",13),t.ynx(12,14),t.YNc(13,je,2,0,"th",15),t.YNc(14,Ve,6,4,"td",16),t.BQk(),t.ynx(15,17),t.YNc(16,ze,3,3,"th",15),t.YNc(17,Ke,2,2,"td",16),t.BQk(),t.ynx(18,18),t.YNc(19,Xe,3,3,"th",15),t.YNc(20,We,2,1,"td",16),t.BQk(),t.ynx(21,19),t.YNc(22,to,3,3,"th",15),t.YNc(23,eo,2,1,"td",16),t.BQk(),t.ynx(24,20),t.YNc(25,oo,3,3,"th",15),t.YNc(26,io,2,1,"td",16),t.BQk(),t.YNc(27,ao,1,0,"tr",21),t.YNc(28,no,1,0,"tr",22),t.qZA()()()}if(2&e){const o=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,5,"Award.Point")),t.xp6(3),t.s9C("matTooltip",t.lcZ(7,7,"Common.Hide")),t.xp6(5),t.Q6J("dataSource",o.dataSourceManualPoints),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumnsManualPoint),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumnsManualPoint)}}function lo(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.TargetUser")))}function so(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit,i=t.oxw(2);t.xp6(1),t.AsE("",i.getUserDisplayAs(o.targetUser)," (",o.targetUser,")")}}function co(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Quiz.Date")))}function mo(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.recordDateString)}}function uo(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1,"ID"),t.qZA())}function po(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.habitID)}}function _o(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Common.Name")))}function ho(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.habitName)}}function Co(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1,"From"),t.qZA())}function go(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.ruleDaysFrom)}}function fo(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1,"To"),t.qZA())}function bo(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.ruleDaysTo)}}function Zo(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.Point")))}function To(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.rulePoint)}}function Ao(e,a){1&e&&t._UZ(0,"tr",26)}function xo(e,a){1&e&&t._UZ(0,"tr",27)}function Uo(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"div",11)(1,"mat-toolbar")(2,"h3"),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t._UZ(5,"div",0),t.TgZ(6,"button",7),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.onHideHabitPoints())}),t.ALo(7,"transloco"),t.TgZ(8,"mat-icon"),t._uU(9,"visibility_off"),t.qZA()()(),t.TgZ(10,"div",12)(11,"table",13),t.ynx(12,17),t.YNc(13,lo,3,3,"th",15),t.YNc(14,so,2,2,"td",16),t.BQk(),t.ynx(15,18),t.YNc(16,co,3,3,"th",15),t.YNc(17,mo,2,1,"td",16),t.BQk(),t.ynx(18,28),t.YNc(19,uo,2,0,"th",15),t.YNc(20,po,2,1,"td",16),t.BQk(),t.ynx(21,29),t.YNc(22,_o,3,3,"th",15),t.YNc(23,ho,2,1,"td",16),t.BQk(),t.ynx(24,30),t.YNc(25,Co,2,0,"th",15),t.YNc(26,go,2,1,"td",16),t.BQk(),t.ynx(27,31),t.YNc(28,fo,2,0,"th",15),t.YNc(29,bo,2,1,"td",16),t.BQk(),t.ynx(30,19),t.YNc(31,Zo,3,3,"th",15),t.YNc(32,To,2,1,"td",16),t.BQk(),t.YNc(33,Ao,1,0,"tr",21),t.YNc(34,xo,1,0,"tr",22),t.qZA()()()}if(2&e){const o=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,5,"Award.Point")),t.xp6(3),t.s9C("matTooltip",t.lcZ(7,7,"Common.Hide")),t.xp6(5),t.Q6J("dataSource",o.dataSourceHabitPoints),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumnsHabitPoint),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumnsHabitPoint)}}function qo(e,a){if(1&e&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.targetUser),t.xp6(1),t.hij(" ",o.displayAs," ")}}let Ho=(()=>{class e{constructor(o,i,n,l){this.odataSrv=o,this.dialog=i,this.authService=n,this.uiUtilSrv=l,this.displayedColumnsManualPoint=["id","targetUser","recordDate","point","comment"],this.dataSourceManualPoints=[],this.displayedColumnsHabitPoint=["targetUser","recordDate","habitid","habitName","ruleDaysFrom","ruleDaysTo","point"],this.dataSourceHabitPoints=[],this.selectedUser=null,this.selectedPeriod="2",this.showManualPointResult=!1,this.showHabitPointResult=!1}get arTargetUsers(){return this.authService.userDetail?this.authService.userDetail.awardUsers:[]}getUserDisplayAs(o){if(o&&this.authService.userDetail){const i=this.authService.userDetail.awardUsers.findIndex(n=>n.targetUser===o);if(-1!==i)return this.authService.userDetail.awardUsers[i].displayAs}return""}ngOnInit(){this.selectedPeriod="2"}onReportParameterSelectionChange(o){null!==this.selectedUser&&this.refreshData()}refreshData(){let o=b()(),i=b().duration(1,"months").asDays();"1"===this.selectedPeriod&&(i=b().duration(1,"weeks").asDays());let n=o.clone().subtract(i,"days"),l=[];const u=i;for(;i>=0;)l.push(o.clone().subtract(i,"days").format(m.Jt)),i--;let T=`TargetUser eq '${this.selectedUser}' and RecordDate ge ${n.format(m.Jt)} and RecordDate le ${o.format(m.Jt)}`,g=[];(0,tt.D)([this.odataSrv.getHabitOpeningPointsByUserDate(this.selectedUser,u),this.odataSrv.getHabitPointsByUserDateReport(T),this.odataSrv.getUserOpeningPointReport(this.selectedUser,u),this.odataSrv.getUserHabitPointReports(T)]).subscribe({next:D=>{let et=D[1],ot=D[3],it=[],at=[],nt=[],N=0,S=0,rt=D[0]+D[2];l.forEach(lt=>{let st=et.findIndex(P=>P.recordDateString===lt);N=-1!==st?et[st].point:0,it.push(N);let ct=ot.findIndex(P=>P.recordDateString===lt);-1!==ct?S+=ot[ct].point:S=0,at.push(S),rt+=N+S,nt.push(rt)}),g.push({name:"Points from Habits",type:"bar",emphasis:{focus:"series"},data:it}),g.push({name:"Manual Points",type:"bar",emphasis:{focus:"series"},data:at}),g.push({name:"Total Points",type:"bar",emphasis:{focus:"series"},data:nt}),this.chartOption={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:l}],yAxis:[{type:"value"}],series:g}},error:D=>{this.uiUtilSrv.showSnackInfo(D)}})}onChartClick(o){0===o.seriesIndex?(this.showHabitPointResult=!0,this.dataSourceHabitPoints=[],this.odataSrv.getUserHabitRecordViews(100,0,void 0,void 0,`RecordDate eq ${o.name} and TargetUser eq '${this.selectedUser}' and RulePoint gt 0`).subscribe({next:n=>{this.dataSourceHabitPoints=n.items},error:n=>{this.uiUtilSrv.showSnackInfo(n)}})):1===o.seriesIndex&&o.name&&(this.showManualPointResult=!0,this.dataSourceManualPoints=[],this.odataSrv.getHabitPoints(`RecordDate eq ${o.name} and TargetUser eq '${this.selectedUser}'`).subscribe({next:n=>{this.dataSourceManualPoints=n},error:n=>{this.uiUtilSrv.showSnackInfo(n)}}))}onHideManualPoints(){this.showManualPointResult=!1}onHideHabitPoints(){this.showHabitPointResult=!1}onDeleteManualPoint(o){this.odataSrv.deleteHabitPoint(o).subscribe({next:i=>{this.uiUtilSrv.showSnackInfo("DONE"),this.showManualPointResult=!1,this.refreshData()},error:i=>{this.uiUtilSrv.showSnackInfo(i)}})}onCreatePoint(){this.dialog.open(vo,{width:"600px",closeOnNavigation:!1,data:new m._Y}).afterClosed().subscribe(i=>{i&&this.odataSrv.createHabitPoint(i).subscribe({next:n=>{this.refreshData()},error:n=>{this.uiUtilSrv.showSnackInfo(n)}})})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p.CB),t.Y36(x.uw),t.Y36(p.e8),t.Y36(p.dM))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-habit-points-list"]],decls:32,vars:24,consts:[[1,"toolbar-spacer"],[1,"form-field-item"],["required","",3,"ngModel","ngModelChange","selectionChange"],["value","1"],["value","2"],[1,"form-field-user"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary",3,"matTooltip","click"],["echarts","",1,"demo-chart",2,"width","100%","height","450px",3,"options","chartClick"],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"value"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","targetUser"],["matColumnDef","recordDate"],["matColumnDef","point"],["matColumnDef","comment"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""],["matColumnDef","habitid"],["matColumnDef","habitName"],["matColumnDef","ruleDaysFrom"],["matColumnDef","ruleDaysTo"]],template:function(o,i){1&o&&(t.TgZ(0,"mat-toolbar")(1,"h1"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t._UZ(4,"div",0),t.qZA(),t.TgZ(5,"mat-toolbar")(6,"mat-form-field",1)(7,"mat-label"),t._uU(8),t.ALo(9,"transloco"),t.qZA(),t.TgZ(10,"mat-select",2),t.NdJ("ngModelChange",function(l){return i.selectedPeriod=l})("selectionChange",function(l){return i.onReportParameterSelectionChange(l)}),t.TgZ(11,"mat-option",3),t._uU(12),t.ALo(13,"transloco"),t.qZA(),t.TgZ(14,"mat-option",4),t._uU(15),t.ALo(16,"transloco"),t.qZA()()(),t.TgZ(17,"mat-form-field",5)(18,"mat-label"),t._uU(19),t.ALo(20,"transloco"),t.qZA(),t.TgZ(21,"mat-select",2),t.NdJ("ngModelChange",function(l){return i.selectedUser=l})("selectionChange",function(l){return i.onReportParameterSelectionChange(l)}),t.YNc(22,Ee,2,2,"mat-option",6),t.qZA()(),t.TgZ(23,"button",7),t.NdJ("click",function(){return i.onCreatePoint()}),t.ALo(24,"transloco"),t.TgZ(25,"mat-icon"),t._uU(26,"add_circle"),t.qZA()()(),t._UZ(27,"mat-divider"),t.TgZ(28,"div",8),t.NdJ("chartClick",function(l){return i.onChartClick(l)}),t.qZA(),t._UZ(29,"mat-divider"),t.YNc(30,ro,29,9,"div",9),t.YNc(31,Uo,35,9,"div",9)),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,12,"Award.Point")),t.xp6(6),t.Oqu(t.lcZ(9,14,"Habit.Frequency")),t.xp6(2),t.Q6J("ngModel",i.selectedPeriod),t.xp6(2),t.Oqu(t.lcZ(13,16,"Habit.ByWeek")),t.xp6(3),t.Oqu(t.lcZ(16,18,"Habit.ByMonth")),t.xp6(4),t.Oqu(t.lcZ(20,20,"Award.TargetUser")),t.xp6(2),t.Q6J("ngModel",i.selectedUser),t.xp6(1),t.Q6J("ngForOf",i.arTargetUsers),t.xp6(1),t.s9C("matTooltip",t.lcZ(24,22,"Common.Create")),t.xp6(5),t.Q6J("options",i.chartOption),t.xp6(2),t.Q6J("ngIf",i.showManualPointResult),t.xp6(1),t.Q6J("ngIf",i.showHabitPointResult))},dependencies:[f.sg,f.O5,r.JJ,r.Q7,r.On,H.ey,U.lW,$e.d,R.Hw,_.KE,_.hX,v.gD,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,y.Ye,k.gM,M._w,A.Ot],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.form-field-item[_ngcontent-%COMP%]{width:150px}.form-field-user[_ngcontent-%COMP%]{width:200px}"]}),e})(),vo=(()=>{class e{constructor(o,i,n,l){this.dialogRef=o,this.oDataSrv=i,this.authService=n,this.data=l}onNoClick(){this.dialogRef.close()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(x.so),t.Y36(p.CB),t.Y36(p.e8),t.Y36(x.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-habit-point-crtdlg"]],decls:35,vars:27,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"example-form"],["appearance","fill",1,"control-full-width"],["name","targetuser",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill"],["matInput","","name","recorddate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["matInput","","type","number","name","point",3,"ngModel","ngModelChange"],["matInput","","name","comment",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"disabled","mat-dialog-close"],[3,"value"]],template:function(o,i){if(1&o&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"transloco"),t.qZA(),t.TgZ(3,"div",1)(4,"form",2)(5,"mat-form-field",3)(6,"mat-label"),t._uU(7),t.ALo(8,"transloco"),t.qZA(),t.TgZ(9,"mat-select",4),t.NdJ("ngModelChange",function(l){return i.data.targetUser=l}),t.YNc(10,qo,2,2,"mat-option",5),t.qZA()(),t.TgZ(11,"mat-form-field",6)(12,"mat-label"),t._uU(13),t.ALo(14,"transloco"),t.qZA(),t.TgZ(15,"input",7),t.NdJ("ngModelChange",function(l){return i.data.recordDate=l}),t.qZA(),t._UZ(16,"mat-datepicker-toggle",8)(17,"mat-datepicker",null,9),t.qZA(),t.TgZ(19,"mat-form-field",3)(20,"mat-label"),t._uU(21),t.ALo(22,"transloco"),t.qZA(),t.TgZ(23,"input",10),t.NdJ("ngModelChange",function(l){return i.data.point=l}),t.qZA()(),t.TgZ(24,"mat-form-field",3)(25,"mat-label"),t._uU(26),t.ALo(27,"transloco"),t.qZA(),t.TgZ(28,"input",11),t.NdJ("ngModelChange",function(l){return i.data.comment=l}),t.qZA()()()(),t.TgZ(29,"div",12)(30,"button",13),t.NdJ("click",function(){return i.onNoClick()}),t._uU(31),t.ALo(32,"transloco"),t.qZA(),t.TgZ(33,"button",14),t._uU(34,"OK"),t.qZA()()),2&o){const n=t.MAs(18);t.xp6(1),t.Oqu(t.lcZ(2,15,"Habit.CreateManualPoint")),t.xp6(6),t.Oqu(t.lcZ(8,17,"Award.TargetUser")),t.xp6(2),t.Q6J("ngModel",i.data.targetUser),t.xp6(1),t.Q6J("ngForOf",null==i.authService.userDetail?null:i.authService.userDetail.awardUsers),t.xp6(3),t.Oqu(t.lcZ(14,19,"Quiz.Date")),t.xp6(2),t.Q6J("matDatepicker",n)("ngModel",i.data.recordDate),t.xp6(1),t.Q6J("for",n),t.xp6(5),t.Oqu(t.lcZ(22,21,"Award.Point")),t.xp6(2),t.Q6J("ngModel",i.data.point),t.xp6(3),t.Oqu(t.lcZ(27,23,"Common.Comment")),t.xp6(2),t.Q6J("ngModel",i.data.comment),t.xp6(3),t.Oqu(t.lcZ(32,25,"Common.NoThanks")),t.xp6(2),t.Q6J("disabled",!i.data.isValid)("mat-dialog-close",i.data)}},dependencies:[f.sg,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.On,r.F,H.ey,U.lW,d.Mq,d.hl,d.nW,x.ZT,x.uh,x.xY,x.H8,_.KE,_.hX,_.R9,w.Nt,v.gD,A.Ot],encapsulation:2}),e})();const Do=[{path:"",component:E},{path:"points",component:Ho},{path:"list",component:E},{path:"create",component:ie},{path:"edit/:id",component:j},{path:"display/:id",component:j},{path:"record",component:X},{path:"record/list",component:X},{path:"record/create",component:Be},{path:"record/edit",component:W},{path:"record/display",component:W}];let yo=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[O.Bz.forChild(Do),O.Bz]}),e})(),wo=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.ez,r.u5,r.UX,mt.U,A.y4,ut.D,M.Ns,yo]}),e})()}}]);