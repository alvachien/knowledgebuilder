!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"U+IK":function(e,n,i){"use strict";i.r(n),i.d(n,"KnowledgeItemsModule",function(){return $t});var a=i("ofXK"),c=i("3Pt+"),r=i("0LvA"),l=i("lR5k"),d=i("QPBi"),u=i("jIBr"),b=i("dcRk"),s=i("tyNb"),m=i("fXoL"),p=i("M9IT"),f=i("Dh3D"),h=i("VRyK"),g=i("LRne"),v=i("JX91"),C=i("eIep"),E=i("lJxs"),y=i("JIr8"),w=i("VHTt"),V=i("o0su"),U=i("/t3+"),k=i("bTqV"),I=i("Qu3c"),M=i("NFeN"),D=i("+0xr");function F(t,e){1&t&&(m.Vb(0,"th",17),m.Ec(1,"#"),m.Ub())}function x(t,e){if(1&t){var o=m.Wb();m.Vb(0,"td",18),m.Vb(1,"div"),m.Ec(2),m.Vb(3,"button",19),m.ic(4,"transloco"),m.Vb(5,"mat-icon"),m.Ec(6,"launch"),m.Ub(),m.Ub(),m.Vb(7,"button",20),m.ic(8,"transloco"),m.Vb(9,"mat-icon"),m.Ec(10,"edit"),m.Ub(),m.Ub(),m.Vb(11,"button",21),m.dc("click",function(){m.wc(o);var t=e.$implicit;return m.hc().onDeleteItem(t.ID)}),m.ic(12,"transloco"),m.Vb(13,"mat-icon"),m.Ec(14,"remove_circle"),m.Ub(),m.Ub(),m.Ub(),m.Ub()}if(2&t){var n=e.$implicit,i=m.hc();m.Eb(2),m.Gc(" ",n.ID," "),m.Eb(1),m.pc("routerLink","display/",n.ID,""),m.oc("matTooltip",m.jc(4,9,"Common.Display")),m.nc("disabled",!i.isExpertMode),m.Eb(4),m.pc("routerLink","edit/",n.ID,""),m.oc("matTooltip",m.jc(8,11,"Common.Change")),m.nc("disabled",!i.isExpertMode),m.Eb(4),m.oc("matTooltip",m.jc(12,13,"Common.Delete")),m.nc("disabled",!i.isExpertMode)}}function j(t,e){1&t&&(m.Vb(0,"th",17),m.Ec(1),m.ic(2,"transloco"),m.Ub()),2&t&&(m.Eb(1),m.Fc(m.jc(2,1,"Category")))}function O(t,e){if(1&t&&(m.Vb(0,"td",18),m.Ec(1),m.ic(2,"transloco"),m.Ub()),2&t){var o=e.$implicit,n=m.hc();m.Eb(1),m.Fc(m.jc(2,1,n.getKnowledgeItemCategoryName(o.ItemCategory)))}}function T(t,e){1&t&&(m.Vb(0,"th",17),m.Ec(1),m.ic(2,"transloco"),m.Ub()),2&t&&(m.Eb(1),m.Fc(m.jc(2,1,"Title")))}function S(t,e){if(1&t&&(m.Vb(0,"td",18),m.Ec(1),m.Ub()),2&t){var o=e.$implicit;m.Eb(1),m.Fc(o.Title)}}function G(t,e){1&t&&(m.Vb(0,"th",22),m.Ec(1),m.ic(2,"transloco"),m.Ub()),2&t&&(m.Eb(1),m.Fc(m.jc(2,1,"CreatedAt")))}function P(t,e){if(1&t&&(m.Vb(0,"td",18),m.Ec(1),m.ic(2,"date"),m.Ub()),2&t){var o=e.$implicit;m.Eb(1),m.Fc(m.kc(2,1,o.CreatedAt,"yyyy-M-d HH:mm:ss"))}}function R(t,e){1&t&&m.Qb(0,"tr",23)}function $(t,e){1&t&&m.Qb(0,"tr",24)}var L,K=((L=function(){function e(o,n){t(this,e),this.odataService=o,this.router=n,this.displayedColumns=["id","category","title","createdat"],this.dataSource=[],this.resultsLength=0,this.isLoadingResults=!0,this.refreshEvent=new m.o}return o(e,[{key:"getKnowledgeItemCategoryName",value:function(t){return Object(w.F)(t)}},{key:"isExpertMode",get:function(){return this.odataService.expertMode}},{key:"ngAfterViewInit",value:function(){var t=this;this.sort.sortChange.subscribe(function(){return t.paginator.pageIndex=0}),Object(h.a)(this.sort.sortChange,this.paginator.page,this.refreshEvent).pipe(Object(v.a)({}),Object(C.a)(function(){t.isLoadingResults=!0;var e=t.paginator.pageSize;return t.odataService.getKnowledgeItems(e,e*t.paginator.pageIndex,t.sort.active,t.sort.direction)}),Object(E.a)(function(e){return t.isLoadingResults=!1,t.resultsLength=e.totalCount,e.items}),Object(y.a)(function(){return t.isLoadingResults=!1,Object(g.a)([])})).subscribe(function(e){return t.dataSource=e})}},{key:"onGoToPreview",value:function(){var t=[];this.dataSource.forEach(function(e){t.push({refType:w.z.KnowledgeItem,refId:e.ID})}),this.odataService.previewObjList=t,this.router.navigate(["preview"])}},{key:"onGoToSearch",value:function(){this.router.navigate(["knowledge-item","search"])}},{key:"onDeleteItem",value:function(t){var e=this;this.odataService.deleteExerciseItem(t).subscribe({next:function(t){e.onRefreshList()},error:function(t){console.error(t)}})}},{key:"onRefreshList",value:function(){this.refreshEvent.emit()}},{key:"resetPaging",value:function(){this.paginator.pageIndex=0}}]),e}()).\u0275fac=function(t){return new(t||L)(m.Pb(V.b),m.Pb(s.b))},L.\u0275cmp=m.Jb({type:L,selectors:[["app-knowledge-items"]],viewQuery:function(t,e){var o;1&t&&(m.Jc(p.a,1),m.Jc(f.a,1)),2&t&&(m.tc(o=m.ec())&&(e.paginator=o.first),m.tc(o=m.ec())&&(e.sort=o.first))},decls:39,vars:21,consts:[[1,"toolbar-spacer"],["mat-icon-button","","color","primary","routerLink","create",3,"disabled","matTooltip"],["mat-icon-button","","color","accent","matTooltip","'Common.Search' | transloco}}",3,"disabled","click"],["mat-icon-button","","color","accent",3,"disabled","matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"example-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","title"],["matColumnDef","createdat"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"disabled","routerLink","matTooltip"],["mat-icon-button","","color","accent",3,"disabled","routerLink","matTooltip"],["mat-icon-button","","color","warn",3,"disabled","matTooltip","click"],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(m.Vb(0,"mat-toolbar-row"),m.Vb(1,"span"),m.Ec(2),m.ic(3,"transloco"),m.Ub(),m.Qb(4,"span",0),m.Vb(5,"section"),m.Vb(6,"button",1),m.ic(7,"transloco"),m.Vb(8,"mat-icon"),m.Ec(9,"add_circle"),m.Ub(),m.Ub(),m.Vb(10,"button",2),m.dc("click",function(){return e.onGoToSearch()}),m.Vb(11,"mat-icon"),m.Ec(12,"search"),m.Ub(),m.Ub(),m.Vb(13,"button",3),m.dc("click",function(){return e.onGoToPreview()}),m.ic(14,"transloco"),m.Vb(15,"mat-icon"),m.Ec(16,"slideshow"),m.Ub(),m.Ub(),m.Vb(17,"button",3),m.dc("click",function(){return e.onRefreshList()}),m.ic(18,"transloco"),m.Vb(19,"mat-icon"),m.Ec(20,"refresh"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(21,"div",4),m.Vb(22,"div",5),m.Vb(23,"table",6),m.dc("matSortChange",function(){return e.resetPaging()}),m.Tb(24,7),m.Dc(25,F,2,0,"th",8),m.Dc(26,x,15,15,"td",9),m.Sb(),m.Tb(27,10),m.Dc(28,j,3,3,"th",8),m.Dc(29,O,3,3,"td",9),m.Sb(),m.Tb(30,11),m.Dc(31,T,3,3,"th",8),m.Dc(32,S,2,1,"td",9),m.Sb(),m.Tb(33,12),m.Dc(34,G,3,3,"th",13),m.Dc(35,P,3,4,"td",9),m.Sb(),m.Dc(36,R,1,0,"tr",14),m.Dc(37,$,1,0,"tr",15),m.Ub(),m.Ub(),m.Qb(38,"mat-paginator",16),m.Ub()),2&t&&(m.Eb(2),m.Fc(m.jc(3,13,"KnowledgeItem")),m.Eb(4),m.oc("matTooltip",m.jc(7,15,"Common.Create")),m.nc("disabled",!e.isExpertMode),m.Eb(4),m.nc("disabled",!e.isExpertMode||e.dataSource.length<=0),m.Eb(3),m.oc("matTooltip",m.jc(14,17,"Common.Preview")),m.nc("disabled",!e.isExpertMode||e.dataSource.length<=0),m.Eb(4),m.oc("matTooltip",m.jc(18,19,"Common.Refresh")),m.nc("disabled",!e.isExpertMode),m.Eb(6),m.nc("dataSource",e.dataSource),m.Eb(13),m.nc("matHeaderRowDef",e.displayedColumns),m.Eb(1),m.nc("matRowDefColumns",e.displayedColumns),m.Eb(1),m.nc("length",e.resultsLength)("pageSize",20))},directives:[U.c,k.b,s.c,I.a,M.a,D.j,f.a,D.c,D.e,D.b,D.g,D.i,p.a,D.d,D.a,f.b,D.f,D.h],pipes:[d.d,a.e],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.example-container[_ngcontent-%COMP%]{position:relative;min-height:500px}.example-table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.mat-column-id[_ngcontent-%COMP%]{max-width:100px}.mat-column-createdat[_ngcontent-%COMP%]{max-width:124px}"]}),L),N=i("jtHE"),A=i("FtGj"),Q=i("rCpU"),_=i("HKRH"),H=i("0IaG"),z=i("Wp6s"),W=i("kmnG"),J=i("qFsG"),q=i("d3UM"),B=i("A5z7"),X=i("XiUz"),Y=i("FKr1");function Z(t,e){if(1&t&&(m.Vb(0,"mat-option",21),m.Ec(1),m.ic(2,"transloco"),m.Ub()),2&t){var o=e.$implicit;m.nc("value",o.value),m.Eb(1),m.Fc(m.jc(2,2,o.i18nterm))}}function tt(t,e){1&t&&(m.Vb(0,"mat-icon",24),m.Ec(1,"cancel"),m.Ub())}function et(t,e){if(1&t){var o=m.Wb();m.Vb(0,"mat-chip",22),m.dc("removed",function(){m.wc(o);var t=e.$implicit;return m.hc().removeTag(t)}),m.Ec(1),m.Dc(2,tt,2,0,"mat-icon",23),m.Ub()}if(2&t){var n=e.$implicit,i=m.hc();m.nc("selectable",i.selectable)("removable",i.isEditable),m.Eb(1),m.Gc(" ",n," "),m.Eb(1),m.nc("ngIf",i.isEditable)}}function ot(t,e){if(1&t&&(m.Vb(0,"div",25),m.Vb(1,"div",26),m.Vb(2,"mat-form-field",6),m.Vb(3,"mat-label"),m.Ec(4),m.ic(5,"transloco"),m.Ub(),m.Qb(6,"input",27),m.ic(7,"transloco"),m.ic(8,"date"),m.Ub(),m.Ub(),m.Vb(9,"div",26),m.Vb(10,"mat-form-field",6),m.Vb(11,"mat-label"),m.Ec(12),m.ic(13,"transloco"),m.Ub(),m.Qb(14,"input",27),m.ic(15,"transloco"),m.ic(16,"date"),m.Ub(),m.Ub(),m.Ub()),2&t){var o=m.hc();m.Eb(4),m.Fc(m.jc(5,6,"CreatedAt")),m.Eb(2),m.oc("placeholder",m.jc(7,8,"CreatedAt")),m.nc("ngModel",m.kc(8,10,o.currentItem.CreatedAt,"yyyy-M-d HH:mm:ss")),m.Eb(6),m.Fc(m.jc(13,13,"ModifiedAt")),m.Eb(2),m.oc("placeholder",m.jc(15,15,"ModifiedAt")),m.nc("ngModel",m.kc(16,17,o.currentItem.ModifiedAt,"yyyy-M-d HH:mm:ss"))}}function nt(t,e){if(1&t){var o=m.Wb();m.Vb(0,"mat-toolbar"),m.Vb(1,"h3"),m.Ec(2),m.ic(3,"transloco"),m.Ub(),m.Qb(4,"div",28),m.Vb(5,"button",29),m.dc("click",function(){return m.wc(o),m.hc().openUploadDialog()}),m.Vb(6,"mat-icon"),m.Ec(7,"file_upload"),m.Ub(),m.Ub(),m.Ub()}2&t&&(m.Eb(2),m.Fc(m.jc(3,1,"Content")))}function it(t,e){if(1&t){var o=m.Wb();m.Vb(0,"div",26),m.Vb(1,"ngx-monaco-editor",30),m.dc("ngModelChange",function(t){return m.wc(o),m.hc().content=t}),m.Ub(),m.Ub()}if(2&t){var n=m.hc();m.Eb(1),m.nc("options",n.editorOptions)("ngModel",n.content)}}var at,ct=((at=function(){function e(o,n,i,a){t(this,e),this.dialog=o,this.activateRoute=n,this.router=i,this.odataService=a,this.routerID=-1,this.uiMode=Q.b.Create,this.currentMode="",this.editorOptions={theme:"vs-dark",wordWrap:"on"},this.content="New Knowledge Item",this.mathOptions={displayMode:!0,throwOnError:!1,errorColor:"#cc0000"},this.selectable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[A.g,A.c],this.tags=[],this.arKnowledgeCtgies=[],this.arKnowledgeCtgies=Object(w.G)(),this.itemFormGroup=new c.f({idControl:new c.d({value:null,disabled:!0}),titleControl:new c.d("",c.t.required),ctgyControl:new c.d({value:w.p.Concept}),tagControl:new c.d})}return o(e,[{key:"isDisplayMode",get:function(){return this.uiMode===Q.b.Display}},{key:"isCreateMode",get:function(){return this.uiMode===Q.b.Create}},{key:"isUpdateMode",get:function(){return this.uiMode===Q.b.Update}},{key:"isEditable",get:function(){return this.uiMode===Q.b.Create||this.uiMode===Q.b.Update}},{key:"ngOnInit",value:function(){var t=this;this.destroyed$=new N.a(1),this.activateRoute.url.subscribe({next:function(e){var o,n;e instanceof Array&&e.length>0&&("create"===e[0].path?(t.routerID=-1,t.uiMode=Q.b.Create,t.currentMode="Common.Create"):"edit"===e[0].path?(t.routerID=+e[1].path,t.uiMode=Q.b.Update,t.currentMode="Common.Change"):"display"===e[0].path&&(t.routerID=+e[1].path,t.uiMode=Q.b.Display,t.currentMode="Common.Display")),-1!==t.routerID?t.odataService.readKnowledgeItem(t.routerID,t.uiMode===Q.b.Update).subscribe({next:function(e){var o,n,i;null===(o=t.itemFormGroup.get("idControl"))||void 0===o||o.setValue(e.ID),null===(n=t.itemFormGroup.get("titleControl"))||void 0===n||n.setValue(e.Title),null===(i=t.itemFormGroup.get("ctgyControl"))||void 0===i||i.setValue(+e.ItemCategory),t.content=e.Content,t.tags=e.Tags,t.currentItem=e,t.isDisplayMode?t.itemFormGroup.disable():t.itemFormGroup.markAsPristine()},error:function(t){console.error(t)}}):(null===(o=t.itemFormGroup.get("idControl"))||void 0===o||o.setValue("NEW"),null===(n=t.itemFormGroup.get("idControl"))||void 0===n||n.disable(),t.itemFormGroup.markAsPristine(),t.itemFormGroup.markAsUntouched())},error:function(t){console.error(t)}})}},{key:"ngOnDestroy",value:function(){this.destroyed$&&(this.destroyed$.complete(),this.destroyed$=void 0)}},{key:"onOK",value:function(){var t,e,o,n,i=this;if(this.isCreateMode){if(!this.itemFormGroup.valid)return void(this.itemFormGroup.errors&&console.log(this.itemFormGroup.errors));var a=new w.o;a.ItemCategory=null===(t=this.itemFormGroup.get("ctgyControl"))||void 0===t?void 0:t.value,a.Content=this.content,a.Title=null===(e=this.itemFormGroup.get("titleControl"))||void 0===e?void 0:e.value,a.Tags=this.tags,this.odataService.createKnowledgeItem(a).subscribe({next:function(t){i.router.navigate(["knowledge-item/display",t.ID])},error:function(t){console.error(t)}})}else if(this.isUpdateMode){if(!this.itemFormGroup.valid)return void(this.itemFormGroup.errors&&console.log(this.itemFormGroup.errors));this.currentItem&&(this.currentItem.ItemCategory=null===(o=this.itemFormGroup.get("ctgyControl"))||void 0===o?void 0:o.value,this.currentItem.Content=this.content,this.currentItem.Title=null===(n=this.itemFormGroup.get("titleControl"))||void 0===n?void 0:n.value,this.currentItem.Tags=this.tags,this.odataService.changeKnowledgeItem(this.currentItem).subscribe({next:function(t){i.router.navigate(["knowledge-item/display",t.ID])},error:function(t){console.error(t)}}))}}},{key:"openUploadDialog",value:function(){var t=this;this.dialog.open(_.a,{width:"50%",height:"50%"}).afterClosed().subscribe({next:function(e){console.log(e),e.forEach(function(e){t.content+="\n![Img](".concat(e.url,")\n          ")})}})}},{key:"addTag",value:function(t){var e=t.input,o=t.value;(o||"").trim()&&this.tags.push(o.trim()),e&&(e.value="")}},{key:"removeTag",value:function(t){var e=this.tags.indexOf(t);e>=0&&this.tags.splice(e,1)}},{key:"onReturnToList",value:function(){this.router.navigate(["knowledge-item"])}},{key:"onCreateNewOne",value:function(){this.router.navigate(["knowledge-item","create"])}}]),e}()).\u0275fac=function(t){return new(t||at)(m.Pb(H.b),m.Pb(s.a),m.Pb(s.b),m.Pb(V.b))},at.\u0275cmp=m.Jb({type:at,selectors:[["app-knowledge-item-detail"]],decls:50,vars:38,consts:[[3,"formGroup"],[1,"control-full-width"],["matInput","","type","text","placeholder","#","formControlName","idControl"],["matInput","","type","text","formControlName","titleControl","required","","name","title","maxlength","30",3,"placeholder"],["title",""],["align","end"],["appearance","fill",1,"control-full-width"],["required","","formControlName","ctgyControl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","tagControl"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","New tag...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["fxLayout","row","class","control-full-width",4,"ngIf"],[4,"ngIf"],["fxLayout","row",1,"control-full-width",2,"height","500px"],["fxFlex","50",4,"ngIf"],["fxFlex","",2,"height","100%","overflow-y","scroll"],["katex","",3,"data","katexOptions"],["mat-button","",3,"disabled","click"],["mat-button","",3,"click"],[3,"value"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],["fxLayout","row",1,"control-full-width"],["fxFlex","50"],["matInput","","type","text","disabled","",3,"placeholder","ngModel"],[1,"toolbar-spacer"],["mat-raised-button","",3,"click"],[2,"height","100%",3,"options","ngModel","ngModelChange"]],template:function(t,e){if(1&t&&(m.Vb(0,"mat-card"),m.Vb(1,"mat-card-header"),m.Vb(2,"mat-card-title"),m.Ec(3),m.ic(4,"transloco"),m.Ub(),m.Vb(5,"mat-card-subtitle"),m.Ec(6),m.ic(7,"transloco"),m.Ub(),m.Ub(),m.Vb(8,"mat-card-content"),m.Vb(9,"form",0),m.Vb(10,"mat-form-field",1),m.Vb(11,"mat-label"),m.Ec(12,"#"),m.Ub(),m.Qb(13,"input",2),m.Ub(),m.Vb(14,"mat-form-field",1),m.Qb(15,"input",3,4),m.ic(17,"transloco"),m.Vb(18,"mat-hint",5),m.Ec(19),m.Ub(),m.Ub(),m.Vb(20,"mat-form-field",6),m.Vb(21,"mat-label"),m.Ec(22),m.ic(23,"transloco"),m.Ub(),m.Vb(24,"mat-select",7),m.Dc(25,Z,3,4,"mat-option",8),m.Ub(),m.Ub(),m.Vb(26,"mat-form-field",6),m.Vb(27,"mat-label"),m.Ec(28),m.ic(29,"transloco"),m.Ub(),m.Vb(30,"mat-chip-list",9,10),m.Dc(32,et,3,4,"mat-chip",11),m.Vb(33,"input",12),m.dc("matChipInputTokenEnd",function(t){return e.addTag(t)}),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Dc(34,ot,17,20,"div",13),m.Dc(35,nt,8,3,"mat-toolbar",14),m.Vb(36,"div",15),m.Dc(37,it,2,2,"div",16),m.Vb(38,"div",17),m.Qb(39,"markdown",18),m.Ub(),m.Ub(),m.Ub(),m.Vb(40,"mat-card-actions"),m.Vb(41,"button",19),m.dc("click",function(){return e.onOK()}),m.Ec(42),m.ic(43,"transloco"),m.Ub(),m.Vb(44,"button",20),m.dc("click",function(){return e.onReturnToList()}),m.Ec(45),m.ic(46,"transloco"),m.Ub(),m.Vb(47,"button",19),m.dc("click",function(){return e.onCreateNewOne()}),m.Ec(48),m.ic(49,"transloco"),m.Ub(),m.Ub(),m.Ub()),2&t){var o=m.uc(16),n=m.uc(31);m.Eb(3),m.Fc(m.jc(4,22,"KnowledgeItem")),m.Eb(3),m.Fc(m.jc(7,24,e.currentMode)),m.Eb(3),m.nc("formGroup",e.itemFormGroup),m.Eb(6),m.oc("placeholder",m.jc(17,26,"Title")),m.Eb(4),m.Gc("",o.value.length," / 30"),m.Eb(3),m.Fc(m.jc(23,28,"Category")),m.Eb(3),m.nc("ngForOf",e.arKnowledgeCtgies),m.Eb(3),m.Fc(m.jc(29,30,"Tags")),m.Eb(4),m.nc("ngForOf",e.tags),m.Eb(1),m.nc("matChipInputFor",n)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",e.addOnBlur),m.Eb(1),m.nc("ngIf",!e.isCreateMode&&e.currentItem),m.Eb(1),m.nc("ngIf",e.isCreateMode),m.Eb(2),m.nc("ngIf",!e.isDisplayMode),m.Eb(2),m.nc("data",e.content)("katexOptions",e.mathOptions),m.Eb(2),m.nc("disabled",!(e.isEditable&&e.itemFormGroup.valid)),m.Eb(1),m.Fc(m.jc(43,32,"Save")),m.Eb(3),m.Fc(m.jc(46,34,"Common.ReturnToList")),m.Eb(2),m.nc("disabled",!e.isDisplayMode),m.Eb(1),m.Fc(m.jc(49,36,"Common.CreateAnotherOne"))}},directives:[z.a,z.d,z.g,z.f,z.c,c.u,c.n,c.g,W.c,W.g,J.b,c.c,c.m,c.e,c.s,c.i,W.f,q.a,a.l,B.c,B.b,a.m,X.c,X.a,l.a,z.b,k.b,Y.n,B.a,M.a,B.d,c.p,U.a,r.a],pipes:[d.d,a.e],styles:[".example-form[_ngcontent-%COMP%]{margin:8px;min-width:150px;max-width:500px;width:100%}.mat-card-actions[_ngcontent-%COMP%]{margin-top:50px}"]}),at),rt=i("2Vo4"),lt=i("nYR2"),dt=i("f0Cb"),ut=i("iadO"),bt=i("bSwM"),st=i("pFkP");function mt(t,e){if(1&t&&(m.Vb(0,"mat-option",25),m.Ec(1),m.ic(2,"transloco"),m.Ub()),2&t){var o=e.$implicit;m.nc("value",o.value),m.Eb(1),m.Gc(" ",m.jc(2,2,o.displayas)," ")}}function pt(t,e){if(1&t&&(m.Vb(0,"mat-option",25),m.Ec(1),m.ic(2,"transloco"),m.Ub()),2&t){var o=e.$implicit;m.nc("value",o.value),m.Eb(1),m.Gc(" ",m.jc(2,2,o.i18nterm)," ")}}function ft(t,e){if(1&t){var o=m.Wb();m.Vb(0,"mat-form-field"),m.Vb(1,"input",26),m.dc("ngModelChange",function(t){return m.wc(o),m.hc().$implicit.value[0]=t}),m.ic(2,"transloco"),m.Ub(),m.Ub()}if(2&t){var n=m.hc().$implicit;m.Eb(1),m.oc("placeholder",m.jc(2,2,"Value")),m.nc("ngModel",n.value[0])}}function ht(t,e){if(1&t){var o=m.Wb();m.Vb(0,"mat-form-field"),m.Vb(1,"input",27),m.dc("ngModelChange",function(t){return m.wc(o),m.hc().$implicit.value[1]=t}),m.ic(2,"transloco"),m.Ub(),m.Ub()}if(2&t){var n=m.hc().$implicit;m.Eb(1),m.oc("placeholder",m.jc(2,2,"Value")),m.nc("ngModel",n.value[1])}}function gt(t,e){if(1&t){var o=m.Wb();m.Vb(0,"mat-form-field"),m.Vb(1,"input",28),m.dc("ngModelChange",function(t){return m.wc(o),m.hc().$implicit.value[0]=t}),m.ic(2,"transloco"),m.Ub(),m.Ub()}if(2&t){var n=m.hc().$implicit;m.Eb(1),m.oc("placeholder",m.jc(2,2,"Value")),m.nc("ngModel",n.value[0])}}function vt(t,e){if(1&t){var o=m.Wb();m.Vb(0,"mat-form-field"),m.Vb(1,"input",29),m.dc("ngModelChange",function(t){return m.wc(o),m.hc().$implicit.value[0]=t}),m.ic(2,"transloco"),m.Ub(),m.Qb(3,"mat-datepicker-toggle",30),m.Qb(4,"mat-datepicker",null,31),m.Ub()}if(2&t){var n=m.uc(5),i=m.hc().$implicit;m.Eb(1),m.oc("placeholder",m.jc(2,4,"Value")),m.nc("ngModel",i.value[0])("matDatepicker",n),m.Eb(2),m.nc("for",n)}}function Ct(t,e){if(1&t){var o=m.Wb();m.Vb(0,"mat-form-field"),m.Vb(1,"input",29),m.dc("ngModelChange",function(t){return m.wc(o),m.hc().$implicit.value[1]=t}),m.ic(2,"transloco"),m.Ub(),m.Qb(3,"mat-datepicker-toggle",30),m.Qb(4,"mat-datepicker",null,32),m.Ub()}if(2&t){var n=m.uc(5),i=m.hc().$implicit;m.Eb(1),m.oc("placeholder",m.jc(2,4,"Value")),m.nc("ngModel",i.value[1])("matDatepicker",n),m.Eb(2),m.nc("for",n)}}function Et(t,e){if(1&t){var o=m.Wb();m.Vb(0,"div",33),m.Vb(1,"mat-checkbox",34),m.dc("ngModelChange",function(t){return m.wc(o),m.hc().$implicit.value[0]=t}),m.Ub(),m.Ub()}if(2&t){var n=m.hc().$implicit;m.Eb(1),m.nc("ngModel",n.value[0])}}function yt(t,e){if(1&t){var o=m.Wb();m.Vb(0,"div",17),m.Vb(1,"mat-form-field"),m.Vb(2,"mat-select",18),m.dc("ngModelChange",function(t){return e.$implicit.fieldName=t})("selectionChange",function(){m.wc(o);var t=e.$implicit;return m.hc().onFieldSelectionChanged(t)}),m.ic(3,"transloco"),m.Dc(4,mt,3,4,"mat-option",19),m.Ub(),m.Ub(),m.Vb(5,"mat-form-field"),m.Vb(6,"mat-select",20),m.dc("ngModelChange",function(t){return e.$implicit.operator=t}),m.ic(7,"transloco"),m.Dc(8,pt,3,4,"mat-option",19),m.ic(9,"operatorFilter"),m.Ub(),m.Ub(),m.Dc(10,ft,3,4,"mat-form-field",21),m.Dc(11,ht,3,4,"mat-form-field",21),m.Dc(12,gt,3,4,"mat-form-field",21),m.Dc(13,vt,6,6,"mat-form-field",21),m.Dc(14,Ct,6,6,"mat-form-field",21),m.Dc(15,Et,2,1,"div",22),m.Vb(16,"button",23),m.dc("click",function(){return m.wc(o),m.hc().onAddFilter()}),m.Vb(17,"mat-icon"),m.Ec(18,"add"),m.Ub(),m.Ub(),m.Vb(19,"button",24),m.dc("click",function(){m.wc(o);var t=e.index;return m.hc().onRemoveFilter(t)}),m.Vb(20,"mat-icon"),m.Ec(21,"close"),m.Ub(),m.Ub(),m.Ub()}if(2&t){var n=e.$implicit,i=m.hc();m.Eb(2),m.oc("placeholder",m.jc(3,12,"Field")),m.nc("ngModel",n.fieldName),m.Eb(2),m.nc("ngForOf",i.allFields),m.Eb(2),m.oc("placeholder",m.jc(7,14,"Operator")),m.nc("ngModel",n.operator),m.Eb(2),m.nc("ngForOf",m.kc(9,16,i.allOperators,n.valueType)),m.Eb(2),m.nc("ngIf",1===n.valueType),m.Eb(1),m.nc("ngIf",1===n.valueType),m.Eb(1),m.nc("ngIf",2===n.valueType),m.Eb(1),m.nc("ngIf",3===n.valueType),m.Eb(1),m.nc("ngIf",3===n.valueType),m.Eb(1),m.nc("ngIf",4===n.valueType)}}function wt(t,e){1&t&&(m.Vb(0,"th",35),m.Ec(1,"#"),m.Ub())}function Vt(t,e){if(1&t){var o=m.Wb();m.Vb(0,"td",36),m.Vb(1,"div"),m.Ec(2),m.Vb(3,"a",37),m.dc("click",function(){m.wc(o);var t=e.$implicit;return m.hc().onDisplayItem(t.ID)}),m.Ec(4),m.ic(5,"transloco"),m.Ub(),m.Ub(),m.Ub()}if(2&t){var n=e.$implicit;m.Eb(2),m.Gc(" ",n.ID," "),m.Eb(2),m.Fc(m.jc(5,2,"Common.Display"))}}function Ut(t,e){1&t&&(m.Vb(0,"th",35),m.Ec(1),m.ic(2,"transloco"),m.Ub()),2&t&&(m.Eb(1),m.Fc(m.jc(2,1,"Category")))}function kt(t,e){if(1&t&&(m.Vb(0,"td",36),m.Ec(1),m.ic(2,"transloco"),m.Ub()),2&t){var o=e.$implicit,n=m.hc();m.Eb(1),m.Fc(m.jc(2,1,n.getKnowledgeItemCategoryName(o.ItemCategory)))}}function It(t,e){1&t&&(m.Vb(0,"th",35),m.Ec(1),m.ic(2,"transloco"),m.Ub()),2&t&&(m.Eb(1),m.Fc(m.jc(2,1,"Title")))}function Mt(t,e){if(1&t&&(m.Vb(0,"td",36),m.Ec(1),m.Ub()),2&t){var o=e.$implicit;m.Eb(1),m.Fc(o.Title)}}function Dt(t,e){1&t&&(m.Vb(0,"th",35),m.Ec(1),m.ic(2,"transloco"),m.Ub()),2&t&&(m.Eb(1),m.Fc(m.jc(2,1,"CreatedAt")))}function Ft(t,e){if(1&t&&(m.Vb(0,"td",36),m.Ec(1),m.ic(2,"date"),m.Ub()),2&t){var o=e.$implicit;m.Eb(1),m.Fc(m.kc(2,1,o.CreatedAt,"yyyy-M-d HH:mm:ss"))}}function xt(t,e){1&t&&m.Qb(0,"tr",38)}function jt(t,e){1&t&&m.Qb(0,"tr",39)}var Ot,Tt,St,Gt=[{path:"",component:K},{path:"create",component:ct},{path:"display/:id",component:ct},{path:"edit/:id",component:ct},{path:"search",component:(Ot=function(){function e(o,n){t(this,e),this.odataService=o,this.router=n,this.filters=[],this.allOperators=[],this.allFields=[],this.filterEditable=!0,this.pageSize=20,this.pageSizeOptions=[20,40,60,100],this.isLoadingResults=!1,this.subjFilters=new rt.a([]),this.displayedColumns=["id","category","title","createdat"],this.dataSource=[],this.resultsLength=0,this.allOperators=w.A.getGeneralFilterOperatorDisplayStrings(),this.allFields=[{displayas:"Content",value:"Content",valueType:2}]}return o(e,[{key:"ngOnInit",value:function(){this.onAddFilter()}},{key:"ngAfterViewInit",value:function(){var t=this;this.subjFilters.subscribe(function(){return t.paginator.pageIndex=0}),Object(h.a)(this.subjFilters,this.paginator.page).pipe(Object(v.a)({}),Object(C.a)(function(){if(t.subjFilters.value.length<=0)return Object(g.a)([]);t.isLoadingResults=!0;var e=t.prepareFilters(t.subjFilters.value),o=t.paginator.pageSize;return t.odataService.getKnowledgeItems(o,o*t.paginator.pageIndex,void 0,void 0,e)}),Object(lt.a)(function(){return t.isLoadingResults=!1}),Object(E.a)(function(e){return t.resultsLength=e.totalCount,e.items}),Object(y.a)(function(){return Object(g.a)(void 0)})).subscribe({next:function(e){return t.dataSource=e},error:function(t){return console.log(t)}})}},{key:"getKnowledgeItemCategoryName",value:function(t){return Object(w.F)(t)}},{key:"onAddFilter",value:function(){this.filters.push(new w.k)}},{key:"onRemoveFilter",value:function(t){this.filters.splice(t,1),0===this.filters.length&&this.onAddFilter()}},{key:"onFieldSelectionChanged",value:function(t){this.allFields.forEach(function(e){e.value===t.fieldName&&(t.valueType=e.valueType)})}},{key:"prepareFilters",value:function(t){var e="";return t.sort(function(t,e){return t.fieldName.localeCompare(e.fieldName)}),t.forEach(function(t){"Content"===t.fieldName&&(t.operator===w.l.Equal?e=e?"".concat(e," and ").concat(t.fieldName," eq '").concat(t.lowValue,"'"):"".concat(t.fieldName," eq '").concat(t.lowValue,"'"):t.operator===w.l.Like&&(e=e?"".concat(e," and contains(").concat(t.fieldName,",'").concat(t.lowValue,"')"):"contains(".concat(t.fieldName,",'").concat(t.lowValue,"')")))}),e}},{key:"onSearch",value:function(){var t=[];this.filters.forEach(function(e){var o={};switch(o.valueType=+e.valueType,e.valueType){case w.m.boolean:case w.m.date:case w.m.number:break;case w.m.string:o.fieldName=e.fieldName,o.operator=+e.operator,o.lowValue=e.value[0],o.highValue=e.operator===w.l.Between?e.value[1]:""}t.push(o)}),this.subjFilters.next(t)}},{key:"onDisplayItem",value:function(t){this.router.navigate(["knowledge-item","display",t.toString()])}},{key:"onGoToPreview",value:function(){var t=[];this.dataSource.forEach(function(e){t.push({refType:w.z.KnowledgeItem,refId:e.ID})}),this.odataService.previewObjList=t,this.router.navigate(["preview"])}}]),e}(),Ot.\u0275fac=function(t){return new(t||Ot)(m.Pb(V.b),m.Pb(s.b))},Ot.\u0275cmp=m.Jb({type:Ot,selectors:[["app-knowledge-item-search"]],viewQuery:function(t,e){var o;1&t&&m.Jc(p.a,3),2&t&&m.tc(o=m.ec())&&(e.paginator=o.first)},decls:41,vars:18,consts:[["class","demo-full-width",4,"ngFor","ngForOf"],[1,"control-full-width"],["mat-button","","aria-label","Search",3,"click"],[1,"table-container","mat-elevation-z8"],["color","primary"],["mat-flat-button","","color","primary",3,"click"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","title"],["matColumnDef","createdat"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[1,"demo-full-width"],[3,"placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"placeholder","ngModel","ngModelChange"],[4,"ngIf"],["class","typechkbox",4,"ngIf"],["mat-button","","mat-icon-button","","aria-label","Add",3,"click"],["mat-button","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["matInput","","type","number","name","lvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","","type","number","name","hvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","","type","text","name","lvalue_2",3,"placeholder","ngModel","ngModelChange"],["matInput","",3,"ngModel","matDatepicker","placeholder","ngModelChange"],["matSuffix","",3,"for"],["lvpicker",""],["hvpicker",""],[1,"typechkbox"],[3,"ngModel","ngModelChange"],["mat-header-cell",""],["mat-cell",""],["mat-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(m.Vb(0,"mat-card"),m.Vb(1,"mat-card-header"),m.Vb(2,"mat-card-title"),m.Ec(3),m.ic(4,"transloco"),m.Ub(),m.Vb(5,"mat-card-subtitle"),m.Ec(6),m.ic(7,"transloco"),m.Ub(),m.Ub(),m.Vb(8,"mat-card-content"),m.Vb(9,"div"),m.Dc(10,yt,22,19,"div",0),m.Vb(11,"div",1),m.Vb(12,"button",2),m.dc("click",function(){return e.onSearch()}),m.Vb(13,"mat-icon"),m.Ec(14,"search"),m.Ub(),m.Ec(15),m.ic(16,"transloco"),m.Ub(),m.Ub(),m.Ub(),m.Qb(17,"mat-divider"),m.Vb(18,"div",3),m.Vb(19,"mat-toolbar",4),m.Vb(20,"mat-toolbar-row"),m.Vb(21,"button",5),m.dc("click",function(){return e.onGoToPreview()}),m.Ec(22),m.ic(23,"transloco"),m.Ub(),m.Ub(),m.Ub(),m.Vb(24,"div",6),m.Vb(25,"table",7),m.Tb(26,8),m.Dc(27,wt,2,0,"th",9),m.Dc(28,Vt,6,4,"td",10),m.Sb(),m.Tb(29,11),m.Dc(30,Ut,3,3,"th",9),m.Dc(31,kt,3,3,"td",10),m.Sb(),m.Tb(32,12),m.Dc(33,It,3,3,"th",9),m.Dc(34,Mt,2,1,"td",10),m.Sb(),m.Tb(35,13),m.Dc(36,Dt,3,3,"th",9),m.Dc(37,Ft,3,4,"td",10),m.Sb(),m.Dc(38,xt,1,0,"tr",14),m.Dc(39,jt,1,0,"tr",15),m.Ub(),m.Ub(),m.Qb(40,"mat-paginator",16),m.Ub(),m.Ub(),m.Ub()),2&t&&(m.Eb(3),m.Fc(m.jc(4,10,"KnowledgeItem")),m.Eb(3),m.Fc(m.jc(7,12,"Common.Search")),m.Eb(4),m.nc("ngForOf",e.filters),m.Eb(5),m.Gc(" ",m.jc(16,14,"Common.Search")," "),m.Eb(7),m.Fc(m.jc(23,16,"Common.Preview")),m.Eb(3),m.nc("dataSource",e.dataSource),m.Eb(13),m.nc("matHeaderRowDef",e.displayedColumns),m.Eb(1),m.nc("matRowDefColumns",e.displayedColumns),m.Eb(1),m.nc("length",e.resultsLength)("pageSize",20))},directives:[z.a,z.d,z.g,z.f,z.c,a.l,k.b,M.a,dt.a,U.a,U.c,D.j,D.c,D.e,D.b,D.g,D.i,p.a,W.c,q.a,c.m,c.p,a.m,Y.n,J.b,c.q,c.c,ut.d,ut.f,W.i,ut.c,bt.a,D.d,D.a,k.a,D.f,D.h],pipes:[d.d,st.a,a.e],styles:[".table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;margin-top:16px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.data-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.mat-column-id[_ngcontent-%COMP%]{max-width:300px;width:250px}.mat-column-itemtype[_ngcontent-%COMP%]{max-width:120px;width:120px}.mat-column-tags[_ngcontent-%COMP%]{max-width:250px;width:150px}.mat-column-created[_ngcontent-%COMP%]{max-width:120px;width:120px}"]}),Ot)}],Pt=((Tt=function e(){t(this,e)}).\u0275fac=function(t){return new(t||Tt)},Tt.\u0275mod=m.Nb({type:Tt}),Tt.\u0275inj=m.Mb({imports:[[s.e.forChild(Gt)],s.e]}),Tt),Rt=i("iasb"),$t=((St=function e(){t(this,e)}).\u0275fac=function(t){return new(t||St)},St.\u0275mod=m.Nb({type:St}),St.\u0275inj=m.Mb({providers:[],imports:[[a.c,c.h,c.r,u.a,b.a,r.b,l.b.forChild(),Pt,d.c,Rt.a]]}),St)}}])}();