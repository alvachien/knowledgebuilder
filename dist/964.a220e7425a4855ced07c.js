"use strict";(self.webpackChunkknowledgebuilder=self.webpackChunkknowledgebuilder||[]).push([[964],{7964:(Tt,P,c)=>{c.r(P),c.d(P,{ExerciseItemsModule:()=>Ct});var u=c(8583),d=c(3679),R=c(5151),H=c(6715),Z=c(4043),oe=c(6721),ie=c(5146),S=c(3423),e=c(7716),T=c(9692),I=c(1494),U=c(6682),w=c(5917),J=c(9761),k=c(3190),V=c(8939),$=c(8002),L=c(5304),m=c(3186),E=c(663),g=c(2238),_=c(8295),b=c(9983),j=c(7746),C=c(1095);const ne=["colls"];function ae(i,a){if(1&i&&(e.TgZ(0,"mat-list-option",9),e._uU(1),e.qZA()),2&i){const t=a.$implicit,o=e.oxw();e.Q6J("disabled",o.isItemExistedInColl(t))("value",t.ID),e.xp6(1),e.hij(" ",t.Name," ")}}let re=(()=>{class i{constructor(t,o){this.dialogRef=t,this.data=o}ngAfterViewInit(){this.colls.selectionChange.subscribe({next:t=>{this.data.collids=[],this.colls.selectedOptions.selected.forEach(o=>{this.data.collids.push(+o.value)})},error:t=>{}})}onNoClick(){this.dialogRef.close()}isItemExistedInColl(t){return-1!==t.Items.findIndex(o=>o.RefID===this.data.excitemid&&o.RefType===m.ik.ExerciseItem)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.so),e.Y36(g.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-exercise-item-addcoll-dlg"]],viewQuery:function(t,o){if(1&t&&e.Gf(ne,5),2&t){let n;e.iGM(n=e.CRH())&&(o.colls=n.first)}},decls:21,vars:13,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","fill",1,"control-full-width"],["matInput","","disabled","","name","excitemid",3,"ngModel","ngModelChange"],["colls",""],[3,"disabled","value",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"disabled","mat-dialog-close"],[3,"disabled","value"]],template:function(t,o){1&t&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"transloco"),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"div"),e.TgZ(5,"mat-form-field",2),e.TgZ(6,"mat-label"),e._uU(7,"ID"),e.qZA(),e.TgZ(8,"input",3),e.NdJ("ngModelChange",function(r){return o.data.excitemid=r}),e.qZA(),e.qZA(),e.TgZ(9,"mat-label"),e._uU(10),e.ALo(11,"transloco"),e.qZA(),e.TgZ(12,"mat-selection-list",null,4),e.YNc(14,ae,2,3,"mat-list-option",5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",6),e.TgZ(16,"button",7),e.NdJ("click",function(){return o.onNoClick()}),e._uU(17),e.ALo(18,"transloco"),e.qZA(),e.TgZ(19,"button",8),e._uU(20,"OK"),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,7,"AddToCollection")),e.xp6(7),e.Q6J("ngModel",o.data.excitemid),e.xp6(2),e.Oqu(e.lcZ(11,9,"UserCollection")),e.xp6(4),e.Q6J("ngForOf",o.data.availableColls),e.xp6(3),e.Oqu(e.lcZ(18,11,"Common.NoThanks")),e.xp6(2),e.Q6J("disabled",o.data.collids.length<=0)("mat-dialog-close",o.data))},directives:[g.uh,g.xY,_.KE,_.hX,b.Nt,d.Fj,d.JJ,d.On,j.Ub,u.sg,g.H8,C.lW,g.ZT,j.vS],pipes:[Z.Ot],encapsulation:2}),i})(),le=(()=>{class i{constructor(t,o){this.dialogRef=t,this.data=o}onNoClick(){this.dialogRef.close()}get isOKDisabled(){return null==this.data.score||isNaN(+this.data.score)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.so),e.Y36(g.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-exercise-item-newscore-dlg"]],decls:24,vars:14,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","fill",1,"control-full-width"],["matInput","","disabled","","name","excitemid",3,"ngModel","ngModelChange"],["matInput","","disabled","","name","date",3,"ngModel","ngModelChange"],["matInput","","type","number","name","score",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"disabled","mat-dialog-close"]],template:function(t,o){1&t&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"transloco"),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"form"),e.TgZ(5,"mat-form-field",2),e.TgZ(6,"mat-label"),e._uU(7,"ID"),e.qZA(),e.TgZ(8,"input",3),e.NdJ("ngModelChange",function(r){return o.data.excitemid=r}),e.qZA(),e.qZA(),e.TgZ(9,"mat-form-field",2),e.TgZ(10,"mat-label"),e._uU(11,"Date"),e.qZA(),e.TgZ(12,"input",4),e.NdJ("ngModelChange",function(r){return o.data.pracDate=r}),e.qZA(),e.qZA(),e.TgZ(13,"mat-form-field",2),e.TgZ(14,"mat-label"),e._uU(15),e.ALo(16,"transloco"),e.qZA(),e.TgZ(17,"input",5),e.NdJ("ngModelChange",function(r){return o.data.score=r}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",6),e.TgZ(19,"button",7),e.NdJ("click",function(){return o.onNoClick()}),e._uU(20),e.ALo(21,"transloco"),e.qZA(),e.TgZ(22,"button",8),e._uU(23,"OK"),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,8,"NewPractice")),e.xp6(7),e.Q6J("ngModel",o.data.excitemid),e.xp6(4),e.Q6J("ngModel",o.data.pracDate),e.xp6(3),e.Oqu(e.lcZ(16,10,"Quiz.Score")),e.xp6(2),e.Q6J("ngModel",o.data.score),e.xp6(3),e.Oqu(e.lcZ(21,12,"Common.NoThanks")),e.xp6(2),e.Q6J("disabled",o.isOKDisabled)("mat-dialog-close",o.data))},directives:[g.uh,g.xY,d._Y,d.JL,d.F,_.KE,_.hX,b.Nt,d.Fj,d.JJ,d.On,d.wV,g.H8,C.lW,g.ZT],pipes:[Z.Ot],encapsulation:2}),i})();var f=c(984),M=c(2522),G=c(1436),y=c(6627),p=c(2091);function se(i,a){1&i&&(e.TgZ(0,"th",19),e._uU(1,"#"),e.qZA())}function ce(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"td",20),e.TgZ(1,"div"),e._uU(2),e.TgZ(3,"button",21),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().onDisplayItem(r.ID)}),e.ALo(4,"transloco"),e.TgZ(5,"mat-icon"),e._uU(6,"launch"),e.qZA(),e.qZA(),e.TgZ(7,"button",4),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().onChangeItem(r.ID)}),e.ALo(8,"transloco"),e.TgZ(9,"mat-icon"),e._uU(10,"edit"),e.qZA(),e.qZA(),e.TgZ(11,"button",4),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().onAddToCollection(r.ID)}),e.ALo(12,"transloco"),e.TgZ(13,"mat-icon"),e._uU(14,"add_to_queue"),e.qZA(),e.qZA(),e.TgZ(15,"button",4),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().onNewPractice(r.ID)}),e.ALo(16,"transloco"),e.TgZ(17,"mat-icon"),e._uU(18,"ballot"),e.qZA(),e.qZA(),e.TgZ(19,"button",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().onDeleteItem(r.ID)}),e.ALo(20,"transloco"),e.TgZ(21,"mat-icon"),e._uU(22,"remove_circle"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=a.$implicit,o=e.oxw();e.xp6(2),e.hij(" ",t.ID," "),e.xp6(1),e.s9C("matTooltip",e.lcZ(4,11,"Common.Display")),e.Q6J("disabled",!o.isExpertMode),e.xp6(4),e.s9C("matTooltip",e.lcZ(8,13,"Common.Change")),e.Q6J("disabled",!o.isExpertMode),e.xp6(4),e.s9C("matTooltip",e.lcZ(12,15,"AddToCollection")),e.Q6J("disabled",!o.isExpertMode),e.xp6(4),e.s9C("matTooltip",e.lcZ(16,17,"NewPractice")),e.Q6J("disabled",!o.isExpertMode),e.xp6(4),e.s9C("matTooltip",e.lcZ(20,19,"Common.Delete")),e.Q6J("disabled",!o.isExpertMode)}}function me(i,a){1&i&&(e.TgZ(0,"th",19),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Type")))}function de(i,a){if(1&i&&(e.TgZ(0,"td",20),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i){const t=a.$implicit,o=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,o.getExerciseItemTypeName(t.ItemType)))}}function pe(i,a){1&i&&(e.TgZ(0,"th",19),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Tag")))}function ue(i,a){if(1&i&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Oqu(t.Tags.toString())}}function ge(i,a){1&i&&(e.TgZ(0,"th",19),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"KnowledgeItem")))}function he(i,a){if(1&i&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Oqu(t.KnowledgeItemID)}}function _e(i,a){1&i&&(e.TgZ(0,"th",23),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"CreatedAt")))}function xe(i,a){if(1&i&&(e.TgZ(0,"td",20),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.CreatedAt,"yyyy-M-d HH:mm:ss"))}}function fe(i,a){1&i&&e._UZ(0,"tr",24)}function Ze(i,a){1&i&&e._UZ(0,"tr",25)}let Ce=(()=>{class i{constructor(t,o,n){this.odataService=t,this.dialog=o,this.uiUtilSrv=n,this.displayedColumns=["id","itemtype","tags","knowledgeitem","createdat"],this.dataSource=[],this.resultsLength=0,this.isLoadingResults=!0,this.refreshEvent=new e.vpe}getExerciseItemTypeName(t){return(0,E.of)(t)}get isExpertMode(){return this.odataService.isLoggedin}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,U.T)(this.sort.sortChange,this.paginator.page,this.refreshEvent).pipe((0,J.O)({}),(0,k.w)(()=>{this.isLoadingResults=!0;const t=this.paginator.pageSize;return this.odataService.getExerciseItems(t,t*this.paginator.pageIndex,this.sort.active,this.sort.direction)}),(0,V.x)(()=>this.isLoadingResults=!1),(0,$.U)(t=>(this.resultsLength=t.totalCount,t.items)),(0,L.K)(()=>(0,w.of)([]))).subscribe({next:t=>this.dataSource=t,error:t=>this.uiUtilSrv.showSnackInfo(t)})}onGoToPreview(){const t=[];this.dataSource.forEach(o=>{t.push({refType:m.ik.ExerciseItem,refId:o.ID})}),this.uiUtilSrv.navigatePreviewPage(t)}onGoToSearch(){this.uiUtilSrv.navigateExerciseItemSearchPage()}onDeleteItem(t){this.odataService.deleteExerciseItem(t).subscribe({next:o=>{this.onRefreshList()},error:o=>{this.uiUtilSrv.showSnackInfo(o)}})}onRefreshList(){this.refreshEvent.emit()}resetPaging(){this.paginator.pageIndex=0}onDisplayItem(t){this.uiUtilSrv.navigateExerciseItemDisplayPage(t)}onChangeItem(t){this.uiUtilSrv.navigateExerciseItemChangePage(t)}onAddToCollection(t){this.odataService.getUserCollections().subscribe({next:o=>{const n=o.items;this.dialog.open(re,{width:"600px",closeOnNavigation:!1,data:{excitemid:t,availableColls:n,collids:[]}}).afterClosed().subscribe(s=>{const l=[];s.collids.forEach(O=>{const te=n.findIndex(A=>A.ID===+O);if(-1!==te){const A=new m.ly;A.ID=n[te].ID,A.RefID=t,A.RefType=m.ik.ExerciseItem,l.push(A)}}),l.length>0&&this.odataService.addExerciseItemToCollection(l).subscribe({next:O=>{this.uiUtilSrv.showSnackInfo("DONE")},error:O=>{this.uiUtilSrv.showSnackInfo(O)}})})},error:o=>{this.uiUtilSrv.showSnackInfo(o)}})}onNewPractice(t){this.dialog.open(le,{width:"600px",closeOnNavigation:!1,data:{excitemid:t,pracDate:(new Date).toDateString(),score:void 0}}).afterClosed().subscribe(n=>{const r=new E.oh;r.RefID=n.excitemid,r.Score=n.score,r.TakenDate=new Date,r.User=this.odataService.currentUser.getUserId(),this.odataService.createExerciseItemUserScore(r).subscribe({next:s=>{this.uiUtilSrv.showSnackInfo("DONE")},error:s=>{this.uiUtilSrv.showSnackInfo(s)}})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.CB),e.Y36(g.uw),e.Y36(f.dM))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-exercise-items"]],viewQuery:function(t,o){if(1&t&&(e.Gf(T.NW,5),e.Gf(I.YE,5)),2&t){let n;e.iGM(n=e.CRH())&&(o.paginator=n.first),e.iGM(n=e.CRH())&&(o.sort=n.first)}},decls:48,vars:28,consts:[[1,"toolbar-spacer"],["mat-icon-button","","color","primary","routerLink","create",3,"disabled","matTooltip"],["mat-icon-button","","color","accent",2,"margin-left","12px",3,"disabled","matTooltip","click"],["mat-icon-button","","color","accent","routerLink","score",2,"margin-left","12px",3,"disabled","matTooltip"],["mat-icon-button","","color","accent",3,"disabled","matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","itemtype"],["matColumnDef","tags"],["matColumnDef","knowledgeitem"],["matColumnDef","createdat"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click"],["mat-icon-button","","color","warn",3,"disabled","matTooltip","click"],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(e.TgZ(0,"mat-toolbar-row"),e.TgZ(1,"span"),e.TgZ(2,"h1"),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e.qZA(),e._UZ(5,"span",0),e.TgZ(6,"section"),e.TgZ(7,"button",1),e.ALo(8,"transloco"),e.TgZ(9,"mat-icon"),e._uU(10,"add_circle"),e.qZA(),e.qZA(),e.TgZ(11,"button",2),e.NdJ("click",function(){return o.onGoToSearch()}),e.ALo(12,"transloco"),e.TgZ(13,"mat-icon"),e._uU(14,"search"),e.qZA(),e.qZA(),e.TgZ(15,"button",3),e.ALo(16,"transloco"),e.TgZ(17,"mat-icon"),e._uU(18,"recent_actors"),e.qZA(),e.qZA(),e.TgZ(19,"button",4),e.NdJ("click",function(){return o.onGoToPreview()}),e.ALo(20,"transloco"),e.TgZ(21,"mat-icon"),e._uU(22,"slideshow"),e.qZA(),e.qZA(),e.TgZ(23,"button",2),e.NdJ("click",function(){return o.onRefreshList()}),e.ALo(24,"transloco"),e.TgZ(25,"mat-icon"),e._uU(26,"refresh"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",5),e.TgZ(28,"div",6),e.TgZ(29,"table",7),e.NdJ("matSortChange",function(){return o.resetPaging()}),e.ynx(30,8),e.YNc(31,se,2,0,"th",9),e.YNc(32,ce,23,21,"td",10),e.BQk(),e.ynx(33,11),e.YNc(34,me,3,3,"th",9),e.YNc(35,de,3,3,"td",10),e.BQk(),e.ynx(36,12),e.YNc(37,pe,3,3,"th",9),e.YNc(38,ue,2,1,"td",10),e.BQk(),e.ynx(39,13),e.YNc(40,ge,3,3,"th",9),e.YNc(41,he,2,1,"td",10),e.BQk(),e.ynx(42,14),e.YNc(43,_e,3,3,"th",15),e.YNc(44,xe,3,4,"td",10),e.BQk(),e.YNc(45,fe,1,0,"tr",16),e.YNc(46,Ze,1,0,"tr",17),e.qZA(),e.qZA(),e._UZ(47,"mat-paginator",18),e.qZA()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,16,"ExerciseItem")),e.xp6(4),e.s9C("matTooltip",e.lcZ(8,18,"Common.Create")),e.Q6J("disabled",!o.isExpertMode),e.xp6(4),e.s9C("matTooltip",e.lcZ(12,20,"Common.Search")),e.Q6J("disabled",!o.isExpertMode||o.dataSource.length<=0),e.xp6(4),e.s9C("matTooltip",e.lcZ(16,22,"PracticeHistories")),e.Q6J("disabled",!o.isExpertMode),e.xp6(4),e.s9C("matTooltip",e.lcZ(20,24,"Common.Preview")),e.Q6J("disabled",!o.isExpertMode||o.dataSource.length<=0),e.xp6(4),e.s9C("matTooltip",e.lcZ(24,26,"Common.Refresh")),e.Q6J("disabled",!o.isExpertMode),e.xp6(6),e.Q6J("dataSource",o.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("length",o.resultsLength)("pageSize",20))},directives:[M.rD,C.lW,S.rH,G.gM,y.Hw,p.BZ,I.YE,p.w1,p.fO,p.Dz,p.as,p.nj,T.NW,p.ge,p.ev,I.nU,p.XQ,p.Gk],pipes:[Z.Ot,u.uU],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.mat-column-id[_ngcontent-%COMP%]{max-width:300px;width:300px}.mat-column-itemtype[_ngcontent-%COMP%]{max-width:120px;width:120px}.mat-column-tags[_ngcontent-%COMP%]{max-width:250px;width:150px}.mat-column-created[_ngcontent-%COMP%]{max-width:120px;width:120px}"]}),i})();var Te=c(2298),z=c(6461),x=c(2937),B=c(9909),h=c(3738),q=c(171),F=c(7441),D=c(8341),N=c(5618),Q=c(2458);function ve(i,a){if(1&i&&(e.TgZ(0,"mat-option",19),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(e.lcZ(2,2,t.i18nterm))}}function Ae(i,a){1&i&&(e.TgZ(0,"mat-icon",22),e._uU(1,"cancel"),e.qZA())}function Ie(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-chip",20),e.NdJ("removed",function(){const r=e.CHM(t).$implicit;return e.oxw().removeTag(r)}),e._uU(1),e.YNc(2,Ae,2,0,"mat-icon",21),e.qZA()}if(2&i){const t=a.$implicit,o=e.oxw();e.Q6J("selectable",o.selectable)("removable",o.isEditable),e.xp6(1),e.hij(" ",t," "),e.xp6(1),e.Q6J("ngIf",o.isEditable)}}function we(i,a){if(1&i&&(e.TgZ(0,"mat-expansion-panel"),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e.TgZ(5,"mat-panel-description"),e._uU(6),e.ALo(7,"transloco"),e.TgZ(8,"mat-icon"),e._uU(9,"info"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",23),e.TgZ(11,"div",24),e.TgZ(12,"mat-form-field",3),e.TgZ(13,"mat-label"),e._uU(14),e.ALo(15,"transloco"),e.qZA(),e._UZ(16,"input",25),e.ALo(17,"transloco"),e.ALo(18,"date"),e.qZA(),e.qZA(),e.TgZ(19,"div",24),e.TgZ(20,"mat-form-field",3),e.TgZ(21,"mat-label"),e._uU(22),e.ALo(23,"transloco"),e.qZA(),e._UZ(24,"input",25),e.ALo(25,"transloco"),e.ALo(26,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,8,"Administrative")),e.xp6(3),e.Oqu(e.lcZ(7,10,"AdministrativeInfo")),e.xp6(8),e.Oqu(e.lcZ(15,12,"CreatedAt")),e.xp6(2),e.s9C("placeholder",e.lcZ(17,14,"CreatedAt")),e.Q6J("ngModel",e.xi3(18,16,t.itemObject.CreatedAt,"yyyy-M-d HH:mm:ss")),e.xp6(6),e.Oqu(e.lcZ(23,19,"ModifiedAt")),e.xp6(2),e.s9C("placeholder",e.lcZ(25,21,"ModifiedAt")),e.Q6J("ngModel",e.xi3(26,23,t.itemObject.ModifiedAt,"yyyy-M-d HH:mm:ss"))}}function Ee(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-toolbar"),e.TgZ(1,"h3"),e._uU(2),e.ALo(3,"transloco"),e.qZA(),e._UZ(4,"div",26),e.TgZ(5,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().openUploadDialog()}),e._uU(6,"Upload"),e.qZA(),e.qZA()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Content")))}function be(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",24),e.TgZ(1,"ngx-monaco-editor",28),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().content=n}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("options",t.editorOptions)("ngModel",t.content)}}function Me(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-toolbar"),e.TgZ(1,"h3"),e._uU(2),e.ALo(3,"transloco"),e.qZA(),e._UZ(4,"div",26),e.TgZ(5,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().openAnswerUploadDialog()}),e.TgZ(6,"mat-icon"),e._uU(7,"file_upload"),e.qZA(),e.qZA(),e.qZA()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Answer")))}function qe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",24),e.TgZ(1,"ngx-monaco-editor",28),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().answerContent=n}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("options",t.editorOptions)("ngModel",t.answerContent)}}let Y=(()=>{class i{constructor(t,o,n,r){this.dialog=t,this.activateRoute=o,this.uiUtilSrv=n,this.odataService=r,this.routerID=-1,this.uiMode=x.sk.Create,this.currentMode="",this.editorOptions={theme:"vs-dark",wordWrap:"on",roundedSelection:!0},this.content="New Exercise Item",this.answerContent="",this.mathOptions={displayMode:!0,throwOnError:!1,errorColor:"#cc0000"},this.selectable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[z.K5,z.OC],this.tags=[],this.arExerciseTypes=[],this.arExerciseTypes=(0,E.BF)(),this.itemFormGroup=new d.cw({idControl:new d.NI({value:null,disabled:!0}),typeControl:new d.NI({value:E.Ue.Question}),knowledgeControl:new d.NI,tagControl:new d.NI})}get isDisplayMode(){return this.uiMode===x.sk.Display}get isCreateMode(){return this.uiMode===x.sk.Create}get isUpdateMode(){return this.uiMode===x.sk.Update}get isEditable(){return this.uiMode===x.sk.Create||this.uiMode===x.sk.Update}ngOnInit(){this.destroyed$=new Te.t(1),this.activateRoute.url.subscribe({next:t=>{t instanceof Array&&t.length>0&&("create"===t[0].path?(this.routerID=-1,this.uiMode=x.sk.Create,this.currentMode="Common.Create"):"edit"===t[0].path?(this.routerID=+t[1].path,this.uiMode=x.sk.Update,this.currentMode="Common.Change"):"display"===t[0].path&&(this.routerID=+t[1].path,this.uiMode=x.sk.Display,this.currentMode="Common.Display")),-1!==this.routerID&&this.odataService.readExerciseItem(this.routerID,this.uiMode===x.sk.Update).subscribe({next:o=>{this.onSetItemData(o),this.itemObject=o},error:o=>{console.error(o)}})},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})}ngOnDestroy(){this.destroyed$&&(this.destroyed$.complete(),this.destroyed$=void 0)}onOK(){var t,o;if(this.isCreateMode){if(!this.itemFormGroup.valid)return void(this.itemFormGroup.errors&&console.error(this.itemFormGroup.errors));this.itemObject=new E.ce,this.itemObject.ItemType=null===(t=this.itemFormGroup.get("typeControl"))||void 0===t?void 0:t.value,this.itemObject.Content=this.content,this.itemObject.Tags=this.tags,this.itemObject.Answer=this.answerContent,this.odataService.createExerciseItem(this.itemObject).subscribe({next:n=>{this.uiUtilSrv.navigateExerciseItemDisplayPage(n.ID)},error:n=>{this.uiUtilSrv.showSnackInfo(n)}})}else if(this.isUpdateMode){if(!this.itemFormGroup.valid)return void(this.itemFormGroup.errors&&console.log(this.itemFormGroup.errors));this.itemObject&&(this.itemObject.ItemType=null===(o=this.itemFormGroup.get("typeControl"))||void 0===o?void 0:o.value,this.itemObject.Content=this.content,this.itemObject.Tags=this.tags,this.itemObject.Answer=this.answerContent,this.odataService.changeExerciseItem(this.itemObject).subscribe({next:n=>{this.uiUtilSrv.navigateExerciseItemDisplayPage(n.ID)},error:n=>{this.uiUtilSrv.showSnackInfo(n)}}))}}openUploadDialog(){this.dialog.open(B.J,{width:"50%",height:"50%"}).afterClosed().subscribe({next:o=>{console.log(o),o.forEach(n=>{this.content+=`\n![Img](${n.url})\n          `})}})}openAnswerUploadDialog(){this.dialog.open(B.J,{width:"50%",height:"50%"}).afterClosed().subscribe({next:o=>{console.log(o),o.forEach(n=>{this.answerContent+=`\n  ![Img](${n.url})\n            `})}})}addTag(t){const o=t.input,n=t.value;(n||"").trim()&&this.tags.push(n.trim()),o&&(o.value="")}removeTag(t){const o=this.tags.indexOf(t);o>=0&&this.tags.splice(o,1)}onSetItemData(t){var o,n,r;null===(o=this.itemFormGroup.get("idControl"))||void 0===o||o.setValue(t.ID),null===(n=this.itemFormGroup.get("idControl"))||void 0===n||n.disable(),null===(r=this.itemFormGroup.get("typeControl"))||void 0===r||r.setValue(+t.ItemType),this.content=t.Content,this.tags=t.Tags,this.isDisplayMode?this.itemFormGroup.disable():this.itemFormGroup.markAsPristine()}onReturnToList(){this.uiUtilSrv.navigateExerciseItemListPage()}onCreateNewOne(){this.uiUtilSrv.navigateExerciseItemCreatePage()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.uw),e.Y36(S.gz),e.Y36(f.dM),e.Y36(f.CB))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-exercise-item-detail"]],decls:65,vars:47,consts:[["multi","",1,"example-headers-align"],["expanded",""],[3,"formGroup"],["appearance","fill",1,"control-full-width"],["matInput","","type","text","placeholder","ID","formControlName","idControl"],["required","","formControlName","typeControl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","tagControl"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","New tag...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["matInput","","type","text","placeholder","Knowledge ID","formControlName","knowledgeControl"],[4,"ngIf"],["fxLayout","row",1,"control-full-width",2,"height","500px"],["fxFlex","50",4,"ngIf"],["fxFlex","",2,"height","100%","overflow-y","scroll"],["katex","",3,"data","katexOptions"],["mat-button","",3,"disabled","click"],["mat-button","",3,"click"],[3,"value"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],["fxLayout","row",1,"control-full-width"],["fxFlex","50"],["matInput","","type","text","disabled","",3,"placeholder","ngModel"],[1,"toolbar-spacer"],["mat-raised-button","",3,"click"],[2,"height","100%",3,"options","ngModel","ngModelChange"]],template:function(t,o){if(1&t&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-header"),e.TgZ(2,"mat-card-title"),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e.TgZ(5,"mat-card-subtitle"),e._uU(6),e.ALo(7,"transloco"),e.qZA(),e.qZA(),e.TgZ(8,"mat-card-content"),e.TgZ(9,"mat-accordion",0),e.TgZ(10,"mat-expansion-panel",1),e.TgZ(11,"mat-expansion-panel-header"),e.TgZ(12,"mat-panel-title"),e._uU(13),e.ALo(14,"transloco"),e.qZA(),e.TgZ(15,"mat-panel-description"),e._uU(16),e.ALo(17,"transloco"),e.TgZ(18,"mat-icon"),e._uU(19,"public"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"form",2),e.TgZ(21,"mat-form-field",3),e.TgZ(22,"mat-label"),e._uU(23,"#"),e.qZA(),e._UZ(24,"input",4),e.qZA(),e.TgZ(25,"mat-form-field",3),e.TgZ(26,"mat-label"),e._uU(27),e.ALo(28,"transloco"),e.qZA(),e.TgZ(29,"mat-select",5),e.YNc(30,ve,3,4,"mat-option",6),e.qZA(),e.qZA(),e.TgZ(31,"mat-form-field",3),e.TgZ(32,"mat-label"),e._uU(33),e.ALo(34,"transloco"),e.qZA(),e.TgZ(35,"mat-chip-list",7,8),e.YNc(37,Ie,3,4,"mat-chip",9),e.TgZ(38,"input",10),e.NdJ("matChipInputTokenEnd",function(r){return o.addTag(r)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"mat-form-field",3),e.TgZ(40,"mat-label"),e._uU(41),e.ALo(42,"transloco"),e.qZA(),e._UZ(43,"input",11),e.qZA(),e.qZA(),e.qZA(),e.YNc(44,we,27,26,"mat-expansion-panel",12),e.qZA(),e.YNc(45,Ee,7,3,"mat-toolbar",12),e.TgZ(46,"div",13),e.YNc(47,be,2,2,"div",14),e.TgZ(48,"div",15),e._UZ(49,"markdown",16),e.qZA(),e.qZA(),e.YNc(50,Me,8,3,"mat-toolbar",12),e.TgZ(51,"div",13),e.YNc(52,qe,2,2,"div",14),e.TgZ(53,"div",15),e._UZ(54,"markdown",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(55,"mat-card-actions"),e.TgZ(56,"button",17),e.NdJ("click",function(){return o.onOK()}),e._uU(57),e.ALo(58,"transloco"),e.qZA(),e.TgZ(59,"button",18),e.NdJ("click",function(){return o.onReturnToList()}),e._uU(60),e.ALo(61,"transloco"),e.qZA(),e.TgZ(62,"button",17),e.NdJ("click",function(){return o.onCreateNewOne()}),e._uU(63),e.ALo(64,"transloco"),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.MAs(36);e.xp6(3),e.Oqu(e.lcZ(4,27,"ExerciseItem")),e.xp6(3),e.Oqu(e.lcZ(7,29,o.currentMode)),e.xp6(7),e.Oqu(e.lcZ(14,31,"Header")),e.xp6(3),e.Oqu(e.lcZ(17,33,"HeaderInfo")),e.xp6(4),e.Q6J("formGroup",o.itemFormGroup),e.xp6(7),e.Oqu(e.lcZ(28,35,"Type")),e.xp6(3),e.Q6J("ngForOf",o.arExerciseTypes),e.xp6(3),e.Oqu(e.lcZ(34,37,"Tags")),e.xp6(4),e.Q6J("ngForOf",o.tags),e.xp6(1),e.Q6J("matChipInputFor",n)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes)("matChipInputAddOnBlur",o.addOnBlur),e.xp6(3),e.Oqu(e.lcZ(42,39,"KnowledgeItem")),e.xp6(3),e.Q6J("ngIf",!o.isCreateMode&&o.itemObject),e.xp6(1),e.Q6J("ngIf",o.isCreateMode),e.xp6(2),e.Q6J("ngIf",!o.isDisplayMode),e.xp6(2),e.Q6J("data",o.content)("katexOptions",o.mathOptions),e.xp6(1),e.Q6J("ngIf",o.isCreateMode),e.xp6(2),e.Q6J("ngIf",o.isCreateMode),e.xp6(2),e.Q6J("data",o.answerContent)("katexOptions",o.mathOptions),e.xp6(2),e.Q6J("disabled",!(o.isEditable&&o.itemFormGroup.valid)),e.xp6(1),e.Oqu(e.lcZ(58,41,"Save")),e.xp6(3),e.Oqu(e.lcZ(61,43,"Common.ReturnToList")),e.xp6(2),e.Q6J("disabled",!o.isDisplayMode),e.xp6(1),e.Oqu(e.lcZ(64,45,"Common.CreateAnotherOne"))}},directives:[h.a8,h.dk,h.n5,h.$j,h.dn,q.pp,q.ib,q.yz,q.yK,q.u4,y.Hw,d._Y,d.JL,d.sg,_.KE,_.hX,b.Nt,d.Fj,d.JJ,d.u,F.gD,d.Q7,u.sg,D.qn,D.oH,u.O5,N.xw,N.yH,H.lF,h.hq,C.lW,Q.ey,D.HS,D.qH,d.On,M.Ye,R.T2],pipes:[Z.Ot,u.uU],styles:[".example-form[_ngcontent-%COMP%]{margin:8px;min-width:150px;max-width:500px;width:100%}.mat-card-actions[_ngcontent-%COMP%]{margin-top:10px}.example-action-buttons[_ngcontent-%COMP%]{padding-bottom:20px}.example-headers-align[_ngcontent-%COMP%]{margin:8px}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%], .example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{flex-basis:0}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]}),i})();var K=c(6215),Ne=c(1769),v=c(3220),W=c(7539),X=c(259);function Se(i,a){if(1&i&&(e.TgZ(0,"mat-option",25),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.displayas)," ")}}function ye(i,a){if(1&i&&(e.TgZ(0,"mat-option",25),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.i18nterm)," ")}}function De(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field"),e.TgZ(1,"input",26),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().$implicit.value[0]=n}),e.ALo(2,"transloco"),e.qZA(),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.s9C("placeholder",e.lcZ(2,2,"Value")),e.Q6J("ngModel",t.value[0])}}function Oe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field"),e.TgZ(1,"input",27),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().$implicit.value[1]=n}),e.ALo(2,"transloco"),e.qZA(),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.s9C("placeholder",e.lcZ(2,2,"Value")),e.Q6J("ngModel",t.value[1])}}function Ue(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field"),e.TgZ(1,"input",28),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().$implicit.value[0]=n}),e.ALo(2,"transloco"),e.qZA(),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.s9C("placeholder",e.lcZ(2,2,"Value")),e.Q6J("ngModel",t.value[0])}}function Je(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field"),e.TgZ(1,"input",29),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().$implicit.value[0]=n}),e.ALo(2,"transloco"),e.qZA(),e._UZ(3,"mat-datepicker-toggle",30),e._UZ(4,"mat-datepicker",null,31),e.qZA()}if(2&i){const t=e.MAs(5),o=e.oxw().$implicit;e.xp6(1),e.s9C("placeholder",e.lcZ(2,4,"Value")),e.Q6J("ngModel",o.value[0])("matDatepicker",t),e.xp6(2),e.Q6J("for",t)}}function ke(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field"),e.TgZ(1,"input",29),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().$implicit.value[1]=n}),e.ALo(2,"transloco"),e.qZA(),e._UZ(3,"mat-datepicker-toggle",30),e._UZ(4,"mat-datepicker",null,32),e.qZA()}if(2&i){const t=e.MAs(5),o=e.oxw().$implicit;e.xp6(1),e.s9C("placeholder",e.lcZ(2,4,"Value")),e.Q6J("ngModel",o.value[1])("matDatepicker",t),e.xp6(2),e.Q6J("for",t)}}function $e(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",33),e.TgZ(1,"mat-checkbox",34),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().$implicit.value[0]=n}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngModel",t.value[0])}}function Le(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"mat-form-field"),e.TgZ(2,"mat-select",18),e.NdJ("ngModelChange",function(n){return e.CHM(t).$implicit.fieldName=n})("selectionChange",function(){const r=e.CHM(t).$implicit;return e.oxw().onFieldSelectionChanged(r)}),e.ALo(3,"transloco"),e.YNc(4,Se,3,4,"mat-option",19),e.qZA(),e.qZA(),e.TgZ(5,"mat-form-field"),e.TgZ(6,"mat-select",20),e.NdJ("ngModelChange",function(n){return e.CHM(t).$implicit.operator=n}),e.ALo(7,"transloco"),e.YNc(8,ye,3,4,"mat-option",19),e.ALo(9,"operatorFilter"),e.qZA(),e.qZA(),e.YNc(10,De,3,4,"mat-form-field",21),e.YNc(11,Oe,3,4,"mat-form-field",21),e.YNc(12,Ue,3,4,"mat-form-field",21),e.YNc(13,Je,6,6,"mat-form-field",21),e.YNc(14,ke,6,6,"mat-form-field",21),e.YNc(15,$e,2,1,"div",22),e.TgZ(16,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().onAddFilter()}),e.TgZ(17,"mat-icon"),e._uU(18,"add"),e.qZA(),e.qZA(),e.TgZ(19,"button",24),e.NdJ("click",function(){const r=e.CHM(t).index;return e.oxw().onRemoveFilter(r)}),e.TgZ(20,"mat-icon"),e._uU(21,"close"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=a.$implicit,o=e.oxw();e.xp6(2),e.s9C("placeholder",e.lcZ(3,12,"Field")),e.Q6J("ngModel",t.fieldName),e.xp6(2),e.Q6J("ngForOf",o.allFields),e.xp6(2),e.s9C("placeholder",e.lcZ(7,14,"Operator")),e.Q6J("ngModel",t.operator),e.xp6(2),e.Q6J("ngForOf",e.xi3(9,16,o.allOperators,t.valueType)),e.xp6(2),e.Q6J("ngIf",1===t.valueType),e.xp6(1),e.Q6J("ngIf",1===t.valueType),e.xp6(1),e.Q6J("ngIf",2===t.valueType),e.xp6(1),e.Q6J("ngIf",3===t.valueType),e.xp6(1),e.Q6J("ngIf",3===t.valueType),e.xp6(1),e.Q6J("ngIf",4===t.valueType)}}function Fe(i,a){1&i&&(e.TgZ(0,"th",35),e._uU(1,"#"),e.qZA())}function Qe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"td",36),e.TgZ(1,"div"),e._uU(2),e.TgZ(3,"a",37),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().onDisplayItem(r.ID)}),e._uU(4),e.ALo(5,"transloco"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=a.$implicit;e.xp6(2),e.hij(" ",t.ID," "),e.xp6(2),e.Oqu(e.lcZ(5,2,"Common.Display"))}}function Ye(i,a){1&i&&(e.TgZ(0,"th",35),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Type")))}function Pe(i,a){if(1&i&&(e.TgZ(0,"td",36),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i){const t=a.$implicit,o=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,o.getExerciseItemTypeName(t.ItemType)))}}function Re(i,a){1&i&&(e.TgZ(0,"th",35),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Tag")))}function He(i,a){if(1&i&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Oqu(t.Tags.toString())}}function Ve(i,a){1&i&&(e.TgZ(0,"th",35),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"KnowledgeItem")))}function je(i,a){if(1&i&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Oqu(t.KnowledgeItemID)}}function Ge(i,a){1&i&&(e.TgZ(0,"th",35),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"CreatedAt")))}function ze(i,a){if(1&i&&(e.TgZ(0,"td",36),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.CreatedAt,"yyyy-M-d HH:mm:ss"))}}function Be(i,a){1&i&&e._UZ(0,"tr",38)}function Ke(i,a){1&i&&e._UZ(0,"tr",39)}let We=(()=>{class i{constructor(t,o){this.odataService=t,this.uiUtilSrv=o,this.filters=[],this.allOperators=[],this.allFields=[],this.filterEditable=!0,this.pageSize=20,this.pageSizeOptions=[20,40,60,100],this.isLoadingResults=!1,this.subjFilters=new K.X([]),this.displayedColumns=["id","itemtype","tags","knowledgeitem","createdat"],this.dataSource=[],this.resultsLength=0,this.allOperators=m.c.getGeneralFilterOperatorDisplayStrings(),this.allFields=[{displayas:"Content",value:"Content",valueType:2},{displayas:"Tag",value:"Tags",valueType:2},{displayas:"Type",value:"ExerciseType",valueType:2}]}ngOnInit(){this.onAddFilter()}ngAfterViewInit(){this.subjFilters.subscribe(()=>this.paginator.pageIndex=0),(0,U.T)(this.subjFilters,this.paginator.page).pipe((0,J.O)({}),(0,k.w)(()=>{if(this.subjFilters.value.length<=0)return(0,w.of)([]);this.isLoadingResults=!0;const t=this.prepareFilters(this.subjFilters.value),o=this.paginator.pageSize;return this.odataService.searchExerciseItems(o,o*this.paginator.pageIndex,t)}),(0,V.x)(()=>this.isLoadingResults=!1),(0,$.U)(t=>(this.resultsLength=t.totalCount?t.totalCount:0,t.items)),(0,L.K)(()=>(0,w.of)(void 0))).subscribe({next:t=>this.dataSource=t||[],error:t=>this.uiUtilSrv.showSnackInfo(t)})}getExerciseItemTypeName(t){return(0,m.of)(t)}onAddFilter(){this.filters.push(new m.T$)}onRemoveFilter(t){this.filters.splice(t,1),0===this.filters.length&&this.onAddFilter()}onFieldSelectionChanged(t){this.allFields.forEach(o=>{o.value===t.fieldName&&(t.valueType=o.valueType)})}prepareFilters(t){let o="";t.sort((r,s)=>r.fieldName.localeCompare(s.fieldName));let n=t.map(r=>r.fieldName);return n=Array.from(new Set(n)),n.forEach(r=>{let s="";t.forEach(l=>{l.fieldName===r&&("Content"===l.fieldName||"Tags"===l.fieldName)&&(l.operator===m.Nu.Equal?s=s?`${s} or ${l.fieldName} eq '${l.lowValue}'`:`${l.fieldName} eq '${l.lowValue}'`:l.operator===m.Nu.Like&&(s=s?`${s} or contains(${l.fieldName},'${l.lowValue}')`:`contains(${l.fieldName},'${l.lowValue}')`))}),o=o?`${o} and ${s}`:`${s}`}),o}onSearch(){const t=[];this.filters.forEach(o=>{const n={};switch(n.valueType=+o.valueType,o.valueType){case m._g.boolean:case m._g.date:case m._g.number:break;case m._g.string:n.fieldName=o.fieldName,n.operator=+o.operator,n.lowValue=o.value[0],n.highValue=o.operator===m.Nu.Between?o.value[1]:""}t.push(n)}),this.subjFilters.next(t)}onDisplayItem(t){this.uiUtilSrv.navigateExerciseItemDisplayPage(t)}onGoToPreview(){const t=[];this.dataSource.forEach(o=>{t.push({refType:m.ik.ExerciseItem,refId:o.ID})}),this.uiUtilSrv.navigatePreviewPage(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.CB),e.Y36(f.dM))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-exercise-item-search"]],viewQuery:function(t,o){if(1&t&&e.Gf(T.NW,7),2&t){let n;e.iGM(n=e.CRH())&&(o.paginator=n.first)}},decls:44,vars:18,consts:[["class","control-full-width",4,"ngFor","ngForOf"],[1,"control-full-width"],["mat-button","","aria-label","Search",3,"click"],[1,"table-container","mat-elevation-z8"],["color","primary"],["mat-flat-button","","color","primary",3,"click"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","itemtype"],["matColumnDef","tags"],["matColumnDef","knowledgeitem"],["matColumnDef","createdat"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[3,"placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"placeholder","ngModel","ngModelChange"],[4,"ngIf"],["class","typechkbox",4,"ngIf"],["mat-button","","mat-icon-button","","aria-label","Add",3,"click"],["mat-button","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["matInput","","type","number","name","lvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","","type","number","name","hvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","","type","text","name","lvalue_2",3,"placeholder","ngModel","ngModelChange"],["matInput","",3,"ngModel","matDatepicker","placeholder","ngModelChange"],["matSuffix","",3,"for"],["lvpicker",""],["hvpicker",""],[1,"typechkbox"],[3,"ngModel","ngModelChange"],["mat-header-cell",""],["mat-cell",""],["mat-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-header"),e.TgZ(2,"mat-card-title"),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e.TgZ(5,"mat-card-subtitle"),e._uU(6),e.ALo(7,"transloco"),e.qZA(),e.qZA(),e.TgZ(8,"mat-card-content"),e.TgZ(9,"div"),e.YNc(10,Le,22,19,"div",0),e.TgZ(11,"div",1),e.TgZ(12,"button",2),e.NdJ("click",function(){return o.onSearch()}),e.TgZ(13,"mat-icon"),e._uU(14,"search"),e.qZA(),e._uU(15),e.ALo(16,"transloco"),e.qZA(),e.qZA(),e.qZA(),e._UZ(17,"mat-divider"),e.TgZ(18,"div",3),e.TgZ(19,"mat-toolbar",4),e.TgZ(20,"mat-toolbar-row"),e.TgZ(21,"button",5),e.NdJ("click",function(){return o.onGoToPreview()}),e._uU(22),e.ALo(23,"transloco"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",6),e.TgZ(25,"table",7),e.ynx(26,8),e.YNc(27,Fe,2,0,"th",9),e.YNc(28,Qe,6,4,"td",10),e.BQk(),e.ynx(29,11),e.YNc(30,Ye,3,3,"th",9),e.YNc(31,Pe,3,3,"td",10),e.BQk(),e.ynx(32,12),e.YNc(33,Re,3,3,"th",9),e.YNc(34,He,2,1,"td",10),e.BQk(),e.ynx(35,13),e.YNc(36,Ve,3,3,"th",9),e.YNc(37,je,2,1,"td",10),e.BQk(),e.ynx(38,14),e.YNc(39,Ge,3,3,"th",9),e.YNc(40,ze,3,4,"td",10),e.BQk(),e.YNc(41,Be,1,0,"tr",15),e.YNc(42,Ke,1,0,"tr",16),e.qZA(),e.qZA(),e._UZ(43,"mat-paginator",17),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,10,"ExerciseItem")),e.xp6(3),e.Oqu(e.lcZ(7,12,"Common.Search")),e.xp6(4),e.Q6J("ngForOf",o.filters),e.xp6(5),e.hij(" ",e.lcZ(16,14,"Common.Search")," "),e.xp6(7),e.Oqu(e.lcZ(23,16,"Common.Preview")),e.xp6(3),e.Q6J("dataSource",o.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("length",o.resultsLength)("pageSize",10))},directives:[h.a8,h.dk,h.n5,h.$j,h.dn,u.sg,C.lW,y.Hw,Ne.d,M.Ye,M.rD,p.BZ,p.w1,p.fO,p.Dz,p.as,p.nj,T.NW,_.KE,F.gD,d.JJ,d.On,u.O5,Q.ey,b.Nt,d.wV,d.Fj,v.hl,v.nW,_.R9,v.Mq,W.oG,p.ge,p.ev,C.zs,p.XQ,p.Gk],pipes:[Z.Ot,X.M,u.uU],styles:[".table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;margin-top:16px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.data-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.mat-column-id[_ngcontent-%COMP%]{max-width:300px;width:250px}.mat-column-itemtype[_ngcontent-%COMP%]{max-width:120px;width:120px}.mat-column-tags[_ngcontent-%COMP%]{max-width:250px;width:150px}.mat-column-created[_ngcontent-%COMP%]{max-width:120px;width:120px}"]}),i})();var Xe=c(6738),ee=c.n(Xe);function et(i,a){if(1&i&&(e.TgZ(0,"mat-option",31),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(e.lcZ(2,2,t.displayas))}}function tt(i,a){if(1&i&&(e.TgZ(0,"mat-option",31),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(e.lcZ(2,2,t.i18nterm))}}function ot(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",32),e.TgZ(1,"mat-form-field"),e.TgZ(2,"input",33),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().$implicit.value[0]=n}),e.ALo(3,"transloco"),e.qZA(),e.qZA(),e.TgZ(4,"mat-form-field"),e.TgZ(5,"input",34),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().$implicit.value[1]=n}),e.ALo(6,"transloco"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(2),e.s9C("placeholder",e.lcZ(3,4,"Value")),e.Q6J("ngModel",t.value[0]),e.xp6(3),e.s9C("placeholder",e.lcZ(6,6,"Value")),e.Q6J("ngModel",t.value[1])}}function it(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",32),e.TgZ(1,"mat-form-field"),e.TgZ(2,"input",35),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().$implicit.value[0]=n}),e.ALo(3,"transloco"),e.qZA(),e._UZ(4,"mat-datepicker-toggle",36),e._UZ(5,"mat-datepicker",null,37),e.qZA(),e.TgZ(7,"mat-form-field"),e.TgZ(8,"input",35),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().$implicit.value[1]=n}),e.ALo(9,"transloco"),e.qZA(),e._UZ(10,"mat-datepicker-toggle",36),e._UZ(11,"mat-datepicker",null,38),e.qZA(),e.qZA()}if(2&i){const t=e.MAs(6),o=e.MAs(12),n=e.oxw().$implicit;e.xp6(2),e.s9C("placeholder",e.lcZ(3,8,"Value")),e.Q6J("ngModel",n.value[0])("matDatepicker",t),e.xp6(2),e.Q6J("for",t),e.xp6(4),e.s9C("placeholder",e.lcZ(9,10,"Value")),e.Q6J("ngModel",n.value[1])("matDatepicker",o),e.xp6(2),e.Q6J("for",o)}}function nt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",39),e.TgZ(1,"mat-checkbox",40),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().$implicit.value[0]=n}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngModel",t.value[0])}}function at(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",39),e.TgZ(1,"input",41),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().$implicit.value[0]=n}),e.ALo(2,"transloco"),e.qZA(),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.s9C("placeholder",e.lcZ(2,2,"Value")),e.Q6J("ngModel",t.value[0])}}function rt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"mat-form-field",20),e.TgZ(2,"mat-select",21),e.NdJ("ngModelChange",function(n){return e.CHM(t).$implicit.fieldName=n})("selectionChange",function(){const r=e.CHM(t).$implicit;return e.oxw().onFieldSelectionChanged(r)}),e.ALo(3,"transloco"),e.YNc(4,et,3,4,"mat-option",22),e.qZA(),e.qZA(),e.TgZ(5,"mat-form-field",23),e.TgZ(6,"mat-select",24),e.NdJ("ngModelChange",function(n){return e.CHM(t).$implicit.operator=n}),e.ALo(7,"transloco"),e.YNc(8,tt,3,4,"mat-option",22),e.ALo(9,"operatorFilter"),e.qZA(),e.qZA(),e.TgZ(10,"div",25),e.YNc(11,ot,7,8,"div",26),e.YNc(12,it,13,12,"div",26),e.YNc(13,nt,2,1,"div",27),e.YNc(14,at,3,4,"div",28),e.qZA(),e.TgZ(15,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().onAddFilter()}),e.TgZ(16,"mat-icon"),e._uU(17,"add"),e.qZA(),e.qZA(),e.TgZ(18,"button",30),e.NdJ("click",function(){const r=e.CHM(t).index;return e.oxw().onRemoveFilter(r)}),e.TgZ(19,"mat-icon"),e._uU(20,"close"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=a.$implicit,o=e.oxw();e.xp6(2),e.s9C("placeholder",e.lcZ(3,10,"Field")),e.Q6J("ngModel",t.fieldName),e.xp6(2),e.Q6J("ngForOf",o.allFields),e.xp6(2),e.s9C("placeholder",e.lcZ(7,12,"Operator")),e.Q6J("ngModel",t.operator),e.xp6(2),e.Q6J("ngForOf",e.xi3(9,14,o.allOperators,t.valueType)),e.xp6(2),e.Q6J("ngSwitch",t.valueType),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",3),e.xp6(1),e.Q6J("ngSwitchCase",4)}}function lt(i,a){1&i&&(e.TgZ(0,"th",42),e._uU(1,"#"),e.qZA())}function st(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"td",43),e._uU(1),e.TgZ(2,"button",44),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().onDeleteItem(r.ID)}),e.ALo(3,"transloco"),e.TgZ(4,"mat-icon"),e._uU(5,"remove_circle"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=a.$implicit,o=e.oxw();e.xp6(1),e.hij(" ",t.ID," "),e.xp6(1),e.s9C("matTooltip",e.lcZ(3,3,"Common.Delete")),e.Q6J("disabled",!o.isExpertMode)}}function ct(i,a){1&i&&(e.TgZ(0,"th",42),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ExerciseItem")))}function mt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"td",43),e._uU(1),e.TgZ(2,"button",45),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().onDisplayExerciseItem(r.RefID)}),e.ALo(3,"transloco"),e.TgZ(4,"mat-icon"),e._uU(5,"launch"),e.qZA(),e.qZA(),e.TgZ(6,"button",6),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().onChangeExerciseItem(r.RefID)}),e.ALo(7,"transloco"),e.TgZ(8,"mat-icon"),e._uU(9,"edit"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=a.$implicit,o=e.oxw();e.xp6(1),e.hij(" ",t.RefID," "),e.xp6(1),e.s9C("matTooltip",e.lcZ(3,5,"Common.Display")),e.Q6J("disabled",!o.isExpertMode),e.xp6(4),e.s9C("matTooltip",e.lcZ(7,7,"Common.Change")),e.Q6J("disabled",!o.isExpertMode)}}function dt(i,a){1&i&&(e.TgZ(0,"th",42),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Quiz.Date")))}function pt(i,a){if(1&i&&(e.TgZ(0,"td",43),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.TakenDate,"yyyy-M-d"))}}function ut(i,a){1&i&&(e.TgZ(0,"th",42),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Quiz.Score")))}function gt(i,a){if(1&i&&(e.TgZ(0,"td",43),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Tol(t.Score>=60?"success-score":"fail-score"),e.xp6(1),e.Oqu(t.Score)}}function ht(i,a){1&i&&e._UZ(0,"tr",46)}function _t(i,a){1&i&&e._UZ(0,"tr",47)}const xt=[{path:"",component:Ce},{path:"create",component:Y},{path:"display/:id",component:Y},{path:"edit/:id",component:Y},{path:"search",component:We},{path:"score",component:(()=>{class i{constructor(t,o){this.odataService=t,this.uiUtilSrv=o,this.filters=[],this.allOperators=[],this.allFields=[],this.filterEditable=!0,this.displayedColumns=["id","refid","takendate","score"],this.dataSource=[],this.resultsLength=0,this.isLoadingResults=!0,this.refreshEvent=new e.vpe,this.subjFilters=new K.X([]),this.allOperators=m.c.getGeneralFilterOperatorDisplayStrings(),this.allFields=[{displayas:"Content",value:"Content",valueType:2},{displayas:"Quiz.Date",value:"TakenDate",valueType:3},{displayas:"Quiz.Score",value:"Score",valueType:1},{displayas:"ExerciseItem",value:"RefID",valueType:1}]}get isExpertMode(){return this.odataService.isLoggedin}ngOnInit(){this.onAddFilter()}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,U.T)(this.sort.sortChange,this.paginator.page,this.refreshEvent,this.subjFilters).pipe((0,J.O)({}),(0,k.w)(()=>{if(this.subjFilters.value.length<=0)return(0,w.of)([]);this.isLoadingResults=!0;const t=this.prepareFilters(this.subjFilters.value),o=this.paginator.pageSize;return this.odataService.getExerciseItemUserScores(o,o*this.paginator.pageIndex,t)}),(0,$.U)(t=>(this.isLoadingResults=!1,this.resultsLength=t.totalCount?t.totalCount:0,t.items)),(0,L.K)(()=>(this.isLoadingResults=!1,(0,w.of)([])))).subscribe(t=>this.dataSource=t||[])}onAddFilter(){this.filters.push(new m.T$)}onRemoveFilter(t){this.filters.splice(t,1),0===this.filters.length&&this.onAddFilter()}onFieldSelectionChanged(t){this.allFields.forEach(o=>{o.value===t.fieldName&&(t.valueType=o.valueType)})}prepareFilters(t){let o="";t.sort((r,s)=>r.fieldName.localeCompare(s.fieldName));let n=t.map(r=>r.fieldName);return n=Array.from(new Set(n)),n.forEach(r=>{let s="";t.forEach(l=>{l.fieldName===r&&("Content"===l.fieldName?l.operator===m.Nu.Equal?s=s?`${s} or ${l.fieldName} eq '${l.lowValue}'`:`${l.fieldName} eq '${l.lowValue}'`:l.operator===m.Nu.Like&&(s=s?`${s} or contains(${l.fieldName},'${l.lowValue}')`:`contains(${l.fieldName},'${l.lowValue}')`):"Score"===l.fieldName||"RefID"===l.fieldName?l.operator===m.Nu.Equal?s=s?`${s} or ${l.fieldName} eq ${l.lowValue}`:`${l.fieldName} eq ${l.lowValue}`:l.operator===m.Nu.LargerEqual?s=s?`${s} or ${l.fieldName} ge ${l.lowValue}`:`${l.fieldName} ge ${l.lowValue}`:l.operator===m.Nu.LargerThan?s=s?`${s} or ${l.fieldName} gt ${l.lowValue}`:`${l.fieldName} gt ${l.lowValue}`:l.operator===m.Nu.LessEqual?s=s?`${s} or ${l.fieldName} le ${l.lowValue}`:`${l.fieldName} le ${l.lowValue}`:l.operator===m.Nu.LessThan?s=s?`${s} or ${l.fieldName} lt ${l.lowValue}`:`${l.fieldName} lt ${l.lowValue}`:l.operator===m.Nu.NotEqual&&(s=s?`${s} or ${l.fieldName} ne ${l.lowValue}`:`${l.fieldName} ne ${l.lowValue}`):"TakenDate"===l.fieldName&&(l.operator===m.Nu.Equal?s=s?`${s} or date(${l.fieldName}) eq ${l.lowValue}`:`date(${l.fieldName}) eq ${l.lowValue}`:l.operator===m.Nu.LargerEqual?s=s?`${s} or date(${l.fieldName}) ge ${l.lowValue}`:`date(${l.fieldName}) ge ${l.lowValue}`:l.operator===m.Nu.LargerThan?s=s?`${s} or date(${l.fieldName}) gt ${l.lowValue}`:`date(${l.fieldName}) gt ${l.lowValue}`:l.operator===m.Nu.LessEqual?s=s?`${s} or date(${l.fieldName}) le ${l.lowValue}`:`date(${l.fieldName}) le ${l.lowValue}`:l.operator===m.Nu.LessThan?s=s?`${s} or date(${l.fieldName}) lt ${l.lowValue}`:`date(${l.fieldName}) lt ${l.lowValue}`:l.operator===m.Nu.NotEqual&&(s=s?`${s} or date(${l.fieldName}) ne ${l.lowValue}`:`date(${l.fieldName}) ne ${l.lowValue}`)))}),o=o?`${o} and ${s}`:`${s}`}),o}onSearch(){const t=[];this.filters.forEach(o=>{const n={};switch(n.valueType=+o.valueType,o.valueType){case m._g.boolean:break;case m._g.date:n.fieldName=o.fieldName,n.operator=+o.operator,n.lowValue=ee()(o.value[0]).format("YYYY-MM-DD"),n.highValue=o.operator===m.Nu.Between?ee()(o.value[1]).format("YYYY-MM-DD"):"";break;case m._g.number:n.fieldName=o.fieldName,n.operator=+o.operator,n.lowValue=+o.value[0],n.highValue=o.operator===m.Nu.Between?+o.value[1]:"";break;case m._g.string:n.fieldName=o.fieldName,n.operator=+o.operator,n.lowValue=o.value[0],n.highValue=o.operator===m.Nu.Between?o.value[1]:""}t.push(n)}),this.subjFilters.next(t)}onGoToExerciseItems(){this.uiUtilSrv.navigateExerciseItemListPage()}onDisplayExerciseItem(t){this.uiUtilSrv.navigateExerciseItemDisplayPage(t)}onChangeExerciseItem(t){this.uiUtilSrv.navigateKnowledgeItemChangePage(t)}onDeleteItem(t){this.odataService.deleteExerciseItemUserScore(t).subscribe({next:o=>{this.uiUtilSrv.showSnackInfo("DONE"),this.onRefreshList()},error:o=>{this.uiUtilSrv.showSnackInfo(o)}})}onGoToPreview(){const t=[];this.dataSource.forEach(o=>{t.push({refType:m.ik.ExerciseItem,refId:o.RefID})}),this.uiUtilSrv.navigatePreviewPage(t)}onRefreshList(){this.refreshEvent.emit()}resetPaging(){this.paginator.pageIndex=0}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.CB),e.Y36(f.dM))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-exercise-item-score"]],viewQuery:function(t,o){if(1&t&&(e.Gf(T.NW,5),e.Gf(I.YE,5)),2&t){let n;e.iGM(n=e.CRH())&&(o.paginator=n.first),e.iGM(n=e.CRH())&&(o.sort=n.first)}},decls:47,vars:27,consts:[[1,"toolbar-spacer"],["mat-raised-button","",3,"disabled","matTooltip","click"],[2,"margin","8px"],["fxLayout","row","fxLayoutGap","10px","class","control-full-width",4,"ngFor","ngForOf"],[1,"control-full-width"],["mat-button","","aria-label","Search","color","primary",3,"click"],["mat-icon-button","","color","accent",3,"disabled","matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"example-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","refid"],["matColumnDef","takendate"],["matColumnDef","score"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],["fxLayout","row","fxLayoutGap","10px",1,"control-full-width"],["fxFlex","30"],[3,"placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","15"],[3,"placeholder","ngModel","ngModelChange"],["fxFlex","50","fxLayout","row",3,"ngSwitch"],["fxLayout","row","fxLayoutGap","5px",4,"ngSwitchCase"],["fxLayout","row",4,"ngSwitchCase"],["fxLayout","row",4,"ngSwitchDefault"],["mat-button","","mat-icon-button","","aria-label","Add",3,"click"],["mat-button","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["fxLayout","row","fxLayoutGap","5px"],["matInput","","type","number","name","lvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","","type","number","name","hvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","",3,"ngModel","matDatepicker","placeholder","ngModelChange"],["matSuffix","",3,"for"],["lvpicker",""],["hvpicker",""],["fxLayout","row"],[3,"ngModel","ngModelChange"],["matInput","","type","text","name","lvalue_2",3,"placeholder","ngModel","ngModelChange"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"disabled","matTooltip","click"],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click"],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(e.TgZ(0,"mat-toolbar-row"),e.TgZ(1,"span"),e.TgZ(2,"h1"),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e.qZA(),e._UZ(5,"span",0),e.TgZ(6,"section"),e.TgZ(7,"button",1),e.NdJ("click",function(){return o.onGoToExerciseItems()}),e.ALo(8,"transloco"),e._uU(9),e.ALo(10,"transloco"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",2),e.YNc(12,rt,21,17,"div",3),e.TgZ(13,"div",4),e.TgZ(14,"button",5),e.NdJ("click",function(){return o.onSearch()}),e.TgZ(15,"mat-icon"),e._uU(16,"search"),e.qZA(),e._uU(17),e.ALo(18,"transloco"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"mat-toolbar-row"),e.TgZ(20,"section"),e.TgZ(21,"button",6),e.NdJ("click",function(){return o.onGoToPreview()}),e.ALo(22,"transloco"),e.TgZ(23,"mat-icon"),e._uU(24,"slideshow"),e.qZA(),e.qZA(),e.TgZ(25,"button",6),e.NdJ("click",function(){return o.onRefreshList()}),e.ALo(26,"transloco"),e.TgZ(27,"mat-icon"),e._uU(28,"refresh"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",7),e.TgZ(30,"div",8),e.TgZ(31,"table",9),e.NdJ("matSortChange",function(){return o.resetPaging()}),e.ynx(32,10),e.YNc(33,lt,2,0,"th",11),e.YNc(34,st,6,5,"td",12),e.BQk(),e.ynx(35,13),e.YNc(36,ct,3,3,"th",11),e.YNc(37,mt,10,9,"td",12),e.BQk(),e.ynx(38,14),e.YNc(39,dt,3,3,"th",11),e.YNc(40,pt,3,4,"td",12),e.BQk(),e.ynx(41,15),e.YNc(42,ut,3,3,"th",11),e.YNc(43,gt,3,3,"td",12),e.BQk(),e.YNc(44,ht,1,0,"tr",16),e.YNc(45,_t,1,0,"tr",17),e.qZA(),e.qZA(),e._UZ(46,"mat-paginator",18),e.qZA()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,15,"PracticeHistories")),e.xp6(4),e.s9C("matTooltip",e.lcZ(8,17,"ExerciseItem")),e.Q6J("disabled",!o.isExpertMode),e.xp6(2),e.Oqu(e.lcZ(10,19,"ExerciseItem")),e.xp6(3),e.Q6J("ngForOf",o.filters),e.xp6(5),e.hij(" ",e.lcZ(18,21,"Common.Search")," "),e.xp6(4),e.s9C("matTooltip",e.lcZ(22,23,"Common.Preview")),e.Q6J("disabled",!o.isExpertMode||o.dataSource.length<=0),e.xp6(4),e.s9C("matTooltip",e.lcZ(26,25,"Common.Refresh")),e.Q6J("disabled",!o.isExpertMode),e.xp6(6),e.Q6J("dataSource",o.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("length",o.resultsLength)("pageSize",20))},directives:[M.rD,C.lW,G.gM,u.sg,y.Hw,p.BZ,I.YE,p.w1,p.fO,p.Dz,p.as,p.nj,T.NW,N.xw,N.SQ,_.KE,N.yH,F.gD,d.JJ,d.On,u.RF,u.n9,u.ED,Q.ey,b.Nt,d.wV,d.Fj,v.hl,v.nW,_.R9,v.Mq,W.oG,p.ge,p.ev,p.XQ,p.Gk],pipes:[Z.Ot,X.M,u.uU],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.mat-column-id[_ngcontent-%COMP%]{max-width:300px;width:250px}.mat-column-itemtype[_ngcontent-%COMP%]{max-width:120px;width:120px}.mat-column-tags[_ngcontent-%COMP%]{max-width:250px;width:150px}.mat-column-created[_ngcontent-%COMP%]{max-width:120px;width:120px}.success-score[_ngcontent-%COMP%]{color:green;font-size:16px}.fail-score[_ngcontent-%COMP%]{color:red;font-size:16px}"]}),i})()}];let ft=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[S.Bz.forChild(xt)],S.Bz]}),i})();var Zt=c(558);let Ct=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[],imports:[[u.ez,d.u5,d.UX,oe.U,ie.l,R.nm,H.JP.forChild(),ft,Z.y4,Zt.D]]}),i})()}}]);