"use strict";(self.webpackChunkknowledgebuilder=self.webpackChunkknowledgebuilder||[]).push([[441],{441:(Ct,Y,s)=>{s.r(Y),s.d(Y,{ExerciseItemsModule:()=>xt});var u=s(6814),d=s(6223),R=s(4611),T=s(2164),te=s(5437),oe=s(9002),S=s(2787),e=s(5879),Z=s(1476),w=s(3566),O=s(3019),A=s(2096),U=s(3159),k=s(4664),P=s(4716),q=s(7398),$=s(6306),m=s(9611),E=s(7637),g=s(9347),x=s(2296),b=s(2032),_=s(4170),G=s(9038);const ie=["colls"];function ne(i,a){if(1&i&&(e.TgZ(0,"mat-list-option",9),e._uU(1),e.qZA()),2&i){const t=a.$implicit,o=e.oxw();e.Q6J("disabled",o.isItemExistedInColl(t))("value",t.ID),e.xp6(1),e.hij(" ",t.Name," ")}}let ae=(()=>{class i{constructor(t,o){this.dialogRef=t,this.data=o}ngAfterViewInit(){this.colls.selectionChange.subscribe({next:()=>{this.data.collids=[],this.colls.selectedOptions.selected.forEach(t=>{this.data.collids.push(+t.value)})},error:()=>{}})}onNoClick(){this.dialogRef.close()}isItemExistedInColl(t){return-1!==t.Items.findIndex(o=>o.RefID===this.data.excitemid&&o.RefType===m.ik.ExerciseItem)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.so),e.Y36(g.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hkb-exercise-item-addcoll-dlg"]],viewQuery:function(t,o){if(1&t&&e.Gf(ie,5),2&t){let n;e.iGM(n=e.CRH())&&(o.colls=n.first)}},decls:21,vars:13,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","fill",1,"control-full-width"],["matInput","","disabled","","name","excitemid",3,"ngModel","ngModelChange"],["colls",""],[3,"disabled","value",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"disabled","mat-dialog-close"],[3,"disabled","value"]],template:function(t,o){1&t&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"transloco"),e.qZA(),e.TgZ(3,"div",1)(4,"div")(5,"mat-form-field",2)(6,"mat-label"),e._uU(7,"ID"),e.qZA(),e.TgZ(8,"input",3),e.NdJ("ngModelChange",function(c){return o.data.excitemid=c}),e.qZA()(),e.TgZ(9,"mat-label"),e._uU(10),e.ALo(11,"transloco"),e.qZA(),e.TgZ(12,"mat-selection-list",null,4),e.YNc(14,ne,2,3,"mat-list-option",5),e.qZA()()(),e.TgZ(15,"div",6)(16,"button",7),e.NdJ("click",function(){return o.onNoClick()}),e._uU(17),e.ALo(18,"transloco"),e.qZA(),e.TgZ(19,"button",8),e._uU(20,"OK"),e.qZA()()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,7,"AddToCollection")),e.xp6(7),e.Q6J("ngModel",o.data.excitemid),e.xp6(2),e.Oqu(e.lcZ(11,9,"UserCollection")),e.xp6(4),e.Q6J("ngForOf",o.data.availableColls),e.xp6(3),e.Oqu(e.lcZ(18,11,"Common.NoThanks")),e.xp6(2),e.Q6J("disabled",o.data.collids.length<=0)("mat-dialog-close",o.data))},dependencies:[u.sg,d.Fj,d.JJ,d.On,x.lW,g.ZT,g.uh,g.xY,g.H8,b.Nt,_.KE,_.hX,G.Ub,G.vS,T.Ot],encapsulation:2}),i})(),re=(()=>{class i{constructor(t,o){this.dialogRef=t,this.data=o}onNoClick(){this.dialogRef.close()}get isOKDisabled(){return null==this.data.score||isNaN(+this.data.score)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.so),e.Y36(g.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hkb-exercise-item-newscore-dlg"]],decls:24,vars:14,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","fill",1,"control-full-width"],["matInput","","disabled","","name","excitemid",3,"ngModel","ngModelChange"],["matInput","","disabled","","name","date",3,"ngModel","ngModelChange"],["matInput","","type","number","name","score",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"disabled","mat-dialog-close"]],template:function(t,o){1&t&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"transloco"),e.qZA(),e.TgZ(3,"div",1)(4,"form")(5,"mat-form-field",2)(6,"mat-label"),e._uU(7,"ID"),e.qZA(),e.TgZ(8,"input",3),e.NdJ("ngModelChange",function(c){return o.data.excitemid=c}),e.qZA()(),e.TgZ(9,"mat-form-field",2)(10,"mat-label"),e._uU(11,"Date"),e.qZA(),e.TgZ(12,"input",4),e.NdJ("ngModelChange",function(c){return o.data.pracDate=c}),e.qZA()(),e.TgZ(13,"mat-form-field",2)(14,"mat-label"),e._uU(15),e.ALo(16,"transloco"),e.qZA(),e.TgZ(17,"input",5),e.NdJ("ngModelChange",function(c){return o.data.score=c}),e.qZA()()()(),e.TgZ(18,"div",6)(19,"button",7),e.NdJ("click",function(){return o.onNoClick()}),e._uU(20),e.ALo(21,"transloco"),e.qZA(),e.TgZ(22,"button",8),e._uU(23,"OK"),e.qZA()()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,8,"NewPractice")),e.xp6(7),e.Q6J("ngModel",o.data.excitemid),e.xp6(4),e.Q6J("ngModel",o.data.pracDate),e.xp6(3),e.Oqu(e.lcZ(16,10,"Quiz.Score")),e.xp6(2),e.Q6J("ngModel",o.data.score),e.xp6(3),e.Oqu(e.lcZ(21,12,"Common.NoThanks")),e.xp6(2),e.Q6J("disabled",o.isOKDisabled)("mat-dialog-close",o.data))},dependencies:[d._Y,d.Fj,d.wV,d.JJ,d.JL,d.On,d.F,x.lW,g.ZT,g.uh,g.xY,g.H8,b.Nt,_.KE,_.hX,T.Ot],encapsulation:2}),i})();var C=s(7093),y=s(617),p=s(9538),M=s(1274),H=s(2596);function le(i,a){1&i&&(e.TgZ(0,"th",20),e._uU(1,"#"),e.qZA())}function ce(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"td",21)(1,"div"),e._uU(2),e.TgZ(3,"button",22),e.NdJ("click",function(){const c=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onDisplayItem(c.ID))}),e.ALo(4,"transloco"),e.TgZ(5,"mat-icon"),e._uU(6,"launch"),e.qZA()(),e.TgZ(7,"button",23),e.NdJ("click",function(){const c=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onChangeItem(c.ID))}),e.ALo(8,"transloco"),e.TgZ(9,"mat-icon"),e._uU(10,"edit"),e.qZA()(),e.TgZ(11,"button",23),e.NdJ("click",function(){const c=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onAddToCollection(c.ID))}),e.ALo(12,"transloco"),e.TgZ(13,"mat-icon"),e._uU(14,"add_to_queue"),e.qZA()(),e.TgZ(15,"button",23),e.NdJ("click",function(){const c=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onNewPractice(c.ID))}),e.ALo(16,"transloco"),e.TgZ(17,"mat-icon"),e._uU(18,"ballot"),e.qZA()(),e.TgZ(19,"button",24),e.NdJ("click",function(){const c=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onDeleteItem(c.ID))}),e.ALo(20,"transloco"),e.TgZ(21,"mat-icon"),e._uU(22,"remove_circle"),e.qZA()()()()}if(2&i){const t=a.$implicit;e.xp6(2),e.hij(" ",t.ID," "),e.xp6(1),e.s9C("matTooltip",e.lcZ(4,6,"Common.Display")),e.xp6(4),e.s9C("matTooltip",e.lcZ(8,8,"Common.Change")),e.xp6(4),e.s9C("matTooltip",e.lcZ(12,10,"AddToCollection")),e.xp6(4),e.s9C("matTooltip",e.lcZ(16,12,"NewPractice")),e.xp6(4),e.s9C("matTooltip",e.lcZ(20,14,"Common.Delete"))}}function se(i,a){1&i&&(e.TgZ(0,"th",20),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Type")))}function me(i,a){if(1&i&&(e.TgZ(0,"td",21),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i){const t=a.$implicit,o=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,o.getExerciseItemTypeName(t.ItemType)))}}function de(i,a){1&i&&(e.TgZ(0,"th",20),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Tag")))}function pe(i,a){if(1&i&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Oqu(t.Tags.toString())}}function ue(i,a){1&i&&(e.TgZ(0,"th",20),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"KnowledgeItem")))}function ge(i,a){if(1&i&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Oqu(t.KnowledgeItemID)}}function he(i,a){1&i&&(e.TgZ(0,"th",25),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"CreatedAt")))}function _e(i,a){if(1&i&&(e.TgZ(0,"td",21),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.CreatedAt,"yyyy-M-d HH:mm:ss"))}}function fe(i,a){1&i&&e._UZ(0,"tr",26)}function xe(i,a){1&i&&e._UZ(0,"tr",27)}let Ce=(()=>{class i{constructor(t,o,n,c){this.odataService=t,this.dialog=o,this.uiUtilSrv=n,this.authService=c,this.displayedColumns=["id","itemtype","tags","knowledgeitem","createdat"],this.dataSource=[],this.resultsLength=0,this.isLoadingResults=!0,this.refreshEvent=new e.vpe}getExerciseItemTypeName(t){return(0,E.of)(t)}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,O.T)(this.sort.sortChange,this.paginator.page,this.refreshEvent).pipe((0,U.O)({}),(0,k.w)(()=>{this.isLoadingResults=!0;const t=this.paginator.pageSize;return this.odataService.getExerciseItems(t,t*this.paginator.pageIndex,this.sort.active,this.sort.direction)}),(0,P.x)(()=>this.isLoadingResults=!1),(0,q.U)(t=>(this.resultsLength=t.totalCount,t.items)),(0,$.K)(()=>(0,A.of)([]))).subscribe({next:t=>this.dataSource=t,error:t=>this.uiUtilSrv.showSnackInfo(t)})}onGoToPreview(){const t=[];this.dataSource.forEach(o=>{t.push({refType:m.ik.ExerciseItem,refId:o.ID})}),this.uiUtilSrv.navigatePreviewPage(t)}onGoToSearch(){this.uiUtilSrv.navigateExerciseItemSearchPage()}onDeleteItem(t){this.odataService.deleteExerciseItem(t).subscribe({next:()=>{this.onRefreshList()},error:o=>{this.uiUtilSrv.showSnackInfo(o)}})}onRefreshList(){this.refreshEvent.emit()}resetPaging(){this.paginator.pageIndex=0}onDisplayItem(t){this.uiUtilSrv.navigateExerciseItemDisplayPage(t)}onChangeItem(t){this.uiUtilSrv.navigateExerciseItemChangePage(t)}onAddToCollection(t){this.odataService.getUserCollections().subscribe({next:o=>{const n=o.items;this.dialog.open(ae,{width:"600px",closeOnNavigation:!1,data:{excitemid:t,availableColls:n,collids:[]}}).afterClosed().subscribe(r=>{const l=[];r.collids.forEach(Q=>{const ee=n.findIndex(I=>I.ID===+Q);if(-1!==ee){const I=new m.ly;I.ID=n[ee].ID,I.RefID=t,I.RefType=m.ik.ExerciseItem,l.push(I)}}),l.length>0&&this.odataService.addExerciseItemToCollection(l).subscribe({next:()=>{this.uiUtilSrv.showSnackInfo("DONE")},error:Q=>{this.uiUtilSrv.showSnackInfo(Q)}})})},error:o=>{this.uiUtilSrv.showSnackInfo(o)}})}onNewPractice(t){this.dialog.open(re,{width:"600px",closeOnNavigation:!1,data:{excitemid:t,pracDate:(new Date).toDateString(),score:void 0}}).afterClosed().subscribe(n=>{const c=new E.oh;c.RefID=t,c.Score=n.score,c.TakenDate=new Date,c.User=this.authService.currentUserId,this.odataService.createExerciseItemUserScore(c).subscribe({next:()=>{this.uiUtilSrv.showSnackInfo("DONE")},error:r=>{this.uiUtilSrv.showSnackInfo(r)}})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.CB),e.Y36(g.uw),e.Y36(C.dM),e.Y36(C.e8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hkb-exercise-items"]],viewQuery:function(t,o){if(1&t&&(e.Gf(Z.NW,5),e.Gf(w.YE,5)),2&t){let n;e.iGM(n=e.CRH())&&(o.paginator=n.first),e.iGM(n=e.CRH())&&(o.sort=n.first)}},decls:48,vars:25,consts:[[1,"toolbar-spacer"],["mat-icon-button","","color","primary","routerLink","create",3,"matTooltip"],["mat-icon-button","","color","accent",2,"margin-left","12px",3,"disabled","matTooltip","click"],["mat-icon-button","","color","accent","routerLink","score",2,"margin-left","12px",3,"matTooltip"],["mat-icon-button","","color","accent",3,"disabled","matTooltip","click"],["mat-icon-button","","color","accent",2,"margin-left","12px",3,"matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","itemtype"],["matColumnDef","tags"],["matColumnDef","knowledgeitem"],["matColumnDef","createdat"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"matTooltip","click"],["mat-icon-button","","color","accent",3,"matTooltip","click"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(e.TgZ(0,"mat-toolbar-row")(1,"span")(2,"h1"),e._uU(3),e.ALo(4,"transloco"),e.qZA()(),e._UZ(5,"span",0),e.TgZ(6,"section")(7,"button",1),e.ALo(8,"transloco"),e.TgZ(9,"mat-icon"),e._uU(10,"add_circle"),e.qZA()(),e.TgZ(11,"button",2),e.NdJ("click",function(){return o.onGoToSearch()}),e.ALo(12,"transloco"),e.TgZ(13,"mat-icon"),e._uU(14,"search"),e.qZA()(),e.TgZ(15,"button",3),e.ALo(16,"transloco"),e.TgZ(17,"mat-icon"),e._uU(18,"recent_actors"),e.qZA()(),e.TgZ(19,"button",4),e.NdJ("click",function(){return o.onGoToPreview()}),e.ALo(20,"transloco"),e.TgZ(21,"mat-icon"),e._uU(22,"slideshow"),e.qZA()(),e.TgZ(23,"button",5),e.NdJ("click",function(){return o.onRefreshList()}),e.ALo(24,"transloco"),e.TgZ(25,"mat-icon"),e._uU(26,"refresh"),e.qZA()()()(),e.TgZ(27,"div",6)(28,"div",7)(29,"table",8),e.NdJ("matSortChange",function(){return o.resetPaging()}),e.ynx(30,9),e.YNc(31,le,2,0,"th",10),e.YNc(32,ce,23,16,"td",11),e.BQk(),e.ynx(33,12),e.YNc(34,se,3,3,"th",10),e.YNc(35,me,3,3,"td",11),e.BQk(),e.ynx(36,13),e.YNc(37,de,3,3,"th",10),e.YNc(38,pe,2,1,"td",11),e.BQk(),e.ynx(39,14),e.YNc(40,ue,3,3,"th",10),e.YNc(41,ge,2,1,"td",11),e.BQk(),e.ynx(42,15),e.YNc(43,he,3,3,"th",16),e.YNc(44,_e,3,4,"td",11),e.BQk(),e.YNc(45,fe,1,0,"tr",17),e.YNc(46,xe,1,0,"tr",18),e.qZA()(),e._UZ(47,"mat-paginator",19),e.qZA()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,13,"ExerciseItem")),e.xp6(4),e.s9C("matTooltip",e.lcZ(8,15,"Common.Create")),e.xp6(4),e.s9C("matTooltip",e.lcZ(12,17,"Common.Search")),e.Q6J("disabled",o.dataSource.length<=0),e.xp6(4),e.s9C("matTooltip",e.lcZ(16,19,"PracticeHistories")),e.xp6(4),e.s9C("matTooltip",e.lcZ(20,21,"Common.Preview")),e.Q6J("disabled",o.dataSource.length<=0),e.xp6(4),e.s9C("matTooltip",e.lcZ(24,23,"Common.Refresh")),e.xp6(6),e.Q6J("dataSource",o.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("length",o.resultsLength)("pageSize",20))},dependencies:[x.RK,y.Hw,Z.NW,w.YE,w.nU,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,M.rD,H.gM,S.rH,u.uU,T.Ot],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.mat-column-id[_ngcontent-%COMP%]{max-width:300px;width:300px}.mat-column-itemtype[_ngcontent-%COMP%]{max-width:120px;width:120px}.mat-column-tags[_ngcontent-%COMP%]{max-width:250px;width:150px}.mat-column-created[_ngcontent-%COMP%]{max-width:120px;width:120px}"]}),i})();var Te=s(7328),K=s(6028),f=s(4537),V=s(2637),J=s(3680),h=s(5195),D=s(2557),N=s(3305),L=s(8525),j=s(967);function Ze(i,a){if(1&i&&(e.TgZ(0,"mat-option",22),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(e.lcZ(2,2,t.i18nterm))}}function ve(i,a){1&i&&(e.TgZ(0,"mat-icon",25),e._uU(1,"cancel"),e.qZA())}function Ie(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-chip-row",23),e.NdJ("removed",function(){const c=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.removeTag(c))}),e._uU(1),e.YNc(2,ve,2,0,"mat-icon",24),e.qZA()}if(2&i){const t=a.$implicit,o=e.oxw();e.Q6J("removable",o.isEditable),e.xp6(1),e.hij(" ",t," "),e.xp6(1),e.Q6J("ngIf",o.isEditable)}}function we(i,a){if(1&i&&(e.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e.TgZ(5,"mat-panel-description"),e._uU(6),e.ALo(7,"transloco"),e.TgZ(8,"mat-icon"),e._uU(9,"info"),e.qZA()()(),e.TgZ(10,"div",26)(11,"div",27)(12,"mat-form-field",4)(13,"mat-label"),e._uU(14),e.ALo(15,"transloco"),e.qZA(),e._UZ(16,"input",28),e.ALo(17,"transloco"),e.ALo(18,"date"),e.qZA()(),e.TgZ(19,"div",27)(20,"mat-form-field",4)(21,"mat-label"),e._uU(22),e.ALo(23,"transloco"),e.qZA(),e._UZ(24,"input",28),e.ALo(25,"transloco"),e.ALo(26,"date"),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,8,"Administrative")),e.xp6(3),e.Oqu(e.lcZ(7,10,"AdministrativeInfo")),e.xp6(8),e.Oqu(e.lcZ(15,12,"CreatedAt")),e.xp6(2),e.s9C("placeholder",e.lcZ(17,14,"CreatedAt")),e.Q6J("ngModel",e.xi3(18,16,t.itemObject.CreatedAt,"yyyy-M-d HH:mm:ss")),e.xp6(6),e.Oqu(e.lcZ(23,19,"ModifiedAt")),e.xp6(2),e.s9C("placeholder",e.lcZ(25,21,"ModifiedAt")),e.Q6J("ngModel",e.xi3(26,23,t.itemObject.ModifiedAt,"yyyy-M-d HH:mm:ss"))}}function Ae(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-toolbar")(1,"h3"),e._uU(2),e.ALo(3,"transloco"),e.qZA(),e._UZ(4,"div",18),e.TgZ(5,"button",19),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.openUploadDialog())}),e._uU(6,"Upload"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Content")))}function Ee(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"nu-monaco-editor",29),e.NdJ("ngModelChange",function(n){e.CHM(t);const c=e.oxw();return e.KtG(c.content=n)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("options",t.editorOptions)("ngModel",t.content)}}function be(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"nu-monaco-editor",29),e.NdJ("ngModelChange",function(n){e.CHM(t);const c=e.oxw();return e.KtG(c.answerContent=n)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("options",t.editorOptions)("ngModel",t.answerContent)}}let F=(()=>{class i{get isDisplayMode(){return this.uiMode===f.sk.Display}get isCreateMode(){return this.uiMode===f.sk.Create}get isUpdateMode(){return this.uiMode===f.sk.Update}get isEditable(){return this.uiMode===f.sk.Create||this.uiMode===f.sk.Update}constructor(t,o,n,c){this.dialog=t,this.activateRoute=o,this.uiUtilSrv=n,this.odataService=c,this.routerID=-1,this.uiMode=f.sk.Create,this.currentMode="",this.editorOptions={theme:"vs-dark",roundedSelection:!0},this.content="New Exercise Item",this.answerContent="",this.mathOptions={displayMode:!0,throwOnError:!1,errorColor:"#cc0000"},this.selectable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[K.K5,K.OC],this.tags=[],this.arExerciseTypes=[],this.arExerciseTypes=(0,E.BF)(),this.itemFormGroup=new d.nJ({idControl:new d.p4({value:null,disabled:!0}),typeControl:new d.p4({value:E.Ue.Question}),knowledgeControl:new d.p4,tagControl:new d.p4})}ngOnInit(){this.destroyed$=new Te.t(1),this.activateRoute.url.subscribe({next:t=>{t instanceof Array&&t.length>0&&("create"===t[0].path?(this.routerID=-1,this.uiMode=f.sk.Create,this.currentMode="Common.Create"):"edit"===t[0].path?(this.routerID=+t[1].path,this.uiMode=f.sk.Update,this.currentMode="Common.Change"):"display"===t[0].path&&(this.routerID=+t[1].path,this.uiMode=f.sk.Display,this.currentMode="Common.Display")),-1!==this.routerID&&this.odataService.readExerciseItem(this.routerID,this.uiMode===f.sk.Update).subscribe({next:o=>{this.onSetItemData(o),this.itemObject=o},error:o=>{console.error(o)}})},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})}ngOnDestroy(){this.destroyed$&&(this.destroyed$.complete(),this.destroyed$=void 0)}onOK(){if(this.isCreateMode){if(!this.itemFormGroup.valid)return void(this.itemFormGroup.errors&&console.error(this.itemFormGroup.errors));this.itemObject=new E.ce,this.itemObject.ItemType=this.itemFormGroup.get("typeControl")?.value,this.itemObject.Content=this.content,this.itemObject.Tags=this.tags,this.itemObject.Answer=this.answerContent,this.odataService.createExerciseItem(this.itemObject).subscribe({next:t=>{this.uiUtilSrv.navigateExerciseItemDisplayPage(t.ID)},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})}else if(this.isUpdateMode){if(!this.itemFormGroup.valid)return void(this.itemFormGroup.errors&&console.log(this.itemFormGroup.errors));this.itemObject&&(this.itemObject.ItemType=this.itemFormGroup.get("typeControl")?.value,this.itemObject.Content=this.content,this.itemObject.Tags=this.tags,this.itemObject.Answer=this.answerContent,this.odataService.changeExerciseItem(this.itemObject).subscribe({next:t=>{this.uiUtilSrv.navigateExerciseItemDisplayPage(t.ID)},error:t=>{this.uiUtilSrv.showSnackInfo(t)}}))}}openUploadDialog(){this.dialog.open(V.J,{width:"50%",height:"50%"}).afterClosed().subscribe({next:o=>{console.log(o),o.forEach(n=>{this.content+=`\n![Img](${n.url})\n          `})}})}openAnswerUploadDialog(){this.dialog.open(V.J,{width:"50%",height:"50%"}).afterClosed().subscribe({next:o=>{console.log(o),o.forEach(n=>{this.answerContent+=`\n  ![Img](${n.url})\n            `})}})}addTag(t){const o=t.input,n=t.value;(n||"").trim()&&this.tags.push(n.trim()),o&&(o.value="")}removeTag(t){const o=this.tags.indexOf(t);o>=0&&this.tags.splice(o,1)}onSetItemData(t){this.itemFormGroup.get("idControl")?.setValue(t.ID),this.itemFormGroup.get("idControl")?.disable(),this.itemFormGroup.get("typeControl")?.setValue(+t.ItemType),this.content=t.Content,t.Answer&&(this.answerContent=t.Answer),this.tags=t.Tags,this.isDisplayMode?this.itemFormGroup.disable():this.itemFormGroup.markAsPristine()}onReturnToList(){this.uiUtilSrv.navigateExerciseItemListPage()}onCreateNewOne(){this.uiUtilSrv.navigateExerciseItemCreatePage()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.uw),e.Y36(S.gz),e.Y36(C.dM),e.Y36(C.CB))},i.\u0275cmp=e.Xpm({type:i,selectors:[["khb-exercise-item-detail"]],decls:72,vars:49,consts:[["appearance","outlined"],["multi","",1,"exerciseitem-headers-align"],["expanded",""],[1,"exerciseitem-form",3,"formGroup"],["appearance","fill",1,"control-full-width"],["matInput","","type","text","placeholder","ID","formControlName","idControl"],["required","","formControlName","typeControl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","tagControl"],["chipList",""],[3,"removable","removed",4,"ngFor","ngForOf"],["placeholder","New tag...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["matInput","","type","text","placeholder","Knowledge ID","formControlName","knowledgeControl"],[4,"ngIf"],[1,"control-full-width","row",2,"height","500px"],["class","col-lg-6 col-sm-12",4,"ngIf"],[1,"col-lg-6","col-sm-12",2,"height","100%","overflow-y","scroll"],["katex","",3,"data","katexOptions"],[1,"toolbar-spacer"],["mat-raised-button","",3,"click"],["mat-button","",3,"disabled","click"],["mat-button","",3,"click"],[3,"value"],[3,"removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[1,"control-full-width","row"],[1,"col-lg-6","col-sm-12"],["matInput","","type","text","disabled","",3,"placeholder","ngModel"],[2,"height","100%",3,"options","ngModel","ngModelChange"]],template:function(t,o){if(1&t&&(e.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e.TgZ(5,"mat-card-subtitle"),e._uU(6),e.ALo(7,"transloco"),e.qZA()(),e.TgZ(8,"mat-card-content")(9,"mat-accordion",1)(10,"mat-expansion-panel",2)(11,"mat-expansion-panel-header")(12,"mat-panel-title"),e._uU(13),e.ALo(14,"transloco"),e.qZA(),e.TgZ(15,"mat-panel-description"),e._uU(16),e.ALo(17,"transloco"),e.TgZ(18,"mat-icon"),e._uU(19,"public"),e.qZA()()(),e.TgZ(20,"form",3)(21,"mat-form-field",4)(22,"mat-label"),e._uU(23,"#"),e.qZA(),e._UZ(24,"input",5),e.qZA(),e.TgZ(25,"mat-form-field",4)(26,"mat-label"),e._uU(27),e.ALo(28,"transloco"),e.qZA(),e.TgZ(29,"mat-select",6),e.YNc(30,Ze,3,4,"mat-option",7),e.qZA()(),e.TgZ(31,"mat-form-field",4)(32,"mat-label"),e._uU(33),e.ALo(34,"transloco"),e.qZA(),e.TgZ(35,"mat-chip-grid",8,9),e.YNc(37,Ie,3,3,"mat-chip-row",10),e.TgZ(38,"input",11),e.NdJ("matChipInputTokenEnd",function(c){return o.addTag(c)}),e.qZA()()(),e.TgZ(39,"mat-form-field",4)(40,"mat-label"),e._uU(41),e.ALo(42,"transloco"),e.qZA(),e._UZ(43,"input",12),e.qZA()()(),e.YNc(44,we,27,26,"mat-expansion-panel",13),e.qZA(),e.YNc(45,Ae,7,3,"mat-toolbar",13),e.TgZ(46,"div",14),e.YNc(47,Ee,2,2,"div",15),e.TgZ(48,"div",16),e._UZ(49,"markdown",17),e.qZA()(),e.TgZ(50,"mat-toolbar")(51,"h3"),e._uU(52),e.ALo(53,"transloco"),e.qZA(),e._UZ(54,"div",18),e.TgZ(55,"button",19),e.NdJ("click",function(){return o.openAnswerUploadDialog()}),e.TgZ(56,"mat-icon"),e._uU(57,"file_upload"),e.qZA()()(),e.TgZ(58,"div",14),e.YNc(59,be,2,2,"div",15),e.TgZ(60,"div",16),e._UZ(61,"markdown",17),e.qZA()()(),e.TgZ(62,"mat-card-actions")(63,"button",20),e.NdJ("click",function(){return o.onOK()}),e._uU(64),e.ALo(65,"transloco"),e.qZA(),e.TgZ(66,"button",21),e.NdJ("click",function(){return o.onReturnToList()}),e._uU(67),e.ALo(68,"transloco"),e.qZA(),e.TgZ(69,"button",20),e.NdJ("click",function(){return o.onCreateNewOne()}),e._uU(70),e.ALo(71,"transloco"),e.qZA()()()),2&t){const n=e.MAs(36);e.xp6(3),e.Oqu(e.lcZ(4,27,"ExerciseItem")),e.xp6(3),e.Oqu(e.lcZ(7,29,o.currentMode)),e.xp6(7),e.Oqu(e.lcZ(14,31,"Header")),e.xp6(3),e.Oqu(e.lcZ(17,33,"HeaderInfo")),e.xp6(4),e.Q6J("formGroup",o.itemFormGroup),e.xp6(7),e.Oqu(e.lcZ(28,35,"Type")),e.xp6(3),e.Q6J("ngForOf",o.arExerciseTypes),e.xp6(3),e.Oqu(e.lcZ(34,37,"Tags")),e.xp6(4),e.Q6J("ngForOf",o.tags),e.xp6(1),e.Q6J("matChipInputFor",n)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes)("matChipInputAddOnBlur",o.addOnBlur),e.xp6(3),e.Oqu(e.lcZ(42,39,"KnowledgeItem")),e.xp6(3),e.Q6J("ngIf",!o.isCreateMode&&o.itemObject),e.xp6(1),e.Q6J("ngIf",o.isCreateMode),e.xp6(2),e.Q6J("ngIf",!o.isDisplayMode),e.xp6(2),e.Q6J("data",o.content)("katexOptions",o.mathOptions),e.xp6(3),e.Oqu(e.lcZ(53,41,"Answer")),e.xp6(7),e.Q6J("ngIf",!o.isDisplayMode),e.xp6(2),e.Q6J("data",o.answerContent)("katexOptions",o.mathOptions),e.xp6(2),e.Q6J("disabled",!(o.isEditable&&o.itemFormGroup.valid)),e.xp6(1),e.Oqu(e.lcZ(65,43,"Save")),e.xp6(3),e.Oqu(e.lcZ(68,45,"Common.ReturnToList")),e.xp6(2),e.Q6J("disabled",!o.isDisplayMode),e.xp6(1),e.Oqu(e.lcZ(71,47,"Common.CreateAnotherOne"))}},dependencies:[u.sg,u.O5,d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.On,d.sg,d.u,J.ey,x.lW,h.a8,h.hq,h.dn,h.dk,h.$j,h.n5,D.RA,D.oH,D.qH,D.z3,N.pp,N.ib,N.yz,N.yK,N.u4,y.Hw,b.Nt,_.KE,_.hX,L.gD,M.Ye,j.eV,R.lF,u.uU,T.Ot],styles:[".exerciseitem-form[_ngcontent-%COMP%]{margin:8px;min-width:150px;max-width:500px;width:100%}.mat-mdc-card-actions[_ngcontent-%COMP%]{margin-top:10px}.exerciseitem-action-buttons[_ngcontent-%COMP%]{padding-bottom:20px}.exerciseitem-headers-align[_ngcontent-%COMP%]{margin:8px}.exerciseitem-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%], .exerciseitem-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{flex-basis:0}.exerciseitem-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.exerciseitem-headers-align[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]}),i})();var z=s(5619),B=s(5986),v=s(8034),Me=s(6385),W=s(5739);function Ne(i,a){if(1&i&&(e.TgZ(0,"mat-option",26),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.displayas)," ")}}function Se(i,a){if(1&i&&(e.TgZ(0,"mat-option",26),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.i18nterm)," ")}}function ye(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field")(1,"input",27),e.NdJ("ngModelChange",function(n){e.CHM(t);const c=e.oxw().$implicit;return e.KtG(c.value[0]=n)}),e.ALo(2,"transloco"),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.s9C("placeholder",e.lcZ(2,2,"Value")),e.Q6J("ngModel",t.value[0])}}function De(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field")(1,"input",28),e.NdJ("ngModelChange",function(n){e.CHM(t);const c=e.oxw().$implicit;return e.KtG(c.value[1]=n)}),e.ALo(2,"transloco"),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.s9C("placeholder",e.lcZ(2,2,"Value")),e.Q6J("ngModel",t.value[1])}}function Oe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field")(1,"input",29),e.NdJ("ngModelChange",function(n){e.CHM(t);const c=e.oxw().$implicit;return e.KtG(c.value[0]=n)}),e.ALo(2,"transloco"),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.s9C("placeholder",e.lcZ(2,2,"Value")),e.Q6J("ngModel",t.value[0])}}function Ue(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field")(1,"input",30),e.NdJ("ngModelChange",function(n){e.CHM(t);const c=e.oxw().$implicit;return e.KtG(c.value[0]=n)}),e.ALo(2,"transloco"),e.qZA(),e._UZ(3,"mat-datepicker-toggle",31)(4,"mat-datepicker",null,32),e.qZA()}if(2&i){const t=e.MAs(5),o=e.oxw().$implicit;e.xp6(1),e.s9C("placeholder",e.lcZ(2,4,"Value")),e.Q6J("ngModel",o.value[0])("matDatepicker",t),e.xp6(2),e.Q6J("for",t)}}function ke(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field")(1,"input",30),e.NdJ("ngModelChange",function(n){e.CHM(t);const c=e.oxw().$implicit;return e.KtG(c.value[1]=n)}),e.ALo(2,"transloco"),e.qZA(),e._UZ(3,"mat-datepicker-toggle",31)(4,"mat-datepicker",null,33),e.qZA()}if(2&i){const t=e.MAs(5),o=e.oxw().$implicit;e.xp6(1),e.s9C("placeholder",e.lcZ(2,4,"Value")),e.Q6J("ngModel",o.value[1])("matDatepicker",t),e.xp6(2),e.Q6J("for",t)}}function qe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",34)(1,"mat-checkbox",35),e.NdJ("ngModelChange",function(n){e.CHM(t);const c=e.oxw().$implicit;return e.KtG(c.value[0]=n)}),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngModel",t.value[0])}}function $e(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"mat-form-field")(2,"mat-select",19),e.NdJ("ngModelChange",function(n){const r=e.CHM(t).$implicit;return e.KtG(r.fieldName=n)})("selectionChange",function(){const c=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onFieldSelectionChanged(c))}),e.ALo(3,"transloco"),e.YNc(4,Ne,3,4,"mat-option",20),e.qZA()(),e.TgZ(5,"mat-form-field")(6,"mat-select",21),e.NdJ("ngModelChange",function(n){const r=e.CHM(t).$implicit;return e.KtG(r.operator=n)}),e.ALo(7,"transloco"),e.YNc(8,Se,3,4,"mat-option",20),e.ALo(9,"operatorFilter"),e.qZA()(),e.YNc(10,ye,3,4,"mat-form-field",22),e.YNc(11,De,3,4,"mat-form-field",22),e.YNc(12,Oe,3,4,"mat-form-field",22),e.YNc(13,Ue,6,6,"mat-form-field",22),e.YNc(14,ke,6,6,"mat-form-field",22),e.YNc(15,qe,2,1,"div",23),e.TgZ(16,"button",24),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onAddFilter())}),e.TgZ(17,"mat-icon"),e._uU(18,"add"),e.qZA()(),e.TgZ(19,"button",25),e.NdJ("click",function(){const c=e.CHM(t).index,r=e.oxw();return e.KtG(r.onRemoveFilter(c))}),e.TgZ(20,"mat-icon"),e._uU(21,"close"),e.qZA()()()}if(2&i){const t=a.$implicit,o=e.oxw();e.xp6(2),e.s9C("placeholder",e.lcZ(3,12,"Field")),e.Q6J("ngModel",t.fieldName),e.xp6(2),e.Q6J("ngForOf",o.allFields),e.xp6(2),e.s9C("placeholder",e.lcZ(7,14,"Operator")),e.Q6J("ngModel",t.operator),e.xp6(2),e.Q6J("ngForOf",e.xi3(9,16,o.allOperators,t.valueType)),e.xp6(2),e.Q6J("ngIf",1===t.valueType),e.xp6(1),e.Q6J("ngIf",1===t.valueType),e.xp6(1),e.Q6J("ngIf",2===t.valueType),e.xp6(1),e.Q6J("ngIf",3===t.valueType),e.xp6(1),e.Q6J("ngIf",3===t.valueType),e.xp6(1),e.Q6J("ngIf",4===t.valueType)}}function Je(i,a){1&i&&(e.TgZ(0,"th",36),e._uU(1,"#"),e.qZA())}function Le(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"td",37)(1,"div"),e._uU(2),e.TgZ(3,"a",38),e.NdJ("click",function(){const c=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onDisplayItem(c.ID))}),e._uU(4),e.ALo(5,"transloco"),e.qZA()()()}if(2&i){const t=a.$implicit;e.xp6(2),e.hij(" ",t.ID," "),e.xp6(2),e.Oqu(e.lcZ(5,2,"Common.Display"))}}function Fe(i,a){1&i&&(e.TgZ(0,"th",36),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Type")))}function Qe(i,a){if(1&i&&(e.TgZ(0,"td",37),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i){const t=a.$implicit,o=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,o.getExerciseItemTypeName(t.ItemType)))}}function Ye(i,a){1&i&&(e.TgZ(0,"th",36),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Tag")))}function Re(i,a){if(1&i&&(e.TgZ(0,"td",37),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Oqu(t.Tags.toString())}}function Pe(i,a){1&i&&(e.TgZ(0,"th",36),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"KnowledgeItem")))}function Ge(i,a){if(1&i&&(e.TgZ(0,"td",37),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Oqu(t.KnowledgeItemID)}}function He(i,a){1&i&&(e.TgZ(0,"th",36),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"CreatedAt")))}function Ke(i,a){if(1&i&&(e.TgZ(0,"td",37),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.CreatedAt,"yyyy-M-d HH:mm:ss"))}}function Ve(i,a){1&i&&e._UZ(0,"tr",39)}function je(i,a){1&i&&e._UZ(0,"tr",40)}let ze=(()=>{class i{constructor(t,o){this.odataService=t,this.uiUtilSrv=o,this.filters=[],this.allOperators=[],this.allFields=[],this.filterEditable=!0,this.pageSize=20,this.pageSizeOptions=[20,40,60,100],this.isLoadingResults=!1,this.resultsLength=0,this.subjFilters=new z.X([]),this.displayedColumns=["id","itemtype","tags","knowledgeitem","createdat"],this.dataSource=[],this.resultsLength=0,this.allOperators=m.c.getGeneralFilterOperatorDisplayStrings(),this.allFields=[{displayas:"Content",value:"Content",valueType:2},{displayas:"Tag",value:"Tags",valueType:2},{displayas:"Type",value:"ExerciseType",valueType:2}]}ngOnInit(){this.onAddFilter()}ngAfterViewInit(){this.subjFilters.subscribe(()=>this.paginator.pageIndex=0),(0,O.T)(this.subjFilters,this.paginator.page).pipe((0,U.O)({}),(0,k.w)(()=>{if(this.subjFilters.value.length<=0)return(0,A.of)([]);this.isLoadingResults=!0;const t=this.prepareFilters(this.subjFilters.value),o=this.paginator.pageSize;return this.odataService.searchExerciseItems(o,o*this.paginator.pageIndex,t)}),(0,P.x)(()=>this.isLoadingResults=!1),(0,q.U)(t=>(this.resultsLength=t.totalCount?t.totalCount:0,t.items)),(0,$.K)(()=>(0,A.of)(void 0))).subscribe({next:t=>{this.dataSource=t||[],0===this.dataSource.length&&this.uiUtilSrv.showSnackInfo("No record found")},error:t=>this.uiUtilSrv.showSnackInfo(t)})}getExerciseItemTypeName(t){return(0,m.of)(t)}onAddFilter(){this.filters.push(new m.T$)}onRemoveFilter(t){this.filters.splice(t,1),0===this.filters.length&&this.onAddFilter()}onFieldSelectionChanged(t){this.allFields.forEach(o=>{o.value===t.fieldName&&(t.valueType=o.valueType)})}prepareFilters(t){let o="";t.sort((c,r)=>c.fieldName.localeCompare(r.fieldName));let n=t.map(c=>c.fieldName);return n=Array.from(new Set(n)),n.forEach(c=>{let r="";t.forEach(l=>{l.fieldName===c&&("Content"===l.fieldName||"Tags"===l.fieldName)&&(l.operator===m.Nu.Equal?r=r?`${r} or ${l.fieldName} eq '${l.lowValue}'`:`${l.fieldName} eq '${l.lowValue}'`:l.operator===m.Nu.Like&&(r=r?`${r} or contains(${l.fieldName},'${l.lowValue}')`:`contains(${l.fieldName},'${l.lowValue}')`))}),o=o?`${o} and ${r}`:`${r}`}),o}onSearch(){const t=[];this.filters.forEach(o=>{const n={};switch(n.valueType=+o.valueType,o.valueType){case m._g.boolean:case m._g.date:case m._g.number:break;case m._g.string:n.fieldName=o.fieldName,n.operator=+o.operator,n.lowValue=o.value[0],n.highValue=o.operator===m.Nu.Between?o.value[1]:""}t.push(n)}),this.subjFilters.next(t)}onDisplayItem(t){this.uiUtilSrv.navigateExerciseItemDisplayPage(t)}onGoToPreview(){const t=[];this.dataSource.forEach(o=>{t.push({refType:m.ik.ExerciseItem,refId:o.ID})}),this.uiUtilSrv.navigatePreviewPage(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.CB),e.Y36(C.dM))},i.\u0275cmp=e.Xpm({type:i,selectors:[["khb-exercise-item-search"]],viewQuery:function(t,o){if(1&t&&e.Gf(Z.NW,7),2&t){let n;e.iGM(n=e.CRH())&&(o.paginator=n.first)}},decls:44,vars:19,consts:[["appearance","outlined"],["class","control-full-width",4,"ngFor","ngForOf"],[1,"control-full-width"],["mat-button","","aria-label","Search",3,"click"],[1,"table-container","mat-elevation-z8"],["color","primary"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","itemtype"],["matColumnDef","tags"],["matColumnDef","knowledgeitem"],["matColumnDef","createdat"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[3,"placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"placeholder","ngModel","ngModelChange"],[4,"ngIf"],["class","typechkbox",4,"ngIf"],["mat-icon-button","","aria-label","Add",3,"click"],["mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["matInput","","type","number","name","lvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","","type","number","name","hvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","","type","text","name","lvalue_2",3,"placeholder","ngModel","ngModelChange"],["matInput","",3,"ngModel","matDatepicker","placeholder","ngModelChange"],["matSuffix","",3,"for"],["lvpicker",""],["hvpicker",""],[1,"typechkbox"],[3,"ngModel","ngModelChange"],["mat-header-cell",""],["mat-cell",""],["mat-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(e.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e.TgZ(5,"mat-card-subtitle"),e._uU(6),e.ALo(7,"transloco"),e.qZA()(),e.TgZ(8,"mat-card-content")(9,"div"),e.YNc(10,$e,22,19,"div",1),e.TgZ(11,"div",2)(12,"button",3),e.NdJ("click",function(){return o.onSearch()}),e.TgZ(13,"mat-icon"),e._uU(14,"search"),e.qZA(),e._uU(15),e.ALo(16,"transloco"),e.qZA()()(),e._UZ(17,"mat-divider"),e.TgZ(18,"div",4)(19,"mat-toolbar",5)(20,"mat-toolbar-row")(21,"button",6),e.NdJ("click",function(){return o.onGoToPreview()}),e._uU(22),e.ALo(23,"transloco"),e.qZA()()(),e.TgZ(24,"div",7)(25,"table",8),e.ynx(26,9),e.YNc(27,Je,2,0,"th",10),e.YNc(28,Le,6,4,"td",11),e.BQk(),e.ynx(29,12),e.YNc(30,Fe,3,3,"th",10),e.YNc(31,Qe,3,3,"td",11),e.BQk(),e.ynx(32,13),e.YNc(33,Ye,3,3,"th",10),e.YNc(34,Re,2,1,"td",11),e.BQk(),e.ynx(35,14),e.YNc(36,Pe,3,3,"th",10),e.YNc(37,Ge,2,1,"td",11),e.BQk(),e.ynx(38,15),e.YNc(39,He,3,3,"th",10),e.YNc(40,Ke,3,4,"td",11),e.BQk(),e.YNc(41,Ve,1,0,"tr",16),e.YNc(42,je,1,0,"tr",17),e.qZA()(),e._UZ(43,"mat-paginator",18),e.qZA()()()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,11,"ExerciseItem")),e.xp6(3),e.Oqu(e.lcZ(7,13,"Common.Search")),e.xp6(4),e.Q6J("ngForOf",o.filters),e.xp6(5),e.hij(" ",e.lcZ(16,15,"Common.Search")," "),e.xp6(6),e.Q6J("disabled",o.resultsLength<=0),e.xp6(1),e.Oqu(e.lcZ(23,17,"Common.Preview")),e.xp6(3),e.Q6J("dataSource",o.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("length",o.resultsLength)("pageSize",10))},dependencies:[u.sg,u.O5,d.Fj,d.wV,d.JJ,d.On,J.ey,x.zs,x.lW,x.RK,h.a8,h.dn,h.dk,h.$j,h.n5,B.oG,v.Mq,v.hl,v.nW,Me.d,y.Hw,b.Nt,_.KE,_.R9,Z.NW,L.gD,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,M.Ye,M.rD,u.uU,T.Ot,W.M],styles:[".table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;margin-top:16px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.data-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.mat-column-id[_ngcontent-%COMP%]{max-width:300px;width:250px}.mat-column-itemtype[_ngcontent-%COMP%]{max-width:120px;width:120px}.mat-column-tags[_ngcontent-%COMP%]{max-width:250px;width:150px}.mat-column-created[_ngcontent-%COMP%]{max-width:120px;width:120px}"]}),i})();var Be=s(6676),X=s.n(Be);function We(i,a){if(1&i&&(e.TgZ(0,"mat-option",32),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(e.lcZ(2,2,t.displayas))}}function Xe(i,a){if(1&i&&(e.TgZ(0,"mat-option",32),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(e.lcZ(2,2,t.i18nterm))}}function et(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",33)(1,"mat-form-field",34)(2,"input",35),e.NdJ("ngModelChange",function(n){e.CHM(t);const c=e.oxw().$implicit;return e.KtG(c.value[0]=n)}),e.ALo(3,"transloco"),e.qZA()(),e.TgZ(4,"mat-form-field",34)(5,"input",36),e.NdJ("ngModelChange",function(n){e.CHM(t);const c=e.oxw().$implicit;return e.KtG(c.value[1]=n)}),e.ALo(6,"transloco"),e.qZA()()()}if(2&i){const t=e.oxw().$implicit;e.xp6(2),e.s9C("placeholder",e.lcZ(3,4,"Value")),e.Q6J("ngModel",t.value[0]),e.xp6(3),e.s9C("placeholder",e.lcZ(6,6,"Value")),e.Q6J("ngModel",t.value[1])}}function tt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",33)(1,"mat-form-field",34)(2,"input",37),e.NdJ("ngModelChange",function(n){e.CHM(t);const c=e.oxw().$implicit;return e.KtG(c.value[0]=n)}),e.ALo(3,"transloco"),e.qZA(),e._UZ(4,"mat-datepicker-toggle",38)(5,"mat-datepicker",null,39),e.qZA(),e.TgZ(7,"mat-form-field",34)(8,"input",37),e.NdJ("ngModelChange",function(n){e.CHM(t);const c=e.oxw().$implicit;return e.KtG(c.value[1]=n)}),e.ALo(9,"transloco"),e.qZA(),e._UZ(10,"mat-datepicker-toggle",38)(11,"mat-datepicker",null,40),e.qZA()()}if(2&i){const t=e.MAs(6),o=e.MAs(12),n=e.oxw().$implicit;e.xp6(2),e.s9C("placeholder",e.lcZ(3,8,"Value")),e.Q6J("ngModel",n.value[0])("matDatepicker",t),e.xp6(2),e.Q6J("for",t),e.xp6(4),e.s9C("placeholder",e.lcZ(9,10,"Value")),e.Q6J("ngModel",n.value[1])("matDatepicker",o),e.xp6(2),e.Q6J("for",o)}}function ot(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",33)(1,"mat-checkbox",41),e.NdJ("ngModelChange",function(n){e.CHM(t);const c=e.oxw().$implicit;return e.KtG(c.value[0]=n)}),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngModel",t.value[0])}}function it(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",33)(1,"input",42),e.NdJ("ngModelChange",function(n){e.CHM(t);const c=e.oxw().$implicit;return e.KtG(c.value[0]=n)}),e.ALo(2,"transloco"),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.s9C("placeholder",e.lcZ(2,2,"Value")),e.Q6J("ngModel",t.value[0])}}function nt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",20)(1,"mat-form-field",21)(2,"mat-select",22),e.NdJ("ngModelChange",function(n){const r=e.CHM(t).$implicit;return e.KtG(r.fieldName=n)})("selectionChange",function(){const c=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onFieldSelectionChanged(c))}),e.ALo(3,"transloco"),e.YNc(4,We,3,4,"mat-option",23),e.qZA()(),e.TgZ(5,"mat-form-field",24)(6,"mat-select",25),e.NdJ("ngModelChange",function(n){const r=e.CHM(t).$implicit;return e.KtG(r.operator=n)}),e.ALo(7,"transloco"),e.YNc(8,Xe,3,4,"mat-option",23),e.ALo(9,"operatorFilter"),e.qZA()(),e.TgZ(10,"div",26),e.YNc(11,et,7,8,"div",27),e.YNc(12,tt,13,12,"div",27),e.YNc(13,ot,2,1,"div",27),e.YNc(14,it,3,4,"div",28),e.qZA(),e.TgZ(15,"div",29)(16,"button",30),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onAddFilter())}),e.TgZ(17,"mat-icon"),e._uU(18,"add"),e.qZA()(),e.TgZ(19,"button",31),e.NdJ("click",function(){const c=e.CHM(t).index,r=e.oxw();return e.KtG(r.onRemoveFilter(c))}),e.TgZ(20,"mat-icon"),e._uU(21,"close"),e.qZA()()()()}if(2&i){const t=a.$implicit,o=e.oxw();e.xp6(2),e.s9C("placeholder",e.lcZ(3,10,"Field")),e.Q6J("ngModel",t.fieldName),e.xp6(2),e.Q6J("ngForOf",o.allFields),e.xp6(2),e.s9C("placeholder",e.lcZ(7,12,"Operator")),e.Q6J("ngModel",t.operator),e.xp6(2),e.Q6J("ngForOf",e.xi3(9,14,o.allOperators,t.valueType)),e.xp6(2),e.Q6J("ngSwitch",t.valueType),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",3),e.xp6(1),e.Q6J("ngSwitchCase",4)}}function at(i,a){1&i&&(e.TgZ(0,"th",43),e._uU(1,"#"),e.qZA())}function rt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"td",44),e._uU(1),e.TgZ(2,"button",45),e.NdJ("click",function(){const c=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onDeleteItem(c.ID))}),e.ALo(3,"transloco"),e.TgZ(4,"mat-icon"),e._uU(5,"remove_circle"),e.qZA()()()}if(2&i){const t=a.$implicit;e.xp6(1),e.hij(" ",t.ID," "),e.xp6(1),e.s9C("matTooltip",e.lcZ(3,2,"Common.Delete"))}}function lt(i,a){1&i&&(e.TgZ(0,"th",43),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ExerciseItem")))}function ct(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"td",44),e._uU(1),e.TgZ(2,"button",46),e.NdJ("click",function(){const c=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onDisplayExerciseItem(c.RefID))}),e.ALo(3,"transloco"),e.TgZ(4,"mat-icon"),e._uU(5,"launch"),e.qZA()(),e.TgZ(6,"button",47),e.NdJ("click",function(){const c=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onChangeExerciseItem(c.RefID))}),e.ALo(7,"transloco"),e.TgZ(8,"mat-icon"),e._uU(9,"edit"),e.qZA()()()}if(2&i){const t=a.$implicit;e.xp6(1),e.hij(" ",t.RefID," "),e.xp6(1),e.s9C("matTooltip",e.lcZ(3,3,"Common.Display")),e.xp6(4),e.s9C("matTooltip",e.lcZ(7,5,"Common.Change"))}}function st(i,a){1&i&&(e.TgZ(0,"th",43),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Quiz.Date")))}function mt(i,a){if(1&i&&(e.TgZ(0,"td",44),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.TakenDate,"yyyy-M-d"))}}function dt(i,a){1&i&&(e.TgZ(0,"th",43),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Quiz.Score")))}function pt(i,a){if(1&i&&(e.TgZ(0,"td",44)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=a.$implicit;e.xp6(1),e.Tol(t.Score>=60?"success-score":"fail-score"),e.xp6(1),e.Oqu(t.Score)}}function ut(i,a){1&i&&e._UZ(0,"tr",48)}function gt(i,a){1&i&&e._UZ(0,"tr",49)}const ht=[{path:"",component:Ce},{path:"create",component:F},{path:"display/:id",component:F},{path:"edit/:id",component:F},{path:"search",component:ze},{path:"score",component:(()=>{class i{constructor(t,o){this.odataService=t,this.uiUtilSrv=o,this.filters=[],this.allOperators=[],this.allFields=[],this.filterEditable=!0,this.displayedColumns=["id","refid","takendate","score"],this.dataSource=[],this.resultsLength=0,this.isLoadingResults=!0,this.refreshEvent=new e.vpe,this.subjFilters=new z.X([]),this.allOperators=m.c.getGeneralFilterOperatorDisplayStrings(),this.allFields=[{displayas:"Content",value:"Content",valueType:2},{displayas:"Quiz.Date",value:"TakenDate",valueType:3},{displayas:"Quiz.Score",value:"Score",valueType:1},{displayas:"ExerciseItem",value:"RefID",valueType:1}]}ngOnInit(){this.onAddFilter()}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,O.T)(this.sort.sortChange,this.paginator.page,this.refreshEvent,this.subjFilters).pipe((0,U.O)({}),(0,k.w)(()=>{if(this.subjFilters.value.length<=0)return(0,A.of)([]);this.isLoadingResults=!0;const t=this.prepareFilters(this.subjFilters.value),o=this.paginator.pageSize;return this.odataService.getExerciseItemUserScores(o,o*this.paginator.pageIndex,t)}),(0,q.U)(t=>(this.isLoadingResults=!1,this.resultsLength=t.totalCount?t.totalCount:0,t.items)),(0,$.K)(()=>(this.isLoadingResults=!1,(0,A.of)([])))).subscribe(t=>this.dataSource=t||[])}onAddFilter(){this.filters.push(new m.T$)}onRemoveFilter(t){this.filters.splice(t,1),0===this.filters.length&&this.onAddFilter()}onFieldSelectionChanged(t){this.allFields.forEach(o=>{o.value===t.fieldName&&(t.valueType=o.valueType)})}prepareFilters(t){let o="";t.sort((c,r)=>c.fieldName.localeCompare(r.fieldName));let n=t.map(c=>c.fieldName);return n=Array.from(new Set(n)),n.forEach(c=>{let r="";t.forEach(l=>{l.fieldName===c&&("Content"===l.fieldName?l.operator===m.Nu.Equal?r=r?`${r} or ${l.fieldName} eq '${l.lowValue}'`:`${l.fieldName} eq '${l.lowValue}'`:l.operator===m.Nu.Like&&(r=r?`${r} or contains(${l.fieldName},'${l.lowValue}')`:`contains(${l.fieldName},'${l.lowValue}')`):"Score"===l.fieldName||"RefID"===l.fieldName?l.operator===m.Nu.Equal?r=r?`${r} or ${l.fieldName} eq ${l.lowValue}`:`${l.fieldName} eq ${l.lowValue}`:l.operator===m.Nu.LargerEqual?r=r?`${r} or ${l.fieldName} ge ${l.lowValue}`:`${l.fieldName} ge ${l.lowValue}`:l.operator===m.Nu.LargerThan?r=r?`${r} or ${l.fieldName} gt ${l.lowValue}`:`${l.fieldName} gt ${l.lowValue}`:l.operator===m.Nu.LessEqual?r=r?`${r} or ${l.fieldName} le ${l.lowValue}`:`${l.fieldName} le ${l.lowValue}`:l.operator===m.Nu.LessThan?r=r?`${r} or ${l.fieldName} lt ${l.lowValue}`:`${l.fieldName} lt ${l.lowValue}`:l.operator===m.Nu.NotEqual&&(r=r?`${r} or ${l.fieldName} ne ${l.lowValue}`:`${l.fieldName} ne ${l.lowValue}`):"TakenDate"===l.fieldName&&(l.operator===m.Nu.Equal?r=r?`${r} or date(${l.fieldName}) eq ${l.lowValue}`:`date(${l.fieldName}) eq ${l.lowValue}`:l.operator===m.Nu.LargerEqual?r=r?`${r} or date(${l.fieldName}) ge ${l.lowValue}`:`date(${l.fieldName}) ge ${l.lowValue}`:l.operator===m.Nu.LargerThan?r=r?`${r} or date(${l.fieldName}) gt ${l.lowValue}`:`date(${l.fieldName}) gt ${l.lowValue}`:l.operator===m.Nu.LessEqual?r=r?`${r} or date(${l.fieldName}) le ${l.lowValue}`:`date(${l.fieldName}) le ${l.lowValue}`:l.operator===m.Nu.LessThan?r=r?`${r} or date(${l.fieldName}) lt ${l.lowValue}`:`date(${l.fieldName}) lt ${l.lowValue}`:l.operator===m.Nu.NotEqual&&(r=r?`${r} or date(${l.fieldName}) ne ${l.lowValue}`:`date(${l.fieldName}) ne ${l.lowValue}`)))}),o=o?`${o} and ${r}`:`${r}`}),o}onSearch(){const t=[];this.filters.forEach(o=>{const n={};switch(n.valueType=+o.valueType,o.valueType){case m._g.boolean:break;case m._g.date:n.fieldName=o.fieldName,n.operator=+o.operator,n.lowValue=X()(o.value[0]).format("YYYY-MM-DD"),n.highValue=o.operator===m.Nu.Between?X()(o.value[1]).format("YYYY-MM-DD"):"";break;case m._g.number:n.fieldName=o.fieldName,n.operator=+o.operator,n.lowValue=+o.value[0],n.highValue=o.operator===m.Nu.Between?+o.value[1]:"";break;case m._g.string:n.fieldName=o.fieldName,n.operator=+o.operator,n.lowValue=o.value[0],n.highValue=o.operator===m.Nu.Between?o.value[1]:""}t.push(n)}),this.subjFilters.next(t)}onGoToExerciseItems(){this.uiUtilSrv.navigateExerciseItemListPage()}onDisplayExerciseItem(t){this.uiUtilSrv.navigateExerciseItemDisplayPage(t)}onChangeExerciseItem(t){this.uiUtilSrv.navigateKnowledgeItemChangePage(t)}onDeleteItem(t){this.odataService.deleteExerciseItemUserScore(t).subscribe({next:()=>{this.uiUtilSrv.showSnackInfo("DONE"),this.onRefreshList()},error:o=>{this.uiUtilSrv.showSnackInfo(o)}})}onGoToPreview(){const t=[];this.dataSource.forEach(o=>{t.push({refType:m.ik.ExerciseItem,refId:o.RefID})}),this.uiUtilSrv.navigatePreviewPage(t)}onRefreshList(){this.refreshEvent.emit()}resetPaging(){this.paginator.pageIndex=0}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.CB),e.Y36(C.dM))},i.\u0275cmp=e.Xpm({type:i,selectors:[["khb-exercise-item-score"]],viewQuery:function(t,o){if(1&t&&(e.Gf(Z.NW,5),e.Gf(w.YE,5)),2&t){let n;e.iGM(n=e.CRH())&&(o.paginator=n.first),e.iGM(n=e.CRH())&&(o.sort=n.first)}},decls:47,vars:25,consts:[[1,"toolbar-spacer"],["mat-raised-button","",3,"matTooltip","click"],[2,"margin","8px"],["class","control-full-width row gx-5",4,"ngFor","ngForOf"],[1,"control-full-width"],["mat-button","","aria-label","Search","color","primary",3,"click"],["mat-button","","color","accent",3,"disabled","matTooltip","click"],["mat-button","","color","accent",3,"matTooltip","click"],[1,"exerciseitem-score-container","mat-elevation-z8"],[1,"table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","refid"],["matColumnDef","takendate"],["matColumnDef","score"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[1,"control-full-width","row","gx-5"],[1,"col-4"],[3,"placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-2"],[3,"placeholder","ngModel","ngModelChange"],[1,"col-4","gx-5",3,"ngSwitch"],["class","row",4,"ngSwitchCase"],["class","row",4,"ngSwitchDefault"],[1,"col-2","row"],["mat-button","","aria-label","Add",1,"col-6",3,"click"],["mat-button","","aria-label","Clear",1,"col-6",3,"click"],[3,"value"],[1,"row"],[1,"col-6"],["matInput","","type","number","name","lvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","","type","number","name","hvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","",3,"ngModel","matDatepicker","placeholder","ngModelChange"],["matSuffix","",3,"for"],["lvpicker",""],["hvpicker",""],[3,"ngModel","ngModelChange"],["matInput","","name","lvalue_2",3,"placeholder","ngModel","ngModelChange"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"matTooltip","click"],["mat-icon-button","","color","primary",3,"matTooltip","click"],["mat-icon-button","","color","accent",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(e.TgZ(0,"mat-toolbar-row")(1,"span")(2,"h1"),e._uU(3),e.ALo(4,"transloco"),e.qZA()(),e._UZ(5,"span",0),e.TgZ(6,"section")(7,"button",1),e.NdJ("click",function(){return o.onGoToExerciseItems()}),e.ALo(8,"transloco"),e._uU(9),e.ALo(10,"transloco"),e.qZA()()(),e.TgZ(11,"div",2),e.YNc(12,nt,22,17,"div",3),e.TgZ(13,"div",4)(14,"button",5),e.NdJ("click",function(){return o.onSearch()}),e.TgZ(15,"mat-icon"),e._uU(16,"search"),e.qZA(),e._uU(17),e.ALo(18,"transloco"),e.qZA()()(),e.TgZ(19,"mat-toolbar-row")(20,"section")(21,"button",6),e.NdJ("click",function(){return o.onGoToPreview()}),e.ALo(22,"transloco"),e.TgZ(23,"mat-icon"),e._uU(24,"slideshow"),e.qZA()(),e.TgZ(25,"button",7),e.NdJ("click",function(){return o.onRefreshList()}),e.ALo(26,"transloco"),e.TgZ(27,"mat-icon"),e._uU(28,"refresh"),e.qZA()()()(),e.TgZ(29,"div",8)(30,"div",9)(31,"table",10),e.NdJ("matSortChange",function(){return o.resetPaging()}),e.ynx(32,11),e.YNc(33,at,2,0,"th",12),e.YNc(34,rt,6,4,"td",13),e.BQk(),e.ynx(35,14),e.YNc(36,lt,3,3,"th",12),e.YNc(37,ct,10,7,"td",13),e.BQk(),e.ynx(38,15),e.YNc(39,st,3,3,"th",12),e.YNc(40,mt,3,4,"td",13),e.BQk(),e.ynx(41,16),e.YNc(42,dt,3,3,"th",12),e.YNc(43,pt,3,3,"td",13),e.BQk(),e.YNc(44,ut,1,0,"tr",17),e.YNc(45,gt,1,0,"tr",18),e.qZA()(),e._UZ(46,"mat-paginator",19),e.qZA()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,13,"PracticeHistories")),e.xp6(4),e.s9C("matTooltip",e.lcZ(8,15,"ExerciseItem")),e.xp6(2),e.Oqu(e.lcZ(10,17,"ExerciseItem")),e.xp6(3),e.Q6J("ngForOf",o.filters),e.xp6(5),e.hij(" ",e.lcZ(18,19,"Common.Search")," "),e.xp6(4),e.s9C("matTooltip",e.lcZ(22,21,"Common.Preview")),e.Q6J("disabled",o.dataSource.length<=0),e.xp6(4),e.s9C("matTooltip",e.lcZ(26,23,"Common.Refresh")),e.xp6(6),e.Q6J("dataSource",o.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("length",o.resultsLength)("pageSize",20))},dependencies:[u.sg,u.RF,u.n9,u.ED,d.Fj,d.wV,d.JJ,d.On,J.ey,x.lW,x.RK,B.oG,v.Mq,v.hl,v.nW,y.Hw,b.Nt,_.KE,_.R9,Z.NW,L.gD,w.YE,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,M.rD,H.gM,u.uU,T.Ot,W.M],styles:[".exerciseitem-score-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.mat-column-id[_ngcontent-%COMP%]{max-width:300px;width:250px}.mat-column-itemtype[_ngcontent-%COMP%]{max-width:120px;width:120px}.mat-column-tags[_ngcontent-%COMP%]{max-width:250px;width:150px}.mat-column-created[_ngcontent-%COMP%]{max-width:120px;width:120px}.success-score[_ngcontent-%COMP%]{color:green;font-size:16px}.fail-score[_ngcontent-%COMP%]{color:red;font-size:16px}"]}),i})()}];let _t=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[S.Bz.forChild(ht),S.Bz]}),i})();var ft=s(6045);let xt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,d.u5,d.UX,te.U,oe.l,j.ob,R.JP.forChild(),_t,T.y4,ft.D]}),i})()}}]);