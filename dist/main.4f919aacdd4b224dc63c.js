(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{0:function(e,t,s){e.exports=s("zUnb")},"3be6":function(e,t,s){"use strict";s.d(t,"a",function(){return r});var i=s("fXoL");let r=(()=>{class e{transform(e,t){return e.filter(e=>void 0===t||e.group===t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Mb({name:"navItemFilter",type:e,pure:!0}),e})()},AytR:function(e,t,s){"use strict";s.d(t,"a",function(){return i});const i={production:!0,mockdata:!0,basehref:"/knowledgebuilder/",apiurlRoot:""}},BETK:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"f",function(){return QuizSection}),__webpack_require__.d(__webpack_exports__,"e",function(){return Quiz}),__webpack_require__.d(__webpack_exports__,"a",function(){return AdditionQuizItem}),__webpack_require__.d(__webpack_exports__,"g",function(){return SubtractionQuizItem}),__webpack_require__.d(__webpack_exports__,"d",function(){return MultiplicationQuizItem}),__webpack_require__.d(__webpack_exports__,"b",function(){return DivisionQuizItem}),__webpack_require__.d(__webpack_exports__,"c",function(){return MixedOperationQuizItem});class StorableObject{storeToString(){const e=this.storeToJsonObject();return JSON&&JSON.stringify(e)}restoreFromString(e){const t=JSON.parse(e);this.restoreFromJsonObject(t),this.canCalcResult()&&this.calcResult()}storeToJsonObject(){return{}}restoreFromJsonObject(e){}canCalcResult(){return!0}calcResult(){}}class QuizSection{constructor(e,t){this.itemCount=0,this.failedItemCount=0,this.timeSpent=0,this.isStarted=!1,this.sectionID=e,this.itemCount=t,this.isStarted=!1}get SectionID(){return this.sectionID}get ItemsCount(){return this.itemCount}get FailedItemsCount(){return this.failedItemCount}get IsStarted(){return this.isStarted}get TimeSpent(){return this.timeSpent}set TimeSpent(e){this.timeSpent=e}Start(){this.timeStarted=new Date}Complete(e){this.timeSpent=((new Date).getTime()-this.timeStarted.getTime())/1e3,this.isStarted=!1,this.failedItemCount=e||0}}class Quiz{constructor(e){this.elderSections=[],this.curSectionID=0,this.quizID=e,this.curSection=null}get QuizID(){return this.quizID}get ElderSections(){return this.elderSections}get ActiveSection(){return this.curSection}get NextSectionID(){return this.curSectionID+1}startNewSection(e){if(null!=this.curSection)throw"An active section not yet completed";if(e.SectionID<=this.curSectionID)throw"Invalid Section ID";this.curSectionID=e.SectionID,this.curSection=e,this.curSection.Start()}completeActionSection(e){if(!this.curSection)throw"Active section not available";this.curSection.Complete(e),this.elderSections.push(this.curSection),this.curSection=null}}class QuizItem extends StorableObject{constructor(){super(),this._index=0}get QuizIndex(){return this._index}set QuizIndex(e){this._index=e}IsCorrect(){return!!this.canCalcResult()}getQuizFormat(){return""}getCorrectFormula(){return""}getInputtedForumla(){return""}storeToJsonObject(){return super.storeToJsonObject()}restoreFromJsonObject(e){super.restoreFromJsonObject(e)}canCalcResult(){return!0}calcResult(){}}class PrimarySchoolMathQuizItem extends QuizItem{IsCorrect(){return!!super.IsCorrect()}getQuizFormat(){return super.getQuizFormat()}getCorrectFormula(){return super.getCorrectFormula()}getInputtedForumla(){return super.getInputtedForumla()}storeToJsonObject(){return super.storeToJsonObject()}restoreFromJsonObject(e){super.restoreFromJsonObject(e)}canCalcResult(){return!!super.canCalcResult()}calcResult(){}}class PrimarySchoolMathFAOQuizItem extends PrimarySchoolMathQuizItem{constructor(e,t,s){super(),this._leftNumber=0,this._rightNumber=0,this._decimalPlaces=s||0,e&&(this._leftNumber=this._decimalPlaces>0?parseFloat(e.toFixed(this._decimalPlaces)):Math.round(e)),t&&(this._rightNumber=this._decimalPlaces>0?parseFloat(t.toFixed(this._decimalPlaces)):Math.round(t)),this.canCalcResult()&&this.calcResult()}get LeftNumber(){return this._leftNumber}get RightNumber(){return this._rightNumber}get decimalPlaces(){return this._decimalPlaces}IsCorrect(){return!!super.IsCorrect()}getQuizFormat(){return super.getQuizFormat()}getCorrectFormula(){return super.getCorrectFormula()}getInputtedForumla(){return super.getInputtedForumla()}storeToJsonObject(){const e=super.storeToJsonObject();return e.leftNumber=this._leftNumber,e.rightNumber=this._rightNumber,e.decimalPlaces=this.decimalPlaces,e}restoreFromJsonObject(e){e&&e.leftNumber&&(this._leftNumber=+e.leftNumber),e&&e.rightNumber&&(this._rightNumber=+e.rightNumber),this._decimalPlaces=e&&e.decimalPlaces?+e.decimalPlaces:0}canCalcResult(){return!!super.canCalcResult()&&void 0!==this._leftNumber&&void 0!==this._rightNumber}calcResult(){super.calcResult()}}class PrimarySchoolMathQuizSection{constructor(e,t){this._itemCount=0,this._itemFailed=0,this._startPoint=0,this._timeSpent=0,this._sectionNumber=e,this.ItemsCount=t}get SectionNumber(){return this._sectionNumber}get ItemsCount(){return this._itemCount}set ItemsCount(e){this._itemCount=e}get ItemsFailed(){return this._itemFailed}set ItemsFailed(e){this._itemFailed=e}get TimeSpent(){return this._timeSpent}SectionStart(){this._startPoint=(new Date).getTime()}SectionComplete(){const e=(new Date).getTime();this._timeSpent=Math.round((e-this._startPoint)/1e3)}getSummaryInfo(){let e="BATCH#"+this.SectionNumber.toString()+";";return e=e+" total items: "+this.ItemsCount.toString()+"; "+(this.ItemsFailed>0?" Failed : "+this.ItemsFailed.toString():""),e=e+=" Time spent: "+this.TimeSpent.toString()+" s",e}}class AdditionQuizItem extends PrimarySchoolMathFAOQuizItem{constructor(e,t,s){super(e,t,s)}get Result(){return this._result}get InputtedResult(){return this._inputtedResult}set InputtedResult(e){this._inputtedResult=e}IsCorrect(){return!!super.IsCorrect()&&null!=this._inputtedResult&&this._inputtedResult===this._result}getCorrectFormula(){return this.LeftNumber.toString()+" + "+this.RightNumber.toString()+" = "+this.Result.toString()}getInputtedForumla(){return this.LeftNumber.toString()+" + "+this.RightNumber.toString()+" = "+(null!=this.InputtedResult?this.InputtedResult.toString():"")}getQuizFormat(){return super.getQuizFormat()+this.LeftNumber.toString()+" + "+this.RightNumber.toString()+" = "}storeToJsonObject(){return super.storeToJsonObject()}restoreFromJsonObject(e){super.restoreFromJsonObject(e)}calcResult(){super.calcResult(),this._result=this.LeftNumber+this.RightNumber,this._result=0===this._decimalPlaces?Math.round(this._result):parseFloat(this._result.toFixed(this._decimalPlaces))}}class SubtractionQuizItem extends PrimarySchoolMathFAOQuizItem{constructor(e,t,s){super(e,t,s)}get Result(){return this._result}get InputtedResult(){return this._inputtedResult}set InputtedResult(e){this._inputtedResult=e}IsCorrect(){return!!super.IsCorrect()&&null!=this._inputtedResult&&this._inputtedResult===this._result}getCorrectFormula(){return this.LeftNumber.toString()+" - "+this.RightNumber.toString()+" = "+this.Result.toString()}getInputtedForumla(){return this.LeftNumber.toString()+" - "+this.RightNumber.toString()+" = "+(null!=this.InputtedResult?this.InputtedResult.toString():"")}getQuizFormat(){return super.getQuizFormat()+this.LeftNumber.toString()+" - "+this.RightNumber.toString()+" = "}storeToJsonObject(){return super.storeToJsonObject()}restoreFromJsonObject(e){super.restoreFromJsonObject(e)}calcResult(){super.calcResult(),this._result=this.LeftNumber-this.RightNumber,this._result=0===this._decimalPlaces?Math.round(this._result):parseFloat(this._result.toFixed(this._decimalPlaces))}}class MultiplicationQuizItem extends PrimarySchoolMathFAOQuizItem{constructor(e,t,s){super(e,t,s)}get Result(){return this._result}get InputtedResult(){return this._inputtedResult}set InputtedResult(e){this._inputtedResult=e}IsCorrect(){return!!super.IsCorrect()&&null!=this._inputtedResult&&this._inputtedResult===this._result}getCorrectFormula(){return this.LeftNumber.toString()+" \xd7 "+this.RightNumber.toString()+" = "+this.Result.toString()}getInputtedForumla(){return this.LeftNumber.toString()+" \xd7 "+this.RightNumber.toString()+" = "+(null!=this.InputtedResult?this.InputtedResult.toString():"")}getQuizFormat(){return super.getQuizFormat()+this.LeftNumber.toString()+" \xd7 "+this.RightNumber.toString()+" = "}storeToJsonObject(){return super.storeToJsonObject()}restoreFromJsonObject(e){super.restoreFromJsonObject(e)}calcResult(){super.calcResult(),this._result=this.LeftNumber*this.RightNumber,this._result=0===this._decimalPlaces?Math.round(this._result):parseFloat(this._result.toFixed(this._decimalPlaces))}}class DivisionQuizItem extends PrimarySchoolMathFAOQuizItem{constructor(e,t,s){super(e,t,s)}get Dividend(){return this.LeftNumber}get Divisor(){return this.RightNumber}get Quotient(){return this._quotient}get Remainder(){return this._remainder}get InputtedQuotient(){return this._inputtedQuotient}set InputtedQuotient(e){this._inputtedQuotient=e}get InputtedRemainder(){return this._inputtedRemainder}set InputtedRemainder(e){this._inputtedRemainder=e}IsCorrect(){const e=super.IsCorrect();return e?null!=this._inputtedQuotient&&null!==this._inputtedRemainder&&null!==this._inputtedRemainder&&this._inputtedQuotient===this._quotient&&this._inputtedRemainder===this._remainder:e}getCorrectFormula(){return this.LeftNumber.toString()+" \xf7 "+this.RightNumber.toString()+" = "+this.Quotient.toString()+(0===this.Remainder?"":"... "+this.Remainder.toString())}getInputtedForumla(){return this.LeftNumber.toString()+" \xf7 "+this.RightNumber.toString()+" = "+(null!=this.InputtedQuotient?this.InputtedQuotient.toString():"")+(null!=this.InputtedRemainder?" ... "+this.InputtedRemainder.toString():"")}getQuizFormat(){return super.getQuizFormat()+this.LeftNumber.toString()+" \xf7 "+this.RightNumber.toString()+" = "}storeToJsonObject(){return super.storeToJsonObject()}restoreFromJsonObject(e){super.restoreFromJsonObject(e)}canCalcResult(){return!!super.canCalcResult()&&0!==this._rightNumber}calcResult(){super.calcResult(),this._quotient=this.LeftNumber/this.RightNumber,this._remainder=this.LeftNumber%this.RightNumber,this._quotient=this._decimalPlaces>0?parseFloat(this._quotient.toFixed(this._decimalPlaces)):Math.floor(this._quotient)}}class MixedOperationQuizItem extends PrimarySchoolMathQuizItem{constructor(e){super(),e&&(this._formula=e),this.canCalcResult()&&this.calcResult()}get Formula(){return this._formula}get Result(){return this._result}get decimalPlace(){return this._decimalPlace}get InputtedResult(){return this._inputtedResult}set InputtedResult(e){this._inputtedResult=e}set decimalPlace(e){this._decimalPlace=e}IsCorrect(){return!!super.IsCorrect()&&this._result===this._inputtedResult}getCorrectFormula(){return this.getQuizFormat()+this.Result.toString()}getInputtedForumla(){return this.getQuizFormat()+this.InputtedResult.toString()}getQuizFormat(){return super.getQuizFormat()+this._formula.replace("*","\xd7").replace("/","\xf7")+" = "}storeToJsonObject(){const e=super.storeToJsonObject();return e.forumla=this._formula,e}restoreFromJsonObject(e){super.restoreFromJsonObject(e),e&&e.forumla&&(this._formula=e.formula)}canCalcResult(){return!!super.canCalcResult()&&!(void 0===this._formula||this._formula.length<=0)}calcResult(){super.calcResult(),this._result=eval(this._formula),this._result=this._decimalPlace>0?parseFloat(this._result.toFixed(this._decimalPlace)):Math.floor(this._result)}}},NUjs:function(e,t,s){"use strict";s.d(t,"b",function(){return i}),s.d(t,"c",function(){return r}),s.d(t,"d",function(){return n}),s.d(t,"a",function(){return a});var i=function(e){return e[e.Question=0]="Question",e[e.SingleChoice=1]="SingleChoice",e[e.MultipleChoice=2]="MultipleChoice",e[e.ShortAnswer=3]="ShortAnswer",e[e.EssayQuestions=4]="EssayQuestions",e}({});const r=e=>{let t="";switch(e){case i.SingleChoice:t="ExerciseItemType.SingleChoice";break;case i.MultipleChoice:t="ExerciseItemType.MultipleChoices";break;case i.ShortAnswer:t="ExerciseItemType.ShortAnswer";break;case i.ShortAnswer:t="ExerciseItemType.EssayQuestion";break;case i.Question:default:t="ExerciseItemType.Question"}return t},n=()=>{const e=[];for(const t in i)Number.isNaN(+t)||e.push({value:+t,i18nterm:r(+t),displaystring:""});return e};class a{constructor(){this._tags=[],this.ID=-1,this.Content="",this.ItemType=i.Question}get KnowledgeItemID(){return this._knowledgeItemID}set KnowledgeItemID(e){this._knowledgeItemID=e}get CreatedAt(){return this._createdAt}set CreatedAt(e){this._createdAt=e}get ModifiedAt(){return this._modifiedAt}set ModifiedAt(e){this._modifiedAt=e}get Tags(){return this._tags}set Tags(e){this._tags=e.slice()}get Answer(){return this._answer}set Answer(e){this._answer=e}parseData(e){if(e&&e.ID&&(this.ID=+e.ID),e&&e.KnowledgeItemID&&(this.KnowledgeItemID=e.KnowledgeItemID),e&&e.ExerciseType&&(this.ItemType=isNaN(+e.ExerciseType)?i[e.ExerciseType]:+e.ExerciseType),e&&e.Content&&(this.Content=e.Content),e&&e.CreatedAt&&(this.CreatedAt=new Date(e.CreatedAt)),e&&e.ModifiedAt&&(this.ModifiedAt=new Date(e.ModifiedAt)),e&&e.Answer&&(this.Answer=e.Answer.Content),e&&e.Tags){const t=e.Tags;this._tags=[],t.forEach(e=>{this._tags.push(e.TagTerm)})}}generateString(e){const t={Content:this.Content,ExerciseType:i[this.ItemType]};return e&&(t.ID=this.ID),this.KnowledgeItemID&&(t.KnowledgeItemID=this.KnowledgeItemID),this.CreatedAt&&(t.CreatedAt=this.CreatedAt.toISOString().slice(0,10)),this.ModifiedAt&&(t.ModifiedAt=this.ModifiedAt.toISOString().slice(0,10)),this.Answer&&(t.Answer={Content:this.Answer}),this.Tags&&(t.Tags=[],this.Tags.forEach(e=>{t.Tags.push({TagTerm:e})})),JSON&&JSON.stringify(t)}}},VHTt:function(e,t,s){"use strict";s.d(t,"j",function(){return i}),s.d(t,"x",function(){return r}),s.d(t,"y",function(){return n}),s.d(t,"i",function(){return a}),s.d(t,"w",function(){return o.c}),s.d(t,"d",function(){return o.a}),s.d(t,"t",function(){return l}),s.d(t,"z",function(){return u}),s.d(t,"r",function(){return c}),s.d(t,"s",function(){return d}),s.d(t,"m",function(){return h}),s.d(t,"b",function(){return p}),s.d(t,"f",function(){return m}),s.d(t,"g",function(){return g}),s.d(t,"e",function(){return b}),s.d(t,"u",function(){return f}),s.d(t,"o",function(){return _.f}),s.d(t,"n",function(){return _.e}),s.d(t,"a",function(){return _.a}),s.d(t,"p",function(){return _.g}),s.d(t,"l",function(){return _.d}),s.d(t,"c",function(){return _.b}),s.d(t,"k",function(){return _.c}),s.d(t,"q",function(){return w}),s.d(t,"v",function(){return C}),s.d(t,"h",function(){return O});var i=function(e){return e[e.Concept=0]="Concept",e[e.Formula=1]="Formula",e}({});const r=e=>{let t="";switch(e){case i.Formula:t="KnowledgeItemCategory.Formula";break;case i.Concept:default:t="KnowledgeItemCategory.Concept"}return t},n=()=>{const e=[];for(const t in i)Number.isNaN(+t)||e.push({value:+t,i18nterm:r(+t),displaystring:""});return e};class a{constructor(){this._tags=[]}get ID(){return this._id}set ID(e){this._id=e}get Title(){return this._title}set Title(e){this._title=e}get Content(){return this._content}set Content(e){this._content=e}get ItemCategory(){return this._itemCtgy}set ItemCategory(e){this._itemCtgy=e}get Tags(){return this._tags}set Tags(e){this._tags=e.slice()}get CreatedAt(){return this._createdAt}set CreatedAt(e){this._createdAt=e}get ModifiedAt(){return this._modifiedAt}set ModifiedAt(e){this._modifiedAt=e}parseData(e){if(e&&e.ID&&(this.ID=+e.ID),e&&e.Category&&(this.ItemCategory=isNaN(+e.Category)?i[e.Category]:+e.Category),e&&e.Title&&(this._title=e.Title),e&&e.Content&&(this.Content=e.Content),e&&e.CreatedAt&&(this.CreatedAt=new Date(e.CreatedAt)),e&&e.ModifiedAt&&(this.ModifiedAt=new Date(e.ModifiedAt)),e&&e.Tags){const t=e.Tags;this._tags=[],t.forEach(e=>{this._tags.push(e.TagTerm)})}}generateString(e){let t={Content:this._content,Title:this._title,Category:i[this.ItemCategory]};return e&&(t.ID=this.ID),this.CreatedAt&&(t.CreatedAt=this.CreatedAt.toISOString()),this.ModifiedAt&&(t.ModifiedAt=this.ModifiedAt.toISOString()),this.Tags&&(t.Tags=[],this.Tags.forEach(e=>{t.Tags.push({TagTerm:e})})),JSON&&JSON.stringify(t)}}var o=s("NUjs"),l=function(e){return e[e.KnowledgeItem=1]="KnowledgeItem",e[e.ExerciseItem=2]="ExerciseItem",e}({});const u=e=>{let t="";switch(e){case l.ExerciseItem:t="ExerciseItem";break;default:t="KnowledgeItem"}return t};class c{parseData(e){e&&e.TagTerm&&(this.TagTerm=e.TagTerm),e&&e.RefType&&(this.RefType=isNaN(+e.RefType)?l[e.RefType]:+e.RefType),e&&e.RefID&&(this.RefID=e.RefID)}}class d{parseData(e){e&&e.Tag&&(this.TagTerm=e.Tag),e&&e.RefType&&(this.RefType=isNaN(+e.RefType)?l[e.RefType]:e.RefType),e&&e.Count&&(this.Count=e.Count)}}class h{parseData(e){e&&e.RefType&&(this.RefType=isNaN(+e.RefType)?l[e.RefType]:+e.RefType),e&&e.Count&&(this.Count=e.Count)}}var p=function(e){return e[e.home=0]="home",e[e.ps_basic=1]="ps_basic",e[e.ps_extend=2]="ps_extend",e[e.games=3]="games",e[e.award=4]="award",e[e.report=5]="report",e[e.help=6]="help",e[e.knowledge=7]="knowledge",e[e.others=10]="others",e}({}),m=function(e){return e[e.Equal=1]="Equal",e[e.NotEqual=2]="NotEqual",e[e.Between=3]="Between",e[e.LargerThan=4]="LargerThan",e[e.LargerEqual=5]="LargerEqual",e[e.LessThan=6]="LessThan",e[e.LessEqual=7]="LessEqual",e[e.Like=8]="Like",e}({}),g=function(e){return e[e.number=1]="number",e[e.string=2]="string",e[e.date=3]="date",e[e.boolean=4]="boolean",e}({});class b{constructor(){this.fieldName="",this.operator=m.Equal,this.valueType=g.string,this.value=[void 0,void 0]}}class f{static getGeneralFilterOperatorDisplayStrings(){const e=[];for(const t in m)Number.isNaN(+t)||e.push({value:+t,i18nterm:f.getGeneralFilterOperatorDisplayString(+t),displaystring:""});return e}static getGeneralFilterOperatorDisplayString(e){switch(e){case m.Between:return"Sys.Operator.Between";case m.Equal:return"Sys.Operator.Equal";case m.LargerEqual:return"Sys.Operator.LargerEqual";case m.LargerThan:return"Sys.Operator.LargerThan";case m.LessEqual:return"Sys.Operator.LessEqual";case m.LessThan:return"Sys.Operator.LessThan";case m.NotEqual:return"Sys.Operator.NotEqual";case m.Like:return"Sys.Operator.Like";default:return""}}}var _=s("BETK");const w=9;class I{constructor(){this._dataCells=[];for(let e=0;e<3;e++)this._dataCells.push(0)}getCell(e){if(e<0||e>=3)throw new Error("index of Sudou Unit is 1 - 3");return this._dataCells[e]}setCell(e,t){if(e<0||e>=3)throw new Error("index of Sudou Unit is 1 - 3");this._dataCells[e]=t}toString(){return this._dataCells.join(" ")}print2Log(){console.log(this.toString())}}class y{constructor(){this._dataRows=[];for(let e=0;e<3;e++){const e=new I;this._dataRows.push(e)}}static generateValidOne(){const e=new y,t=[];for(let s=0;s<w;s++)t.push(0);for(let s=0;s<w;s++){let e=Math.round(Math.random()*(w-1)+1);if(0===t[e])t[e]=s+1;else{for(e=0;e<w;){if(0===t[e]){t[e]=s+1;break}e++}if(e>w)throw new Error("Failed to initialize a 3*3!")}}for(let s=0;s<w;s++)e.setCell(Math.floor(s/3),Math.floor(s%3),t[s]);return e}getRow(e){if(e<0||e>=3)throw new Error("index of Sudou Unit is 1 - 3");return this._dataRows[e]}setRow(e,t){if(e<0||e>=3)throw new Error("index of Sudou Unit is 1 - 3");if(null==t)throw new Error("Unit row is not assigned");this._dataRows[e]=t}getCell(e,t){if(e<0||e>=3)throw new Error("index of Sudou Unit is 1 - 3");if(t<0||t>=3)throw new Error("index of Sudou Unit is 1 - 3");return this._dataRows[e].getCell(t)}setCell(e,t,s){if(e<0||e>=3)throw new Error("index of Sudou Unit is 1 - 3");if(t<0||t>=3)throw new Error("index of Sudou Unit is 1 - 3");this._dataRows[e].setCell(t,s)}swapRows(e,t){if(e<0||e>=3||t<0||t>=3)throw new Error("index of Sudou Unit is 1 - 3");const s=new y;for(let i=0;i<3;i++)for(let r=0;r<3;r++)s.setCell(i===e?t:i===t?e:i,r,this.getCell(i,r));return s}swapColumns(e,t){if(e<0||e>=3||t<0||t>=3)throw new Error("index of Sudou Unit is 1 - 3");const s=new y;for(let i=0;i<3;i++)for(let r=0;r<3;r++)s.setCell(i,r===e?t:r===t?e:r,this.getCell(i,r));return s}scrollUp(){return this.swapRows(0,1).swapRows(1,2)}scrollDown(){return this.swapRows(1,2).swapRows(0,1)}scrollLeft(){return this.swapColumns(0,1).swapColumns(1,2)}scrollRight(){return this.swapColumns(1,2).swapColumns(0,1)}print2Log(){for(let e=0;e<3;e++)this._dataRows[e].print2Log()}}class x{constructor(){this._dataCells=[];for(let e=0;e<3;e++)this._dataCells.push(new y)}getCell(e){if(e<0||e>=3)throw new Error("index of Sudou Unit is 1 - 3");return this._dataCells[e]}setCell(e,t){if(e<0||e>=3)throw new Error("index of Sudou Unit is 1 - 3");this._dataCells[e]=t}}class S{constructor(){this._dataRows=[];for(let e=0;e<3;e++){const e=new x;this._dataRows.push(e)}}getRow(e){if(e<0||e>=3)throw new Error("index of Sudou Unit is 1 - 3");return this._dataRows[e]}setRow(e,t){if(e<0||e>=3)throw new Error("index of Sudou Unit is 1 - 3");if(null==t)throw new Error("Unit row is not assigned");this._dataRows[e]=t}getUnitCell(e,t){if(e<0||e>=3)throw new Error("index of Sudou Unit is 1 - 3");if(t<0||t>=3)throw new Error("index of Sudou Unit is 1 - 3");return this._dataRows[e].getCell(t)}setUnitCell(e,t,s){if(e<0||e>=3)throw new Error("index of Sudou Unit is 1 - 3");if(t<0||t>=3)throw new Error("index of Sudou Unit is 1 - 3");this._dataRows[e].setCell(t,s)}getDataCells(){const e=[];for(let t=0;t<w;t++){const t=[];for(let e=0;e<w;e++)t.push(0);e.push(t)}for(let t=0;t<3;t++)for(let s=0;s<3;s++){const i=this._dataRows[t].getCell(s);for(let r=0;r<3;r++){const n=3*t+r;for(let t=0;t<3;t++)e[n][3*s+t]=i.getCell(r,t)}}return e}print2Log(){const e=[];for(let t=0;t<w;t++)e.push("");for(let t=0;t<3;t++)for(let s=0;s<3;s++){const i=this._dataRows[t].getCell(s);for(let s=0;s<3;s++)e[3*t+s]+=i.getRow(s).toString()+" "}for(let t=0;t<w;t++)console.log(e[t])}print2String(){const e=[];for(let t=0;t<w;t++)e.push("");for(let t=0;t<3;t++)for(let s=0;s<3;s++){const i=this._dataRows[t].getCell(s);for(let s=0;s<3;s++)e[3*t+s]+=i.getRow(s).toString()+" "}return e.join(";")}}function C(){const e=new S,t=y.generateValidOne(),s=t.scrollUp(),i=t.scrollDown(),r=t.scrollRight(),n=t.scrollLeft(),a=i.scrollRight(),o=i.scrollLeft(),l=s.scrollRight(),u=s.scrollLeft();return e.setUnitCell(0,0,a),e.setUnitCell(0,1,r),e.setUnitCell(0,2,l),e.setUnitCell(1,0,i),e.setUnitCell(1,1,t),e.setUnitCell(1,2,s),e.setUnitCell(2,0,o),e.setUnitCell(2,1,n),e.setUnitCell(2,2,u),e}var A=s("rCpU");class T{constructor(){this.playerinput=void 0}}class k{}var R=function(e){return e[e.row=0]="row",e[e.column=1]="column",e[e.slash=2]="slash",e[e.backslash=4]="backslash",e}({});class v extends k{}class O{constructor(){this._playAnalysis=[],this._AIAnalysis=[],this._arSlashPos=[],this._arBackSlashPos=[],this._queuePositions=[],this._dimension=20,this._inited=!1,this._finished=!1}get Dimension(){return this._dimension}set Dimension(e){this._dimension=e}get Finished(){return this._finished}get AIAnalysisResult(){return this._AIAnalysis}get PlayerAnalysisResult(){return this._playAnalysis}get QueuePositions(){return this._queuePositions}init(){if(this._dimension<=0||this._dimension>50)throw new Error("Invalid dimension");this._finished=!1,this.cells=new Array;for(let t=0;t<this._dimension;t++){const e=new Array;for(let t=0;t<this._dimension;t++)e.push(new T);this.cells.push(e)}const e=new A.a(this._dimension,this._dimension);this._arSlashPos=e.getSlashOutputPos(),this._arBackSlashPos=e.getBackSlashOutputPos(),this._AIAnalysis=[],this._playAnalysis=[],this._queuePositions=[],this._inited=!0}isCellHasValue(e,t){if(!this._inited)throw new Error("Not initialed");if(e<0||e>=this._dimension||t<0||t>=this._dimension)throw new Error("Invalid row or column");return void 0!==this.cells[e][t].playerinput}setCellValue(e,t,s){if(!this._inited)throw new Error("Not initialed");if(this._finished)throw new Error("Already finished");if(e<0||e>=this._dimension||t<0||t>=this._dimension)throw new Error("Invalid row or column");this.cells[e][t].playerinput=s,this._queuePositions.push({row:e,column:t}),this.checkWinner(e,t,s)}workoutNextCellAIPosition(){if(this._finished)throw new Error("Game is over!");const e={row:0,column:0};if(this._queuePositions.length<=0)return e.row=Math.round(Math.random()*this._dimension/2),e.column=Math.round(Math.random()*this._dimension/2),e;if(1===this._queuePositions.length)return e.row=this._queuePositions[0].row,e.column=this._queuePositions[0].column+1<this._dimension?this._queuePositions[0].column+1:this._queuePositions[0].column-1,e;this.buildUpAIAnalyis();let t=-1;this._playAnalysis.forEach((e,s)=>{-1!==t||!0===e.headsealed&&!0===e.tailsealed?this._playAnalysis[t].risklevel<e.risklevel&&(!0!==e.headsealed||!0!==e.tailsealed)&&(t=s):t=s});let s=-1;if(this._AIAnalysis.forEach((e,t)=>{-1!==s||!0===e.headsealed&&!0===e.tailsealed?this._playAnalysis[s].risklevel<e.risklevel&&(!0!==e.headsealed||!0!==e.tailsealed)&&(s=t):s=t}),this._AIAnalysis[s].risklevel<this._playAnalysis[t].risklevel&&(4===this._playAnalysis[t].risklevel||3===this._playAnalysis[t].risklevel&&!this._playAnalysis[t].headsealed&&!this._playAnalysis[t].tailsealed)){if(this._playAnalysis[t].headsealed)switch(this._playAnalysis[t].direction){case R.row:e.row=this._playAnalysis[t].relid,e.column=this._playAnalysis[t].endidx+1;break;case R.column:e.row=this._playAnalysis[t].endidx+1,e.column=this._playAnalysis[t].relid;break;case R.slash:e.row=this._arSlashPos[this._playAnalysis[t].relid][this._playAnalysis[t].endidx+1].row,e.column=this._arSlashPos[this._playAnalysis[t].relid][this._playAnalysis[t].endidx+1].column;break;case R.backslash:e.row=this._arBackSlashPos[this._playAnalysis[t].relid][this._playAnalysis[t].endidx+1].row,e.column=this._arBackSlashPos[this._playAnalysis[t].relid][this._playAnalysis[t].endidx+1].column;break;default:throw new Error("Unsupported type!")}else switch(this._playAnalysis[t].direction){case R.row:e.row=this._playAnalysis[t].relid,e.column=this._playAnalysis[t].startidx-1;break;case R.column:e.row=this._playAnalysis[t].startidx-1,e.column=this._playAnalysis[t].relid;break;case R.slash:e.row=this._arSlashPos[this._playAnalysis[t].relid][this._playAnalysis[t].startidx-1].row,e.column=this._arSlashPos[this._playAnalysis[t].relid][this._playAnalysis[t].startidx-1].column;break;case R.backslash:e.row=this._arBackSlashPos[this._playAnalysis[t].relid][this._playAnalysis[t].startidx-1].row,e.column=this._arBackSlashPos[this._playAnalysis[t].relid][this._playAnalysis[t].startidx-1].column;break;default:throw new Error("Unsupported type!")}return e}if(this._AIAnalysis[s].headsealed)switch(this._AIAnalysis[s].direction){case R.row:e.row=this._AIAnalysis[s].relid,e.column=this._AIAnalysis[s].endidx+1;break;case R.column:e.row=this._AIAnalysis[s].endidx+1,e.column=this._AIAnalysis[s].relid;break;case R.slash:e.row=this._arSlashPos[this._AIAnalysis[s].relid][this._AIAnalysis[s].endidx+1].row,e.column=this._arSlashPos[this._AIAnalysis[s].relid][this._AIAnalysis[s].endidx+1].column;break;case R.backslash:e.row=this._arBackSlashPos[this._AIAnalysis[s].relid][this._AIAnalysis[s].endidx+1].row,e.column=this._arBackSlashPos[this._AIAnalysis[s].relid][this._AIAnalysis[s].endidx+1].column;break;default:throw new Error("Unsupported type!")}else switch(this._AIAnalysis[s].direction){case R.row:e.row=this._AIAnalysis[s].relid,e.column=this._AIAnalysis[s].startidx-1;break;case R.column:e.row=this._AIAnalysis[s].startidx-1,e.column=this._AIAnalysis[s].relid;break;case R.slash:e.row=this._arSlashPos[this._AIAnalysis[s].relid][this._AIAnalysis[s].startidx-1].row,e.column=this._arSlashPos[this._AIAnalysis[s].relid][this._AIAnalysis[s].startidx-1].column;break;case R.backslash:e.row=this._arBackSlashPos[this._AIAnalysis[s].relid][this._AIAnalysis[s].startidx-1].row,e.column=this._arBackSlashPos[this._AIAnalysis[s].relid][this._AIAnalysis[s].startidx-1].column;break;default:throw new Error("Unsupported type!")}return e}buildUpAIAnalyis(){this._playAnalysis=[],this._AIAnalysis=[];for(let e=0;e<this._dimension;e++){const t=this.buildUpAnalysisRow(this.cells[e]);for(const s of t)if(!0!==s.headsealed||!0!==s.tailsealed)if(!0===s.userinput){const t=new v;t.direction=R.row,t.relid=e,t.risklevel=s.endidx+1-s.startidx,t.startidx=s.startidx,t.endidx=s.endidx,t.headsealed=s.headsealed,t.tailsealed=s.tailsealed,t.risklevel=t.endidx+1-t.startidx,t.userinput=s.userinput,this._playAnalysis.push(t)}else if(!1===s.userinput){const t=new v;t.direction=R.row,t.relid=e,t.risklevel=s.endidx+1-s.startidx,t.startidx=s.startidx,t.endidx=s.endidx,t.headsealed=s.headsealed,t.tailsealed=s.tailsealed,t.risklevel=t.endidx+1-t.startidx,t.userinput=s.userinput,this._AIAnalysis.push(t)}}for(let e=0;e<this._dimension;e++){const t=[];for(let i=0;i<this._dimension;i++)t.push(this.cells[i][e]);const s=this.buildUpAnalysisRow(t);for(const i of s)if(!0!==i.headsealed||!0!==i.tailsealed)if(!0===i.userinput){const t=new v;t.direction=R.column,t.relid=e,t.risklevel=i.endidx+1-i.startidx,t.startidx=i.startidx,t.endidx=i.endidx,t.headsealed=i.headsealed,t.tailsealed=i.tailsealed,t.risklevel=t.endidx+1-t.startidx,t.userinput=i.userinput,this._playAnalysis.push(t)}else if(!1===i.userinput){const t=new v;t.direction=R.column,t.relid=e,t.risklevel=i.endidx+1-i.startidx,t.startidx=i.startidx,t.endidx=i.endidx,t.headsealed=i.headsealed,t.tailsealed=i.tailsealed,t.risklevel=t.endidx+1-t.startidx,t.userinput=i.userinput,this._AIAnalysis.push(t)}}for(let e=0;e<this._arSlashPos.length;e++){const t=[];for(const i of this._arSlashPos[e])t.push(this.cells[i.row][i.column]);const s=this.buildUpAnalysisRow(t);for(const i of s)if(!0!==i.headsealed||!0!==i.tailsealed)if(!0===i.userinput){const t=new v;t.direction=R.slash,t.relid=e,t.risklevel=i.endidx+1-i.startidx,t.startidx=i.startidx,t.endidx=i.endidx,t.headsealed=i.headsealed,t.tailsealed=i.tailsealed,t.risklevel=t.endidx+1-t.startidx,t.userinput=i.userinput,this._playAnalysis.push(t)}else if(!1===i.userinput){const t=new v;t.direction=R.slash,t.relid=e,t.risklevel=i.endidx+1-i.startidx,t.startidx=i.startidx,t.endidx=i.endidx,t.headsealed=i.headsealed,t.tailsealed=i.tailsealed,t.risklevel=t.endidx+1-t.startidx,t.userinput=i.userinput,this._AIAnalysis.push(t)}}for(let e=0;e<this._arBackSlashPos.length;e++){const t=[];for(const i of this._arBackSlashPos[e])t.push(this.cells[i.row][i.column]);const s=this.buildUpAnalysisRow(t);for(const i of s)if(!0===i.userinput){const t=new v;t.direction=R.backslash,t.relid=e,t.risklevel=i.endidx+1-i.startidx,t.startidx=i.startidx,t.endidx=i.endidx,t.headsealed=i.headsealed,t.tailsealed=i.tailsealed,t.risklevel=t.endidx+1-t.startidx,t.userinput=i.userinput,this._playAnalysis.push(t)}else if(!1===i.userinput){const t=new v;t.direction=R.backslash,t.relid=e,t.risklevel=i.endidx+1-i.startidx,t.startidx=i.startidx,t.endidx=i.endidx,t.headsealed=i.headsealed,t.tailsealed=i.tailsealed,t.risklevel=t.endidx+1-t.startidx,t.userinput=i.userinput,this._AIAnalysis.push(t)}}}buildUpAnalysisRow(e){let t=-1,s=void 0;const i=[];for(let r=0;r<e.length;r++)if(!0===e[r].playerinput){if(-1===t)t=r,s=!0;else if(s!==e[r].playerinput){if(void 0!==s){const n=new k;n.startidx=t,n.endidx=r-1,n.userinput=s,0===t?n.headsealed=!0:void 0===e[t-1].playerinput?n.headsealed=!1:e[t-1].playerinput!==s&&(n.headsealed=!0),n.tailsealed=!0,i.push(n)}t=r,s=e[r].playerinput}}else if(!1===e[r].playerinput){if(-1===t)t=r,s=!1;else if(s!==e[r].playerinput){if(void 0!==s){const n=new k;n.startidx=t,n.endidx=r-1,n.userinput=s,0===t?n.headsealed=!0:void 0===e[t-1].playerinput?n.headsealed=!1:e[t-1].playerinput!==s&&(n.headsealed=!0),n.tailsealed=!0,i.push(n)}t=r,s=e[r].playerinput}}else if(void 0===e[r].playerinput)if(-1===t)t=r,s=void 0;else if(void 0===s);else{const n=new k;n.startidx=t,n.endidx=r-1,n.userinput=s,0===t||void 0!==e[t-1].playerinput?n.headsealed=!0:void 0===e[t-1].playerinput&&(n.headsealed=!1),n.tailsealed=!1,i.push(n),t=r,s=e[r].playerinput}if(void 0!==s){const r=new k;r.startidx=t,r.endidx=e.length-1,r.userinput=s,0===t?r.headsealed=!0:void 0!==s&&(r.headsealed=void 0!==e[t-1].playerinput),r.tailsealed=!0,i.push(r)}return i}checkWinner(e,t,s){let i=0,r=0,n=0,a=0;for(let o=0;o<this._dimension&&(this.cells[e][o].playerinput===s?i++:i=0,5!==i);o++);if(5!==i){for(let e=0;e<this._dimension&&(this.cells[e][t].playerinput===s?r++:r=0,5!==r);e++);if(5!==r){const i=e+t;for(let e=0;e<this._dimension&&(i<e||i>=e+this._dimension||(this.cells[e][i-e].playerinput===s?n++:n=0,5!==n));e++);if(5!==n){let i=e-t;if(i<0){i=Math.abs(i);for(let e=0;e<this._dimension&&(e+i>=this._dimension||(this.cells[e][e+i].playerinput===s?a++:a=0,5!==a));e++);}else for(let e=i;e<this._dimension&&(this.cells[e][e-i].playerinput===s?a++:a=0,5!==a);e++);}}}5!==i&&5!==r&&5!==n&&5!==a||(this._finished=!0)}}},jIBr:function(e,t,s){"use strict";s.d(t,"a",function(){return G});var i=s("u47x"),r=s("UXJo"),n=s("5+WD"),a=s("+rOU"),o=s("vxfF"),l=s("B/XX"),u=s("f6nW"),c=s("FvrZ"),d=s("/1cH"),h=s("TU8p"),p=s("2ChS"),m=s("bTqV"),g=s("jaxi"),b=s("Wp6s"),f=s("bSwM"),_=s("A5z7"),w=s("xHqg"),I=s("iadO"),y=s("0IaG"),x=s("f0Cb"),S=s("7EHt"),C=s("zkoq"),A=s("NFeN"),T=s("qFsG"),k=s("MutI"),R=s("STbY"),v=s("FKr1"),O=s("M9IT"),E=s("bv9b"),j=s("Xa2L"),F=s("QibW"),z=s("d3UM"),N=s("XhcP"),D=s("5RNC"),P=s("1jcm"),Q=s("dNgK"),M=s("Dh3D"),L=s("+0xr"),U=s("wZkO"),K=s("/t3+"),q=s("Qu3c"),J=s("8yBR"),$=s("YUcS"),B=s("fXoL");let G=(()=>{class e{}return e.\u0275mod=B.Lb({type:e}),e.\u0275inj=B.Kb({factory:function(t){return new(t||e)},imports:[i.a,r.a,l.e,u.r,c.d,n.a,d.a,h.a,p.a,m.c,g.a,b.e,f.b,_.e,w.d,I.c,y.e,x.b,S.a,C.a,A.b,T.c,k.c,R.c,v.l,O.b,E.b,j.b,F.a,v.s,z.b,N.d,D.a,P.b,Q.b,M.c,L.k,U.a,K.b,q.b,J.a,a.f,o.d,$.a]}),e})()},o0su:function(e,t,s){"use strict";s.d(t,"b",function(){return h}),s.d(t,"c",function(){return p}),s.d(t,"a",function(){return m});var i=s("tk/3"),r=s("z6cu"),n=s("LRne"),a=s("XNiG"),o=s("lJxs"),l=s("JIr8"),u=s("VHTt"),c=s("AytR"),d=s("fXoL");let h=(()=>{class e{constructor(e){this.http=e,this.apiUrl=c.a.apiurlRoot+"/odata/",this.uploadUrl=c.a.apiurlRoot+"/api/ImageUpload",this.isMetadataLoaded=!1,this.metadataInfo="",this.mockedKnowledgeItem=[],this.mockedExerciseItem=[],this.previewObjList=[],this.bufferedKnowledgeItems=[],this.bufferedExerciseItems=[]}getMetadata(e){if(!this.isMetadataLoaded||e){let e=new i.c;e=e.append("Content-Type","application/xml,application/json").append("Accept","text/html,application/xhtml+xml,application/xml");let t=this.apiUrl+"$metadata";return c.a.mockdata&&(t=c.a.basehref+"assets/mockdata/metadata.xml"),this.http.get(t,{headers:e,responseType:"text"}).pipe(Object(o.a)(e=>(this.isMetadataLoaded=!0,this.metadataInfo=e,this.metadataInfo)),Object(l.a)(e=>Object(r.a)(e.statusText+"; "+e.error+"; "+e.message)))}return Object(n.a)(this.metadataInfo)}getKnowledgeItems(e=30,t=0,s,a){if(c.a.mockdata&&this.mockedKnowledgeItem.length>0)return Object(n.a)({totalCount:this.mockedKnowledgeItem.length,items:this.mockedKnowledgeItem});let d=new i.c;d=d.append("Content-Type","application/json").append("Accept","application/json");let h=new i.d;h=h.append("$top",e.toString()),h=h.append("$skip",t.toString()),h=h.append("$count","true"),s&&"createdat"===s&&(h=h.append("$orderby","CreatedAt "+a)),h=h.append("$select","ID,Category,Title,CreatedAt,ModifiedAt");let p=this.apiUrl+"KnowledgeItems";return c.a.mockdata&&(p=c.a.basehref+"assets/mockdata/knowledge-items.json",h=new i.d),this.http.get(p,{headers:d,params:h}).pipe(Object(o.a)(e=>{const t=e,s=[];return t.value.forEach(e=>{const t=new u.i;t.parseData(e),s.push(t)}),c.a.mockdata&&(this.mockedKnowledgeItem=s.slice()),{totalCount:t["@odata.count"],items:s}}),Object(l.a)(e=>Object(r.a)(e.statusText+"; "+e.error+"; "+e.message)))}readKnowledgeItem(e,t=!1){if(c.a.mockdata){const t=this.mockedKnowledgeItem.findIndex(t=>t.ID===e);return-1!==t?Object(n.a)(this.mockedKnowledgeItem[t]):Object(n.a)(new u.i)}const s=this.bufferedKnowledgeItems.findIndex(t=>t.ID===e);if(!t&&-1!==s)return Object(n.a)(this.bufferedKnowledgeItems[s]);let a=new i.c;a=a.append("Content-Type","application/json").append("Accept","application/json");let d=new i.d;return d=d.append("$select","ID,Category,Title,Content,CreatedAt,ModifiedAt"),d=d.append("$expand","Tags"),this.http.get(`${this.apiUrl}KnowledgeItems(${e})`,{headers:a,params:d}).pipe(Object(o.a)(e=>{const t=e,i=new u.i;return i.parseData(t),-1===s?this.bufferedKnowledgeItems.push(i):this.bufferedKnowledgeItems[s]=i,i}),Object(l.a)(e=>Object(r.a)(e.statusText+"; "+e.error+"; "+e.message)))}createKnowledgeItem(e){if(c.a.mockdata)return Object(r.a)("Cannot create in mock mode");let t=new i.c;t=t.append("Content-Type","application/json").append("Accept","application/json");const s=e.generateString();return this.http.post(this.apiUrl+"KnowledgeItems",s,{headers:t}).pipe(Object(o.a)(t=>{const s=t,i=new u.i;return i.parseData(s),e.Tags.length>0&&(i.Tags=e.Tags),this.bufferedKnowledgeItems.push(i),i}),Object(l.a)(e=>Object(r.a)(e.statusText+"; "+e.error+"; "+e.message)))}changeKnowledgeItem(e){if(c.a.mockdata)return Object(r.a)("Cannot change in mock mode");let t=new i.c;t=t.append("Content-Type","application/json").append("Accept","application/json");const s=e.generateString(!0);return this.http.put(`${this.apiUrl}KnowledgeItems(${e.ID})`,s,{headers:t}).pipe(Object(o.a)(t=>{const s=this.bufferedKnowledgeItems.findIndex(t=>t.ID===e.ID);return-1===s?this.bufferedKnowledgeItems.push(e):this.bufferedKnowledgeItems[s]=e,e}),Object(l.a)(e=>Object(r.a)(e.statusText+"; "+e.error+"; "+e.message)))}deleteKnowledgeItem(e){if(c.a.mockdata)return Object(r.a)("Cannot delete in mock mode");let t=new i.c;return t=t.append("Content-Type","application/json").append("Accept","application/json"),this.http.delete(`${this.apiUrl}KnowledgeItems(${e})`,{headers:t}).pipe(Object(o.a)(t=>{const s=this.bufferedKnowledgeItems.findIndex(t=>t.ID===e);return-1!==s&&this.bufferedKnowledgeItems.splice(s,1),!0}),Object(l.a)(e=>Object(r.a)(e.statusText+"; "+e.error+"; "+e.message)))}getExerciseItems(e=30,t=0,s,a,d){if(c.a.mockdata&&this.mockedExerciseItem.length>0)return Object(n.a)({totalCount:this.mockedExerciseItem.length,items:this.mockedExerciseItem});let h=new i.c;h=h.append("Content-Type","application/json").append("Accept","application/json");let p=new i.d;p=p.append("$top",e.toString()),p=p.append("$skip",t.toString()),p=p.append("$count","true"),s&&"createdat"===s&&(p=p.append("$orderby","CreatedAt "+a)),p=p.append("$select","ID,KnowledgeItemID,ExerciseType,CreatedAt"),d&&(p=p.append("$filter",d)),p=p.append("$expand","Tags");let m=this.apiUrl+"ExerciseItems";return c.a.mockdata&&(m=c.a.basehref+"assets/mockdata/exercise-items.json",p=new i.d),this.http.get(m,{headers:h,params:p}).pipe(Object(o.a)(e=>{const t=e,s=[];return t.value.forEach(e=>{const t=new u.d;t.parseData(e),s.push(t)}),c.a.mockdata&&(this.mockedExerciseItem=s.slice()),{totalCount:t["@odata.count"],items:s}}),Object(l.a)(e=>Object(r.a)(e.statusText+"; "+e.error+"; "+e.message)))}createExerciseItem(e){if(c.a.mockdata)return Object(r.a)("Cannot create in mock mode");let t=new i.c;t=t.append("Content-Type","application/json").append("Accept","application/json");const s=e.generateString();return this.http.post(this.apiUrl+"ExerciseItems",s,{headers:t}).pipe(Object(o.a)(t=>{const s=t,i=new u.d;return i.parseData(s),e.Tags.length>0&&(i.Tags=e.Tags.slice()),e.Answer&&(i.Answer=e.Answer),this.bufferedExerciseItems.push(i),i}),Object(l.a)(e=>Object(r.a)(e.statusText+"; "+e.error+"; "+e.message)))}changeExerciseItem(e){if(c.a.mockdata)return Object(r.a)("Cannot change in mock mode");let t=new i.c;t=t.append("Content-Type","application/json").append("Accept","application/json");const s=e.generateString(!0);return this.http.put(`${this.apiUrl}ExerciseItems(${e.ID})`,s,{headers:t}).pipe(Object(o.a)(t=>{const s=this.bufferedExerciseItems.findIndex(t=>t.ID===e.ID);return-1===s?this.bufferedExerciseItems.push(e):this.bufferedExerciseItems[s]=e,e}),Object(l.a)(e=>Object(r.a)(e.statusText+"; "+e.error+"; "+e.message)))}readExerciseItem(e,t=!1){if(c.a.mockdata){const t=this.mockedExerciseItem.findIndex(t=>t.ID===e);return-1!==t?Object(n.a)(this.mockedExerciseItem[t]):Object(n.a)(new u.d)}const s=this.bufferedExerciseItems.findIndex(t=>t.ID===e);if(!t&&-1!==s)return Object(n.a)(this.bufferedExerciseItems[s]);let a=new i.c;a=a.append("Content-Type","application/json").append("Accept","application/json");let d=new i.d;return d=d.append("$select","ID,KnowledgeItemID,ExerciseType,Content,CreatedAt,ModifiedAt"),d=d.append("$expand","Tags,Answer"),this.http.get(`${this.apiUrl}ExerciseItems(${e})`,{headers:a,params:d}).pipe(Object(o.a)(e=>{const t=new u.d;return t.parseData(e),-1===s?this.bufferedExerciseItems.push(t):this.bufferedExerciseItems[s]=t,t}),Object(l.a)(e=>Object(r.a)(e.statusText+"; "+e.error+"; "+e.message)))}deleteExerciseItem(e){if(c.a.mockdata)return Object(r.a)("Cannot delete in mock mode");let t=new i.c;return t=t.append("Content-Type","application/json").append("Accept","application/json"),this.http.delete(`${this.apiUrl}ExerciseItems(${e})`,{headers:t}).pipe(Object(o.a)(t=>{const s=this.bufferedExerciseItems.findIndex(t=>t.ID===e);return-1!==s&&this.bufferedExerciseItems.splice(s,1),!0}),Object(l.a)(e=>Object(r.a)(e.statusText+"; "+e.error+"; "+e.message)))}uploadFiles(e){const t={};return e.forEach(e=>{const s=new FormData;s.append("file",e,e.name);const r=new i.e("POST",this.uploadUrl,s),n=new a.a;this.http.request(r).subscribe(e=>{if(e instanceof i.f){const t=e.body[0];n.next({delete_type:t.delete_type,delete_url:`${c.a.apiurlRoot}${t.delete_url}`,name:t.name,progress:1,size:t.size,thumbnail_url:`${c.a.apiurlRoot}${t.thumbnail_url}`,type:t.type,url:`${c.a.apiurlRoot}${t.url}`}),n.complete()}}),t[e.name]={result:n.asObservable()}}),t}getTagCounts(){let e=new i.c;e=e.append("Content-Type","application/json").append("Accept","application/json");let t=new i.d;t=t.append("$top","100"),t=t.append("$count","true");let s=this.apiUrl+"TagCounts";return c.a.mockdata&&(s=c.a.basehref+"assets/mockdata/tag-counts.json",t=new i.d),this.http.get(s,{headers:e,params:t}).pipe(Object(o.a)(e=>{const t=e,s=[];return t.value.forEach(e=>{const t=new u.s;t.parseData(e),s.push(t)}),{totalCount:t["@odata.count"],items:s}}),Object(l.a)(e=>Object(r.a)(e.statusText+"; "+e.error+"; "+e.message)))}getTags(e,t){let s=new i.c;s=s.append("Content-Type","application/json").append("Accept","application/json");let n=new i.d;n=n.append("$top","100"),n=n.append("$count","true"),n=n.append("$filter",`TagTerm eq '${e}'`);let a=this.apiUrl+"Tags";return c.a.mockdata&&(a=c.a.basehref+"assets/mockdata/tags.json",n=new i.d),this.http.get(a,{headers:s,params:n}).pipe(Object(o.a)(e=>{const t=e,s=[];return t.value.forEach(e=>{const t=new u.r;t.parseData(e),s.push(t)}),{totalCount:t["@odata.count"],items:s}}),Object(l.a)(e=>Object(r.a)(e.statusText+"; "+e.error+"; "+e.message)))}getOverviewInfo(){let e=new i.c;e=e.append("Content-Type","application/json").append("Accept","application/json");let t=this.apiUrl+"OverviewInfos";return c.a.mockdata&&(t=c.a.basehref+"assets/mockdata/overview-infos.json"),this.http.get(t,{headers:e}).pipe(Object(o.a)(e=>{const t=[];return e.value.forEach(e=>{const s=new u.m;s.parseData(e),t.push(s)}),t}),Object(l.a)(e=>Object(r.a)(e.statusText+"; "+e.error+"; "+e.message)))}}return e.\u0275fac=function(t){return new(t||e)(d.Xb(i.a))},e.\u0275prov=d.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),p=(()=>{class e{constructor(){this.currentQuizID=0,this.elderQuizs=[],this.failedItems=[],this.currScore=0}get NextQuizID(){return this.currentQuizID+1}get ActiveQuiz(){return this.curQuiz}get ElderQuizs(){return this.elderQuizs}get FailedQuizItems(){return this.failedItems}set FailedQuizItems(e){this.failedItems=e}get CurrentScore(){return this.currScore}set CurrentScore(e){this.currScore=e}startNewQuiz(e){if(this.curQuiz)throw new Error("Active Quiz not yet completed");return this.curQuiz=new u.n(e),this.currentQuizID=e,this.curQuiz}completeActiveQuiz(){if(!this.curQuiz)throw new Error("Active Quiz not exist");if(this.curQuiz.ActiveSection)throw new Error("Active Quiz has active section");this.elderQuizs.push(this.curQuiz),this.curQuiz=void 0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=d.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),m=(()=>{class e{canDeactivate(e){return!e.canDeactivate||e.canDeactivate()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=d.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},zUnb:function(e,t,s){"use strict";s.r(t);var i=s("fXoL"),r=s("AytR"),n=s("jhN1"),a=s("tk/3"),o=s("tyNb");const l=[{path:"",pathMatch:"full",redirectTo:"/welcome"},{path:"welcome",loadChildren:()=>s.e(16).then(s.bind(null,"TtBp")).then(e=>e.WelcomeModule)},{path:"knowledge-item",loadChildren:()=>Promise.all([s.e(1),s.e(11)]).then(s.bind(null,"U+IK")).then(e=>e.KnowledgeItemsModule)},{path:"exercise-item",loadChildren:()=>Promise.all([s.e(1),s.e(9)]).then(s.bind(null,"V7M2")).then(e=>e.ExerciseItemsModule)},{path:"tag",loadChildren:()=>s.e(15).then(s.bind(null,"Bbvb")).then(e=>e.TagModule)},{path:"help",loadChildren:()=>s.e(10).then(s.bind(null,"6RTz")).then(e=>e.HelpModule)},{path:"primary-school-math",loadChildren:()=>s.e(7).then(s.bind(null,"GtZ7")).then(e=>e.PrimarySchoolMathModule)},{path:"puzzle-games",loadChildren:()=>s.e(8).then(s.bind(null,"1Ans")).then(e=>e.PuzzleGameModule)},{path:"quiz-summary",loadChildren:()=>s.e(14).then(s.bind(null,"TYNk")).then(e=>e.QuizSummaryModule)},{path:"preview",loadChildren:()=>s.e(13).then(s.bind(null,"caho")).then(e=>e.PreviewModule)},{path:"**",loadChildren:()=>s.e(12).then(s.bind(null,"jSwP")).then(e=>e.NotFoundModule)}];let u=(()=>{class e{}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[o.d.forRoot(l)],o.d]}),e})();var c=s("VHTt"),d=s("0MNC"),h=s("QPBi"),p=s("FKr1"),m=s("/t3+"),g=s("bTqV"),b=s("NFeN"),f=s("Qu3c"),_=s("STbY"),w=s("ofXK"),I=s("XhcP"),y=s("7EHt"),x=s("MutI"),S=s("3be6");function C(e,t){1&e&&(i.Tb(0,"mat-icon"),i.Ec(1,"check"),i.Sb())}function A(e,t){if(1&e){const e=i.Ub();i.Tb(0,"button",18),i.bc("click",function(){i.uc(e);const s=t.$implicit;return i.fc().switchLanguage(s.value)}),i.Dc(1,C,2,0,"mat-icon",19),i.Ec(2),i.gc(3,"transloco"),i.Sb()}if(2&e){const e=t.$implicit,s=i.fc();i.Cb(1),i.lc("ngIf",s.selectedLanguage===e.value),i.Cb(1),i.Gc(" ",i.hc(3,2,e.displayas)," ")}}const T=function(e){return[e]};function k(e,t){if(1&e&&(i.Tb(0,"a",20),i.Ec(1),i.gc(2,"transloco"),i.Sb()),2&e){const e=t.$implicit;i.lc("routerLink",i.pc(4,T,e.route)),i.Cb(1),i.Gc(" ",i.hc(2,2,e.name)," ")}}function R(e,t){if(1&e&&(i.Tb(0,"a",20),i.Ec(1),i.gc(2,"transloco"),i.Sb()),2&e){const e=t.$implicit;i.lc("routerLink",i.pc(4,T,e.route)),i.Cb(1),i.Gc(" ",i.hc(2,2,e.name)," ")}}function v(e,t){if(1&e&&(i.Tb(0,"a",20),i.Ec(1),i.gc(2,"transloco"),i.Sb()),2&e){const e=t.$implicit;i.lc("routerLink",i.pc(4,T,e.route)),i.Cb(1),i.Gc(" ",i.hc(2,2,e.name)," ")}}function O(e,t){if(1&e&&(i.Tb(0,"a",20),i.Ec(1),i.gc(2,"transloco"),i.Sb()),2&e){const e=t.$implicit;i.lc("routerLink",i.pc(4,T,e.route)),i.Cb(1),i.Gc(" ",i.hc(2,2,e.name)," ")}}function E(e,t){if(1&e&&(i.Tb(0,"a",20),i.Ec(1),i.gc(2,"transloco"),i.Sb()),2&e){const e=t.$implicit;i.lc("routerLink",i.pc(4,T,e.route)),i.Cb(1),i.Gc(" ",i.hc(2,2,e.name)," ")}}let j=(()=>{class e{constructor(e,t,s,i){this.translocoService=s,this.dateAdapter=i,this.title="Knowledge Builder",this.navItems=[],this.availableLanguages=[{displayas:"Languages.en",value:"en"},{displayas:"Languages.zh",value:"zh"}],this.selectedLanguage="zh",this.mobileQuery=t.matchMedia("(max-width: 600px)"),this._mobileQueryListener=()=>e.detectChanges(),this.mobileQuery.addEventListener("change",this._mobileQueryListener),this.navItems=[{name:"WelcomePage",route:"/welcome",group:c.b.home},{name:"MathExercise.AdditionExercises",route:"/primary-school-math/add-ex",group:c.b.ps_basic},{name:"MathExercise.SubtractionExercises",route:"/primary-school-math/sub-ex",group:c.b.ps_basic},{name:"MathExercise.MultiplicationExercises",route:"/primary-school-math/multi-ex",group:c.b.ps_basic},{name:"MathExercise.DivisionExercises",route:"/primary-school-math/div-ex",group:c.b.ps_basic},{name:"MathExercise.MixedOperations",route:"/primary-school-math/mixed-op",group:c.b.ps_basic},{name:"Quiz.PrintableQuizGenerator",route:"/primary-school-math/printable-quiz",group:c.b.ps_basic},{name:"KnowledgeItem",route:"/knowledge-item",group:c.b.knowledge},{name:"ExerciseItem",route:"/exercise-item",group:c.b.knowledge},{name:"Tags",route:"/tag",group:c.b.knowledge},{name:"PuzzleGames.Calculate24",route:"/puzzle-games/cal24",group:c.b.games},{name:"PuzzleGames.Sudou",route:"/puzzle-games/sudou",group:c.b.games},{name:"PuzzleGames.TypingTutor",route:"puzzle-games/typegame",group:c.b.games},{name:"PuzzleGames.Gobang",route:"puzzle-games/gobang",group:c.b.games},{name:"Help.About",route:"/help/about",group:c.b.help},{name:"Help.Credits",route:"/help/credits",group:c.b.help}]}switchLanguage(e){this.selectedLanguage=e,"en"===e?(this.translocoService.setActiveLang("en"),this.dateAdapter.setLocale("en")):(this.translocoService.setActiveLang("zh"),this.dateAdapter.setLocale("zh"))}toggleFullscreen(){}ngOnDestroy(){this.mobileQuery.removeEventListener("change",this._mobileQueryListener)}openCodeRepo(){window.open("https://github.com/alvachien/knowledgebuilder","_blank")}}return e.\u0275fac=function(t){return new(t||e)(i.Nb(i.h),i.Nb(d.c),i.Nb(h.e),i.Nb(p.c))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-root"]],decls:84,vars:55,consts:[[1,"example-container"],["color","primary",1,"example-toolbar"],["mat-icon-button","",3,"click"],[1,"example-app-name"],[1,"toolbar-spacer"],["mat-icon-button","","mat-button","",3,"matTooltip","matMenuTriggerFor"],["overlapTrigger","false","xPosition","after","yPosition","below"],["matMenuLanguage","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-icon-button","","title","Toggle fullscreen",3,"matTooltip","click"],["aria-hidden","false","aria-label","Code Repo"],[1,"example-sidenav-container"],["fixedTopGap","56",3,"mode","fixedInViewport"],["snav",""],["hideToggle","false"],["color","primary"],["mat-list-item","",3,"routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"click"],["mat-menu-item","",3,"click"],[4,"ngIf"],["mat-list-item","",3,"routerLink"]],template:function(e,t){if(1&e){const e=i.Ub();i.Tb(0,"div",0),i.Tb(1,"mat-toolbar",1),i.Tb(2,"button",2),i.bc("click",function(){return i.uc(e),i.sc(27).toggle()}),i.Tb(3,"mat-icon"),i.Ec(4,"menu"),i.Sb(),i.Sb(),i.Tb(5,"h1",3),i.Ec(6),i.gc(7,"transloco"),i.Sb(),i.Ob(8,"span",4),i.Tb(9,"button",5),i.gc(10,"transloco"),i.Tb(11,"mat-icon"),i.Ec(12,"language"),i.Sb(),i.Sb(),i.Tb(13,"mat-menu",6,7),i.Dc(15,A,4,4,"button",8),i.Sb(),i.Tb(16,"button",9),i.bc("click",function(){return t.toggleFullscreen()}),i.gc(17,"transloco"),i.Tb(18,"mat-icon"),i.Ec(19,"fullscreen"),i.Sb(),i.Sb(),i.Tb(20,"button",2),i.bc("click",function(){return t.openCodeRepo()}),i.Tb(21,"mat-icon",10),i.Ec(22,"code"),i.Sb(),i.Sb(),i.Tb(23,"span"),i.Ec(24,"0.1.54"),i.Sb(),i.Sb(),i.Tb(25,"mat-sidenav-container",11),i.Tb(26,"mat-sidenav",12,13),i.Tb(28,"mat-expansion-panel",14),i.Tb(29,"mat-expansion-panel-header"),i.Tb(30,"mat-panel-title"),i.Tb(31,"mat-icon",15),i.Ec(32,"home"),i.Sb(),i.Ec(33),i.gc(34,"transloco"),i.Sb(),i.Sb(),i.Tb(35,"mat-nav-list"),i.Dc(36,k,3,6,"a",16),i.gc(37,"navItemFilter"),i.Sb(),i.Sb(),i.Tb(38,"mat-expansion-panel",14),i.Tb(39,"mat-expansion-panel-header"),i.Tb(40,"mat-panel-title"),i.Tb(41,"mat-icon",15),i.Ec(42,"school"),i.Sb(),i.Ec(43),i.gc(44,"transloco"),i.Sb(),i.Sb(),i.Tb(45,"mat-nav-list"),i.Dc(46,R,3,6,"a",16),i.gc(47,"navItemFilter"),i.Sb(),i.Sb(),i.Tb(48,"mat-expansion-panel",14),i.Tb(49,"mat-expansion-panel-header"),i.Tb(50,"mat-panel-title"),i.Tb(51,"mat-icon",15),i.Ec(52,"library_books"),i.Sb(),i.Ec(53),i.gc(54,"transloco"),i.Sb(),i.Sb(),i.Tb(55,"mat-nav-list"),i.Dc(56,v,3,6,"a",16),i.gc(57,"navItemFilter"),i.Sb(),i.Sb(),i.Tb(58,"mat-expansion-panel",14),i.Tb(59,"mat-expansion-panel-header"),i.Tb(60,"mat-panel-title"),i.Tb(61,"mat-icon",15),i.Ec(62,"snooze"),i.Sb(),i.Ec(63),i.gc(64,"transloco"),i.Sb(),i.Sb(),i.Tb(65,"mat-nav-list"),i.Dc(66,O,3,6,"a",16),i.gc(67,"navItemFilter"),i.Sb(),i.Sb(),i.Tb(68,"mat-expansion-panel",14),i.Tb(69,"mat-expansion-panel-header"),i.Tb(70,"mat-panel-title"),i.Tb(71,"mat-icon",15),i.Ec(72,"help_outline"),i.Sb(),i.Ec(73),i.gc(74,"transloco"),i.Sb(),i.Sb(),i.Tb(75,"mat-nav-list"),i.Dc(76,E,3,6,"a",16),i.gc(77,"navItemFilter"),i.Sb(),i.Sb(),i.Tb(78,"mat-nav-list"),i.Tb(79,"a",17),i.bc("click",function(){return i.uc(e),i.sc(27).close()}),i.Ec(80),i.gc(81,"transloco"),i.Sb(),i.Sb(),i.Sb(),i.Tb(82,"mat-sidenav-content"),i.Ob(83,"router-outlet"),i.Sb(),i.Sb(),i.Sb()}if(2&e){const e=i.sc(14);i.Fb("example-is-mobile",t.mobileQuery.matches),i.Cb(6),i.Fc(i.hc(7,22,"KnowledgeBuilder")),i.Cb(3),i.mc("matTooltip",i.hc(10,24,"Language")),i.lc("matMenuTriggerFor",e),i.Cb(6),i.lc("ngForOf",t.availableLanguages),i.Cb(1),i.mc("matTooltip",i.hc(17,26,"FullScreen")),i.Cb(9),i.Ac("margin-top",t.mobileQuery.matches?56:0,"px"),i.Cb(1),i.lc("mode",t.mobileQuery.matches?"over":"side")("fixedInViewport",t.mobileQuery.matches),i.Cb(7),i.Gc(" ",i.hc(34,28,"WelcomePage")," "),i.Cb(3),i.lc("ngForOf",i.ic(37,30,t.navItems,0)),i.Cb(7),i.Gc("",i.hc(44,33,"MathExercise.PrimarySchoolBasicMath")," "),i.Cb(3),i.lc("ngForOf",i.ic(47,35,t.navItems,1)),i.Cb(7),i.Gc("",i.hc(54,38,"KnowledgeBuilder")," "),i.Cb(3),i.lc("ngForOf",i.ic(57,40,t.navItems,7)),i.Cb(7),i.Gc("",i.hc(64,43,"PuzzleGames.PuzzleGames")," "),i.Cb(3),i.lc("ngForOf",i.ic(67,45,t.navItems,3)),i.Cb(7),i.Gc("",i.hc(74,48,"Help.About")," "),i.Cb(3),i.lc("ngForOf",i.ic(77,50,t.navItems,6)),i.Cb(4),i.Fc(i.hc(81,53,"Common.Close"))}},directives:[m.a,g.b,b.a,f.a,_.d,_.a,w.l,I.b,I.a,y.b,y.c,y.d,x.e,x.b,I.c,o.e,_.b,w.m,o.c],pipes:[h.d,S.a],styles:[".example-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;top:0;bottom:0;left:0;right:0}.mat-sidenav[_ngcontent-%COMP%]{min-width:200px}.example-is-mobile[_ngcontent-%COMP%]   .example-toolbar[_ngcontent-%COMP%]{position:fixed;z-index:2}h1.example-app-name[_ngcontent-%COMP%]{margin-left:8px}.example-sidenav-container[_ngcontent-%COMP%]{flex:1}.example-is-mobile[_ngcontent-%COMP%]   .example-sidenav-container[_ngcontent-%COMP%]{flex:1 0 auto}"]}),e})();var F=s("R1ws"),z=s("jIBr"),N=s("0LvA"),D=s("lR5k");const P={provide:h.b,useClass:(()=>{class e{constructor(e){this.http=e}getTranslation(e){return this.http.get(`${r.a.basehref}assets/i18n/${e}.json`)}}return e.\u0275fac=function(t){return new(t||e)(i.Xb(a.a))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()};var Q=s("o0su");let M=(()=>{class e{}return e.\u0275mod=i.Lb({type:e,bootstrap:[j]}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},providers:[Q.b,Q.c,{provide:h.a,useValue:Object(h.f)({availableLangs:["en","zh"],defaultLang:"zh",reRenderOnLangChange:!0,prodMode:r.a.production})},P],imports:[[n.a,u,F.b,a.b,h.c,N.b,D.b.forRoot({loader:a.a,markedOptions:{provide:D.c,useValue:{gfm:!0,breaks:!1,pedantic:!1,smartLists:!0,smartypants:!1}}}),z.a]]}),e})();r.a.production&&Object(i.V)(),n.c().bootstrapModule(M).catch(e=>console.error(e))},zn8P:function(e,t){function s(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}s.keys=function(){return[]},s.resolve=s,e.exports=s,s.id="zn8P"}},[[0,0,5]]]);