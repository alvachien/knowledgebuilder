(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{GtZ7:function(t,e,i){"use strict";i.r(e),i.d(e,"PrimarySchoolMathModule",function(){return at});var o=i("ofXK"),r=i("3Pt+"),n=i("yvwu"),u=i("lR5k"),c=i("QPBi"),s=i("jIBr"),l=i("tyNb"),a=i("fXoL");let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Hb({type:t,selectors:[["app-primary-school-math"]],decls:1,vars:0,template:function(t,e){1&t&&a.Ob(0,"router-outlet")},directives:[l.e],styles:[""]}),t})();var b=i("VHTt"),h=i("o0su"),d=i("0IaG"),p=i("+0xr"),C=i("f6nW"),f=i("bTqV");function g(t,e){1&t&&(a.Tb(0,"mat-header-cell"),a.Ec(1,"#"),a.Sb())}function z(t,e){if(1&t&&(a.Tb(0,"mat-cell"),a.Ec(1),a.Sb()),2&t){const t=e.$implicit;a.Cb(1),a.Gc(" ",t.QuizIndex," ")}}function v(t,e){1&t&&(a.Tb(0,"mat-header-cell"),a.Ec(1),a.gc(2,"transloco"),a.Sb()),2&t&&(a.Cb(1),a.Fc(a.hc(2,1,"Quiz.Expected")))}function S(t,e){if(1&t&&(a.Tb(0,"mat-cell",14),a.Ec(1),a.Sb()),2&t){const t=e.$implicit;a.Cb(1),a.Gc(" ",t.getCorrectFormula()," ")}}function Q(t,e){1&t&&(a.Tb(0,"mat-header-cell"),a.Ec(1),a.gc(2,"transloco"),a.Sb()),2&t&&(a.Cb(1),a.Gc(" ",a.hc(2,1,"Quiz.Inputted")," "))}function x(t,e){if(1&t&&(a.Tb(0,"mat-cell",15),a.Ec(1),a.Sb()),2&t){const t=e.$implicit;a.Cb(1),a.Gc(" ",t.getInputtedForumla()," ")}}function I(t,e){1&t&&a.Ob(0,"mat-header-row")}function N(t,e){1&t&&a.Ob(0,"mat-row")}let T=(()=>{class t{constructor(t){this.quizSrv=t,this.displayedColumns=["qid","expected","inputted"],this.currentScore=0,this.failedItems=[]}ngOnInit(){this.failedItems=this.quizSrv.FailedQuizItems.slice(),this.currentScore=this.quizSrv.CurrentScore}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(h.c))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-quiz-failure-dailog"]],decls:27,vars:16,consts:[["matDialogTitle",""],[1,"control-full-width"],[1,"example-container","mat-elevation-z8"],["mat-table","",3,"dataSource"],["cdkColumnDef","qid"],[4,"cdkHeaderCellDef"],[4,"cdkCellDef"],["cdkColumnDef","expected"],["style","color:#00FF00;",4,"cdkCellDef"],["cdkColumnDef","inputted"],["style","color:#FF0000;",4,"cdkCellDef"],[4,"cdkHeaderRowDef"],[4,"cdkRowDef","cdkRowDefColumns"],["mat-button","","tabindex","1",3,"matDialogClose"],[2,"color","#00FF00"],[2,"color","#FF0000"]],template:function(t,e){1&t&&(a.Tb(0,"h2",0),a.Ec(1),a.gc(2,"transloco"),a.Sb(),a.Tb(3,"mat-dialog-content"),a.Tb(4,"h2",1),a.Tb(5,"span"),a.Ec(6),a.gc(7,"transloco"),a.Sb(),a.Tb(8,"span"),a.Ec(9),a.Sb(),a.Sb(),a.Tb(10,"div",2),a.Tb(11,"table",3),a.Rb(12,4),a.Dc(13,g,2,0,"mat-header-cell",5),a.Dc(14,z,2,1,"mat-cell",6),a.Qb(),a.Rb(15,7),a.Dc(16,v,3,3,"mat-header-cell",5),a.Dc(17,S,2,1,"mat-cell",8),a.Qb(),a.Rb(18,9),a.Dc(19,Q,3,3,"mat-header-cell",5),a.Dc(20,x,2,1,"mat-cell",10),a.Qb(),a.Dc(21,I,1,0,"mat-header-row",11),a.Dc(22,N,1,0,"mat-row",12),a.Sb(),a.Sb(),a.Sb(),a.Tb(23,"mat-dialog-actions"),a.Tb(24,"button",13),a.Ec(25),a.gc(26,"transloco"),a.Sb(),a.Sb()),2&t&&(a.Cb(1),a.Fc(a.hc(2,10,"Quiz.Failure")),a.Cb(5),a.Fc(a.hc(7,12,"Quiz.Score")),a.Cb(2),a.Ac("color",e.currentScore>80?"lightyellow":"red"),a.Cb(1),a.Fc(e.currentScore),a.Cb(2),a.lc("dataSource",e.failedItems),a.Cb(10),a.lc("cdkHeaderRowDef",e.displayedColumns),a.Cb(1),a.lc("cdkRowDefColumns",e.displayedColumns),a.Cb(2),a.lc("matDialogClose",!0),a.Cb(1),a.Fc(a.hc(26,14,"Common.Continue")))},directives:[d.g,d.d,p.j,C.e,C.k,C.c,C.m,C.p,d.b,f.b,d.c,p.d,p.a,p.f,p.h],pipes:[c.d],styles:[".control-full-width[_ngcontent-%COMP%]{width:100%}.example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.example-table-container[_ngcontent-%COMP%]{position:relative;max-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;overflow:auto}"]}),t})();var w=i("dNgK"),F=i("Wp6s"),q=i("kmnG"),M=i("qFsG"),y=i("Qu3c"),O=i("XiUz");const D=["itemForm"],E=["irst"];function P(t,e){if(1&t){const t=a.Ub();a.Tb(0,"form",2),a.Tb(1,"mat-form-field"),a.Ob(2,"input",3),a.gc(3,"transloco"),a.Sb(),a.Tb(4,"mat-form-field"),a.Ob(5,"input",4),a.gc(6,"transloco"),a.gc(7,"transloco"),a.Tb(8,"mat-error"),a.Ec(9,"This field is required"),a.Sb(),a.Sb(),a.Tb(10,"div",5),a.Tb(11,"div",6),a.Tb(12,"mat-form-field"),a.Ob(13,"input",7),a.gc(14,"transloco"),a.Sb(),a.Sb(),a.Tb(15,"div",8),a.Tb(16,"mat-form-field"),a.Ob(17,"input",9),a.gc(18,"transloco"),a.Sb(),a.Sb(),a.Sb(),a.Tb(19,"mat-form-field"),a.Ob(20,"input",10),a.gc(21,"transloco"),a.Sb(),a.Tb(22,"button",11),a.bc("click",function(){return a.uc(t),a.fc().onQuizStart()}),a.Ec(23),a.gc(24,"transloco"),a.Sb(),a.Sb()}if(2&t){const t=a.fc();a.lc("formGroup",t.quizControlFormGroup),a.Cb(2),a.mc("placeholder",a.hc(3,9,"Quiz.QuizItemCount")),a.Cb(3),a.mc("placeholder",a.hc(6,11,"Quiz.FailedFactor")),a.mc("matTooltip",a.hc(7,13,"Quiz.FailedFactorHint")),a.Cb(8),a.mc("placeholder",a.hc(14,15,"MathExercise.Number")),a.Cb(4),a.mc("placeholder",a.hc(18,17,"MathExercise.Number")),a.Cb(3),a.mc("placeholder",a.hc(21,19,"MathExercise.DecimalPlaces")),a.Cb(2),a.lc("disabled",!t.canStart()),a.Cb(1),a.Fc(a.hc(24,21,"Common.Start"))}}function G(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",12),a.Tb(1,"div",13),a.Ec(2),a.Sb(),a.Tb(3,"div",14,15),a.bc("keydown.enter",function(){return a.uc(t),a.fc().onQuizSubmit()}),a.Tb(5,"mat-form-field",16),a.Tb(6,"span",17),a.Ec(7),a.gc(8,"number"),a.gc(9,"number"),a.Sb(),a.Tb(10,"input",18,19),a.bc("ngModelChange",function(e){a.uc(t);const i=a.fc();return i.QuizItems[i.QuizCursor].InputtedResult=e}),a.gc(12,"transloco"),a.Sb(),a.Sb(),a.Sb(),a.Tb(13,"div",20),a.Tb(14,"button",21),a.bc("click",function(){return a.uc(t),a.fc().onPrevious()}),a.Ec(15),a.gc(16,"transloco"),a.Sb(),a.Tb(17,"button",21),a.bc("click",function(){return a.uc(t),a.fc().onQuizSubmit()}),a.Ec(18),a.gc(19,"transloco"),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=a.fc();a.Cb(2),a.Hc(" (",t.QuizCursor+1," / ",t.QuizItems.length,") "),a.Cb(5),a.Hc("",a.hc(8,10,t.QuizItems[t.QuizCursor].LeftNumber)," + ",a.hc(9,12,t.QuizItems[t.QuizCursor].RightNumber)," ="),a.Cb(3),a.mc("placeholder",a.hc(12,14,"MathExercise.Result")),a.lc("ngModel",t.QuizItems[t.QuizCursor].InputtedResult),a.Cb(4),a.lc("disabled",t.isPreviousButtonDisabled),a.Cb(1),a.Fc(a.hc(16,16,"Common.Previous")),a.Cb(2),a.lc("disabled",t.isSubmitButtonDisabled),a.Cb(1),a.Fc(a.hc(19,18,t.NextButtonText))}}let B=(()=>{class t{constructor(t,e,i,o,n){this.quizService=t,this.snackBar=e,this.router=i,this.changeDef=o,this.dialog=n,this.isQuizStarted=!1,this.quizControlFormGroup=new r.f({countControl:new r.d(20,[r.v.required,r.v.min(1),r.v.max(1e3)]),failedFactorControl:new r.d(2,[r.v.min(0),r.v.max(10)]),leftNumberControl:new r.d(0),rightNumberControl:new r.d(100),decControl:new r.d(0,[r.v.min(0),r.v.max(5)])},{validators:this.basicValidator}),this.QuizItems=[],this.QuizCursor=0,this.quizFormGroup=new r.f({inputControl:new r.d(null,r.v.required)}),this.NextButtonText="Common.Next",this.quizSections=[]}set content(t){t&&(this.itemForm=t,this.itemForm.nativeElement.focus())}set inputControl(t){t&&(this.inputCtrl=t,this.inputCtrl.nativeElement.focus())}canDeactivate(t){return!this.isQuizStarted}ngOnInit(){}ngOnDestroy(){}canStart(){return!this.isQuizStarted&&this.quizControlFormGroup.valid}onQuizStart(){if(!this.quizService.ActiveQuiz){const t=this.quizService.startNewQuiz(this.quizService.NextQuizID);this.generateQuizSection(this.quizControlFormGroup.get("countControl").value);const e=new b.l(t.NextSectionID,this.QuizItems.length);t.startNewSection(e),this.isQuizStarted=!0,this.changeDef.detectChanges(),this.setNextButtonText()}}onQuizSubmit(){var t,e;if(void 0===this.QuizItems[this.QuizCursor].InputtedResult)this.inputCtrl&&this.inputCtrl.nativeElement.focus();else if(this.QuizCursor===this.QuizItems.length-1){const i=[];for(const t of this.QuizItems)t.IsCorrect()||i.push(t);null===(t=this.quizService.ActiveQuiz)||void 0===t||t.completeActionSection(i.length);const o=this.quizControlFormGroup.get("failedFactorControl").value;if(i.length>0&&o>0)this.quizService.FailedQuizItems=i,this.quizService.CurrentScore=(this.QuizItems.length-i.length)/this.QuizItems.length,this.dialog.open(T,{disableClose:!1,width:"500px"}).afterClosed().subscribe(t=>{this.generateQuizSection(i.length*o),this.QuizCursor=0,this.setNextButtonText();const e=this.quizService.ActiveQuiz,r=new b.l(e.NextSectionID,this.QuizItems.length);e.startNewSection(r)});else{const t=null===(e=this.quizService.ActiveQuiz)||void 0===e?void 0:e.QuizID;this.quizService.completeActiveQuiz(),this.isQuizStarted=!1,this.router.navigate(["/quiz-summary/display",t])}}else this.QuizCursor++,this.setNextButtonText(),this.inputCtrl&&this.inputCtrl.nativeElement.focus()}onPrevious(){this.QuizCursor--,this.setNextButtonText(),this.inputCtrl&&this.inputCtrl.nativeElement.focus()}get isSubmitButtonDisabled(){return this.QuizCursor>this.QuizItems.length}get isPreviousButtonDisabled(){return this.QuizCursor<=0}setNextButtonText(){this.QuizCursor===this.QuizItems.length-1&&(this.NextButtonText="Common.Submit")}getNumber(){let t=0;const e=this.quizControlFormGroup.get("decControl").value;t=Math.pow(10,e);const i=t*this.quizControlFormGroup.get("leftNumberControl").value,o=t*this.quizControlFormGroup.get("rightNumberControl").value;let r=Math.round(Math.random()*(o-i))+i;return 0!==t&&(r/=t),r}generateQuizItem(t){const e=this.quizControlFormGroup.get("decControl").value,i=new b.a(this.getNumber(),this.getNumber(),e);return i.QuizIndex=t,i}generateQuizSection(t){this.QuizItems=[];for(let e=0;e<t;e++){const t=this.generateQuizItem(e+1);this.QuizItems.push(t)}}basicValidator(t){const e=t.get("leftNumberControl"),i=t.get("rightNumberControl");let o=!1;return e&&i&&e.value<i.value&&(o=!0),o?null:{invalidInputs:!0}}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(h.c),a.Nb(w.a),a.Nb(l.b),a.Nb(a.h),a.Nb(d.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-primary-school-math-addex"]],viewQuery:function(t,e){if(1&t&&(a.Ic(D,!0),a.Ic(E,!0)),2&t){let t;a.rc(t=a.cc())&&(e.content=t.first),a.rc(t=a.cc())&&(e.inputControl=t.first)}},decls:9,vars:5,consts:[["style","font-size:16px;",3,"formGroup",4,"ngIf"],["class","control-full-width",4,"ngIf"],[2,"font-size","16px",3,"formGroup"],["matInput","","type","number","formControlName","countControl","required","",3,"placeholder"],["matInput","","type","number","formControlName","failedFactorControl",3,"placeholder","matTooltip"],["fxLayout","row",1,"control-full-width"],["fxFlex","50"],["matInput","","type","number","formControlName","leftNumberControl","required","",3,"placeholder"],["fxFlex",""],["matInput","","type","number","formControlName","rightNumberControl","required","",3,"placeholder"],["matInput","","type","number","formControlName","decControl",3,"placeholder"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"control-full-width"],[2,"text-align","center"],[3,"keydown.enter"],["itemForm",""],[1,"control-full-width",2,"font-size","72px","text-align","center"],["matPrefix",""],["matInput","","type","number","required","","name","irst",3,"placeholder","ngModel","ngModelChange"],["irst",""],[1,"example-button-row"],["mat-raised-button","",3,"disabled","click"]],template:function(t,e){1&t&&(a.Tb(0,"mat-card"),a.Tb(1,"mat-card-header"),a.Tb(2,"mat-card-title"),a.Ec(3),a.gc(4,"transloco"),a.Sb(),a.Sb(),a.Tb(5,"mat-card-content"),a.Dc(6,P,25,23,"form",0),a.Dc(7,G,20,20,"div",1),a.Sb(),a.Ob(8,"mat-card-actions"),a.Sb()),2&t&&(a.Cb(3),a.Fc(a.hc(4,3,"MathExercise.AdditionExercises")),a.Cb(3),a.lc("ngIf",!e.isQuizStarted),a.Cb(1),a.lc("ngIf",e.isQuizStarted))},directives:[F.a,F.d,F.g,F.c,o.l,F.b,r.x,r.n,r.g,q.c,M.b,r.r,r.c,r.m,r.e,r.t,y.a,q.b,O.c,O.a,f.b,q.h,r.p],pipes:[c.d,o.e],styles:[".control-full-width[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}.ng-valid.required[_ngcontent-%COMP%], .ng-valid[required][_ngcontent-%COMP%]{border-left:5px solid #42a948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}.example-button-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .example-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 auto;width:300px}"]}),t})();var k=i("bSwM");const _=["itemForm"],R=["irst"];function A(t,e){if(1&t){const t=a.Ub();a.Tb(0,"form",2),a.Tb(1,"mat-form-field"),a.Ob(2,"input",3),a.gc(3,"transloco"),a.Sb(),a.Tb(4,"mat-form-field"),a.Ob(5,"input",4),a.gc(6,"transloco"),a.gc(7,"transloco"),a.Tb(8,"mat-error"),a.Ec(9,"This field is required"),a.Sb(),a.Sb(),a.Tb(10,"div",5),a.Tb(11,"div",6),a.Tb(12,"mat-form-field"),a.Ob(13,"input",7),a.gc(14,"transloco"),a.Sb(),a.Sb(),a.Tb(15,"div",8),a.Tb(16,"mat-form-field"),a.Ob(17,"input",9),a.gc(18,"transloco"),a.Sb(),a.Sb(),a.Sb(),a.Tb(19,"div",5),a.Tb(20,"div",6),a.Tb(21,"mat-checkbox",10),a.Ec(22),a.gc(23,"transloco"),a.Sb(),a.Sb(),a.Tb(24,"div",8),a.Tb(25,"mat-form-field"),a.Ob(26,"input",11),a.gc(27,"transloco"),a.Sb(),a.Sb(),a.Sb(),a.Tb(28,"button",12),a.bc("click",function(){return a.uc(t),a.fc().onQuizStart()}),a.Ec(29),a.gc(30,"transloco"),a.Sb(),a.Sb()}if(2&t){const t=a.fc();a.lc("formGroup",t.quizControlFormGroup),a.Cb(2),a.mc("placeholder",a.hc(3,10,"Quiz.QuizItemCount")),a.Cb(3),a.mc("placeholder",a.hc(6,12,"Quiz.FailedFactor")),a.mc("matTooltip",a.hc(7,14,"Quiz.FailedFactorHint")),a.Cb(8),a.mc("placeholder",a.hc(14,16,"MathExercise.Number")),a.Cb(4),a.mc("placeholder",a.hc(18,18,"MathExercise.Number")),a.Cb(5),a.Fc(a.hc(23,20,"MathExercise.AllowNegative")),a.Cb(4),a.mc("placeholder",a.hc(27,22,"MathExercise.DecimalPlaces")),a.Cb(2),a.lc("disabled",!t.canStart()),a.Cb(1),a.Fc(a.hc(30,24,"Common.Start"))}}function H(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",13),a.Tb(1,"div",14),a.Ec(2),a.Sb(),a.Tb(3,"div",15,16),a.bc("keydown.enter",function(){return a.uc(t),a.fc().onQuizSubmit()}),a.Tb(5,"mat-form-field",17),a.Tb(6,"span",18),a.Ec(7),a.Sb(),a.Tb(8,"input",19,20),a.bc("ngModelChange",function(e){a.uc(t);const i=a.fc();return i.QuizItems[i.QuizCursor].InputtedResult=e}),a.gc(10,"transloco"),a.Sb(),a.Sb(),a.Sb(),a.Tb(11,"div",21),a.Tb(12,"button",22),a.bc("click",function(){return a.uc(t),a.fc().onPrevious()}),a.Ec(13),a.gc(14,"transloco"),a.Sb(),a.Tb(15,"button",22),a.bc("click",function(){return a.uc(t),a.fc().onQuizSubmit()}),a.Ec(16),a.gc(17,"transloco"),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=a.fc();a.Cb(2),a.Hc(" (",t.QuizCursor+1," / ",t.QuizItems.length,") "),a.Cb(5),a.Hc("",t.QuizItems[t.QuizCursor].LeftNumber," - ",t.QuizItems[t.QuizCursor].RightNumber," ="),a.Cb(1),a.mc("placeholder",a.hc(10,10,"MathExercise.Result")),a.lc("ngModel",t.QuizItems[t.QuizCursor].InputtedResult),a.Cb(4),a.lc("disabled",t.isPreviousButtonDisabled),a.Cb(1),a.Fc(a.hc(14,12,"Common.Previous")),a.Cb(2),a.lc("disabled",t.isSubmitButtonDisabled),a.Cb(1),a.Fc(a.hc(17,14,t.NextButtonText))}}let V=(()=>{class t{constructor(t,e,i,o,n){this.quizService=t,this.snackBar=e,this.router=i,this.changeDef=o,this.dialog=n,this.isQuizStarted=!1,this.quizControlFormGroup=new r.f({countControl:new r.d(20,[r.v.required,r.v.min(1),r.v.max(1e3)]),failedFactorControl:new r.d(2,[r.v.min(0),r.v.max(10)]),leftNumberControl:new r.d(0),rightNumberControl:new r.d(100),decControl:new r.d(0,[r.v.min(0),r.v.max(5)]),negControl:new r.d(!1)},{validators:this.basicValidator}),this.QuizItems=[],this.QuizCursor=0,this.quizFormGroup=new r.f({inputControl:new r.d(null,r.v.required)}),this.NextButtonText="Common.Next",this.quizSections=[]}set content(t){t&&(this.itemForm=t,this.itemForm.nativeElement.focus())}set inputControl(t){t&&(this.inputCtrl=t,this.inputCtrl.nativeElement.focus())}canDeactivate(t){return!this.isQuizStarted}ngOnInit(){}ngOnDestroy(){}canStart(){return!this.isQuizStarted&&this.quizControlFormGroup.valid}onQuizStart(){if(!this.quizService.ActiveQuiz){const t=this.quizService.startNewQuiz(this.quizService.NextQuizID);this.generateQuizSection(this.quizControlFormGroup.get("countControl").value);const e=new b.l(t.NextSectionID,this.QuizItems.length);t.startNewSection(e),this.isQuizStarted=!0,this.changeDef.detectChanges(),this.setNextButtonText()}}onQuizSubmit(){var t,e;if(void 0===this.QuizItems[this.QuizCursor].InputtedResult);else if(this.QuizCursor===this.QuizItems.length-1){const i=[];for(const t of this.QuizItems)t.IsCorrect()||i.push(t);null===(t=this.quizService.ActiveQuiz)||void 0===t||t.completeActionSection(i.length);let o=this.quizControlFormGroup.get("failedFactorControl").value;if(i.length>0&&o>0)this.quizService.FailedQuizItems=i,this.quizService.CurrentScore=(this.QuizItems.length-i.length)/this.QuizItems.length,this.dialog.open(T,{disableClose:!1,width:"500px"}).afterClosed().subscribe(t=>{this.generateQuizSection(i.length*o),this.QuizCursor=0,this.setNextButtonText();const e=this.quizService.ActiveQuiz,r=new b.l(e.NextSectionID,this.QuizItems.length);e.startNewSection(r)});else{const t=null===(e=this.quizService.ActiveQuiz)||void 0===e?void 0:e.QuizID;this.quizService.completeActiveQuiz(),this.isQuizStarted=!1,this.router.navigate(["/quiz-summary/display",t])}}else this.QuizCursor++,this.setNextButtonText()}onPrevious(){this.QuizCursor--,this.setNextButtonText()}get isSubmitButtonDisabled(){return this.QuizCursor>this.QuizItems.length}get isPreviousButtonDisabled(){return this.QuizCursor<=0}setNextButtonText(){this.QuizCursor===this.QuizItems.length-1&&(this.NextButtonText="Common.Submit")}getNumber(){let t=0;const e=this.quizControlFormGroup.get("decControl").value;t=Math.pow(10,e);const i=t*this.quizControlFormGroup.get("leftNumberControl").value,o=t*this.quizControlFormGroup.get("rightNumberControl").value;let r=Math.round(Math.random()*(o-i))+i;return 0!==t&&(r/=t),r}generateQuizItem(t){const e=this.quizControlFormGroup.get("decControl").value,i=this.quizControlFormGroup.get("negControl").value;let o=0,r=0;for(;o=this.getNumber(),r=this.getNumber(),!i&&o<r;);const n=new b.m(o,r,e);return n.QuizIndex=t,n}generateQuizSection(t){this.QuizItems=[];for(let e=0;e<t;e++){const t=this.generateQuizItem(e+1);this.QuizItems.push(t)}}basicValidator(t){const e=t.get("leftNumberControl"),i=t.get("rightNumberControl");let o=!1;return e&&i&&e.value<i.value&&(o=!0),o?null:{invalidInputs:!0}}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(h.c),a.Nb(w.a),a.Nb(l.b),a.Nb(a.h),a.Nb(d.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-primary-school-math-subex"]],viewQuery:function(t,e){if(1&t&&(a.Ic(_,!0),a.Ic(R,!0)),2&t){let t;a.rc(t=a.cc())&&(e.content=t.first),a.rc(t=a.cc())&&(e.inputControl=t.first)}},decls:9,vars:5,consts:[["style","font-size: 16px",3,"formGroup",4,"ngIf"],["class","control-full-width",4,"ngIf"],[2,"font-size","16px",3,"formGroup"],["matInput","","type","number","formControlName","countControl","required","",3,"placeholder"],["matInput","","type","number","formControlName","failedFactorControl",3,"placeholder","matTooltip"],["fxLayout","row",1,"control-full-width"],["fxFlex","50"],["matInput","","type","number","formControlName","leftNumberControl","required","",3,"placeholder"],["fxFlex",""],["matInput","","type","number","formControlName","rightNumberControl","required","",3,"placeholder"],["formControlName","negControl"],["matInput","","type","number","formControlName","decControl",3,"placeholder"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"control-full-width"],[2,"text-align","center"],[3,"keydown.enter"],["itemForm",""],[1,"control-full-width",2,"font-size","72px","text-align","center"],["matPrefix",""],["matInput","","type","number","required","","name","irst","autofocus","",3,"placeholder","ngModel","ngModelChange"],["irst",""],[1,"example-button-row"],["mat-raised-button","",3,"disabled","click"]],template:function(t,e){1&t&&(a.Tb(0,"mat-card"),a.Tb(1,"mat-card-header"),a.Tb(2,"mat-card-title"),a.Ec(3),a.gc(4,"transloco"),a.Sb(),a.Sb(),a.Tb(5,"mat-card-content"),a.Dc(6,A,31,26,"form",0),a.Dc(7,H,18,16,"div",1),a.Sb(),a.Ob(8,"mat-card-actions"),a.Sb()),2&t&&(a.Cb(3),a.Fc(a.hc(4,3,"MathExercise.SubtractionExercises")),a.Cb(3),a.lc("ngIf",!e.isQuizStarted),a.Cb(1),a.lc("ngIf",e.isQuizStarted))},directives:[F.a,F.d,F.g,F.c,o.l,F.b,r.x,r.n,r.g,q.c,M.b,r.r,r.c,r.m,r.e,r.t,y.a,q.b,O.c,O.a,k.a,f.b,q.h,r.p],pipes:[c.d],styles:[".control-full-width[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}.ng-valid.required[_ngcontent-%COMP%], .ng-valid[required][_ngcontent-%COMP%]{border-left:5px solid #42a948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}.example-button-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .example-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 auto;width:300px}"]}),t})();const L=["itemForm"],U=["irst"];function j(t,e){if(1&t){const t=a.Ub();a.Tb(0,"form",2),a.Tb(1,"mat-form-field"),a.Ob(2,"input",3),a.gc(3,"transloco"),a.Sb(),a.Tb(4,"mat-form-field"),a.Ob(5,"input",4),a.gc(6,"transloco"),a.gc(7,"transloco"),a.Tb(8,"mat-error"),a.Ec(9,"This field is required"),a.Sb(),a.Sb(),a.Tb(10,"div",5),a.Tb(11,"div",6),a.Tb(12,"mat-form-field"),a.Ob(13,"input",7),a.gc(14,"transloco"),a.Sb(),a.Sb(),a.Tb(15,"div",8),a.Tb(16,"mat-form-field"),a.Ob(17,"input",9),a.gc(18,"transloco"),a.Sb(),a.Sb(),a.Sb(),a.Tb(19,"mat-form-field"),a.Ob(20,"input",10),a.gc(21,"transloco"),a.Sb(),a.Tb(22,"button",11),a.bc("click",function(){return a.uc(t),a.fc().onQuizStart()}),a.Ec(23),a.gc(24,"transloco"),a.Sb(),a.Sb()}if(2&t){const t=a.fc();a.lc("formGroup",t.quizControlFormGroup),a.Cb(2),a.mc("placeholder",a.hc(3,9,"Quiz.QuizItemCount")),a.Cb(3),a.mc("placeholder",a.hc(6,11,"Quiz.FailedFactor")),a.mc("matTooltip",a.hc(7,13,"Quiz.FailedFactorHint")),a.Cb(8),a.mc("placeholder",a.hc(14,15,"MathExercise.Number")),a.Cb(4),a.mc("placeholder",a.hc(18,17,"MathExercise.Number")),a.Cb(3),a.mc("placeholder",a.hc(21,19,"MathExercise.DecimalPlaces")),a.Cb(2),a.lc("disabled",!t.canStart()),a.Cb(1),a.Fc(a.hc(24,21,"Common.Start"))}}function K(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",12),a.Tb(1,"div",13),a.Ec(2),a.Sb(),a.Tb(3,"div",14,15),a.bc("keydown.enter",function(){return a.uc(t),a.fc().onQuizSubmit()}),a.Tb(5,"mat-form-field",16),a.Tb(6,"span",17),a.Ec(7),a.Sb(),a.Tb(8,"input",18,19),a.bc("ngModelChange",function(e){a.uc(t);const i=a.fc();return i.QuizItems[i.QuizCursor].InputtedResult=e}),a.gc(10,"transloco"),a.Sb(),a.Sb(),a.Sb(),a.Tb(11,"div",20),a.Tb(12,"button",21),a.bc("click",function(){return a.uc(t),a.fc().onPrevious()}),a.Ec(13),a.gc(14,"transloco"),a.Sb(),a.Tb(15,"button",21),a.bc("click",function(){return a.uc(t),a.fc().onQuizSubmit()}),a.Ec(16),a.gc(17,"transloco"),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=a.fc();a.Cb(2),a.Hc(" (",t.QuizCursor+1," / ",t.QuizItems.length,") "),a.Cb(5),a.Hc("",t.QuizItems[t.QuizCursor].LeftNumber," X ",t.QuizItems[t.QuizCursor].RightNumber," ="),a.Cb(1),a.mc("placeholder",a.hc(10,10,"MathExercise.Result")),a.lc("ngModel",t.QuizItems[t.QuizCursor].InputtedResult),a.Cb(4),a.lc("disabled",t.isPreviousButtonDisabled),a.Cb(1),a.Fc(a.hc(14,12,"Common.Previous")),a.Cb(2),a.lc("disabled",t.isSubmitButtonDisabled),a.Cb(1),a.Fc(a.hc(17,14,t.NextButtonText))}}let X=(()=>{class t{constructor(t,e,i,o,n){this.quizService=t,this.snackBar=e,this.router=i,this.changeDef=o,this.dialog=n,this.isQuizStarted=!1,this.quizControlFormGroup=new r.f({countControl:new r.d(20,[r.v.required,r.v.min(1),r.v.max(1e3)]),failedFactorControl:new r.d(2,[r.v.min(0),r.v.max(10)]),leftNumberControl:new r.d(1),rightNumberControl:new r.d(100),decControl:new r.d(0,[r.v.min(0),r.v.max(5)])},{validators:this.basicValidator}),this.QuizItems=[],this.QuizCursor=0,this.quizFormGroup=new r.f({inputControl:new r.d(null,r.v.required)}),this.NextButtonText="Common.Next",this.quizSections=[]}set content(t){t&&(this.itemForm=t,this.itemForm.nativeElement.focus())}set inputControl(t){t&&(this.inputCtrl=t,this.inputCtrl.nativeElement.focus())}canDeactivate(t){return!this.isQuizStarted}ngOnInit(){}ngOnDestroy(){}canStart(){return!this.isQuizStarted&&this.quizControlFormGroup.valid}onQuizStart(){if(!this.quizService.ActiveQuiz){const t=this.quizService.startNewQuiz(this.quizService.NextQuizID);this.generateQuizSection(this.quizControlFormGroup.get("countControl").value);const e=new b.l(t.NextSectionID,this.QuizItems.length);t.startNewSection(e),this.isQuizStarted=!0,this.changeDef.detectChanges(),this.setNextButtonText()}}onQuizSubmit(){var t,e;if(void 0===this.QuizItems[this.QuizCursor].InputtedResult);else if(this.QuizCursor===this.QuizItems.length-1){const i=[];for(const t of this.QuizItems)t.IsCorrect()||i.push(t);null===(t=this.quizService.ActiveQuiz)||void 0===t||t.completeActionSection(i.length);const o=this.quizControlFormGroup.get("failedFactorControl").value;if(i.length>0&&o>0)this.quizService.FailedQuizItems=i,this.quizService.CurrentScore=(this.QuizItems.length-i.length)/this.QuizItems.length,this.dialog.open(T,{disableClose:!1,width:"500px"}).afterClosed().subscribe(t=>{this.generateQuizSection(i.length*o),this.QuizCursor=0,this.setNextButtonText();const e=this.quizService.ActiveQuiz,r=new b.l(e.NextSectionID,this.QuizItems.length);e.startNewSection(r)});else{const t=null===(e=this.quizService.ActiveQuiz)||void 0===e?void 0:e.QuizID;this.quizService.completeActiveQuiz(),this.isQuizStarted=!1,this.router.navigate(["/quiz-summary/display",t])}}else this.QuizCursor++,this.setNextButtonText()}onPrevious(){this.QuizCursor--,this.setNextButtonText()}get isSubmitButtonDisabled(){return this.QuizCursor>this.QuizItems.length}get isPreviousButtonDisabled(){return this.QuizCursor<=0}setNextButtonText(){this.QuizCursor===this.QuizItems.length-1&&(this.NextButtonText="Common.Submit")}getNumber(){let t=0;const e=this.quizControlFormGroup.get("decControl").value;t=Math.pow(10,e);const i=t*this.quizControlFormGroup.get("leftNumberControl").value,o=t*this.quizControlFormGroup.get("rightNumberControl").value;let r=Math.round(Math.random()*(o-i))+i;return 0!==t&&(r/=t),r}generateQuizItem(t){const e=this.quizControlFormGroup.get("decControl").value,i=new b.i(this.getNumber(),this.getNumber(),e);return i.QuizIndex=t,i}generateQuizSection(t){this.QuizItems=[];for(let e=0;e<t;e++){const t=this.generateQuizItem(e+1);this.QuizItems.push(t)}}basicValidator(t){const e=t.get("leftNumberControl"),i=t.get("rightNumberControl");let o=!1;return e&&i&&e.value<i.value&&(o=!0),o?null:{invalidInputs:!0}}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(h.c),a.Nb(w.a),a.Nb(l.b),a.Nb(a.h),a.Nb(d.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-primary-school-math-multi-ex"]],viewQuery:function(t,e){if(1&t&&(a.Ic(L,!0),a.Ic(U,!0)),2&t){let t;a.rc(t=a.cc())&&(e.content=t.first),a.rc(t=a.cc())&&(e.inputControl=t.first)}},decls:9,vars:5,consts:[["style","font-size: 16px",3,"formGroup",4,"ngIf"],["class","control-full-width",4,"ngIf"],[2,"font-size","16px",3,"formGroup"],["matInput","","type","number","formControlName","countControl","required","",3,"placeholder"],["matInput","","type","number","formControlName","failedFactorControl",3,"placeholder","matTooltip"],["fxLayout","row",1,"control-full-width"],["fxFlex","50"],["matInput","","type","number","formControlName","leftNumberControl","required","",3,"placeholder"],["fxFlex",""],["matInput","","type","number","formControlName","rightNumberControl","required","",3,"placeholder"],["matInput","","type","number","formControlName","decControl",3,"placeholder"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"control-full-width"],[2,"text-align","center"],[3,"keydown.enter"],["itemForm",""],[1,"control-full-width",2,"font-size","72px","text-align","center"],["matPrefix",""],["matInput","","type","number","required","","name","irst","autofocus","",3,"placeholder","ngModel","ngModelChange"],["irst",""],[1,"example-button-row"],["mat-raised-button","",3,"disabled","click"]],template:function(t,e){1&t&&(a.Tb(0,"mat-card"),a.Tb(1,"mat-card-header"),a.Tb(2,"mat-card-title"),a.Ec(3),a.gc(4,"transloco"),a.Sb(),a.Sb(),a.Tb(5,"mat-card-content"),a.Dc(6,j,25,23,"form",0),a.Dc(7,K,18,16,"div",1),a.Sb(),a.Ob(8,"mat-card-actions"),a.Sb()),2&t&&(a.Cb(3),a.Fc(a.hc(4,3,"MathExercise.MultiplicationExercises")),a.Cb(3),a.lc("ngIf",!e.isQuizStarted),a.Cb(1),a.lc("ngIf",e.isQuizStarted))},directives:[F.a,F.d,F.g,F.c,o.l,F.b,r.x,r.n,r.g,q.c,M.b,r.r,r.c,r.m,r.e,r.t,y.a,q.b,O.c,O.a,f.b,q.h,r.p],pipes:[c.d],styles:[".control-full-width[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}.ng-valid.required[_ngcontent-%COMP%], .ng-valid[required][_ngcontent-%COMP%]{border-left:5px solid #42a948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}.example-button-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .example-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 auto;width:300px}"]}),t})();const $=["itemForm"],J=["irst"];function W(t,e){if(1&t){const t=a.Ub();a.Tb(0,"form",2),a.Tb(1,"mat-form-field"),a.Ob(2,"input",3),a.gc(3,"transloco"),a.Sb(),a.Tb(4,"mat-form-field"),a.Ob(5,"input",4),a.gc(6,"transloco"),a.gc(7,"transloco"),a.Tb(8,"mat-error"),a.Ec(9,"This field is required"),a.Sb(),a.Sb(),a.Tb(10,"div",5),a.Tb(11,"div",6),a.Tb(12,"mat-form-field"),a.Ob(13,"input",7),a.gc(14,"transloco"),a.Sb(),a.Sb(),a.Tb(15,"div",8),a.Tb(16,"mat-form-field"),a.Ob(17,"input",9),a.gc(18,"transloco"),a.Sb(),a.Sb(),a.Sb(),a.Tb(19,"mat-form-field"),a.Ob(20,"input",10),a.gc(21,"transloco"),a.Sb(),a.Tb(22,"button",11),a.bc("click",function(){return a.uc(t),a.fc().onQuizStart()}),a.Ec(23),a.gc(24,"transloco"),a.Sb(),a.Sb()}if(2&t){const t=a.fc();a.lc("formGroup",t.quizControlFormGroup),a.Cb(2),a.mc("placeholder",a.hc(3,9,"Quiz.QuizItemCount")),a.Cb(3),a.mc("placeholder",a.hc(6,11,"Quiz.FailedFactor")),a.mc("matTooltip",a.hc(7,13,"Quiz.FailedFactorHint")),a.Cb(8),a.mc("placeholder",a.hc(14,15,"MathExercise.Number")),a.Cb(4),a.mc("placeholder",a.hc(18,17,"MathExercise.Number")),a.Cb(3),a.mc("placeholder",a.hc(21,19,"MathExercise.DecimalPlaces")),a.Cb(2),a.lc("disabled",!t.canStart()),a.Cb(1),a.Fc(a.hc(24,21,"Common.Start"))}}function Z(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",12),a.Tb(1,"div",13),a.Ec(2),a.Sb(),a.Tb(3,"div",14,15),a.bc("keydown.enter",function(){return a.uc(t),a.fc().onQuizSubmit()}),a.Tb(5,"div",5),a.Tb(6,"mat-form-field",16),a.Tb(7,"span",17),a.Ec(8),a.Sb(),a.Tb(9,"input",18,19),a.bc("ngModelChange",function(e){a.uc(t);const i=a.fc();return i.QuizItems[i.QuizCursor].InputtedQuotient=e}),a.gc(11,"transloco"),a.Sb(),a.Sb(),a.Tb(12,"div",20),a.Ec(13,"..."),a.Sb(),a.Tb(14,"mat-form-field",21),a.Tb(15,"input",22,23),a.bc("ngModelChange",function(e){a.uc(t);const i=a.fc();return i.QuizItems[i.QuizCursor].InputtedRemainder=e}),a.gc(17,"transloco"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(18,"div",24),a.Tb(19,"button",25),a.bc("click",function(){return a.uc(t),a.fc().onPrevious()}),a.Ec(20),a.gc(21,"transloco"),a.Sb(),a.Tb(22,"button",25),a.bc("click",function(){return a.uc(t),a.fc().onQuizSubmit()}),a.Ec(23),a.gc(24,"transloco"),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=a.fc();a.Cb(2),a.Hc(" (",t.QuizCursor+1," / ",t.QuizItems.length,") "),a.Cb(6),a.Hc("",t.QuizItems[t.QuizCursor].Dividend," \xf7 ",t.QuizItems[t.QuizCursor].Divisor," ="),a.Cb(1),a.mc("placeholder",a.hc(11,12,"MathExercise.Quotient")),a.lc("ngModel",t.QuizItems[t.QuizCursor].InputtedQuotient),a.Cb(6),a.mc("placeholder",a.hc(17,14,"MathExercise.Remainder")),a.lc("ngModel",t.QuizItems[t.QuizCursor].InputtedRemainder),a.Cb(4),a.lc("disabled",t.isPreviousButtonDisabled),a.Cb(1),a.Fc(a.hc(21,16,"Common.Previous")),a.Cb(2),a.lc("disabled",t.isSubmitButtonDisabled),a.Cb(1),a.Fc(a.hc(24,18,t.NextButtonText))}}let Y=(()=>{class t{constructor(t,e,i,o,n){this.quizService=t,this.snackBar=e,this.router=i,this.changeDef=o,this.dialog=n,this.isQuizStarted=!1,this.quizControlFormGroup=new r.f({countControl:new r.d(20,[r.v.required,r.v.min(1),r.v.max(1e3)]),failedFactorControl:new r.d(2,[r.v.min(0),r.v.max(10)]),leftNumberControl:new r.d(0),rightNumberControl:new r.d(100),decControl:new r.d(0,[r.v.min(0),r.v.max(5)])},{validators:this.basicValidator}),this.QuizItems=[],this.QuizCursor=0,this.quizFormGroup=new r.f({inputControl:new r.d(null,r.v.required)}),this.NextButtonText="Common.Next",this.quizSections=[]}set content(t){t&&(this.itemForm=t)}set inputControl(t){t&&(this.inputCtrl=t,this.inputCtrl.nativeElement.focus())}set inputControl2(t){t&&(this.inputCtrl2=t)}canDeactivate(t){return!this.isQuizStarted}ngOnInit(){}ngOnDestroy(){}canStart(){return!this.isQuizStarted&&this.quizControlFormGroup.valid}onQuizStart(){if(!this.quizService.ActiveQuiz){const t=this.quizService.startNewQuiz(this.quizService.NextQuizID);this.generateQuizSection(this.quizControlFormGroup.get("countControl").value);const e=new b.l(t.NextSectionID,this.QuizItems.length);t.startNewSection(e),this.isQuizStarted=!0,this.changeDef.detectChanges(),this.setNextButtonText()}}onQuizSubmit(){var t,e;if(void 0===this.QuizItems[this.QuizCursor].InputtedQuotient||void 0===this.QuizItems[this.QuizCursor].InputtedRemainder)this.inputCtrl&&this.inputCtrl.nativeElement.focus();else if(this.QuizCursor===this.QuizItems.length-1){const i=[];for(const t of this.QuizItems)t.IsCorrect()||i.push(t);null===(t=this.quizService.ActiveQuiz)||void 0===t||t.completeActionSection(i.length);const o=this.quizControlFormGroup.get("failedFactorControl").value;if(i.length>0&&o>0)this.quizService.FailedQuizItems=i,this.quizService.CurrentScore=(this.QuizItems.length-i.length)/this.QuizItems.length,this.dialog.open(T,{disableClose:!1,width:"500px"}).afterClosed().subscribe(t=>{this.generateQuizSection(i.length*o),this.QuizCursor=0,this.setNextButtonText();const e=this.quizService.ActiveQuiz,r=new b.l(e.NextSectionID,this.QuizItems.length);e.startNewSection(r)});else{const t=null===(e=this.quizService.ActiveQuiz)||void 0===e?void 0:e.QuizID;this.quizService.completeActiveQuiz(),this.isQuizStarted=!1,this.router.navigate(["/quiz-summary/display",t])}}else this.QuizCursor++,this.setNextButtonText(),this.inputCtrl&&this.inputCtrl.nativeElement.focus()}onPrevious(){this.QuizCursor--,this.setNextButtonText(),this.inputCtrl&&this.inputCtrl.nativeElement.focus()}get isSubmitButtonDisabled(){return this.QuizCursor>this.QuizItems.length}get isPreviousButtonDisabled(){return this.QuizCursor<=0}setNextButtonText(){this.QuizCursor===this.QuizItems.length-1&&(this.NextButtonText="Common.Submit")}getNumber(){let t=0;const e=this.quizControlFormGroup.get("decControl").value;t=Math.pow(10,e);const i=t*this.quizControlFormGroup.get("leftNumberControl").value,o=t*this.quizControlFormGroup.get("rightNumberControl").value;let r=Math.round(Math.random()*(o-i))+i;return 0!==t&&(r/=t),r}generateQuizItem(t){const e=this.quizControlFormGroup.get("decControl").value,i=new b.c(this.getNumber(),this.getNumber(),e);return i.QuizIndex=t,i}generateQuizSection(t){this.QuizItems=[];for(let e=0;e<t;e++){const t=this.generateQuizItem(e+1);this.QuizItems.push(t)}}basicValidator(t){const e=t.get("leftNumberControl"),i=t.get("rightNumberControl");let o=!1;return e&&i&&e.value<i.value&&(o=!0),o?null:{invalidInputs:!0}}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(h.c),a.Nb(w.a),a.Nb(l.b),a.Nb(a.h),a.Nb(d.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-primary-school-math-div-ex"]],viewQuery:function(t,e){if(1&t&&(a.Ic($,!0),a.Ic(J,!0),a.Ic(J,!0)),2&t){let t;a.rc(t=a.cc())&&(e.content=t.first),a.rc(t=a.cc())&&(e.inputControl=t.first),a.rc(t=a.cc())&&(e.inputControl2=t.first)}},decls:9,vars:5,consts:[["style","font-size: 16px",3,"formGroup",4,"ngIf"],["class","control-full-width",4,"ngIf"],[2,"font-size","16px",3,"formGroup"],["matInput","","type","number","formControlName","countControl","required","",3,"placeholder"],["matInput","","type","number","formControlName","failedFactorControl",3,"placeholder","matTooltip"],["fxLayout","row",1,"control-full-width"],["fxFlex","50"],["matInput","","type","number","formControlName","leftNumberControl","required","",3,"placeholder"],["fxFlex",""],["matInput","","type","number","formControlName","rightNumberControl","required","",3,"placeholder"],["matInput","","type","number","formControlName","decControl",3,"placeholder"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"control-full-width"],[2,"text-align","center"],[3,"keydown.enter"],["itemForm",""],["fxFlex","60",2,"font-size","72px","text-align","center"],["matPrefix",""],["matInput","","type","number","required","","name","irst",3,"placeholder","ngModel","ngModelChange"],["irst",""],["fxFlex","10",2,"font-size","24px","text-align","center","vertical-align","bottom"],["fxFlex","",2,"font-size","72px","text-align","center"],["matInput","","type","number","required","","name","irst2",3,"placeholder","ngModel","ngModelChange"],["irst2",""],[1,"example-button-row"],["mat-raised-button","",3,"disabled","click"]],template:function(t,e){1&t&&(a.Tb(0,"mat-card"),a.Tb(1,"mat-card-header"),a.Tb(2,"mat-card-title"),a.Ec(3),a.gc(4,"transloco"),a.Sb(),a.Sb(),a.Tb(5,"mat-card-content"),a.Dc(6,W,25,23,"form",0),a.Dc(7,Z,25,20,"div",1),a.Sb(),a.Ob(8,"mat-card-actions"),a.Sb()),2&t&&(a.Cb(3),a.Fc(a.hc(4,3,"MathExercise.DivisionExercises")),a.Cb(3),a.lc("ngIf",!e.isQuizStarted),a.Cb(1),a.lc("ngIf",e.isQuizStarted))},directives:[F.a,F.d,F.g,F.c,o.l,F.b,r.x,r.n,r.g,q.c,M.b,r.r,r.c,r.m,r.e,r.t,y.a,q.b,O.c,O.a,f.b,q.h,r.p],pipes:[c.d],styles:[".control-full-width[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}.ng-valid.required[_ngcontent-%COMP%], .ng-valid[required][_ngcontent-%COMP%]{border-left:5px solid #42a948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}.example-button-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .example-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 auto;width:300px}"]}),t})();var tt=i("f0Cb"),et=i("MutI");const it=["itemForm"],ot=["irst"],rt=["opers"];function nt(t,e){if(1&t&&(a.Tb(0,"mat-list-option",17),a.Ec(1),a.Sb()),2&t){const t=e.$implicit;a.lc("value",t.value),a.Cb(1),a.Gc(" ",t.display," ")}}function ut(t,e){if(1&t){const t=a.Ub();a.Tb(0,"form",2),a.Tb(1,"mat-form-field"),a.Ob(2,"input",3),a.gc(3,"transloco"),a.Sb(),a.Tb(4,"mat-form-field"),a.Ob(5,"input",4),a.gc(6,"transloco"),a.gc(7,"transloco"),a.Sb(),a.Tb(8,"div",5),a.Tb(9,"div",6),a.Tb(10,"mat-form-field"),a.Ob(11,"input",7),a.gc(12,"transloco"),a.Sb(),a.Sb(),a.Tb(13,"div",8),a.Tb(14,"mat-form-field"),a.Ob(15,"input",9),a.gc(16,"transloco"),a.Sb(),a.Sb(),a.Sb(),a.Tb(17,"div",5),a.Tb(18,"div",6),a.Tb(19,"mat-checkbox",10),a.Ec(20),a.gc(21,"transloco"),a.Sb(),a.Sb(),a.Tb(22,"div",8),a.Tb(23,"mat-form-field"),a.Ob(24,"input",11),a.gc(25,"transloco"),a.Sb(),a.Sb(),a.Sb(),a.Ob(26,"mat-divider"),a.Tb(27,"mat-form-field"),a.Ob(28,"input",12),a.gc(29,"transloco"),a.Sb(),a.Tb(30,"div",13),a.Tb(31,"div"),a.Ec(32),a.gc(33,"transloco"),a.Sb(),a.Tb(34,"mat-selection-list",null,14),a.Dc(36,nt,2,2,"mat-list-option",15),a.Sb(),a.Sb(),a.Ob(37,"mat-divider"),a.Tb(38,"button",16),a.bc("click",function(){return a.uc(t),a.fc().onQuizStart()}),a.Ec(39),a.gc(40,"transloco"),a.Sb(),a.Sb()}if(2&t){const t=a.fc();a.lc("formGroup",t.quizControlFormGroup),a.Cb(2),a.mc("placeholder",a.hc(3,13,"Quiz.QuizItemCount")),a.Cb(3),a.mc("placeholder",a.hc(6,15,"Quiz.FailedFactor")),a.mc("matTooltip",a.hc(7,17,"Quiz.FailedFactorHint")),a.Cb(6),a.mc("placeholder",a.hc(12,19,"MathExercise.Number")),a.Cb(4),a.mc("placeholder",a.hc(16,21,"MathExercise.Number")),a.Cb(5),a.Fc(a.hc(21,23,"MathExercise.AllowNegative")),a.Cb(4),a.mc("placeholder",a.hc(25,25,"MathExercise.DecimalPlaces")),a.Cb(4),a.mc("placeholder",a.hc(29,27,"MathExercise.NumberOfOperators")),a.Cb(4),a.Gc("",a.hc(33,29,"MathExercise.Operators"),":"),a.Cb(4),a.lc("ngForOf",t.allowedOperators),a.Cb(2),a.lc("disabled",!t.canStart()),a.Cb(1),a.Gc(" ",a.hc(40,31,"Common.Start")," ")}}function ct(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",13),a.Tb(1,"div",18),a.Ec(2),a.Sb(),a.Tb(3,"div",19,20),a.bc("keydown.enter",function(){return a.uc(t),a.fc().onQuizSubmit()}),a.Tb(5,"mat-form-field",21),a.Tb(6,"span",22),a.Ec(7),a.Sb(),a.Tb(8,"input",23,24),a.bc("ngModelChange",function(e){a.uc(t);const i=a.fc();return i.QuizItems[i.QuizCursor].InputtedResult=e}),a.gc(10,"transloco"),a.Sb(),a.Sb(),a.Sb(),a.Tb(11,"div",25),a.Tb(12,"button",26),a.bc("click",function(){return a.uc(t),a.fc().onPrevious()}),a.Ec(13),a.gc(14,"transloco"),a.Sb(),a.Tb(15,"button",26),a.bc("click",function(){return a.uc(t),a.fc().onQuizSubmit()}),a.Ec(16),a.gc(17,"transloco"),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=a.fc();a.Cb(2),a.Hc(" (",t.QuizCursor+1," / ",t.QuizItems.length,") "),a.Cb(5),a.Fc(t.QuizItems[t.QuizCursor].getQuizFormat()),a.Cb(1),a.mc("placeholder",a.hc(10,9,"MathExercise.Result")),a.lc("ngModel",t.QuizItems[t.QuizCursor].InputtedResult),a.Cb(4),a.lc("disabled",t.isPreviousButtonDisabled),a.Cb(1),a.Fc(a.hc(14,11,"Common.Previous")),a.Cb(2),a.lc("disabled",t.isSubmitButtonDisabled),a.Cb(1),a.Fc(a.hc(17,13,t.NextButtonText))}}const st=[{path:"",component:m},{path:"add-ex",component:B,canDeactivate:[h.a]},{path:"sub-ex",component:V,canDeactivate:[h.a]},{path:"multi-ex",component:X,canDeactivate:[h.a]},{path:"div-ex",component:Y,canDeactivate:[h.a]},{path:"mixed-op",component:(()=>{class t{constructor(t,e,i,o,n){this.quizService=t,this.snackBar=e,this.router=i,this.changeDef=o,this.dialog=n,this.isQuizStarted=!1,this.quizControlFormGroup=new r.f({countControl:new r.d(20,[r.v.required,r.v.min(1),r.v.max(1e3)]),failedFactorControl:new r.d(2,[r.v.min(0),r.v.max(10)]),leftNumberControl:new r.d(0),rightNumberControl:new r.d(100),negControl:new r.d(!1),decControl:new r.d(0,[r.v.min(0),r.v.max(5)]),operatorCountControl:new r.d(2,[r.v.required,r.v.min(1),r.v.max(4)])},{validators:this.basicValidator}),this.QuizItems=[],this.QuizCursor=0,this.quizFormGroup=new r.f({inputControl:new r.d(null,r.v.required)}),this.NextButtonText="Common.Next",this.quizSections=[],this.allowedOperators=[{display:" + ",value:"+"},{display:" - ",value:"-"},{display:" \xd7 ",value:"*"},{display:" \xf7 ",value:"/"}]}set content(t){t&&(this.itemForm=t,this.itemForm.nativeElement.focus())}set inputControl(t){t&&(this.inputCtrl=t,this.inputCtrl.nativeElement.focus())}canDeactivate(t){return!this.isQuizStarted}ngOnInit(){}ngOnDestroy(){}canStart(){return!this.isQuizStarted&&this.quizControlFormGroup.valid&&this.operatorsCtrl&&this.operatorsCtrl.selectedOptions.selected.length>0&&this.quizControlFormGroup.get("operatorCountControl").value<=this.operatorsCtrl.selectedOptions.selected.length}onQuizStart(){if(!this.quizService.ActiveQuiz){let t=this.quizService.startNewQuiz(this.quizService.NextQuizID);this.generateQuizSection(this.quizControlFormGroup.get("countControl").value);let e=new b.l(t.NextSectionID,this.QuizItems.length);t.startNewSection(e),this.isQuizStarted=!0,this.changeDef.detectChanges(),this.setNextButtonText()}}onQuizSubmit(){var t,e;if(void 0===this.QuizItems[this.QuizCursor].InputtedResult)this.inputCtrl&&this.inputCtrl.nativeElement.focus();else if(this.QuizCursor===this.QuizItems.length-1){const i=[];for(const t of this.QuizItems)t.IsCorrect()||i.push(t);null===(t=this.quizService.ActiveQuiz)||void 0===t||t.completeActionSection(i.length);const o=this.quizControlFormGroup.get("failedFactorControl").value;if(i.length>0&&o>0)this.quizService.FailedQuizItems=i,this.quizService.CurrentScore=(this.QuizItems.length-i.length)/this.QuizItems.length,this.dialog.open(T,{disableClose:!1,width:"500px"}).afterClosed().subscribe(t=>{this.generateQuizSection(i.length*o),this.QuizCursor=0,this.setNextButtonText();const e=this.quizService.ActiveQuiz,r=new b.l(e.NextSectionID,this.QuizItems.length);e.startNewSection(r)});else{const t=null===(e=this.quizService.ActiveQuiz)||void 0===e?void 0:e.QuizID;this.quizService.completeActiveQuiz(),this.isQuizStarted=!1,this.router.navigate(["/quiz-summary/display",t])}}else this.QuizCursor++,this.setNextButtonText(),this.inputCtrl&&this.inputCtrl.nativeElement.focus()}onPrevious(){this.QuizCursor--,this.setNextButtonText(),this.inputCtrl&&this.inputCtrl.nativeElement.focus()}get isSubmitButtonDisabled(){return this.QuizCursor>this.QuizItems.length}get isPreviousButtonDisabled(){return this.QuizCursor<=0}setNextButtonText(){this.QuizCursor===this.QuizItems.length-1&&(this.NextButtonText="Common.Submit")}generateQuizItem(t){const e=this.quizControlFormGroup.get("negControl").value,i=this.quizControlFormGroup.get("operatorCountControl").value;let o;for(;;){let r=this.getNumber().toString();if(i>=this.operatorsCtrl.selectedOptions.selected.length)this.operatorsCtrl.selectedOptions.selected.forEach(t=>{r+=t.value,r+=this.getNumber().toString()});else{const t=[];this.operatorsCtrl.selectedOptions.selected.forEach(e=>{t.push(e.value)});let e=t.length-i;do{const i=Math.floor(Math.random()*t.length);t.splice(i,1),e--}while(e>0);t.forEach(t=>{r+=t,r+=this.getNumber().toString()})}if(o=new b.h(r),!(isNaN(o.Result)||!isFinite(o.Result)||!e&&o.Result<0)){o.QuizIndex=t;break}}return o}getNumber(){let t=0;const e=this.quizControlFormGroup.get("decControl").value;t=Math.pow(10,e);const i=t*this.quizControlFormGroup.get("leftNumberControl").value,o=t*this.quizControlFormGroup.get("rightNumberControl").value;let r=Math.round(Math.random()*(o-i))+i;return 0!==t&&(r/=t),r}generateQuizSection(t){this.QuizItems=[];for(let e=0;e<t;e++){const t=this.generateQuizItem(e+1);this.QuizItems.push(t)}}basicValidator(t){const e=t.get("leftNumberControl"),i=t.get("rightNumberControl");let o=!1;return e&&i&&e.value<i.value&&(o=!0),o?null:{invalidInputs:!0}}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(h.c),a.Nb(w.a),a.Nb(l.b),a.Nb(a.h),a.Nb(d.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-primary-school-math-mixed-op"]],viewQuery:function(t,e){if(1&t&&(a.Ic(it,!0),a.Ic(ot,!0),a.Ic(rt,!0)),2&t){let t;a.rc(t=a.cc())&&(e.content=t.first),a.rc(t=a.cc())&&(e.inputControl=t.first),a.rc(t=a.cc())&&(e.operatorsCtrl=t.first)}},decls:9,vars:5,consts:[["style","font-size: 16px",3,"formGroup",4,"ngIf"],["class","control-full-width",4,"ngIf"],[2,"font-size","16px",3,"formGroup"],["matInput","","type","number","formControlName","countControl","required","",3,"placeholder"],["matInput","","type","number","formControlName","failedFactorControl",3,"placeholder","matTooltip"],["fxLayout","row",1,"control-full-width"],["fxFlex","50"],["matInput","","type","number","formControlName","leftNumberControl","required","",3,"placeholder"],["fxFlex",""],["matInput","","type","number","formControlName","rightNumberControl","required","",3,"placeholder"],["formControlName","negControl"],["matInput","","type","number","formControlName","decControl",3,"placeholder"],["matInput","","type","number","formControlName","operatorCountControl",3,"placeholder"],[1,"control-full-width"],["opers",""],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"],[2,"text-align","center"],[3,"keydown.enter"],["itemForm",""],[1,"control-full-width",2,"font-size","72px","text-align","center"],["matPrefix",""],["matInput","","type","number","required","","name","irst",3,"placeholder","ngModel","ngModelChange"],["irst",""],[1,"example-button-row"],["mat-raised-button","",3,"disabled","click"]],template:function(t,e){1&t&&(a.Tb(0,"mat-card"),a.Tb(1,"mat-card-header"),a.Tb(2,"mat-card-title"),a.Ec(3),a.gc(4,"transloco"),a.Sb(),a.Sb(),a.Tb(5,"mat-card-content"),a.Dc(6,ut,41,33,"form",0),a.Dc(7,ct,18,15,"div",1),a.Sb(),a.Ob(8,"mat-card-actions"),a.Sb()),2&t&&(a.Cb(3),a.Fc(a.hc(4,3,"MathExercise.MixedOperations")),a.Cb(3),a.lc("ngIf",!e.isQuizStarted),a.Cb(1),a.lc("ngIf",e.isQuizStarted))},directives:[F.a,F.d,F.g,F.c,o.l,F.b,r.x,r.n,r.g,q.c,M.b,r.r,r.c,r.m,r.e,r.t,y.a,O.c,O.a,k.a,tt.a,et.f,o.k,f.b,et.d,q.h,r.p],pipes:[c.d],styles:[".control-full-width[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}.ng-valid.required[_ngcontent-%COMP%], .ng-valid[required][_ngcontent-%COMP%]{border-left:5px solid #42a948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}.example-button-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .example-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 auto;width:300px}"]}),t})(),canDeactivate:[h.a]}];let lt=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[l.d.forChild(st)],l.d]}),t})(),at=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[o.c,r.h,r.s,s.a,n.b,u.b.forChild(),lt,c.c]]}),t})()}}]);