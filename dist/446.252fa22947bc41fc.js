"use strict";(self.webpackChunkknowledgebuilder=self.webpackChunkknowledgebuilder||[]).push([[446],{446:(X,f,c)=>{c.r(f),c.d(f,{FunctionCurveModule:()=>J});var d=c(6814),m=c(6223),g=c(8525),v=c(4170),C=c(1274),h=c(2164),F=c(4611),x=c(2787),M=c(9611),n=c(5879),T=c(3680);const y=["func_curve"];function Z(e,l){if(1&e&&(n.TgZ(0,"mat-option",7),n._uU(1),n.qZA()),2&e){const t=l.$implicit;n.Q6J("value",t.value),n.xp6(1),n.hij(" ",t.disp," ")}}function A(e,l){if(1&e&&(n.TgZ(0,"div",4)(1,"span"),n._uU(2,"Formula:"),n.qZA(),n._UZ(3,"markdown",8),n.qZA()),2&e){const t=n.oxw();n.xp6(3),n.Q6J("data",t.selectedFuncFormat)("katexOptions",t.mathOptions)}}const O=[{path:"",component:(()=>{class e{constructor(){this.supportedFunc=M.GM.getAllCurves(),this.mathOptions={displayMode:!0,throwOnError:!1,errorColor:"#cc0000"}}ngAfterViewInit(){}onFuncSelectionChanged(){if(this.content){const t=this.content.nativeElement.getContext("2d"),s=this.content.nativeElement.width,r=this.content.nativeElement.height;if(t.clearRect(0,0,s,r),t.save(),t.beginPath(),this.selectedFuncVal){const u=this.supportedFunc.find(p=>p.value===this.selectedFuncVal);if(u){this.selectedFuncFormat=u.latexDisp;const i=Math.min(s/(u.dispXMax-u.dispXMin),r/(u.dispYMax-u.dispYMin));t.strokeStyle="#000",t.translate(s/2,r/2),t.moveTo(-1*s/2,0),t.lineTo(s/2,0),t.stroke();for(let o=u.dispXMin;o<u.dispXMax;o++)t.moveTo(o*i,-1*i/2),t.lineTo(o*i,i/2),t.stroke();t.moveTo(0,-1*r/2),t.lineTo(0,r/2),t.stroke();for(let o=u.dispYMin;o<u.dispYMax;o++)t.moveTo(-1*i/2,-1*o*i),t.lineTo(i/2,-1*o*i),t.stroke();const a=u.getCurveData();if(a.length>0){a.sort((o,S)=>o.x-S.x),t.moveTo(a[0].x*i,-1*a[0].y*i);for(let o=1;o<a.length;o++)t.lineTo(a[o].x*i,-1*a[o].y*i),t.stroke(),t.moveTo(a[o].x*i,-1*a[o].y*i)}}t.restore()}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["khb-function-curve"]],viewQuery:function(t,s){if(1&t&&n.Gf(y,7),2&t){let r;n.iGM(r=n.CRH())&&(s.content=r.first)}},decls:17,vars:9,consts:[[1,"toolbar-spacer"],["name","func",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["style","margin: 16px;",4,"ngIf"],[2,"margin","16px"],[1,"curve-container"],["func_curve",""],[3,"value"],["katex","",3,"data","katexOptions"]],template:function(t,s){1&t&&(n.TgZ(0,"mat-toolbar")(1,"h1"),n._uU(2),n.ALo(3,"transloco"),n.qZA(),n._UZ(4,"div",0),n.TgZ(5,"mat-form-field")(6,"mat-label"),n._uU(7),n.ALo(8,"transloco"),n.qZA(),n.TgZ(9,"mat-select",1),n.NdJ("ngModelChange",function(u){return s.selectedFuncVal=u})("selectionChange",function(){return s.onFuncSelectionChanged()}),n.TgZ(10,"mat-option"),n._uU(11,"None"),n.qZA(),n.YNc(12,Z,2,2,"mat-option",2),n.qZA()()(),n.YNc(13,A,4,2,"div",3),n.TgZ(14,"div",4),n._UZ(15,"canvas",5,6),n.qZA()),2&t&&(n.xp6(2),n.Oqu(n.lcZ(3,5,"HighSchool.FunctionCurve")),n.xp6(5),n.Oqu(n.lcZ(8,7,"HighSchool.FunctionCurve")),n.xp6(2),n.Q6J("ngModel",s.selectedFuncVal),n.xp6(3),n.Q6J("ngForOf",s.supportedFunc),n.xp6(1),n.Q6J("ngIf",s.selectedFuncVal))},dependencies:[d.sg,d.O5,m.JJ,m.On,v.KE,v.hX,g.gD,T.ey,C.Ye,F.lF,h.Ot],styles:[".curve-container[_ngcontent-%COMP%]{width:600px;height:400px}"]}),e})()}];let U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[x.Bz.forChild(O),x.Bz]}),e})(),J=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[d.ez,m.u5,v.lN,g.LD,C.g0,h.y4,F.JP.forChild(),U]}),e})()}}]);