!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{V7M2:function(t,n,c){"use strict";c.r(n),c.d(n,"ExerciseItemsModule",function(){return ze});var o=c("ofXK"),a=c("3Pt+"),r=c("0LvA"),l=c("lR5k"),s=c("QPBi"),b=c("jIBr"),m=c("dcRk"),u=c("tyNb"),d=c("fXoL"),p=c("M9IT"),h=c("Dh3D"),f=c("VRyK"),g=c("LRne"),v=c("JX91"),D=c("eIep"),C=c("nYR2"),T=c("lJxs"),y=c("JIr8"),w=c("VHTt"),U=c("NUjs"),x=c("o0su"),I=c("/t3+"),M=c("bTqV"),k=c("+0xr");function O(e,t){1&e&&(d.Ub(0,"th",17),d.Dc(1,"#"),d.Tb())}function E(e,t){if(1&e){var i=d.Vb();d.Ub(0,"td",18),d.Ub(1,"div"),d.Dc(2),d.Ub(3,"a",19),d.cc("click",function(){d.vc(i);var e=t.$implicit;return d.gc().onDisplayItem(e.ID)}),d.Dc(4),d.hc(5,"transloco"),d.Tb(),d.Ub(6,"a",19),d.cc("click",function(){d.vc(i);var e=t.$implicit;return d.gc().onChangeItem(e.ID)}),d.Dc(7),d.hc(8,"transloco"),d.Tb(),d.Ub(9,"a",19),d.cc("click",function(){d.vc(i);var e=t.$implicit;return d.gc().onDeleteItem(e.ID)}),d.Dc(10),d.hc(11,"transloco"),d.Tb(),d.Tb(),d.Tb()}if(2&e){var n=t.$implicit,c=d.gc();d.Db(2),d.Fc(" ",n.ID," "),d.Db(1),d.mc("disabled",!c.isExpertMode),d.Db(1),d.Ec(d.ic(5,7,"Common.Display")),d.Db(2),d.mc("disabled",!c.isExpertMode),d.Db(1),d.Ec(d.ic(8,9,"Common.Change")),d.Db(2),d.mc("disabled",!c.isExpertMode),d.Db(1),d.Ec(d.ic(11,11,"Common.Delete"))}}function S(e,t){1&e&&(d.Ub(0,"th",17),d.Dc(1),d.hc(2,"transloco"),d.Tb()),2&e&&(d.Db(1),d.Ec(d.ic(2,1,"Type")))}function F(e,t){if(1&e&&(d.Ub(0,"td",18),d.Dc(1),d.hc(2,"transloco"),d.Tb()),2&e){var i=t.$implicit,n=d.gc();d.Db(1),d.Ec(d.ic(2,1,n.getExerciseItemTypeName(i.ItemType)))}}function j(e,t){1&e&&(d.Ub(0,"th",17),d.Dc(1),d.hc(2,"transloco"),d.Tb()),2&e&&(d.Db(1),d.Ec(d.ic(2,1,"Tag")))}function P(e,t){if(1&e&&(d.Ub(0,"td",18),d.Dc(1),d.Tb()),2&e){var i=t.$implicit;d.Db(1),d.Ec(i.Tags.toString())}}function R(e,t){1&e&&(d.Ub(0,"th",17),d.Dc(1),d.hc(2,"transloco"),d.Tb()),2&e&&(d.Db(1),d.Ec(d.ic(2,1,"KnowledgeItem")))}function $(e,t){if(1&e&&(d.Ub(0,"td",18),d.Dc(1),d.Tb()),2&e){var i=t.$implicit;d.Db(1),d.Ec(i.KnowledgeItemID)}}function V(e,t){1&e&&(d.Ub(0,"th",20),d.Dc(1),d.hc(2,"transloco"),d.Tb()),2&e&&(d.Db(1),d.Ec(d.ic(2,1,"CreatedAt")))}function L(e,t){if(1&e&&(d.Ub(0,"td",18),d.Dc(1),d.hc(2,"date"),d.Tb()),2&e){var i=t.$implicit;d.Db(1),d.Ec(d.jc(2,1,i.CreatedAt,"yyyy-M-d HH:mm:ss"))}}function N(e,t){1&e&&d.Pb(0,"tr",21)}function A(e,t){1&e&&d.Pb(0,"tr",22)}var G,_=((G=function(){function t(i,n){e(this,t),this.odataService=i,this.router=n,this.displayedColumns=["id","itemtype","tags","knowledgeitem","createdat"],this.dataSource=[],this.resultsLength=0,this.isLoadingResults=!0,this.refreshEvent=new d.o}return i(t,[{key:"getExerciseItemTypeName",value:function(e){return Object(U.d)(e)}},{key:"isExpertMode",get:function(){return this.odataService.expertMode}},{key:"ngAfterViewInit",value:function(){var e=this;this.sort.sortChange.subscribe(function(){return e.paginator.pageIndex=0}),Object(f.a)(this.sort.sortChange,this.paginator.page,this.refreshEvent).pipe(Object(v.a)({}),Object(D.a)(function(){e.isLoadingResults=!0;var t=e.paginator.pageSize;return e.odataService.getExerciseItems(t,t*e.paginator.pageIndex,e.sort.active,e.sort.direction)}),Object(C.a)(function(){return e.isLoadingResults=!1}),Object(T.a)(function(t){return e.resultsLength=t.totalCount,t.items}),Object(y.a)(function(){return Object(g.a)([])})).subscribe({next:function(t){return e.dataSource=t},error:function(e){return console.log(e)}})}},{key:"onGoToPreview",value:function(){var e=[];this.dataSource.forEach(function(t){e.push({refType:w.y.ExerciseItem,refId:t.ID})}),this.odataService.previewObjList=e,this.router.navigate(["preview"])}},{key:"onGoToSearch",value:function(){this.router.navigate(["exercise-item","search"])}},{key:"onDeleteItem",value:function(e){var t=this;this.odataService.deleteExerciseItem(e).subscribe({next:function(e){t.onRefreshList()},error:function(e){console.error(e)}})}},{key:"onRefreshList",value:function(){this.refreshEvent.emit()}},{key:"resetPaging",value:function(){this.paginator.pageIndex=0}},{key:"onDisplayItem",value:function(e){this.router.navigate(["exercise-item","display",e.toString()])}},{key:"onChangeItem",value:function(e){this.router.navigate(["exercise-item","edit",e.toString()])}}]),t}()).\u0275fac=function(e){return new(e||G)(d.Ob(x.b),d.Ob(u.b))},G.\u0275cmp=d.Ib({type:G,selectors:[["app-exercise-items"]],viewQuery:function(e,t){var i;1&e&&(d.Ic(p.a,1),d.Ic(h.a,1)),2&e&&(d.sc(i=d.dc())&&(t.paginator=i.first),d.sc(i=d.dc())&&(t.sort=i.first))},decls:39,vars:24,consts:[[1,"toolbar-spacer"],["mat-stroked-button","","routerLink","create",3,"disabled"],["mat-stroked-button","",3,"disabled","click"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","itemtype"],["matColumnDef","tags"],["matColumnDef","knowledgeitem"],["matColumnDef","createdat"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-button","",3,"disabled","click"],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(d.Ub(0,"mat-toolbar-row"),d.Ub(1,"span"),d.Dc(2),d.hc(3,"transloco"),d.Tb(),d.Pb(4,"span",0),d.Ub(5,"section"),d.Ub(6,"a",1),d.Dc(7),d.hc(8,"transloco"),d.Tb(),d.Ub(9,"a",2),d.cc("click",function(){return t.onGoToSearch()}),d.Dc(10),d.hc(11,"transloco"),d.Tb(),d.Ub(12,"a",2),d.cc("click",function(){return t.onGoToPreview()}),d.Dc(13),d.hc(14,"transloco"),d.Tb(),d.Ub(15,"a",2),d.cc("click",function(){return t.onRefreshList()}),d.Dc(16),d.hc(17,"transloco"),d.Tb(),d.Tb(),d.Tb(),d.Ub(18,"div",3),d.Ub(19,"div",4),d.Ub(20,"table",5),d.cc("matSortChange",function(){return t.resetPaging()}),d.Sb(21,6),d.Cc(22,O,2,0,"th",7),d.Cc(23,E,12,13,"td",8),d.Rb(),d.Sb(24,9),d.Cc(25,S,3,3,"th",7),d.Cc(26,F,3,3,"td",8),d.Rb(),d.Sb(27,10),d.Cc(28,j,3,3,"th",7),d.Cc(29,P,2,1,"td",8),d.Rb(),d.Sb(30,11),d.Cc(31,R,3,3,"th",7),d.Cc(32,$,2,1,"td",8),d.Rb(),d.Sb(33,12),d.Cc(34,V,3,3,"th",13),d.Cc(35,L,3,4,"td",8),d.Rb(),d.Cc(36,N,1,0,"tr",14),d.Cc(37,A,1,0,"tr",15),d.Tb(),d.Tb(),d.Pb(38,"mat-paginator",16),d.Tb()),2&e&&(d.Db(2),d.Ec(d.ic(3,14,"ExerciseItem")),d.Db(4),d.mc("disabled",!t.isExpertMode),d.Db(1),d.Ec(d.ic(8,16,"Common.Create")),d.Db(2),d.mc("disabled",!t.isExpertMode||t.dataSource.length<=0),d.Db(1),d.Ec(d.ic(11,18,"Common.Search")),d.Db(2),d.mc("disabled",!t.isExpertMode||t.dataSource.length<=0),d.Db(1),d.Ec(d.ic(14,20,"Common.Preview")),d.Db(2),d.mc("disabled",!t.isExpertMode),d.Db(1),d.Ec(d.ic(17,22,"Common.Refresh")),d.Db(4),d.mc("dataSource",t.dataSource),d.Db(16),d.mc("matHeaderRowDef",t.displayedColumns),d.Db(1),d.mc("matRowDefColumns",t.displayedColumns),d.Db(1),d.mc("length",t.resultsLength)("pageSize",20))},directives:[I.c,M.a,u.c,k.j,h.a,k.c,k.e,k.b,k.g,k.i,p.a,k.d,k.a,h.b,k.f,k.h],pipes:[s.d,o.e],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.mat-column-id[_ngcontent-%COMP%]{max-width:300px;width:250px}.mat-column-itemtype[_ngcontent-%COMP%]{max-width:120px;width:120px}.mat-column-tags[_ngcontent-%COMP%]{max-width:250px;width:150px}.mat-column-created[_ngcontent-%COMP%]{max-width:120px;width:120px}"]}),G),H=c("jtHE"),z=c("FtGj"),K=c("rCpU"),B=c("HKRH"),q=c("0IaG"),J=c("Wp6s"),Q=c("kmnG"),X=c("qFsG"),W=c("d3UM"),Y=c("A5z7"),Z=c("XiUz"),ee=c("FKr1"),te=c("NFeN");function ie(e,t){if(1&e&&(d.Ub(0,"mat-option",18),d.Dc(1),d.hc(2,"transloco"),d.Tb()),2&e){var i=t.$implicit;d.mc("value",i.value),d.Db(1),d.Ec(d.ic(2,2,i.i18nterm))}}function ne(e,t){1&e&&(d.Ub(0,"mat-icon",21),d.Dc(1,"cancel"),d.Tb())}function ce(e,t){if(1&e){var i=d.Vb();d.Ub(0,"mat-chip",19),d.cc("removed",function(){d.vc(i);var e=t.$implicit;return d.gc().removeTag(e)}),d.Dc(1),d.Cc(2,ne,2,0,"mat-icon",20),d.Tb()}if(2&e){var n=t.$implicit,c=d.gc();d.mc("selectable",c.selectable)("removable",c.isEditable),d.Db(1),d.Fc(" ",n," "),d.Db(1),d.mc("ngIf",c.isEditable)}}function oe(e,t){if(1&e&&(d.Ub(0,"div",22),d.Ub(1,"div",23),d.Ub(2,"mat-form-field",1),d.Ub(3,"mat-label"),d.Dc(4),d.hc(5,"transloco"),d.Tb(),d.Pb(6,"input",24),d.hc(7,"transloco"),d.hc(8,"date"),d.Tb(),d.Tb(),d.Ub(9,"div",23),d.Ub(10,"mat-form-field",1),d.Ub(11,"mat-label"),d.Dc(12),d.hc(13,"transloco"),d.Tb(),d.Pb(14,"input",24),d.hc(15,"transloco"),d.hc(16,"date"),d.Tb(),d.Tb(),d.Tb()),2&e){var i=d.gc();d.Db(4),d.Ec(d.ic(5,6,"CreatedAt")),d.Db(2),d.nc("placeholder",d.ic(7,8,"CreatedAt")),d.mc("ngModel",d.jc(8,10,i.itemObject.CreatedAt,"yyyy-M-d HH:mm:ss")),d.Db(6),d.Ec(d.ic(13,13,"ModifiedAt")),d.Db(2),d.nc("placeholder",d.ic(15,15,"ModifiedAt")),d.mc("ngModel",d.jc(16,17,i.itemObject.ModifiedAt,"yyyy-M-d HH:mm:ss"))}}function ae(e,t){if(1&e){var i=d.Vb();d.Ub(0,"mat-toolbar"),d.Ub(1,"h3"),d.Dc(2),d.hc(3,"transloco"),d.Tb(),d.Pb(4,"div",25),d.Ub(5,"button",26),d.cc("click",function(){return d.vc(i),d.gc().openUploadDialog()}),d.Dc(6,"Upload"),d.Tb(),d.Tb()}2&e&&(d.Db(2),d.Ec(d.ic(3,1,"Content")))}function re(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",23),d.Ub(1,"ngx-monaco-editor",27),d.cc("ngModelChange",function(e){return d.vc(i),d.gc().content=e}),d.Tb(),d.Tb()}if(2&e){var n=d.gc();d.Db(1),d.mc("options",n.editorOptions)("ngModel",n.content)}}function le(e,t){if(1&e){var i=d.Vb();d.Ub(0,"mat-toolbar"),d.Ub(1,"h3"),d.Dc(2),d.hc(3,"transloco"),d.Tb(),d.Pb(4,"div",25),d.Ub(5,"button",26),d.cc("click",function(){return d.vc(i),d.gc().openAnswerUploadDialog()}),d.Ub(6,"mat-icon"),d.Dc(7,"file_upload"),d.Tb(),d.Tb(),d.Tb()}2&e&&(d.Db(2),d.Ec(d.ic(3,1,"Answer")))}function se(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",23),d.Ub(1,"ngx-monaco-editor",27),d.cc("ngModelChange",function(e){return d.vc(i),d.gc().answerContent=e}),d.Tb(),d.Tb()}if(2&e){var n=d.gc();d.Db(1),d.mc("options",n.editorOptions)("ngModel",n.answerContent)}}var be,me=((be=function(){function t(i,n,c,o){e(this,t),this.dialog=i,this.activateRoute=n,this.router=c,this.odataService=o,this.routerID=-1,this.uiMode=K.b.Create,this.currentMode="",this.editorOptions={theme:"vs-dark",wordWrap:"on",roundedSelection:!0},this.content="New Exercise Item",this.answerContent="",this.mathOptions={displayMode:!0,throwOnError:!1,errorColor:"#cc0000"},this.selectable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[z.g,z.c],this.tags=[],this.arExerciseTypes=[],this.arExerciseTypes=Object(U.e)(),this.itemFormGroup=new a.f({idControl:new a.d({value:null,disabled:!0}),typeControl:new a.d({value:U.c.Question}),knowledgeControl:new a.d,tagControl:new a.d})}return i(t,[{key:"isDisplayMode",get:function(){return this.uiMode===K.b.Display}},{key:"isCreateMode",get:function(){return this.uiMode===K.b.Create}},{key:"isUpdateMode",get:function(){return this.uiMode===K.b.Update}},{key:"isEditable",get:function(){return this.uiMode===K.b.Create||this.uiMode===K.b.Update}},{key:"ngOnInit",value:function(){var e=this;this.destroyed$=new H.a(1),this.activateRoute.url.subscribe({next:function(t){t instanceof Array&&t.length>0&&("create"===t[0].path?(e.routerID=-1,e.uiMode=K.b.Create,e.currentMode="Common.Create"):"edit"===t[0].path?(e.routerID=+t[1].path,e.uiMode=K.b.Update,e.currentMode="Common.Change"):"display"===t[0].path&&(e.routerID=+t[1].path,e.uiMode=K.b.Display,e.currentMode="Common.Display")),-1!==e.routerID&&e.odataService.readExerciseItem(e.routerID,e.uiMode===K.b.Update).subscribe({next:function(t){e.onSetItemData(t),e.itemObject=t},error:function(e){console.error(e)}})},error:function(e){console.error(e)}})}},{key:"ngOnDestroy",value:function(){this.destroyed$&&(this.destroyed$.complete(),this.destroyed$=void 0)}},{key:"onOK",value:function(){var e,t,i=this;if(this.isCreateMode){if(!this.itemFormGroup.valid)return void(this.itemFormGroup.errors&&console.error(this.itemFormGroup.errors));this.itemObject=new U.a,this.itemObject.ItemType=null===(e=this.itemFormGroup.get("typeControl"))||void 0===e?void 0:e.value,this.itemObject.Content=this.content,this.itemObject.Tags=this.tags,this.itemObject.Answer=this.answerContent,this.odataService.createExerciseItem(this.itemObject).subscribe({next:function(e){i.router.navigate(["/exercise-item/display",e.ID])},error:function(e){console.error(e)}})}else if(this.isUpdateMode){if(!this.itemFormGroup.valid)return void(this.itemFormGroup.errors&&console.log(this.itemFormGroup.errors));this.itemObject&&(this.itemObject.ItemType=null===(t=this.itemFormGroup.get("typeControl"))||void 0===t?void 0:t.value,this.itemObject.Content=this.content,this.itemObject.Tags=this.tags,this.itemObject.Answer=this.answerContent,this.odataService.changeExerciseItem(this.itemObject).subscribe({next:function(e){i.router.navigate(["/exercise-item/display",e.ID])},error:function(e){console.error(e)}}))}}},{key:"openUploadDialog",value:function(){var e=this;this.dialog.open(B.a,{width:"50%",height:"50%"}).afterClosed().subscribe({next:function(t){console.log(t),t.forEach(function(t){e.content+="\n![Img](".concat(t.url,")\n          ")})}})}},{key:"openAnswerUploadDialog",value:function(){var e=this;this.dialog.open(B.a,{width:"50%",height:"50%"}).afterClosed().subscribe({next:function(t){console.log(t),t.forEach(function(t){e.answerContent+="\n  ![Img](".concat(t.url,")\n            ")})}})}},{key:"addTag",value:function(e){var t=e.input,i=e.value;(i||"").trim()&&this.tags.push(i.trim()),t&&(t.value="")}},{key:"removeTag",value:function(e){var t=this.tags.indexOf(e);t>=0&&this.tags.splice(t,1)}},{key:"onSetItemData",value:function(e){var t,i,n;null===(t=this.itemFormGroup.get("idControl"))||void 0===t||t.setValue(e.ID),null===(i=this.itemFormGroup.get("idControl"))||void 0===i||i.disable(),null===(n=this.itemFormGroup.get("typeControl"))||void 0===n||n.setValue(+e.ItemType),this.content=e.Content,this.tags=e.Tags,this.isDisplayMode?this.itemFormGroup.disable():this.itemFormGroup.markAsPristine()}},{key:"onReturnToList",value:function(){this.router.navigate(["exercise-item"])}},{key:"onCreateNewOne",value:function(){this.router.navigate(["exercise-item","create"])}}]),t}()).\u0275fac=function(e){return new(e||be)(d.Ob(q.b),d.Ob(u.a),d.Ob(u.b),d.Ob(x.b))},be.\u0275cmp=d.Ib({type:be,selectors:[["app-exercise-item-detail"]],decls:54,vars:41,consts:[[3,"formGroup"],["appearance","fill",1,"control-full-width"],["matInput","","type","text","placeholder","ID","formControlName","idControl"],["required","","formControlName","typeControl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","tagControl"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","New tag...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["matInput","","type","text","placeholder","Knowledge ID","formControlName","knowledgeControl"],["fxLayout","row","class","control-full-width",4,"ngIf"],[4,"ngIf"],["fxLayout","row",1,"control-full-width",2,"height","500px"],["fxFlex","50",4,"ngIf"],["fxFlex","",2,"height","100%","overflow-y","scroll"],["katex","",3,"data","katexOptions"],["mat-button","",3,"disabled","click"],["mat-button","",3,"click"],[3,"value"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],["fxLayout","row",1,"control-full-width"],["fxFlex","50"],["matInput","","type","text","disabled","",3,"placeholder","ngModel"],[1,"toolbar-spacer"],["mat-raised-button","",3,"click"],[2,"height","100%",3,"options","ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(d.Ub(0,"mat-card"),d.Ub(1,"mat-card-header"),d.Ub(2,"mat-card-title"),d.Dc(3),d.hc(4,"transloco"),d.Tb(),d.Ub(5,"mat-card-subtitle"),d.Dc(6),d.hc(7,"transloco"),d.Tb(),d.Tb(),d.Ub(8,"mat-card-content"),d.Ub(9,"form",0),d.Ub(10,"mat-form-field",1),d.Ub(11,"mat-label"),d.Dc(12,"#"),d.Tb(),d.Pb(13,"input",2),d.Tb(),d.Ub(14,"mat-form-field",1),d.Ub(15,"mat-label"),d.Dc(16),d.hc(17,"transloco"),d.Tb(),d.Ub(18,"mat-select",3),d.Cc(19,ie,3,4,"mat-option",4),d.Tb(),d.Tb(),d.Ub(20,"mat-form-field",1),d.Ub(21,"mat-label"),d.Dc(22),d.hc(23,"transloco"),d.Tb(),d.Ub(24,"mat-chip-list",5,6),d.Cc(26,ce,3,4,"mat-chip",7),d.Ub(27,"input",8),d.cc("matChipInputTokenEnd",function(e){return t.addTag(e)}),d.Tb(),d.Tb(),d.Tb(),d.Ub(28,"mat-form-field",1),d.Ub(29,"mat-label"),d.Dc(30),d.hc(31,"transloco"),d.Tb(),d.Pb(32,"input",9),d.Tb(),d.Tb(),d.Cc(33,oe,17,20,"div",10),d.Cc(34,ae,7,3,"mat-toolbar",11),d.Ub(35,"div",12),d.Cc(36,re,2,2,"div",13),d.Ub(37,"div",14),d.Pb(38,"markdown",15),d.Tb(),d.Tb(),d.Cc(39,le,8,3,"mat-toolbar",11),d.Ub(40,"div",12),d.Cc(41,se,2,2,"div",13),d.Ub(42,"div",14),d.Pb(43,"markdown",15),d.Tb(),d.Tb(),d.Tb(),d.Ub(44,"mat-card-actions"),d.Ub(45,"button",16),d.cc("click",function(){return t.onOK()}),d.Dc(46),d.hc(47,"transloco"),d.Tb(),d.Ub(48,"button",17),d.cc("click",function(){return t.onReturnToList()}),d.Dc(49),d.hc(50,"transloco"),d.Tb(),d.Ub(51,"button",16),d.cc("click",function(){return t.onCreateNewOne()}),d.Dc(52),d.hc(53,"transloco"),d.Tb(),d.Tb(),d.Tb()),2&e){var i=d.tc(25);d.Db(3),d.Ec(d.ic(4,25,"ExerciseItem")),d.Db(3),d.Ec(d.ic(7,27,t.currentMode)),d.Db(3),d.mc("formGroup",t.itemFormGroup),d.Db(7),d.Ec(d.ic(17,29,"Type")),d.Db(3),d.mc("ngForOf",t.arExerciseTypes),d.Db(3),d.Ec(d.ic(23,31,"Tags")),d.Db(4),d.mc("ngForOf",t.tags),d.Db(1),d.mc("matChipInputFor",i)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes)("matChipInputAddOnBlur",t.addOnBlur),d.Db(3),d.Ec(d.ic(31,33,"KnowledgeItem")),d.Db(3),d.mc("ngIf",!t.isCreateMode&&t.itemObject),d.Db(1),d.mc("ngIf",t.isCreateMode),d.Db(2),d.mc("ngIf",!t.isDisplayMode),d.Db(2),d.mc("data",t.content)("katexOptions",t.mathOptions),d.Db(1),d.mc("ngIf",t.isCreateMode),d.Db(2),d.mc("ngIf",t.isCreateMode),d.Db(2),d.mc("data",t.answerContent)("katexOptions",t.mathOptions),d.Db(2),d.mc("disabled",!(t.isEditable&&t.itemFormGroup.valid)),d.Db(1),d.Ec(d.ic(47,35,"Save")),d.Db(3),d.Ec(d.ic(50,37,"Common.ReturnToList")),d.Db(2),d.mc("disabled",!t.isDisplayMode),d.Db(1),d.Ec(d.ic(53,39,"Common.CreateAnotherOne"))}},directives:[J.a,J.d,J.g,J.f,J.c,a.u,a.n,a.g,Q.c,Q.g,X.b,a.c,a.m,a.e,W.a,a.s,o.l,Y.c,Y.b,o.m,Z.c,Z.a,l.a,J.b,M.b,ee.n,Y.a,te.a,Y.d,a.p,I.a,r.a],pipes:[s.d,o.e],styles:[".example-form[_ngcontent-%COMP%]{margin:8px;min-width:150px;max-width:500px;width:100%}.mat-card-actions[_ngcontent-%COMP%]{margin-top:10px}"]}),be),ue=c("2Vo4"),de=c("f0Cb"),pe=c("iadO"),he=c("bSwM"),fe=c("pFkP");function ge(e,t){if(1&e&&(d.Ub(0,"mat-option",26),d.Dc(1),d.hc(2,"transloco"),d.Tb()),2&e){var i=t.$implicit;d.mc("value",i.value),d.Db(1),d.Fc(" ",d.ic(2,2,i.displayas)," ")}}function ve(e,t){if(1&e&&(d.Ub(0,"mat-option",26),d.Dc(1),d.hc(2,"transloco"),d.Tb()),2&e){var i=t.$implicit;d.mc("value",i.value),d.Db(1),d.Fc(" ",d.ic(2,2,i.i18nterm)," ")}}function De(e,t){if(1&e){var i=d.Vb();d.Ub(0,"mat-form-field"),d.Ub(1,"input",27),d.cc("ngModelChange",function(e){return d.vc(i),d.gc().$implicit.value[0]=e}),d.hc(2,"transloco"),d.Tb(),d.Tb()}if(2&e){var n=d.gc().$implicit;d.Db(1),d.nc("placeholder",d.ic(2,2,"Value")),d.mc("ngModel",n.value[0])}}function Ce(e,t){if(1&e){var i=d.Vb();d.Ub(0,"mat-form-field"),d.Ub(1,"input",28),d.cc("ngModelChange",function(e){return d.vc(i),d.gc().$implicit.value[1]=e}),d.hc(2,"transloco"),d.Tb(),d.Tb()}if(2&e){var n=d.gc().$implicit;d.Db(1),d.nc("placeholder",d.ic(2,2,"Value")),d.mc("ngModel",n.value[1])}}function Te(e,t){if(1&e){var i=d.Vb();d.Ub(0,"mat-form-field"),d.Ub(1,"input",29),d.cc("ngModelChange",function(e){return d.vc(i),d.gc().$implicit.value[0]=e}),d.hc(2,"transloco"),d.Tb(),d.Tb()}if(2&e){var n=d.gc().$implicit;d.Db(1),d.nc("placeholder",d.ic(2,2,"Value")),d.mc("ngModel",n.value[0])}}function ye(e,t){if(1&e){var i=d.Vb();d.Ub(0,"mat-form-field"),d.Ub(1,"input",30),d.cc("ngModelChange",function(e){return d.vc(i),d.gc().$implicit.value[0]=e}),d.hc(2,"transloco"),d.Tb(),d.Pb(3,"mat-datepicker-toggle",31),d.Pb(4,"mat-datepicker",null,32),d.Tb()}if(2&e){var n=d.tc(5),c=d.gc().$implicit;d.Db(1),d.nc("placeholder",d.ic(2,4,"Value")),d.mc("ngModel",c.value[0])("matDatepicker",n),d.Db(2),d.mc("for",n)}}function we(e,t){if(1&e){var i=d.Vb();d.Ub(0,"mat-form-field"),d.Ub(1,"input",30),d.cc("ngModelChange",function(e){return d.vc(i),d.gc().$implicit.value[1]=e}),d.hc(2,"transloco"),d.Tb(),d.Pb(3,"mat-datepicker-toggle",31),d.Pb(4,"mat-datepicker",null,33),d.Tb()}if(2&e){var n=d.tc(5),c=d.gc().$implicit;d.Db(1),d.nc("placeholder",d.ic(2,4,"Value")),d.mc("ngModel",c.value[1])("matDatepicker",n),d.Db(2),d.mc("for",n)}}function Ue(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",34),d.Ub(1,"mat-checkbox",35),d.cc("ngModelChange",function(e){return d.vc(i),d.gc().$implicit.value[0]=e}),d.Tb(),d.Tb()}if(2&e){var n=d.gc().$implicit;d.Db(1),d.mc("ngModel",n.value[0])}}function xe(e,t){if(1&e){var i=d.Vb();d.Ub(0,"div",18),d.Ub(1,"mat-form-field"),d.Ub(2,"mat-select",19),d.cc("ngModelChange",function(e){return t.$implicit.fieldName=e})("selectionChange",function(){d.vc(i);var e=t.$implicit;return d.gc().onFieldSelectionChanged(e)}),d.hc(3,"transloco"),d.Cc(4,ge,3,4,"mat-option",20),d.Tb(),d.Tb(),d.Ub(5,"mat-form-field"),d.Ub(6,"mat-select",21),d.cc("ngModelChange",function(e){return t.$implicit.operator=e}),d.hc(7,"transloco"),d.Cc(8,ve,3,4,"mat-option",20),d.hc(9,"operatorFilter"),d.Tb(),d.Tb(),d.Cc(10,De,3,4,"mat-form-field",22),d.Cc(11,Ce,3,4,"mat-form-field",22),d.Cc(12,Te,3,4,"mat-form-field",22),d.Cc(13,ye,6,6,"mat-form-field",22),d.Cc(14,we,6,6,"mat-form-field",22),d.Cc(15,Ue,2,1,"div",23),d.Ub(16,"button",24),d.cc("click",function(){return d.vc(i),d.gc().onAddFilter()}),d.Ub(17,"mat-icon"),d.Dc(18,"add"),d.Tb(),d.Tb(),d.Ub(19,"button",25),d.cc("click",function(){d.vc(i);var e=t.index;return d.gc().onRemoveFilter(e)}),d.Ub(20,"mat-icon"),d.Dc(21,"close"),d.Tb(),d.Tb(),d.Tb()}if(2&e){var n=t.$implicit,c=d.gc();d.Db(2),d.nc("placeholder",d.ic(3,12,"Field")),d.mc("ngModel",n.fieldName),d.Db(2),d.mc("ngForOf",c.allFields),d.Db(2),d.nc("placeholder",d.ic(7,14,"Operator")),d.mc("ngModel",n.operator),d.Db(2),d.mc("ngForOf",d.jc(9,16,c.allOperators,n.valueType)),d.Db(2),d.mc("ngIf",1===n.valueType),d.Db(1),d.mc("ngIf",1===n.valueType),d.Db(1),d.mc("ngIf",2===n.valueType),d.Db(1),d.mc("ngIf",3===n.valueType),d.Db(1),d.mc("ngIf",3===n.valueType),d.Db(1),d.mc("ngIf",4===n.valueType)}}function Ie(e,t){1&e&&(d.Ub(0,"th",36),d.Dc(1,"#"),d.Tb())}function Me(e,t){if(1&e){var i=d.Vb();d.Ub(0,"td",37),d.Ub(1,"div"),d.Dc(2),d.Ub(3,"a",38),d.cc("click",function(){d.vc(i);var e=t.$implicit;return d.gc().onDisplayItem(e.ID)}),d.Dc(4),d.hc(5,"transloco"),d.Tb(),d.Tb(),d.Tb()}if(2&e){var n=t.$implicit;d.Db(2),d.Fc(" ",n.ID," "),d.Db(2),d.Ec(d.ic(5,2,"Common.Display"))}}function ke(e,t){1&e&&(d.Ub(0,"th",36),d.Dc(1),d.hc(2,"transloco"),d.Tb()),2&e&&(d.Db(1),d.Ec(d.ic(2,1,"Type")))}function Oe(e,t){if(1&e&&(d.Ub(0,"td",37),d.Dc(1),d.hc(2,"transloco"),d.Tb()),2&e){var i=t.$implicit,n=d.gc();d.Db(1),d.Ec(d.ic(2,1,n.getExerciseItemTypeName(i.ItemType)))}}function Ee(e,t){1&e&&(d.Ub(0,"th",36),d.Dc(1),d.hc(2,"transloco"),d.Tb()),2&e&&(d.Db(1),d.Ec(d.ic(2,1,"Tag")))}function Se(e,t){if(1&e&&(d.Ub(0,"td",37),d.Dc(1),d.Tb()),2&e){var i=t.$implicit;d.Db(1),d.Ec(i.Tags.toString())}}function Fe(e,t){1&e&&(d.Ub(0,"th",36),d.Dc(1),d.hc(2,"transloco"),d.Tb()),2&e&&(d.Db(1),d.Ec(d.ic(2,1,"KnowledgeItem")))}function je(e,t){if(1&e&&(d.Ub(0,"td",37),d.Dc(1),d.Tb()),2&e){var i=t.$implicit;d.Db(1),d.Ec(i.KnowledgeItemID)}}function Pe(e,t){1&e&&(d.Ub(0,"th",36),d.Dc(1),d.hc(2,"transloco"),d.Tb()),2&e&&(d.Db(1),d.Ec(d.ic(2,1,"CreatedAt")))}function Re(e,t){if(1&e&&(d.Ub(0,"td",37),d.Dc(1),d.hc(2,"date"),d.Tb()),2&e){var i=t.$implicit;d.Db(1),d.Ec(d.jc(2,1,i.CreatedAt,"yyyy-M-d HH:mm:ss"))}}function $e(e,t){1&e&&d.Pb(0,"tr",39)}function Ve(e,t){1&e&&d.Pb(0,"tr",40)}var Le,Ne,Ae,Ge=[{path:"",component:_},{path:"create",component:me},{path:"display/:id",component:me},{path:"edit/:id",component:me},{path:"search",component:(Le=function(){function t(i,n){e(this,t),this.odataService=i,this.router=n,this.filters=[],this.allOperators=[],this.allFields=[],this.filterEditable=!0,this.pageSize=20,this.pageSizeOptions=[20,40,60,100],this.isLoadingResults=!1,this.subjFilters=new ue.a([]),this.displayedColumns=["id","itemtype","tags","knowledgeitem","createdat"],this.dataSource=[],this.resultsLength=0,this.allOperators=w.z.getGeneralFilterOperatorDisplayStrings(),this.allFields=[{displayas:"Content",value:"Content",valueType:2},{displayas:"Tag",value:"Tags",valueType:2},{displayas:"Type",value:"ExerciseType",valueType:2}]}return i(t,[{key:"ngOnInit",value:function(){this.onAddFilter()}},{key:"ngAfterViewInit",value:function(){var e=this;this.subjFilters.subscribe(function(){return e.paginator.pageIndex=0}),Object(f.a)(this.subjFilters,this.paginator.page).pipe(Object(v.a)({}),Object(D.a)(function(){if(e.subjFilters.value.length<=0)return Object(g.a)([]);e.isLoadingResults=!0;var t=e.prepareFilters(e.subjFilters.value),i=e.paginator.pageSize;return e.odataService.searchExerciseItems(i,i*e.paginator.pageIndex,t)}),Object(C.a)(function(){return e.isLoadingResults=!1}),Object(T.a)(function(t){return e.resultsLength=t.totalCount,t.items}),Object(y.a)(function(){return Object(g.a)(void 0)})).subscribe({next:function(t){return e.dataSource=t},error:function(e){return console.log(e)}})}},{key:"getExerciseItemTypeName",value:function(e){return Object(w.B)(e)}},{key:"onAddFilter",value:function(){this.filters.push(new w.j)}},{key:"onRemoveFilter",value:function(e){this.filters.splice(e,1),0===this.filters.length&&this.onAddFilter()}},{key:"onFieldSelectionChanged",value:function(e){this.allFields.forEach(function(t){t.value===e.fieldName&&(e.valueType=t.valueType)})}},{key:"prepareFilters",value:function(e){var t="";e.sort(function(e,t){return e.fieldName.localeCompare(t.fieldName)});var i=e.map(function(e){return e.fieldName});return(i=Array.from(new Set(i))).forEach(function(i){var n="";e.forEach(function(e){e.fieldName===i&&("Content"!==e.fieldName&&"Tags"!==e.fieldName||(e.operator===w.k.Equal?n=n?"".concat(n," or ").concat(e.fieldName," eq '").concat(e.lowValue,"'"):"".concat(e.fieldName," eq '").concat(e.lowValue,"'"):e.operator===w.k.Like&&(n=n?"".concat(n," or contains(").concat(e.fieldName,",'").concat(e.lowValue,"')"):"contains(".concat(e.fieldName,",'").concat(e.lowValue,"')"))))}),t=t?"".concat(t," and ").concat(n):""+n}),t}},{key:"onSearch",value:function(){var e=[];this.filters.forEach(function(t){var i={};switch(i.valueType=+t.valueType,t.valueType){case w.l.boolean:case w.l.date:case w.l.number:break;case w.l.string:i.fieldName=t.fieldName,i.operator=+t.operator,i.lowValue=t.value[0],i.highValue=t.operator===w.k.Between?t.value[1]:""}e.push(i)}),this.subjFilters.next(e)}},{key:"onDisplayItem",value:function(e){this.router.navigate(["exercise-item","display",e.toString()])}},{key:"onGoToPreview",value:function(){var e=[];this.dataSource.forEach(function(t){e.push({refType:w.y.ExerciseItem,refId:t.ID})}),this.odataService.previewObjList=e,this.router.navigate(["preview"])}}]),t}(),Le.\u0275fac=function(e){return new(e||Le)(d.Ob(x.b),d.Ob(u.b))},Le.\u0275cmp=d.Ib({type:Le,selectors:[["app-exercise-item-search"]],viewQuery:function(e,t){var i;1&e&&d.Ic(p.a,3),2&e&&d.sc(i=d.dc())&&(t.paginator=i.first)},decls:44,vars:18,consts:[["class","demo-full-width",4,"ngFor","ngForOf"],[1,"control-full-width"],["mat-button","","aria-label","Search",3,"click"],[1,"table-container","mat-elevation-z8"],["color","primary"],["mat-flat-button","","color","primary",3,"click"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","itemtype"],["matColumnDef","tags"],["matColumnDef","knowledgeitem"],["matColumnDef","createdat"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[1,"demo-full-width"],[3,"placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"placeholder","ngModel","ngModelChange"],[4,"ngIf"],["class","typechkbox",4,"ngIf"],["mat-button","","mat-icon-button","","aria-label","Add",3,"click"],["mat-button","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["matInput","","type","number","name","lvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","","type","number","name","hvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","","type","text","name","lvalue_2",3,"placeholder","ngModel","ngModelChange"],["matInput","",3,"ngModel","matDatepicker","placeholder","ngModelChange"],["matSuffix","",3,"for"],["lvpicker",""],["hvpicker",""],[1,"typechkbox"],[3,"ngModel","ngModelChange"],["mat-header-cell",""],["mat-cell",""],["mat-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(d.Ub(0,"mat-card"),d.Ub(1,"mat-card-header"),d.Ub(2,"mat-card-title"),d.Dc(3),d.hc(4,"transloco"),d.Tb(),d.Ub(5,"mat-card-subtitle"),d.Dc(6),d.hc(7,"transloco"),d.Tb(),d.Tb(),d.Ub(8,"mat-card-content"),d.Ub(9,"div"),d.Cc(10,xe,22,19,"div",0),d.Ub(11,"div",1),d.Ub(12,"button",2),d.cc("click",function(){return t.onSearch()}),d.Ub(13,"mat-icon"),d.Dc(14,"search"),d.Tb(),d.Dc(15),d.hc(16,"transloco"),d.Tb(),d.Tb(),d.Tb(),d.Pb(17,"mat-divider"),d.Ub(18,"div",3),d.Ub(19,"mat-toolbar",4),d.Ub(20,"mat-toolbar-row"),d.Ub(21,"button",5),d.cc("click",function(){return t.onGoToPreview()}),d.Dc(22),d.hc(23,"transloco"),d.Tb(),d.Tb(),d.Tb(),d.Ub(24,"div",6),d.Ub(25,"table",7),d.Sb(26,8),d.Cc(27,Ie,2,0,"th",9),d.Cc(28,Me,6,4,"td",10),d.Rb(),d.Sb(29,11),d.Cc(30,ke,3,3,"th",9),d.Cc(31,Oe,3,3,"td",10),d.Rb(),d.Sb(32,12),d.Cc(33,Ee,3,3,"th",9),d.Cc(34,Se,2,1,"td",10),d.Rb(),d.Sb(35,13),d.Cc(36,Fe,3,3,"th",9),d.Cc(37,je,2,1,"td",10),d.Rb(),d.Sb(38,14),d.Cc(39,Pe,3,3,"th",9),d.Cc(40,Re,3,4,"td",10),d.Rb(),d.Cc(41,$e,1,0,"tr",15),d.Cc(42,Ve,1,0,"tr",16),d.Tb(),d.Tb(),d.Pb(43,"mat-paginator",17),d.Tb(),d.Tb(),d.Tb()),2&e&&(d.Db(3),d.Ec(d.ic(4,10,"ExerciseItem")),d.Db(3),d.Ec(d.ic(7,12,"Common.Search")),d.Db(4),d.mc("ngForOf",t.filters),d.Db(5),d.Fc(" ",d.ic(16,14,"Common.Search")," "),d.Db(7),d.Ec(d.ic(23,16,"Common.Preview")),d.Db(3),d.mc("dataSource",t.dataSource),d.Db(16),d.mc("matHeaderRowDef",t.displayedColumns),d.Db(1),d.mc("matRowDefColumns",t.displayedColumns),d.Db(1),d.mc("length",t.resultsLength)("pageSize",10))},directives:[J.a,J.d,J.g,J.f,J.c,o.l,M.b,te.a,de.a,I.a,I.c,k.j,k.c,k.e,k.b,k.g,k.i,p.a,Q.c,W.a,a.m,a.p,o.m,ee.n,X.b,a.q,a.c,pe.d,pe.f,Q.i,pe.c,he.a,k.d,k.a,M.a,k.f,k.h],pipes:[s.d,fe.a,o.e],styles:[".table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;margin-top:16px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.data-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.mat-column-id[_ngcontent-%COMP%]{max-width:300px;width:250px}.mat-column-itemtype[_ngcontent-%COMP%]{max-width:120px;width:120px}.mat-column-tags[_ngcontent-%COMP%]{max-width:250px;width:150px}.mat-column-created[_ngcontent-%COMP%]{max-width:120px;width:120px}"]}),Le)}],_e=((Ne=function t(){e(this,t)}).\u0275fac=function(e){return new(e||Ne)},Ne.\u0275mod=d.Mb({type:Ne}),Ne.\u0275inj=d.Lb({imports:[[u.d.forChild(Ge)],u.d]}),Ne),He=c("iasb"),ze=((Ae=function t(){e(this,t)}).\u0275fac=function(e){return new(e||Ae)},Ae.\u0275mod=d.Mb({type:Ae}),Ae.\u0275inj=d.Lb({providers:[],imports:[[o.c,a.h,a.r,b.a,m.a,r.b,l.b.forChild(),_e,s.c,He.a]]}),Ae)}}])}();