(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{V7M2:function(t,e,o){"use strict";o.r(e),o.d(e,"ExerciseItemsModule",function(){return at});var n=o("ofXK"),i=o("3Pt+"),a=o("yvwu"),r=o("lR5k"),c=o("QPBi"),s=o("jIBr"),l=o("dcRk"),b=o("tyNb"),d=o("M9IT"),m=o("Dh3D"),p=o("VRyK"),u=o("LRne"),h=o("JX91"),g=o("eIep"),f=o("lJxs"),C=o("JIr8"),S=o("NUjs"),T=o("fXoL"),v=o("o0su"),w=o("/t3+"),x=o("bTqV"),O=o("+0xr"),I=o("Xa2L");function D(t,e){1&t&&T.Ob(0,"mat-progress-spinner")}function y(t,e){if(1&t&&(T.Tb(0,"div",16),T.Dc(1,D,1,0,"mat-progress-spinner",17),T.Sb()),2&t){const t=T.fc();T.Cb(1),T.lc("ngIf",t.isLoadingResults)}}function E(t,e){1&t&&(T.Tb(0,"th",18),T.Ec(1,"#"),T.Sb())}function F(t,e){if(1&t&&(T.Tb(0,"td",19),T.Tb(1,"div"),T.Ec(2),T.Tb(3,"a",20),T.Ec(4),T.gc(5,"transloco"),T.Sb(),T.Tb(6,"a",20),T.Ec(7),T.gc(8,"transloco"),T.Sb(),T.Sb(),T.Sb()),2&t){const t=e.$implicit;T.Cb(2),T.Gc(" ",t.ID," "),T.Cb(1),T.nc("routerLink","display/",t.ID,""),T.Cb(1),T.Fc(T.hc(5,5,"Display")),T.Cb(2),T.nc("routerLink","edit/",t.ID,""),T.Cb(1),T.Fc(T.hc(8,7,"Change"))}}function M(t,e){1&t&&(T.Tb(0,"th",18),T.Ec(1),T.gc(2,"transloco"),T.Sb()),2&t&&(T.Cb(1),T.Fc(T.hc(2,1,"Type")))}function k(t,e){if(1&t&&(T.Tb(0,"td",19),T.Ec(1),T.gc(2,"transloco"),T.Sb()),2&t){const t=e.$implicit,o=T.fc();T.Cb(1),T.Fc(T.hc(2,1,o.getExerciseItemTypeName(t.ItemType)))}}function _(t,e){1&t&&(T.Tb(0,"th",18),T.Ec(1),T.gc(2,"transloco"),T.Sb()),2&t&&(T.Cb(1),T.Fc(T.hc(2,1,"KnowledgeItem")))}function j(t,e){if(1&t&&(T.Tb(0,"td",19),T.Ec(1),T.Sb()),2&t){const t=e.$implicit;T.Cb(1),T.Fc(t.KnowledgeItemID)}}function A(t,e){1&t&&(T.Tb(0,"th",18),T.Ec(1,"Created At"),T.Sb())}function G(t,e){if(1&t&&(T.Tb(0,"td",19),T.Ec(1),T.Sb()),2&t){const t=e.$implicit;T.Cb(1),T.Fc(t.CreatedAt)}}function R(t,e){1&t&&T.Ob(0,"tr",21)}function L(t,e){1&t&&T.Ob(0,"tr",22)}let N=(()=>{class t{constructor(t){this.odataService=t,this.displayedColumns=["id","itemtype","knowledgeitem","createdat"],this.data=[],this.resultsLength=0,this.isLoadingResults=!0}getExerciseItemTypeName(t){return Object(S.b)(t)}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),Object(p.a)(this.sort.sortChange,this.paginator.page).pipe(Object(h.a)({}),Object(g.a)(()=>(this.isLoadingResults=!0,this.odataService.getExerciseItems())),Object(f.a)(t=>(this.isLoadingResults=!1,this.resultsLength=t.totalCount,t.items)),Object(C.a)(()=>(this.isLoadingResults=!1,Object(u.a)([])))).subscribe(t=>this.data=t)}}return t.\u0275fac=function(e){return new(e||t)(T.Nb(v.b))},t.\u0275cmp=T.Hb({type:t,selectors:[["app-exercise-items"]],viewQuery:function(t,e){if(1&t&&(T.Ic(d.a,!0),T.Ic(m.a,!0)),2&t){let t;T.rc(t=T.cc())&&(e.paginator=t.first),T.rc(t=T.cc())&&(e.sort=t.first)}},decls:29,vars:12,consts:[[1,"example-spacer"],[1,"example-button-row"],["mat-stroked-button","","routerLink","create"],[1,"example-container","mat-elevation-z8"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container"],["mat-table","","matSort","","matSortActive","createdat",1,"example-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","itemtype"],["matColumnDef","knowledgeitem"],["matColumnDef","createdat"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[1,"example-loading-shade"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-button","",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(T.Tb(0,"mat-toolbar-row"),T.Tb(1,"span"),T.Ec(2),T.gc(3,"transloco"),T.Sb(),T.Ob(4,"span",0),T.Tb(5,"section"),T.Tb(6,"div",1),T.Tb(7,"a",2),T.Ec(8),T.gc(9,"transloco"),T.Sb(),T.Sb(),T.Sb(),T.Sb(),T.Tb(10,"div",3),T.Dc(11,y,2,1,"div",4),T.Tb(12,"div",5),T.Tb(13,"table",6),T.Rb(14,7),T.Dc(15,E,2,0,"th",8),T.Dc(16,F,9,9,"td",9),T.Qb(),T.Rb(17,10),T.Dc(18,M,3,3,"th",8),T.Dc(19,k,3,3,"td",9),T.Qb(),T.Rb(20,11),T.Dc(21,_,3,3,"th",8),T.Dc(22,j,2,1,"td",9),T.Qb(),T.Rb(23,12),T.Dc(24,A,2,0,"th",8),T.Dc(25,G,2,1,"td",9),T.Qb(),T.Dc(26,R,1,0,"tr",13),T.Dc(27,L,1,0,"tr",14),T.Sb(),T.Sb(),T.Ob(28,"mat-paginator",15),T.Sb()),2&t&&(T.Cb(2),T.Fc(T.hc(3,8,"ExerciseItem")),T.Cb(6),T.Fc(T.hc(9,10,"Create")),T.Cb(3),T.lc("ngIf",e.isLoadingResults),T.Cb(2),T.lc("dataSource",e.data),T.Cb(13),T.lc("matHeaderRowDef",e.displayedColumns),T.Cb(1),T.lc("matRowDefColumns",e.displayedColumns),T.Cb(1),T.lc("length",e.resultsLength)("pageSize",30))},directives:[w.c,x.a,b.c,n.l,O.j,m.a,O.c,O.e,O.b,O.g,O.i,d.a,I.a,O.d,O.a,O.f,O.h],pipes:[c.d],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.example-table-container[_ngcontent-%COMP%]{position:relative;max-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached[_ngcontent-%COMP%]{color:#980000;max-width:360px;text-align:center}.mat-column-number[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%]{max-width:64px}.mat-column-created[_ngcontent-%COMP%]{max-width:124px}"]}),t})();var P=o("jtHE"),K=o("FtGj"),U=o("HKRH"),$=o("0IaG"),H=o("Wp6s"),Q=o("kmnG"),V=o("qFsG"),z=o("iadO"),B=o("A5z7"),J=o("XiUz"),X=o("NFeN");function q(t,e){1&t&&(T.Tb(0,"mat-icon",28),T.Ec(1,"cancel"),T.Sb())}function W(t,e){if(1&t){const t=T.Ub();T.Tb(0,"mat-chip",26),T.bc("removed",function(){T.uc(t);const o=e.$implicit;return T.fc().removeTag(o)}),T.Ec(1),T.Dc(2,q,2,0,"mat-icon",27),T.Sb()}if(2&t){const t=e.$implicit,o=T.fc();T.lc("selectable",o.selectable)("removable",o.isEditable),T.Cb(1),T.Gc(" ",t," "),T.Cb(1),T.lc("ngIf",o.isEditable)}}function Y(t,e){if(1&t){const t=T.Ub();T.Tb(0,"mat-toolbar"),T.Tb(1,"h3"),T.Ec(2),T.gc(3,"transloco"),T.Sb(),T.Ob(4,"div",29),T.Tb(5,"button",30),T.bc("click",function(){return T.uc(t),T.fc().openUploadDialog()}),T.Ec(6,"Upload"),T.Sb(),T.Sb()}2&t&&(T.Cb(2),T.Fc(T.hc(3,1,"Content")))}function Z(t,e){if(1&t){const t=T.Ub();T.Tb(0,"div",31),T.Tb(1,"ngx-monaco-editor",32),T.bc("ngModelChange",function(e){return T.uc(t),T.fc().content=e}),T.Sb(),T.Sb()}if(2&t){const t=T.fc();T.Cb(1),T.lc("options",t.editorOptions)("ngModel",t.content)}}function tt(t,e){if(1&t){const t=T.Ub();T.Tb(0,"mat-toolbar"),T.Tb(1,"h3"),T.Ec(2),T.gc(3,"transloco"),T.Sb(),T.Ob(4,"div",29),T.Tb(5,"button",30),T.bc("click",function(){return T.uc(t),T.fc().openAnswerUploadDialog()}),T.Tb(6,"mat-icon"),T.Ec(7,"file_upload"),T.Sb(),T.Sb(),T.Sb()}2&t&&(T.Cb(2),T.Fc(T.hc(3,1,"Answer")))}function et(t,e){if(1&t){const t=T.Ub();T.Tb(0,"div",31),T.Tb(1,"ngx-monaco-editor",32),T.bc("ngModelChange",function(e){return T.uc(t),T.fc().answerContent=e}),T.Sb(),T.Sb()}if(2&t){const t=T.fc();T.Cb(1),T.lc("options",t.editorOptions)("ngModel",t.answerContent)}}let ot=(()=>{class t{constructor(t,e,o,n){this.dialog=t,this.activateRoute=e,this.router=o,this.odataService=n,this.routerID=-1,this.editorOptions={theme:"vs-dark"},this.content="New Exercise Item",this.answerContent="",this.mathOptions={displayMode:!0,throwOnError:!1,errorColor:"#cc0000"},this.selectable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[K.g,K.c],this.tags=[],this.itemFormGroup=new i.f({idControl:new i.d({value:null,disabled:!0}),typeControl:new i.d,createdAtControl:new i.d({value:null,disabled:!0}),modifiedAtControl:new i.d({value:null,disabled:!0}),knowledgeControl:new i.d,tagControl:new i.d}),this.currentMode="Create"}get isDisplayMode(){return"Display"===this.currentMode}get isCreateMode(){return"Create"===this.currentMode}get isEditable(){return"Create"===this.currentMode||"Change"===this.currentMode}ngOnInit(){this._destroyed$=new P.a(1),this.activateRoute.url.subscribe({next:t=>{t instanceof Array&&t.length>0&&("create"===t[0].path?(this.routerID=-1,this.currentMode="Create"):"edit"===t[0].path?(this.routerID=+t[1].path,this.currentMode="Change"):"display"===t[0].path&&(this.routerID=+t[1].path,this.currentMode="Display")),-1!==this.routerID&&this.odataService.readExerciseItem(this.routerID).subscribe({next:t=>{this.onSetItemData(t),this._itemObject=t},error:t=>{console.error(t)}})},error:t=>{console.error(t)}})}ngOnDestroy(){this._destroyed$&&(this._destroyed$.complete(),this._destroyed$=void 0)}onOK(){if("Create"===this.currentMode){if(!this.itemFormGroup.valid)return void(this.itemFormGroup.errors&&console.error(this.itemFormGroup.errors));this._itemObject=new S.a,this._itemObject.ItemType=this.itemFormGroup.get("typeControl").value,this._itemObject.Content=this.content,this._itemObject.Tags=this.tags,this._itemObject.Answer=this.answerContent,this.odataService.createExerciseItem(this._itemObject).subscribe({next:t=>{this.router.navigate(["/exercise-item/display",t.ID])},error:t=>{console.error(t)}})}else if("Change"===this.currentMode){if(!this.itemFormGroup.valid)return void(this.itemFormGroup.errors&&console.log(this.itemFormGroup.errors));this._itemObject&&(this._itemObject.ItemType=this.itemFormGroup.get("typeControl").value,this._itemObject.Content=this.content,this._itemObject.Tags=this.tags,this._itemObject.Answer=this.answerContent,this.odataService.changeExerciseItem(this._itemObject).subscribe({next:t=>{this.router.navigate(["/exercise-item/display",t.ID])},error:t=>{console.error(t)}}))}}openUploadDialog(){this.dialog.open(U.a,{width:"50%",height:"50%"}).afterClosed().subscribe({next:t=>{console.log(t),t.forEach(t=>{this.content+=`\n![Img](${t.url})\n          `})}})}openAnswerUploadDialog(){this.dialog.open(U.a,{width:"50%",height:"50%"}).afterClosed().subscribe({next:t=>{console.log(t),t.forEach(t=>{this.answerContent+=`\n  ![Img](${t.url})\n            `})}})}addTag(t){const e=t.input,o=t.value;(o||"").trim()&&this.tags.push(o.trim()),e&&(e.value="")}removeTag(t){const e=this.tags.indexOf(t);e>=0&&this.tags.splice(e,1)}onSetItemData(t){var e,o,n,i,a;null===(e=this.itemFormGroup.get("idControl"))||void 0===e||e.setValue(t.ID),null===(o=this.itemFormGroup.get("idControl"))||void 0===o||o.disable(),null===(n=this.itemFormGroup.get("typeControl"))||void 0===n||n.setValue(t.ItemType),null===(i=this.itemFormGroup.get("createdAtControl"))||void 0===i||i.setValue(t.CreatedAt),null===(a=this.itemFormGroup.get("modifiedAtControl"))||void 0===a||a.setValue(t.ModifiedAt),this.content=t.Content,this.tags=t.Tags,"Display"===this.currentMode?this.itemFormGroup.disable():this.itemFormGroup.markAsPristine()}}return t.\u0275fac=function(e){return new(e||t)(T.Nb($.a),T.Nb(b.a),T.Nb(b.b),T.Nb(v.b))},t.\u0275cmp=T.Hb({type:t,selectors:[["app-exercise-item-detail"]],decls:74,vars:43,consts:[[3,"formGroup"],["appearance","fill",1,"control-full-width"],["matInput","","type","text","placeholder","ID","formControlName","idControl"],["matNativeControl","","required","","formControlName","typeControl"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["matInput","","formControlName","createdAtControl",3,"matDatepicker"],["matSuffix","",3,"for"],["createdAt",""],["matInput","","formControlName","modifiedAtControl",3,"matDatepicker"],["modifiedAt",""],["formControlName","tagControl"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","New tag...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["matInput","","type","text","placeholder","Knowledge ID","formControlName","knowledgeControl"],[4,"ngIf"],["fxLayout","row",1,"control-full-width",2,"height","500px"],["fxFlex","50",4,"ngIf"],["fxFlex",""],["emoji","","katex","",3,"data","katexOptions"],["mat-button","",3,"disabled","click"],["mat-button",""],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[1,"toolbar-spacer"],["mat-raised-button","",3,"click"],["fxFlex","50"],[2,"height","100%",3,"options","ngModel","ngModelChange"]],template:function(t,e){if(1&t&&(T.Tb(0,"mat-card"),T.Tb(1,"mat-card-header"),T.Tb(2,"mat-card-title"),T.Ec(3),T.gc(4,"transloco"),T.Sb(),T.Tb(5,"mat-card-subtitle"),T.Ec(6),T.Sb(),T.Sb(),T.Tb(7,"mat-card-content"),T.Tb(8,"form",0),T.Tb(9,"mat-form-field",1),T.Tb(10,"mat-label"),T.Ec(11,"#"),T.Sb(),T.Ob(12,"input",2),T.Sb(),T.Tb(13,"mat-form-field",1),T.Tb(14,"mat-label"),T.Ec(15),T.gc(16,"transloco"),T.Sb(),T.Tb(17,"select",3),T.Tb(18,"option",4),T.Ec(19,"Question"),T.Sb(),T.Tb(20,"option",5),T.Ec(21,"Single-Choice"),T.Sb(),T.Tb(22,"option",6),T.Ec(23,"Multiple-Choice"),T.Sb(),T.Tb(24,"option",7),T.Ec(25,"Short-Answer"),T.Sb(),T.Tb(26,"option",8),T.Ec(27,"Essay Questions"),T.Sb(),T.Sb(),T.Sb(),T.Tb(28,"mat-form-field",1),T.Tb(29,"mat-label"),T.Ec(30),T.gc(31,"transloco"),T.Sb(),T.Ob(32,"input",9),T.Ob(33,"mat-datepicker-toggle",10),T.Ob(34,"mat-datepicker",null,11),T.Sb(),T.Tb(36,"mat-form-field",1),T.Tb(37,"mat-label"),T.Ec(38),T.gc(39,"transloco"),T.Sb(),T.Ob(40,"input",12),T.Ob(41,"mat-datepicker-toggle",10),T.Ob(42,"mat-datepicker",null,13),T.Sb(),T.Tb(44,"mat-form-field",1),T.Tb(45,"mat-label"),T.Ec(46),T.gc(47,"transloco"),T.Sb(),T.Tb(48,"mat-chip-list",14,15),T.Dc(50,W,3,4,"mat-chip",16),T.Tb(51,"input",17),T.bc("matChipInputTokenEnd",function(t){return e.addTag(t)}),T.Sb(),T.Sb(),T.Sb(),T.Tb(52,"mat-form-field",1),T.Tb(53,"mat-label"),T.Ec(54),T.gc(55,"transloco"),T.Sb(),T.Ob(56,"input",18),T.Sb(),T.Sb(),T.Dc(57,Y,7,3,"mat-toolbar",19),T.Tb(58,"div",20),T.Dc(59,Z,2,2,"div",21),T.Tb(60,"div",22),T.Ob(61,"markdown",23),T.Sb(),T.Sb(),T.Dc(62,tt,8,3,"mat-toolbar",19),T.Tb(63,"div",20),T.Dc(64,et,2,2,"div",21),T.Tb(65,"div",22),T.Ob(66,"markdown",23),T.Sb(),T.Sb(),T.Sb(),T.Tb(67,"mat-card-actions"),T.Tb(68,"button",24),T.bc("click",function(){return e.onOK()}),T.Ec(69),T.gc(70,"transloco"),T.Sb(),T.Tb(71,"button",25),T.Ec(72),T.gc(73,"transloco"),T.Sb(),T.Sb(),T.Sb()),2&t){const t=T.sc(35),o=T.sc(43),n=T.sc(49);T.Cb(3),T.Fc(T.hc(4,27,"ExerciseItem")),T.Cb(3),T.Fc(e.currentMode),T.Cb(2),T.lc("formGroup",e.itemFormGroup),T.Cb(7),T.Fc(T.hc(16,29,"Type")),T.Cb(15),T.Fc(T.hc(31,31,"CreatedAt")),T.Cb(2),T.lc("matDatepicker",t),T.Cb(1),T.lc("for",t),T.Cb(5),T.Fc(T.hc(39,33,"ModifiedAt")),T.Cb(2),T.lc("matDatepicker",o),T.Cb(1),T.lc("for",o),T.Cb(5),T.Fc(T.hc(47,35,"Tags")),T.Cb(4),T.lc("ngForOf",e.tags),T.Cb(1),T.lc("matChipInputFor",n)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",e.addOnBlur),T.Cb(3),T.Fc(T.hc(55,37,"KnowledgeItem")),T.Cb(3),T.lc("ngIf",e.isCreateMode),T.Cb(2),T.lc("ngIf",!e.isDisplayMode),T.Cb(2),T.lc("data",e.content)("katexOptions",e.mathOptions),T.Cb(1),T.lc("ngIf",e.isCreateMode),T.Cb(2),T.lc("ngIf",e.isCreateMode),T.Cb(2),T.lc("data",e.answerContent)("katexOptions",e.mathOptions),T.Cb(2),T.lc("disabled",!(e.isEditable&&e.itemFormGroup.valid)),T.Cb(1),T.Fc(T.hc(70,39,"Save")),T.Cb(3),T.Fc(T.hc(73,41,"Cancel"))}},directives:[H.a,H.d,H.g,H.f,H.c,i.x,i.n,i.g,Q.c,Q.g,V.b,i.c,i.m,i.e,i.u,i.t,i.q,i.w,z.b,z.d,Q.i,z.a,B.c,n.k,B.b,n.l,J.c,J.a,r.a,H.b,x.b,B.a,X.a,B.d,w.a,a.a,i.p],pipes:[c.d],styles:[".example-form[_ngcontent-%COMP%]{margin:8px;min-width:150px;max-width:500px;width:100%}.control-full-width[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%]{padding-right:8px}table[_ngcontent-%COMP%]{width:100%}.mat-card-actions[_ngcontent-%COMP%]{margin-top:10px}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),t})();const nt=[{path:"",component:N},{path:"create",component:ot},{path:"display/:id",component:ot},{path:"edit/:id",component:ot}];let it=(()=>{class t{}return t.\u0275mod=T.Lb({type:t}),t.\u0275inj=T.Kb({factory:function(e){return new(e||t)},imports:[[b.d.forChild(nt)],b.d]}),t})(),at=(()=>{class t{}return t.\u0275mod=T.Lb({type:t}),t.\u0275inj=T.Kb({factory:function(e){return new(e||t)},imports:[[n.c,i.h,i.s,s.a,l.a,a.b,r.b.forChild(),it,c.c]]}),t})()}}]);