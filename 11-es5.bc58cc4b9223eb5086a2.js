!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,o,a){return o&&t(e.prototype,o),a&&t(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{V7M2:function(t,a,c){"use strict";c.r(a),c.d(a,"ExerciseItemsModule",function(){return Vt});var n=c("ofXK"),i=c("3Pt+"),r=c("0LvA"),l=c("lR5k"),s=c("QPBi"),b=c("jIBr"),u=c("dcRk"),d=c("tyNb"),m=c("fXoL"),p=c("M9IT"),f=c("Dh3D"),h=c("VRyK"),g=c("LRne"),v=c("JX91"),E=c("eIep"),V=c("nYR2"),x=c("lJxs"),C=c("JIr8"),k=c("VHTt"),y=c("NUjs"),w=c("0IaG"),W=c("kmnG"),I=c("qFsG"),F=c("MutI"),M=c("bTqV"),j=["colls"];function S(e,t){if(1&e&&(m.Wb(0,"mat-list-option",9),m.Fc(1),m.Vb()),2&e){var o=t.$implicit,a=m.ic();m.oc("disabled",a.isItemExistedInColl(o))("value",o.ID),m.Eb(1),m.Hc(" ",o.Name," ")}}var D,O,T=((O=function(){function t(o,a){e(this,t),this.dialogRef=o,this.data=a}return o(t,[{key:"ngAfterViewInit",value:function(){var e=this;this.colls.selectionChange.subscribe({next:function(t){e.data.collids=[],e.colls.selectedOptions.selected.forEach(function(t){e.data.collids.push(+t.value)})},error:function(e){}})}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"isItemExistedInColl",value:function(e){var t=this;return-1!==e.Items.findIndex(function(e){return e.RefID===t.data.excitemid&&e.RefType===k.D.ExerciseItem})}}]),t}()).\u0275fac=function(e){return new(e||O)(m.Qb(w.g),m.Qb(w.a))},O.\u0275cmp=m.Kb({type:O,selectors:[["app-exercise-item-addcoll-dlg"]],viewQuery:function(e,t){var o;1&e&&m.Kc(j,1),2&e&&m.uc(o=m.fc())&&(t.colls=o.first)},decls:21,vars:13,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","fill",1,"control-full-width"],["matInput","","disabled","","name","excitemid",3,"ngModel","ngModelChange"],["colls",""],[3,"disabled","value",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"disabled","mat-dialog-close"],[3,"disabled","value"]],template:function(e,t){1&e&&(m.Wb(0,"h1",0),m.Fc(1),m.jc(2,"transloco"),m.Vb(),m.Wb(3,"div",1),m.Wb(4,"div"),m.Wb(5,"mat-form-field",2),m.Wb(6,"mat-label"),m.Fc(7,"ID"),m.Vb(),m.Wb(8,"input",3),m.ec("ngModelChange",function(e){return t.data.excitemid=e}),m.Vb(),m.Vb(),m.Wb(9,"mat-label"),m.Fc(10),m.jc(11,"transloco"),m.Vb(),m.Wb(12,"mat-selection-list",null,4),m.Ec(14,S,2,3,"mat-list-option",5),m.Vb(),m.Vb(),m.Vb(),m.Wb(15,"div",6),m.Wb(16,"button",7),m.ec("click",function(){return t.onNoClick()}),m.Fc(17),m.jc(18,"transloco"),m.Vb(),m.Wb(19,"button",8),m.Fc(20,"OK"),m.Vb(),m.Vb()),2&e&&(m.Eb(1),m.Gc(m.kc(2,7,"AddToCollection")),m.Eb(7),m.oc("ngModel",t.data.excitemid),m.Eb(2),m.Gc(m.kc(11,9,"UserCollection")),m.Eb(4),m.oc("ngForOf",t.data.availableColls),m.Eb(3),m.Gc(m.kc(18,11,"Common.NoThanks")),m.Eb(2),m.oc("disabled",t.data.collids.length<=0)("mat-dialog-close",t.data))},directives:[w.h,w.e,W.c,W.g,I.b,i.c,i.n,i.q,F.f,n.l,w.c,M.b,w.d,F.d],pipes:[s.d],encapsulation:2}),O),N=((D=function(){function t(o,a){e(this,t),this.dialogRef=o,this.data=a}return o(t,[{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"isOKDisabled",get:function(){return null==this.data.score||isNaN(+this.data.score)}}]),t}()).\u0275fac=function(e){return new(e||D)(m.Qb(w.g),m.Qb(w.a))},D.\u0275cmp=m.Kb({type:D,selectors:[["app-exercise-item-newscore-dlg"]],decls:24,vars:14,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","fill",1,"control-full-width"],["matInput","","disabled","","name","excitemid",3,"ngModel","ngModelChange"],["matInput","","disabled","","name","date",3,"ngModel","ngModelChange"],["matInput","","type","number","name","score",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"disabled","mat-dialog-close"]],template:function(e,t){1&e&&(m.Wb(0,"h1",0),m.Fc(1),m.jc(2,"transloco"),m.Vb(),m.Wb(3,"div",1),m.Wb(4,"form"),m.Wb(5,"mat-form-field",2),m.Wb(6,"mat-label"),m.Fc(7,"ID"),m.Vb(),m.Wb(8,"input",3),m.ec("ngModelChange",function(e){return t.data.excitemid=e}),m.Vb(),m.Vb(),m.Wb(9,"mat-form-field",2),m.Wb(10,"mat-label"),m.Fc(11,"Date"),m.Vb(),m.Wb(12,"input",4),m.ec("ngModelChange",function(e){return t.data.pracDate=e}),m.Vb(),m.Vb(),m.Wb(13,"mat-form-field",2),m.Wb(14,"mat-label"),m.Fc(15),m.jc(16,"transloco"),m.Vb(),m.Wb(17,"input",5),m.ec("ngModelChange",function(e){return t.data.score=e}),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(18,"div",6),m.Wb(19,"button",7),m.ec("click",function(){return t.onNoClick()}),m.Fc(20),m.jc(21,"transloco"),m.Vb(),m.Wb(22,"button",8),m.Fc(23,"OK"),m.Vb(),m.Vb()),2&e&&(m.Eb(1),m.Gc(m.kc(2,8,"NewPractice")),m.Eb(7),m.oc("ngModel",t.data.excitemid),m.Eb(4),m.oc("ngModel",t.data.pracDate),m.Eb(3),m.Gc(m.kc(16,10,"Quiz.Score")),m.Eb(2),m.oc("ngModel",t.data.score),m.Eb(3),m.Gc(m.kc(21,12,"Common.NoThanks")),m.Eb(2),m.oc("disabled",t.isOKDisabled)("mat-dialog-close",t.data))},directives:[w.h,w.e,i.v,i.o,i.p,W.c,W.g,I.b,i.c,i.n,i.q,i.r,w.c,M.b,w.d],pipes:[s.d],encapsulation:2}),D),R=c("o0su"),G=c("/t3+"),P=c("Qu3c"),U=c("NFeN"),$=c("+0xr");function L(e,t){1&e&&(m.Wb(0,"th",19),m.Fc(1,"#"),m.Vb())}function _(e,t){if(1&e){var o=m.Xb();m.Wb(0,"td",20),m.Wb(1,"div"),m.Fc(2),m.Wb(3,"button",21),m.ec("click",function(){m.xc(o);var e=t.$implicit;return m.ic().onDisplayItem(e.ID)}),m.jc(4,"transloco"),m.Wb(5,"mat-icon"),m.Fc(6,"launch"),m.Vb(),m.Vb(),m.Wb(7,"button",4),m.ec("click",function(){m.xc(o);var e=t.$implicit;return m.ic().onChangeItem(e.ID)}),m.jc(8,"transloco"),m.Wb(9,"mat-icon"),m.Fc(10,"edit"),m.Vb(),m.Vb(),m.Wb(11,"button",4),m.ec("click",function(){m.xc(o);var e=t.$implicit;return m.ic().onAddToCollection(e.ID)}),m.jc(12,"transloco"),m.Wb(13,"mat-icon"),m.Fc(14,"add_to_queue"),m.Vb(),m.Vb(),m.Wb(15,"button",4),m.ec("click",function(){m.xc(o);var e=t.$implicit;return m.ic().onNewPractice(e.ID)}),m.jc(16,"transloco"),m.Wb(17,"mat-icon"),m.Fc(18,"ballot"),m.Vb(),m.Vb(),m.Wb(19,"button",22),m.ec("click",function(){m.xc(o);var e=t.$implicit;return m.ic().onDeleteItem(e.ID)}),m.jc(20,"transloco"),m.Wb(21,"mat-icon"),m.Fc(22,"remove_circle"),m.Vb(),m.Vb(),m.Vb(),m.Vb()}if(2&e){var a=t.$implicit,c=m.ic();m.Eb(2),m.Hc(" ",a.ID," "),m.Eb(1),m.pc("matTooltip",m.kc(4,11,"Common.Display")),m.oc("disabled",!c.isExpertMode),m.Eb(4),m.pc("matTooltip",m.kc(8,13,"Common.Change")),m.oc("disabled",!c.isExpertMode),m.Eb(4),m.pc("matTooltip",m.kc(12,15,"AddToCollection")),m.oc("disabled",!c.isExpertMode),m.Eb(4),m.pc("matTooltip",m.kc(16,17,"NewPractice")),m.oc("disabled",!c.isExpertMode),m.Eb(4),m.pc("matTooltip",m.kc(20,19,"Common.Delete")),m.oc("disabled",!c.isExpertMode)}}function A(e,t){1&e&&(m.Wb(0,"th",19),m.Fc(1),m.jc(2,"transloco"),m.Vb()),2&e&&(m.Eb(1),m.Gc(m.kc(2,1,"Type")))}function H(e,t){if(1&e&&(m.Wb(0,"td",20),m.Fc(1),m.jc(2,"transloco"),m.Vb()),2&e){var o=t.$implicit,a=m.ic();m.Eb(1),m.Gc(m.kc(2,1,a.getExerciseItemTypeName(o.ItemType)))}}function K(e,t){1&e&&(m.Wb(0,"th",19),m.Fc(1),m.jc(2,"transloco"),m.Vb()),2&e&&(m.Eb(1),m.Gc(m.kc(2,1,"Tag")))}function q(e,t){if(1&e&&(m.Wb(0,"td",20),m.Fc(1),m.Vb()),2&e){var o=t.$implicit;m.Eb(1),m.Gc(o.Tags.toString())}}function z(e,t){1&e&&(m.Wb(0,"th",19),m.Fc(1),m.jc(2,"transloco"),m.Vb()),2&e&&(m.Eb(1),m.Gc(m.kc(2,1,"KnowledgeItem")))}function Q(e,t){if(1&e&&(m.Wb(0,"td",20),m.Fc(1),m.Vb()),2&e){var o=t.$implicit;m.Eb(1),m.Gc(o.KnowledgeItemID)}}function X(e,t){1&e&&(m.Wb(0,"th",23),m.Fc(1),m.jc(2,"transloco"),m.Vb()),2&e&&(m.Eb(1),m.Gc(m.kc(2,1,"CreatedAt")))}function B(e,t){if(1&e&&(m.Wb(0,"td",20),m.Fc(1),m.jc(2,"date"),m.Vb()),2&e){var o=t.$implicit;m.Eb(1),m.Gc(m.lc(2,1,o.CreatedAt,"yyyy-M-d HH:mm:ss"))}}function Y(e,t){1&e&&m.Rb(0,"tr",24)}function J(e,t){1&e&&m.Rb(0,"tr",25)}var Z,ee=((Z=function(){function t(o,a,c){e(this,t),this.odataService=o,this.dialog=a,this.uiUtilSrv=c,this.displayedColumns=["id","itemtype","tags","knowledgeitem","createdat"],this.dataSource=[],this.resultsLength=0,this.isLoadingResults=!0,this.refreshEvent=new m.o}return o(t,[{key:"getExerciseItemTypeName",value:function(e){return Object(y.e)(e)}},{key:"isExpertMode",get:function(){return this.odataService.isLoggedin}},{key:"ngAfterViewInit",value:function(){var e=this;this.sort.sortChange.subscribe(function(){return e.paginator.pageIndex=0}),Object(h.a)(this.sort.sortChange,this.paginator.page,this.refreshEvent).pipe(Object(v.a)({}),Object(E.a)(function(){e.isLoadingResults=!0;var t=e.paginator.pageSize;return e.odataService.getExerciseItems(t,t*e.paginator.pageIndex,e.sort.active,e.sort.direction)}),Object(V.a)(function(){return e.isLoadingResults=!1}),Object(x.a)(function(t){return e.resultsLength=t.totalCount,t.items}),Object(C.a)(function(){return Object(g.a)([])})).subscribe({next:function(t){return e.dataSource=t},error:function(t){return e.uiUtilSrv.showSnackInfo(t)}})}},{key:"onGoToPreview",value:function(){var e=[];this.dataSource.forEach(function(t){e.push({refType:k.D.ExerciseItem,refId:t.ID})}),this.uiUtilSrv.navigatePreviewPage(e)}},{key:"onGoToSearch",value:function(){this.uiUtilSrv.navigateExerciseItemSearchPage()}},{key:"onDeleteItem",value:function(e){var t=this;this.odataService.deleteExerciseItem(e).subscribe({next:function(e){t.onRefreshList()},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})}},{key:"onRefreshList",value:function(){this.refreshEvent.emit()}},{key:"resetPaging",value:function(){this.paginator.pageIndex=0}},{key:"onDisplayItem",value:function(e){this.uiUtilSrv.navigateExerciseItemDisplayPage(e)}},{key:"onChangeItem",value:function(e){this.uiUtilSrv.navigateExerciseItemChangePage(e)}},{key:"onAddToCollection",value:function(e){var t=this;this.odataService.getUserCollections().subscribe({next:function(o){var a=o.items;t.dialog.open(T,{width:"600px",closeOnNavigation:!1,data:{excitemid:e,availableColls:a,collids:[]}}).afterClosed().subscribe(function(o){var c=[];o.collids.forEach(function(t){var o=a.findIndex(function(e){return e.ID===+t});if(-1!==o){var n=new k.H;n.ID=a[o].ID,n.RefID=e,n.RefType=k.D.ExerciseItem,c.push(n)}}),c.length>0&&t.odataService.addExerciseItemToCollection(c).subscribe({next:function(e){t.uiUtilSrv.showSnackInfo("DONE")},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})})},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})}},{key:"onNewPractice",value:function(e){var t=this;this.dialog.open(N,{width:"600px",closeOnNavigation:!1,data:{excitemid:e,pracDate:(new Date).toDateString(),score:void 0}}).afterClosed().subscribe(function(e){var o=new y.d;o.RefID=e.excitemid,o.Score=e.score,o.TakenDate=new Date,o.User=t.odataService.currentUser.getUserId(),t.odataService.createExerciseItemUserScore(o).subscribe({next:function(e){t.uiUtilSrv.showSnackInfo("DONE")},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})})}}]),t}()).\u0275fac=function(e){return new(e||Z)(m.Qb(R.d),m.Qb(w.b),m.Qb(R.f))},Z.\u0275cmp=m.Kb({type:Z,selectors:[["app-exercise-items"]],viewQuery:function(e,t){var o;1&e&&(m.Kc(p.a,1),m.Kc(f.a,1)),2&e&&(m.uc(o=m.fc())&&(t.paginator=o.first),m.uc(o=m.fc())&&(t.sort=o.first))},decls:48,vars:28,consts:[[1,"toolbar-spacer"],["mat-icon-button","","color","primary","routerLink","create",3,"disabled","matTooltip"],["mat-icon-button","","color","accent",2,"margin-left","12px",3,"disabled","matTooltip","click"],["mat-icon-button","","color","accent","routerLink","score",2,"margin-left","12px",3,"disabled","matTooltip"],["mat-icon-button","","color","accent",3,"disabled","matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","itemtype"],["matColumnDef","tags"],["matColumnDef","knowledgeitem"],["matColumnDef","createdat"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click"],["mat-icon-button","","color","warn",3,"disabled","matTooltip","click"],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(m.Wb(0,"mat-toolbar-row"),m.Wb(1,"span"),m.Wb(2,"h1"),m.Fc(3),m.jc(4,"transloco"),m.Vb(),m.Vb(),m.Rb(5,"span",0),m.Wb(6,"section"),m.Wb(7,"button",1),m.jc(8,"transloco"),m.Wb(9,"mat-icon"),m.Fc(10,"add_circle"),m.Vb(),m.Vb(),m.Wb(11,"button",2),m.ec("click",function(){return t.onGoToSearch()}),m.jc(12,"transloco"),m.Wb(13,"mat-icon"),m.Fc(14,"search"),m.Vb(),m.Vb(),m.Wb(15,"button",3),m.jc(16,"transloco"),m.Wb(17,"mat-icon"),m.Fc(18,"recent_actors"),m.Vb(),m.Vb(),m.Wb(19,"button",4),m.ec("click",function(){return t.onGoToPreview()}),m.jc(20,"transloco"),m.Wb(21,"mat-icon"),m.Fc(22,"slideshow"),m.Vb(),m.Vb(),m.Wb(23,"button",2),m.ec("click",function(){return t.onRefreshList()}),m.jc(24,"transloco"),m.Wb(25,"mat-icon"),m.Fc(26,"refresh"),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(27,"div",5),m.Wb(28,"div",6),m.Wb(29,"table",7),m.ec("matSortChange",function(){return t.resetPaging()}),m.Ub(30,8),m.Ec(31,L,2,0,"th",9),m.Ec(32,_,23,21,"td",10),m.Tb(),m.Ub(33,11),m.Ec(34,A,3,3,"th",9),m.Ec(35,H,3,3,"td",10),m.Tb(),m.Ub(36,12),m.Ec(37,K,3,3,"th",9),m.Ec(38,q,2,1,"td",10),m.Tb(),m.Ub(39,13),m.Ec(40,z,3,3,"th",9),m.Ec(41,Q,2,1,"td",10),m.Tb(),m.Ub(42,14),m.Ec(43,X,3,3,"th",15),m.Ec(44,B,3,4,"td",10),m.Tb(),m.Ec(45,Y,1,0,"tr",16),m.Ec(46,J,1,0,"tr",17),m.Vb(),m.Vb(),m.Rb(47,"mat-paginator",18),m.Vb()),2&e&&(m.Eb(3),m.Gc(m.kc(4,16,"ExerciseItem")),m.Eb(4),m.pc("matTooltip",m.kc(8,18,"Common.Create")),m.oc("disabled",!t.isExpertMode),m.Eb(4),m.pc("matTooltip",m.kc(12,20,"Common.Search")),m.oc("disabled",!t.isExpertMode||t.dataSource.length<=0),m.Eb(4),m.pc("matTooltip",m.kc(16,22,"PracticeHistories")),m.oc("disabled",!t.isExpertMode),m.Eb(4),m.pc("matTooltip",m.kc(20,24,"Common.Preview")),m.oc("disabled",!t.isExpertMode||t.dataSource.length<=0),m.Eb(4),m.pc("matTooltip",m.kc(24,26,"Common.Refresh")),m.oc("disabled",!t.isExpertMode),m.Eb(6),m.oc("dataSource",t.dataSource),m.Eb(16),m.oc("matHeaderRowDef",t.displayedColumns),m.Eb(1),m.oc("matRowDefColumns",t.displayedColumns),m.Eb(1),m.oc("length",t.resultsLength)("pageSize",20))},directives:[G.c,M.b,d.c,P.a,U.a,$.j,f.a,$.c,$.e,$.b,$.g,$.i,p.a,$.d,$.a,f.b,$.f,$.h],pipes:[s.d,n.e],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.mat-column-id[_ngcontent-%COMP%]{max-width:300px;width:300px}.mat-column-itemtype[_ngcontent-%COMP%]{max-width:120px;width:120px}.mat-column-tags[_ngcontent-%COMP%]{max-width:250px;width:150px}.mat-column-created[_ngcontent-%COMP%]{max-width:120px;width:120px}"]}),Z),te=c("jtHE"),oe=c("FtGj"),ae=c("rCpU"),ce=c("HKRH"),ne=c("Wp6s"),ie=c("7EHt"),re=c("d3UM"),le=c("A5z7"),se=c("XiUz"),be=c("FKr1");function ue(e,t){if(1&e&&(m.Wb(0,"mat-option",19),m.Fc(1),m.jc(2,"transloco"),m.Vb()),2&e){var o=t.$implicit;m.oc("value",o.value),m.Eb(1),m.Gc(m.kc(2,2,o.i18nterm))}}function de(e,t){1&e&&(m.Wb(0,"mat-icon",22),m.Fc(1,"cancel"),m.Vb())}function me(e,t){if(1&e){var o=m.Xb();m.Wb(0,"mat-chip",20),m.ec("removed",function(){m.xc(o);var e=t.$implicit;return m.ic().removeTag(e)}),m.Fc(1),m.Ec(2,de,2,0,"mat-icon",21),m.Vb()}if(2&e){var a=t.$implicit,c=m.ic();m.oc("selectable",c.selectable)("removable",c.isEditable),m.Eb(1),m.Hc(" ",a," "),m.Eb(1),m.oc("ngIf",c.isEditable)}}function pe(e,t){if(1&e&&(m.Wb(0,"mat-expansion-panel"),m.Wb(1,"mat-expansion-panel-header"),m.Wb(2,"mat-panel-title"),m.Fc(3),m.jc(4,"transloco"),m.Vb(),m.Wb(5,"mat-panel-description"),m.Fc(6),m.jc(7,"transloco"),m.Wb(8,"mat-icon"),m.Fc(9,"info"),m.Vb(),m.Vb(),m.Vb(),m.Wb(10,"div",23),m.Wb(11,"div",24),m.Wb(12,"mat-form-field",3),m.Wb(13,"mat-label"),m.Fc(14),m.jc(15,"transloco"),m.Vb(),m.Rb(16,"input",25),m.jc(17,"transloco"),m.jc(18,"date"),m.Vb(),m.Vb(),m.Wb(19,"div",24),m.Wb(20,"mat-form-field",3),m.Wb(21,"mat-label"),m.Fc(22),m.jc(23,"transloco"),m.Vb(),m.Rb(24,"input",25),m.jc(25,"transloco"),m.jc(26,"date"),m.Vb(),m.Vb(),m.Vb(),m.Vb()),2&e){var o=m.ic();m.Eb(3),m.Gc(m.kc(4,8,"Administrative")),m.Eb(3),m.Gc(m.kc(7,10,"AdministrativeInfo")),m.Eb(8),m.Gc(m.kc(15,12,"CreatedAt")),m.Eb(2),m.pc("placeholder",m.kc(17,14,"CreatedAt")),m.oc("ngModel",m.lc(18,16,o.itemObject.CreatedAt,"yyyy-M-d HH:mm:ss")),m.Eb(6),m.Gc(m.kc(23,19,"ModifiedAt")),m.Eb(2),m.pc("placeholder",m.kc(25,21,"ModifiedAt")),m.oc("ngModel",m.lc(26,23,o.itemObject.ModifiedAt,"yyyy-M-d HH:mm:ss"))}}function fe(e,t){if(1&e){var o=m.Xb();m.Wb(0,"mat-toolbar"),m.Wb(1,"h3"),m.Fc(2),m.jc(3,"transloco"),m.Vb(),m.Rb(4,"div",26),m.Wb(5,"button",27),m.ec("click",function(){return m.xc(o),m.ic().openUploadDialog()}),m.Fc(6,"Upload"),m.Vb(),m.Vb()}2&e&&(m.Eb(2),m.Gc(m.kc(3,1,"Content")))}function he(e,t){if(1&e){var o=m.Xb();m.Wb(0,"div",24),m.Wb(1,"ngx-monaco-editor",28),m.ec("ngModelChange",function(e){return m.xc(o),m.ic().content=e}),m.Vb(),m.Vb()}if(2&e){var a=m.ic();m.Eb(1),m.oc("options",a.editorOptions)("ngModel",a.content)}}function ge(e,t){if(1&e){var o=m.Xb();m.Wb(0,"mat-toolbar"),m.Wb(1,"h3"),m.Fc(2),m.jc(3,"transloco"),m.Vb(),m.Rb(4,"div",26),m.Wb(5,"button",27),m.ec("click",function(){return m.xc(o),m.ic().openAnswerUploadDialog()}),m.Wb(6,"mat-icon"),m.Fc(7,"file_upload"),m.Vb(),m.Vb(),m.Vb()}2&e&&(m.Eb(2),m.Gc(m.kc(3,1,"Answer")))}function ve(e,t){if(1&e){var o=m.Xb();m.Wb(0,"div",24),m.Wb(1,"ngx-monaco-editor",28),m.ec("ngModelChange",function(e){return m.xc(o),m.ic().answerContent=e}),m.Vb(),m.Vb()}if(2&e){var a=m.ic();m.Eb(1),m.oc("options",a.editorOptions)("ngModel",a.answerContent)}}var Ee,Ve=((Ee=function(){function t(o,a,c,n){e(this,t),this.dialog=o,this.activateRoute=a,this.uiUtilSrv=c,this.odataService=n,this.routerID=-1,this.uiMode=ae.b.Create,this.currentMode="",this.editorOptions={theme:"vs-dark",wordWrap:"on",roundedSelection:!0},this.content="New Exercise Item",this.answerContent="",this.mathOptions={displayMode:!0,throwOnError:!1,errorColor:"#cc0000"},this.selectable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[oe.g,oe.c],this.tags=[],this.arExerciseTypes=[],this.arExerciseTypes=Object(y.f)(),this.itemFormGroup=new i.g({idControl:new i.e({value:null,disabled:!0}),typeControl:new i.e({value:y.c.Question}),knowledgeControl:new i.e,tagControl:new i.e})}return o(t,[{key:"isDisplayMode",get:function(){return this.uiMode===ae.b.Display}},{key:"isCreateMode",get:function(){return this.uiMode===ae.b.Create}},{key:"isUpdateMode",get:function(){return this.uiMode===ae.b.Update}},{key:"isEditable",get:function(){return this.uiMode===ae.b.Create||this.uiMode===ae.b.Update}},{key:"ngOnInit",value:function(){var e=this;this.destroyed$=new te.a(1),this.activateRoute.url.subscribe({next:function(t){t instanceof Array&&t.length>0&&("create"===t[0].path?(e.routerID=-1,e.uiMode=ae.b.Create,e.currentMode="Common.Create"):"edit"===t[0].path?(e.routerID=+t[1].path,e.uiMode=ae.b.Update,e.currentMode="Common.Change"):"display"===t[0].path&&(e.routerID=+t[1].path,e.uiMode=ae.b.Display,e.currentMode="Common.Display")),-1!==e.routerID&&e.odataService.readExerciseItem(e.routerID,e.uiMode===ae.b.Update).subscribe({next:function(t){e.onSetItemData(t),e.itemObject=t},error:function(e){console.error(e)}})},error:function(t){e.uiUtilSrv.showSnackInfo(t)}})}},{key:"ngOnDestroy",value:function(){this.destroyed$&&(this.destroyed$.complete(),this.destroyed$=void 0)}},{key:"onOK",value:function(){var e,t,o=this;if(this.isCreateMode){if(!this.itemFormGroup.valid)return void(this.itemFormGroup.errors&&console.error(this.itemFormGroup.errors));this.itemObject=new y.a,this.itemObject.ItemType=null===(e=this.itemFormGroup.get("typeControl"))||void 0===e?void 0:e.value,this.itemObject.Content=this.content,this.itemObject.Tags=this.tags,this.itemObject.Answer=this.answerContent,this.odataService.createExerciseItem(this.itemObject).subscribe({next:function(e){o.uiUtilSrv.navigateExerciseItemDisplayPage(e.ID)},error:function(e){o.uiUtilSrv.showSnackInfo(e)}})}else if(this.isUpdateMode){if(!this.itemFormGroup.valid)return void(this.itemFormGroup.errors&&console.log(this.itemFormGroup.errors));this.itemObject&&(this.itemObject.ItemType=null===(t=this.itemFormGroup.get("typeControl"))||void 0===t?void 0:t.value,this.itemObject.Content=this.content,this.itemObject.Tags=this.tags,this.itemObject.Answer=this.answerContent,this.odataService.changeExerciseItem(this.itemObject).subscribe({next:function(e){o.uiUtilSrv.navigateExerciseItemDisplayPage(e.ID)},error:function(e){o.uiUtilSrv.showSnackInfo(e)}}))}}},{key:"openUploadDialog",value:function(){var e=this;this.dialog.open(ce.a,{width:"50%",height:"50%"}).afterClosed().subscribe({next:function(t){console.log(t),t.forEach(function(t){e.content+="\n![Img](".concat(t.url,")\n          ")})}})}},{key:"openAnswerUploadDialog",value:function(){var e=this;this.dialog.open(ce.a,{width:"50%",height:"50%"}).afterClosed().subscribe({next:function(t){console.log(t),t.forEach(function(t){e.answerContent+="\n  ![Img](".concat(t.url,")\n            ")})}})}},{key:"addTag",value:function(e){var t=e.input,o=e.value;(o||"").trim()&&this.tags.push(o.trim()),t&&(t.value="")}},{key:"removeTag",value:function(e){var t=this.tags.indexOf(e);t>=0&&this.tags.splice(t,1)}},{key:"onSetItemData",value:function(e){var t,o,a;null===(t=this.itemFormGroup.get("idControl"))||void 0===t||t.setValue(e.ID),null===(o=this.itemFormGroup.get("idControl"))||void 0===o||o.disable(),null===(a=this.itemFormGroup.get("typeControl"))||void 0===a||a.setValue(+e.ItemType),this.content=e.Content,this.tags=e.Tags,this.isDisplayMode?this.itemFormGroup.disable():this.itemFormGroup.markAsPristine()}},{key:"onReturnToList",value:function(){this.uiUtilSrv.navigateExerciseItemListPage()}},{key:"onCreateNewOne",value:function(){this.uiUtilSrv.navigateExerciseItemCreatePage()}}]),t}()).\u0275fac=function(e){return new(e||Ee)(m.Qb(w.b),m.Qb(d.a),m.Qb(R.f),m.Qb(R.d))},Ee.\u0275cmp=m.Kb({type:Ee,selectors:[["app-exercise-item-detail"]],decls:65,vars:47,consts:[["multi","",1,"example-headers-align"],["expanded",""],[3,"formGroup"],["appearance","fill",1,"control-full-width"],["matInput","","type","text","placeholder","ID","formControlName","idControl"],["required","","formControlName","typeControl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","tagControl"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","New tag...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["matInput","","type","text","placeholder","Knowledge ID","formControlName","knowledgeControl"],[4,"ngIf"],["fxLayout","row",1,"control-full-width",2,"height","500px"],["fxFlex","50",4,"ngIf"],["fxFlex","",2,"height","100%","overflow-y","scroll"],["katex","",3,"data","katexOptions"],["mat-button","",3,"disabled","click"],["mat-button","",3,"click"],[3,"value"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],["fxLayout","row",1,"control-full-width"],["fxFlex","50"],["matInput","","type","text","disabled","",3,"placeholder","ngModel"],[1,"toolbar-spacer"],["mat-raised-button","",3,"click"],[2,"height","100%",3,"options","ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(m.Wb(0,"mat-card"),m.Wb(1,"mat-card-header"),m.Wb(2,"mat-card-title"),m.Fc(3),m.jc(4,"transloco"),m.Vb(),m.Wb(5,"mat-card-subtitle"),m.Fc(6),m.jc(7,"transloco"),m.Vb(),m.Vb(),m.Wb(8,"mat-card-content"),m.Wb(9,"mat-accordion",0),m.Wb(10,"mat-expansion-panel",1),m.Wb(11,"mat-expansion-panel-header"),m.Wb(12,"mat-panel-title"),m.Fc(13),m.jc(14,"transloco"),m.Vb(),m.Wb(15,"mat-panel-description"),m.Fc(16),m.jc(17,"transloco"),m.Wb(18,"mat-icon"),m.Fc(19,"public"),m.Vb(),m.Vb(),m.Vb(),m.Wb(20,"form",2),m.Wb(21,"mat-form-field",3),m.Wb(22,"mat-label"),m.Fc(23,"#"),m.Vb(),m.Rb(24,"input",4),m.Vb(),m.Wb(25,"mat-form-field",3),m.Wb(26,"mat-label"),m.Fc(27),m.jc(28,"transloco"),m.Vb(),m.Wb(29,"mat-select",5),m.Ec(30,ue,3,4,"mat-option",6),m.Vb(),m.Vb(),m.Wb(31,"mat-form-field",3),m.Wb(32,"mat-label"),m.Fc(33),m.jc(34,"transloco"),m.Vb(),m.Wb(35,"mat-chip-list",7,8),m.Ec(37,me,3,4,"mat-chip",9),m.Wb(38,"input",10),m.ec("matChipInputTokenEnd",function(e){return t.addTag(e)}),m.Vb(),m.Vb(),m.Vb(),m.Wb(39,"mat-form-field",3),m.Wb(40,"mat-label"),m.Fc(41),m.jc(42,"transloco"),m.Vb(),m.Rb(43,"input",11),m.Vb(),m.Vb(),m.Vb(),m.Ec(44,pe,27,26,"mat-expansion-panel",12),m.Vb(),m.Ec(45,fe,7,3,"mat-toolbar",12),m.Wb(46,"div",13),m.Ec(47,he,2,2,"div",14),m.Wb(48,"div",15),m.Rb(49,"markdown",16),m.Vb(),m.Vb(),m.Ec(50,ge,8,3,"mat-toolbar",12),m.Wb(51,"div",13),m.Ec(52,ve,2,2,"div",14),m.Wb(53,"div",15),m.Rb(54,"markdown",16),m.Vb(),m.Vb(),m.Vb(),m.Wb(55,"mat-card-actions"),m.Wb(56,"button",17),m.ec("click",function(){return t.onOK()}),m.Fc(57),m.jc(58,"transloco"),m.Vb(),m.Wb(59,"button",18),m.ec("click",function(){return t.onReturnToList()}),m.Fc(60),m.jc(61,"transloco"),m.Vb(),m.Wb(62,"button",17),m.ec("click",function(){return t.onCreateNewOne()}),m.Fc(63),m.jc(64,"transloco"),m.Vb(),m.Vb(),m.Vb()),2&e){var o=m.vc(36);m.Eb(3),m.Gc(m.kc(4,27,"ExerciseItem")),m.Eb(3),m.Gc(m.kc(7,29,t.currentMode)),m.Eb(7),m.Gc(m.kc(14,31,"Header")),m.Eb(3),m.Gc(m.kc(17,33,"HeaderInfo")),m.Eb(4),m.oc("formGroup",t.itemFormGroup),m.Eb(7),m.Gc(m.kc(28,35,"Type")),m.Eb(3),m.oc("ngForOf",t.arExerciseTypes),m.Eb(3),m.Gc(m.kc(34,37,"Tags")),m.Eb(4),m.oc("ngForOf",t.tags),m.Eb(1),m.oc("matChipInputFor",o)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes)("matChipInputAddOnBlur",t.addOnBlur),m.Eb(3),m.Gc(m.kc(42,39,"KnowledgeItem")),m.Eb(3),m.oc("ngIf",!t.isCreateMode&&t.itemObject),m.Eb(1),m.oc("ngIf",t.isCreateMode),m.Eb(2),m.oc("ngIf",!t.isDisplayMode),m.Eb(2),m.oc("data",t.content)("katexOptions",t.mathOptions),m.Eb(1),m.oc("ngIf",t.isCreateMode),m.Eb(2),m.oc("ngIf",t.isCreateMode),m.Eb(2),m.oc("data",t.answerContent)("katexOptions",t.mathOptions),m.Eb(2),m.oc("disabled",!(t.isEditable&&t.itemFormGroup.valid)),m.Eb(1),m.Gc(m.kc(58,41,"Save")),m.Eb(3),m.Gc(m.kc(61,43,"Common.ReturnToList")),m.Eb(2),m.oc("disabled",!t.isDisplayMode),m.Eb(1),m.Gc(m.kc(64,45,"Common.CreateAnotherOne"))}},directives:[ne.a,ne.d,ne.g,ne.f,ne.c,ie.a,ie.c,ie.e,ie.f,ie.d,U.a,i.v,i.o,i.h,W.c,W.g,I.b,i.c,i.n,i.f,re.a,i.t,n.l,le.c,le.b,n.m,se.c,se.a,l.a,ne.b,M.b,be.n,le.a,le.d,i.q,G.a,r.a],pipes:[s.d,n.e],styles:[".example-form[_ngcontent-%COMP%]{margin:8px;min-width:150px;max-width:500px;width:100%}.mat-card-actions[_ngcontent-%COMP%]{margin-top:10px}.example-action-buttons[_ngcontent-%COMP%]{padding-bottom:20px}.example-headers-align[_ngcontent-%COMP%]{margin:8px}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%], .example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex-basis:0}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]}),Ee),xe=c("2Vo4"),Ce=c("f0Cb"),ke=c("iadO"),ye=c("bSwM"),we=c("pFkP");function We(e,t){if(1&e&&(m.Wb(0,"mat-option",25),m.Fc(1),m.jc(2,"transloco"),m.Vb()),2&e){var o=t.$implicit;m.oc("value",o.value),m.Eb(1),m.Hc(" ",m.kc(2,2,o.displayas)," ")}}function Ie(e,t){if(1&e&&(m.Wb(0,"mat-option",25),m.Fc(1),m.jc(2,"transloco"),m.Vb()),2&e){var o=t.$implicit;m.oc("value",o.value),m.Eb(1),m.Hc(" ",m.kc(2,2,o.i18nterm)," ")}}function Fe(e,t){if(1&e){var o=m.Xb();m.Wb(0,"mat-form-field"),m.Wb(1,"input",26),m.ec("ngModelChange",function(e){return m.xc(o),m.ic().$implicit.value[0]=e}),m.jc(2,"transloco"),m.Vb(),m.Vb()}if(2&e){var a=m.ic().$implicit;m.Eb(1),m.pc("placeholder",m.kc(2,2,"Value")),m.oc("ngModel",a.value[0])}}function Me(e,t){if(1&e){var o=m.Xb();m.Wb(0,"mat-form-field"),m.Wb(1,"input",27),m.ec("ngModelChange",function(e){return m.xc(o),m.ic().$implicit.value[1]=e}),m.jc(2,"transloco"),m.Vb(),m.Vb()}if(2&e){var a=m.ic().$implicit;m.Eb(1),m.pc("placeholder",m.kc(2,2,"Value")),m.oc("ngModel",a.value[1])}}function je(e,t){if(1&e){var o=m.Xb();m.Wb(0,"mat-form-field"),m.Wb(1,"input",28),m.ec("ngModelChange",function(e){return m.xc(o),m.ic().$implicit.value[0]=e}),m.jc(2,"transloco"),m.Vb(),m.Vb()}if(2&e){var a=m.ic().$implicit;m.Eb(1),m.pc("placeholder",m.kc(2,2,"Value")),m.oc("ngModel",a.value[0])}}function Se(e,t){if(1&e){var o=m.Xb();m.Wb(0,"mat-form-field"),m.Wb(1,"input",29),m.ec("ngModelChange",function(e){return m.xc(o),m.ic().$implicit.value[0]=e}),m.jc(2,"transloco"),m.Vb(),m.Rb(3,"mat-datepicker-toggle",30),m.Rb(4,"mat-datepicker",null,31),m.Vb()}if(2&e){var a=m.vc(5),c=m.ic().$implicit;m.Eb(1),m.pc("placeholder",m.kc(2,4,"Value")),m.oc("ngModel",c.value[0])("matDatepicker",a),m.Eb(2),m.oc("for",a)}}function De(e,t){if(1&e){var o=m.Xb();m.Wb(0,"mat-form-field"),m.Wb(1,"input",29),m.ec("ngModelChange",function(e){return m.xc(o),m.ic().$implicit.value[1]=e}),m.jc(2,"transloco"),m.Vb(),m.Rb(3,"mat-datepicker-toggle",30),m.Rb(4,"mat-datepicker",null,32),m.Vb()}if(2&e){var a=m.vc(5),c=m.ic().$implicit;m.Eb(1),m.pc("placeholder",m.kc(2,4,"Value")),m.oc("ngModel",c.value[1])("matDatepicker",a),m.Eb(2),m.oc("for",a)}}function Oe(e,t){if(1&e){var o=m.Xb();m.Wb(0,"div",33),m.Wb(1,"mat-checkbox",34),m.ec("ngModelChange",function(e){return m.xc(o),m.ic().$implicit.value[0]=e}),m.Vb(),m.Vb()}if(2&e){var a=m.ic().$implicit;m.Eb(1),m.oc("ngModel",a.value[0])}}function Te(e,t){if(1&e){var o=m.Xb();m.Wb(0,"div",1),m.Wb(1,"mat-form-field"),m.Wb(2,"mat-select",18),m.ec("ngModelChange",function(e){return t.$implicit.fieldName=e})("selectionChange",function(){m.xc(o);var e=t.$implicit;return m.ic().onFieldSelectionChanged(e)}),m.jc(3,"transloco"),m.Ec(4,We,3,4,"mat-option",19),m.Vb(),m.Vb(),m.Wb(5,"mat-form-field"),m.Wb(6,"mat-select",20),m.ec("ngModelChange",function(e){return t.$implicit.operator=e}),m.jc(7,"transloco"),m.Ec(8,Ie,3,4,"mat-option",19),m.jc(9,"operatorFilter"),m.Vb(),m.Vb(),m.Ec(10,Fe,3,4,"mat-form-field",21),m.Ec(11,Me,3,4,"mat-form-field",21),m.Ec(12,je,3,4,"mat-form-field",21),m.Ec(13,Se,6,6,"mat-form-field",21),m.Ec(14,De,6,6,"mat-form-field",21),m.Ec(15,Oe,2,1,"div",22),m.Wb(16,"button",23),m.ec("click",function(){return m.xc(o),m.ic().onAddFilter()}),m.Wb(17,"mat-icon"),m.Fc(18,"add"),m.Vb(),m.Vb(),m.Wb(19,"button",24),m.ec("click",function(){m.xc(o);var e=t.index;return m.ic().onRemoveFilter(e)}),m.Wb(20,"mat-icon"),m.Fc(21,"close"),m.Vb(),m.Vb(),m.Vb()}if(2&e){var a=t.$implicit,c=m.ic();m.Eb(2),m.pc("placeholder",m.kc(3,12,"Field")),m.oc("ngModel",a.fieldName),m.Eb(2),m.oc("ngForOf",c.allFields),m.Eb(2),m.pc("placeholder",m.kc(7,14,"Operator")),m.oc("ngModel",a.operator),m.Eb(2),m.oc("ngForOf",m.lc(9,16,c.allOperators,a.valueType)),m.Eb(2),m.oc("ngIf",1===a.valueType),m.Eb(1),m.oc("ngIf",1===a.valueType),m.Eb(1),m.oc("ngIf",2===a.valueType),m.Eb(1),m.oc("ngIf",3===a.valueType),m.Eb(1),m.oc("ngIf",3===a.valueType),m.Eb(1),m.oc("ngIf",4===a.valueType)}}function Ne(e,t){1&e&&(m.Wb(0,"th",35),m.Fc(1,"#"),m.Vb())}function Re(e,t){if(1&e){var o=m.Xb();m.Wb(0,"td",36),m.Wb(1,"div"),m.Fc(2),m.Wb(3,"a",37),m.ec("click",function(){m.xc(o);var e=t.$implicit;return m.ic().onDisplayItem(e.ID)}),m.Fc(4),m.jc(5,"transloco"),m.Vb(),m.Vb(),m.Vb()}if(2&e){var a=t.$implicit;m.Eb(2),m.Hc(" ",a.ID," "),m.Eb(2),m.Gc(m.kc(5,2,"Common.Display"))}}function Ge(e,t){1&e&&(m.Wb(0,"th",35),m.Fc(1),m.jc(2,"transloco"),m.Vb()),2&e&&(m.Eb(1),m.Gc(m.kc(2,1,"Type")))}function Pe(e,t){if(1&e&&(m.Wb(0,"td",36),m.Fc(1),m.jc(2,"transloco"),m.Vb()),2&e){var o=t.$implicit,a=m.ic();m.Eb(1),m.Gc(m.kc(2,1,a.getExerciseItemTypeName(o.ItemType)))}}function Ue(e,t){1&e&&(m.Wb(0,"th",35),m.Fc(1),m.jc(2,"transloco"),m.Vb()),2&e&&(m.Eb(1),m.Gc(m.kc(2,1,"Tag")))}function $e(e,t){if(1&e&&(m.Wb(0,"td",36),m.Fc(1),m.Vb()),2&e){var o=t.$implicit;m.Eb(1),m.Gc(o.Tags.toString())}}function Le(e,t){1&e&&(m.Wb(0,"th",35),m.Fc(1),m.jc(2,"transloco"),m.Vb()),2&e&&(m.Eb(1),m.Gc(m.kc(2,1,"KnowledgeItem")))}function _e(e,t){if(1&e&&(m.Wb(0,"td",36),m.Fc(1),m.Vb()),2&e){var o=t.$implicit;m.Eb(1),m.Gc(o.KnowledgeItemID)}}function Ae(e,t){1&e&&(m.Wb(0,"th",35),m.Fc(1),m.jc(2,"transloco"),m.Vb()),2&e&&(m.Eb(1),m.Gc(m.kc(2,1,"CreatedAt")))}function He(e,t){if(1&e&&(m.Wb(0,"td",36),m.Fc(1),m.jc(2,"date"),m.Vb()),2&e){var o=t.$implicit;m.Eb(1),m.Gc(m.lc(2,1,o.CreatedAt,"yyyy-M-d HH:mm:ss"))}}function Ke(e,t){1&e&&m.Rb(0,"tr",38)}function qe(e,t){1&e&&m.Rb(0,"tr",39)}var ze,Qe=((ze=function(){function t(o,a){e(this,t),this.odataService=o,this.uiUtilSrv=a,this.filters=[],this.allOperators=[],this.allFields=[],this.filterEditable=!0,this.pageSize=20,this.pageSizeOptions=[20,40,60,100],this.isLoadingResults=!1,this.subjFilters=new xe.a([]),this.displayedColumns=["id","itemtype","tags","knowledgeitem","createdat"],this.dataSource=[],this.resultsLength=0,this.allOperators=k.E.getGeneralFilterOperatorDisplayStrings(),this.allFields=[{displayas:"Content",value:"Content",valueType:2},{displayas:"Tag",value:"Tags",valueType:2},{displayas:"Type",value:"ExerciseType",valueType:2}]}return o(t,[{key:"ngOnInit",value:function(){this.onAddFilter()}},{key:"ngAfterViewInit",value:function(){var e=this;this.subjFilters.subscribe(function(){return e.paginator.pageIndex=0}),Object(h.a)(this.subjFilters,this.paginator.page).pipe(Object(v.a)({}),Object(E.a)(function(){if(e.subjFilters.value.length<=0)return Object(g.a)([]);e.isLoadingResults=!0;var t=e.prepareFilters(e.subjFilters.value),o=e.paginator.pageSize;return e.odataService.searchExerciseItems(o,o*e.paginator.pageIndex,t)}),Object(V.a)(function(){return e.isLoadingResults=!1}),Object(x.a)(function(t){return e.resultsLength=t.totalCount?t.totalCount:0,t.items}),Object(C.a)(function(){return Object(g.a)(void 0)})).subscribe({next:function(t){return e.dataSource=t||[]},error:function(t){return e.uiUtilSrv.showSnackInfo(t)}})}},{key:"getExerciseItemTypeName",value:function(e){return Object(k.K)(e)}},{key:"onAddFilter",value:function(){this.filters.push(new k.n)}},{key:"onRemoveFilter",value:function(e){this.filters.splice(e,1),0===this.filters.length&&this.onAddFilter()}},{key:"onFieldSelectionChanged",value:function(e){this.allFields.forEach(function(t){t.value===e.fieldName&&(e.valueType=t.valueType)})}},{key:"prepareFilters",value:function(e){var t="";e.sort(function(e,t){return e.fieldName.localeCompare(t.fieldName)});var o=e.map(function(e){return e.fieldName});return(o=Array.from(new Set(o))).forEach(function(o){var a="";e.forEach(function(e){e.fieldName===o&&("Content"!==e.fieldName&&"Tags"!==e.fieldName||(e.operator===k.o.Equal?a=a?"".concat(a," or ").concat(e.fieldName," eq '").concat(e.lowValue,"'"):"".concat(e.fieldName," eq '").concat(e.lowValue,"'"):e.operator===k.o.Like&&(a=a?"".concat(a," or contains(").concat(e.fieldName,",'").concat(e.lowValue,"')"):"contains(".concat(e.fieldName,",'").concat(e.lowValue,"')"))))}),t=t?"".concat(t," and ").concat(a):""+a}),t}},{key:"onSearch",value:function(){var e=[];this.filters.forEach(function(t){var o={};switch(o.valueType=+t.valueType,t.valueType){case k.p.boolean:case k.p.date:case k.p.number:break;case k.p.string:o.fieldName=t.fieldName,o.operator=+t.operator,o.lowValue=t.value[0],o.highValue=t.operator===k.o.Between?t.value[1]:""}e.push(o)}),this.subjFilters.next(e)}},{key:"onDisplayItem",value:function(e){this.uiUtilSrv.navigateExerciseItemDisplayPage(e)}},{key:"onGoToPreview",value:function(){var e=[];this.dataSource.forEach(function(t){e.push({refType:k.D.ExerciseItem,refId:t.ID})}),this.uiUtilSrv.navigatePreviewPage(e)}}]),t}()).\u0275fac=function(e){return new(e||ze)(m.Qb(R.d),m.Qb(R.f))},ze.\u0275cmp=m.Kb({type:ze,selectors:[["app-exercise-item-search"]],viewQuery:function(e,t){var o;1&e&&m.Kc(p.a,3),2&e&&m.uc(o=m.fc())&&(t.paginator=o.first)},decls:44,vars:18,consts:[["class","control-full-width",4,"ngFor","ngForOf"],[1,"control-full-width"],["mat-button","","aria-label","Search",3,"click"],[1,"table-container","mat-elevation-z8"],["color","primary"],["mat-flat-button","","color","primary",3,"click"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","itemtype"],["matColumnDef","tags"],["matColumnDef","knowledgeitem"],["matColumnDef","createdat"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[3,"placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"placeholder","ngModel","ngModelChange"],[4,"ngIf"],["class","typechkbox",4,"ngIf"],["mat-button","","mat-icon-button","","aria-label","Add",3,"click"],["mat-button","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["matInput","","type","number","name","lvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","","type","number","name","hvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","","type","text","name","lvalue_2",3,"placeholder","ngModel","ngModelChange"],["matInput","",3,"ngModel","matDatepicker","placeholder","ngModelChange"],["matSuffix","",3,"for"],["lvpicker",""],["hvpicker",""],[1,"typechkbox"],[3,"ngModel","ngModelChange"],["mat-header-cell",""],["mat-cell",""],["mat-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(m.Wb(0,"mat-card"),m.Wb(1,"mat-card-header"),m.Wb(2,"mat-card-title"),m.Fc(3),m.jc(4,"transloco"),m.Vb(),m.Wb(5,"mat-card-subtitle"),m.Fc(6),m.jc(7,"transloco"),m.Vb(),m.Vb(),m.Wb(8,"mat-card-content"),m.Wb(9,"div"),m.Ec(10,Te,22,19,"div",0),m.Wb(11,"div",1),m.Wb(12,"button",2),m.ec("click",function(){return t.onSearch()}),m.Wb(13,"mat-icon"),m.Fc(14,"search"),m.Vb(),m.Fc(15),m.jc(16,"transloco"),m.Vb(),m.Vb(),m.Vb(),m.Rb(17,"mat-divider"),m.Wb(18,"div",3),m.Wb(19,"mat-toolbar",4),m.Wb(20,"mat-toolbar-row"),m.Wb(21,"button",5),m.ec("click",function(){return t.onGoToPreview()}),m.Fc(22),m.jc(23,"transloco"),m.Vb(),m.Vb(),m.Vb(),m.Wb(24,"div",6),m.Wb(25,"table",7),m.Ub(26,8),m.Ec(27,Ne,2,0,"th",9),m.Ec(28,Re,6,4,"td",10),m.Tb(),m.Ub(29,11),m.Ec(30,Ge,3,3,"th",9),m.Ec(31,Pe,3,3,"td",10),m.Tb(),m.Ub(32,12),m.Ec(33,Ue,3,3,"th",9),m.Ec(34,$e,2,1,"td",10),m.Tb(),m.Ub(35,13),m.Ec(36,Le,3,3,"th",9),m.Ec(37,_e,2,1,"td",10),m.Tb(),m.Ub(38,14),m.Ec(39,Ae,3,3,"th",9),m.Ec(40,He,3,4,"td",10),m.Tb(),m.Ec(41,Ke,1,0,"tr",15),m.Ec(42,qe,1,0,"tr",16),m.Vb(),m.Vb(),m.Rb(43,"mat-paginator",17),m.Vb(),m.Vb(),m.Vb()),2&e&&(m.Eb(3),m.Gc(m.kc(4,10,"ExerciseItem")),m.Eb(3),m.Gc(m.kc(7,12,"Common.Search")),m.Eb(4),m.oc("ngForOf",t.filters),m.Eb(5),m.Hc(" ",m.kc(16,14,"Common.Search")," "),m.Eb(7),m.Gc(m.kc(23,16,"Common.Preview")),m.Eb(3),m.oc("dataSource",t.dataSource),m.Eb(16),m.oc("matHeaderRowDef",t.displayedColumns),m.Eb(1),m.oc("matRowDefColumns",t.displayedColumns),m.Eb(1),m.oc("length",t.resultsLength)("pageSize",10))},directives:[ne.a,ne.d,ne.g,ne.f,ne.c,n.l,M.b,U.a,Ce.a,G.a,G.c,$.j,$.c,$.e,$.b,$.g,$.i,p.a,W.c,re.a,i.n,i.q,n.m,be.n,I.b,i.r,i.c,ke.d,ke.f,W.i,ke.c,ye.a,$.d,$.a,M.a,$.f,$.h],pipes:[s.d,we.a,n.e],styles:[".table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;margin-top:16px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.data-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.mat-column-id[_ngcontent-%COMP%]{max-width:300px;width:250px}.mat-column-itemtype[_ngcontent-%COMP%]{max-width:120px;width:120px}.mat-column-tags[_ngcontent-%COMP%]{max-width:250px;width:150px}.mat-column-created[_ngcontent-%COMP%]{max-width:120px;width:120px}"]}),ze),Xe=c("wd/R"),Be=c.n(Xe);function Ye(e,t){if(1&e&&(m.Wb(0,"mat-option",31),m.Fc(1),m.jc(2,"transloco"),m.Vb()),2&e){var o=t.$implicit;m.oc("value",o.value),m.Eb(1),m.Gc(m.kc(2,2,o.displayas))}}function Je(e,t){if(1&e&&(m.Wb(0,"mat-option",31),m.Fc(1),m.jc(2,"transloco"),m.Vb()),2&e){var o=t.$implicit;m.oc("value",o.value),m.Eb(1),m.Gc(m.kc(2,2,o.i18nterm))}}function Ze(e,t){if(1&e){var o=m.Xb();m.Wb(0,"div",32),m.Wb(1,"mat-form-field"),m.Wb(2,"input",33),m.ec("ngModelChange",function(e){return m.xc(o),m.ic().$implicit.value[0]=e}),m.jc(3,"transloco"),m.Vb(),m.Vb(),m.Wb(4,"mat-form-field"),m.Wb(5,"input",34),m.ec("ngModelChange",function(e){return m.xc(o),m.ic().$implicit.value[1]=e}),m.jc(6,"transloco"),m.Vb(),m.Vb(),m.Vb()}if(2&e){var a=m.ic().$implicit;m.Eb(2),m.pc("placeholder",m.kc(3,4,"Value")),m.oc("ngModel",a.value[0]),m.Eb(3),m.pc("placeholder",m.kc(6,6,"Value")),m.oc("ngModel",a.value[1])}}function et(e,t){if(1&e){var o=m.Xb();m.Wb(0,"div",32),m.Wb(1,"mat-form-field"),m.Wb(2,"input",35),m.ec("ngModelChange",function(e){return m.xc(o),m.ic().$implicit.value[0]=e}),m.jc(3,"transloco"),m.Vb(),m.Rb(4,"mat-datepicker-toggle",36),m.Rb(5,"mat-datepicker",null,37),m.Vb(),m.Wb(7,"mat-form-field"),m.Wb(8,"input",35),m.ec("ngModelChange",function(e){return m.xc(o),m.ic().$implicit.value[1]=e}),m.jc(9,"transloco"),m.Vb(),m.Rb(10,"mat-datepicker-toggle",36),m.Rb(11,"mat-datepicker",null,38),m.Vb(),m.Vb()}if(2&e){var a=m.vc(6),c=m.vc(12),n=m.ic().$implicit;m.Eb(2),m.pc("placeholder",m.kc(3,8,"Value")),m.oc("ngModel",n.value[0])("matDatepicker",a),m.Eb(2),m.oc("for",a),m.Eb(4),m.pc("placeholder",m.kc(9,10,"Value")),m.oc("ngModel",n.value[1])("matDatepicker",c),m.Eb(2),m.oc("for",c)}}function tt(e,t){if(1&e){var o=m.Xb();m.Wb(0,"div",39),m.Wb(1,"mat-checkbox",40),m.ec("ngModelChange",function(e){return m.xc(o),m.ic().$implicit.value[0]=e}),m.Vb(),m.Vb()}if(2&e){var a=m.ic().$implicit;m.Eb(1),m.oc("ngModel",a.value[0])}}function ot(e,t){if(1&e){var o=m.Xb();m.Wb(0,"div",39),m.Wb(1,"input",41),m.ec("ngModelChange",function(e){return m.xc(o),m.ic().$implicit.value[0]=e}),m.jc(2,"transloco"),m.Vb(),m.Vb()}if(2&e){var a=m.ic().$implicit;m.Eb(1),m.pc("placeholder",m.kc(2,2,"Value")),m.oc("ngModel",a.value[0])}}function at(e,t){if(1&e){var o=m.Xb();m.Wb(0,"div",19),m.Wb(1,"mat-form-field",20),m.Wb(2,"mat-select",21),m.ec("ngModelChange",function(e){return t.$implicit.fieldName=e})("selectionChange",function(){m.xc(o);var e=t.$implicit;return m.ic().onFieldSelectionChanged(e)}),m.jc(3,"transloco"),m.Ec(4,Ye,3,4,"mat-option",22),m.Vb(),m.Vb(),m.Wb(5,"mat-form-field",23),m.Wb(6,"mat-select",24),m.ec("ngModelChange",function(e){return t.$implicit.operator=e}),m.jc(7,"transloco"),m.Ec(8,Je,3,4,"mat-option",22),m.jc(9,"operatorFilter"),m.Vb(),m.Vb(),m.Wb(10,"div",25),m.Ec(11,Ze,7,8,"div",26),m.Ec(12,et,13,12,"div",26),m.Ec(13,tt,2,1,"div",27),m.Ec(14,ot,3,4,"div",28),m.Vb(),m.Wb(15,"button",29),m.ec("click",function(){return m.xc(o),m.ic().onAddFilter()}),m.Wb(16,"mat-icon"),m.Fc(17,"add"),m.Vb(),m.Vb(),m.Wb(18,"button",30),m.ec("click",function(){m.xc(o);var e=t.index;return m.ic().onRemoveFilter(e)}),m.Wb(19,"mat-icon"),m.Fc(20,"close"),m.Vb(),m.Vb(),m.Vb()}if(2&e){var a=t.$implicit,c=m.ic();m.Eb(2),m.pc("placeholder",m.kc(3,10,"Field")),m.oc("ngModel",a.fieldName),m.Eb(2),m.oc("ngForOf",c.allFields),m.Eb(2),m.pc("placeholder",m.kc(7,12,"Operator")),m.oc("ngModel",a.operator),m.Eb(2),m.oc("ngForOf",m.lc(9,14,c.allOperators,a.valueType)),m.Eb(2),m.oc("ngSwitch",a.valueType),m.Eb(1),m.oc("ngSwitchCase",1),m.Eb(1),m.oc("ngSwitchCase",3),m.Eb(1),m.oc("ngSwitchCase",4)}}function ct(e,t){1&e&&(m.Wb(0,"th",42),m.Fc(1,"#"),m.Vb())}function nt(e,t){if(1&e){var o=m.Xb();m.Wb(0,"td",43),m.Fc(1),m.Wb(2,"button",44),m.ec("click",function(){m.xc(o);var e=t.$implicit;return m.ic().onDeleteItem(e.ID)}),m.jc(3,"transloco"),m.Wb(4,"mat-icon"),m.Fc(5,"remove_circle"),m.Vb(),m.Vb(),m.Vb()}if(2&e){var a=t.$implicit,c=m.ic();m.Eb(1),m.Hc(" ",a.ID," "),m.Eb(1),m.pc("matTooltip",m.kc(3,3,"Common.Delete")),m.oc("disabled",!c.isExpertMode)}}function it(e,t){1&e&&(m.Wb(0,"th",42),m.Fc(1),m.jc(2,"transloco"),m.Vb()),2&e&&(m.Eb(1),m.Gc(m.kc(2,1,"ExerciseItem")))}function rt(e,t){if(1&e){var o=m.Xb();m.Wb(0,"td",43),m.Fc(1),m.Wb(2,"button",45),m.ec("click",function(){m.xc(o);var e=t.$implicit;return m.ic().onDisplayExerciseItem(e.RefID)}),m.jc(3,"transloco"),m.Wb(4,"mat-icon"),m.Fc(5,"launch"),m.Vb(),m.Vb(),m.Wb(6,"button",6),m.ec("click",function(){m.xc(o);var e=t.$implicit;return m.ic().onChangeExerciseItem(e.RefID)}),m.jc(7,"transloco"),m.Wb(8,"mat-icon"),m.Fc(9,"edit"),m.Vb(),m.Vb(),m.Vb()}if(2&e){var a=t.$implicit,c=m.ic();m.Eb(1),m.Hc(" ",a.RefID," "),m.Eb(1),m.pc("matTooltip",m.kc(3,5,"Common.Display")),m.oc("disabled",!c.isExpertMode),m.Eb(4),m.pc("matTooltip",m.kc(7,7,"Common.Change")),m.oc("disabled",!c.isExpertMode)}}function lt(e,t){1&e&&(m.Wb(0,"th",42),m.Fc(1),m.jc(2,"transloco"),m.Vb()),2&e&&(m.Eb(1),m.Gc(m.kc(2,1,"Quiz.Date")))}function st(e,t){if(1&e&&(m.Wb(0,"td",43),m.Fc(1),m.jc(2,"date"),m.Vb()),2&e){var o=t.$implicit;m.Eb(1),m.Gc(m.lc(2,1,o.TakenDate,"yyyy-M-d"))}}function bt(e,t){1&e&&(m.Wb(0,"th",42),m.Fc(1),m.jc(2,"transloco"),m.Vb()),2&e&&(m.Eb(1),m.Gc(m.kc(2,1,"Quiz.Score")))}function ut(e,t){if(1&e&&(m.Wb(0,"td",43),m.Wb(1,"span"),m.Fc(2),m.Vb(),m.Vb()),2&e){var o=t.$implicit;m.Eb(1),m.Gb(o.Score>=60?"success-score":"fail-score"),m.Eb(1),m.Gc(o.Score)}}function dt(e,t){1&e&&m.Rb(0,"tr",46)}function mt(e,t){1&e&&m.Rb(0,"tr",47)}var pt,ft,ht,gt=[{path:"",component:ee},{path:"create",component:Ve},{path:"display/:id",component:Ve},{path:"edit/:id",component:Ve},{path:"search",component:Qe},{path:"score",component:(pt=function(){function t(o,a){e(this,t),this.odataService=o,this.uiUtilSrv=a,this.filters=[],this.allOperators=[],this.allFields=[],this.filterEditable=!0,this.displayedColumns=["id","refid","takendate","score"],this.dataSource=[],this.resultsLength=0,this.isLoadingResults=!0,this.refreshEvent=new m.o,this.subjFilters=new xe.a([]),this.allOperators=k.E.getGeneralFilterOperatorDisplayStrings(),this.allFields=[{displayas:"Content",value:"Content",valueType:2},{displayas:"Quiz.Date",value:"TakenDate",valueType:3},{displayas:"Quiz.Score",value:"Score",valueType:1},{displayas:"ExerciseItem",value:"RefID",valueType:1}]}return o(t,[{key:"isExpertMode",get:function(){return this.odataService.isLoggedin}},{key:"ngOnInit",value:function(){this.onAddFilter()}},{key:"ngAfterViewInit",value:function(){var e=this;this.sort.sortChange.subscribe(function(){return e.paginator.pageIndex=0}),Object(h.a)(this.sort.sortChange,this.paginator.page,this.refreshEvent,this.subjFilters).pipe(Object(v.a)({}),Object(E.a)(function(){if(e.subjFilters.value.length<=0)return Object(g.a)([]);e.isLoadingResults=!0;var t=e.prepareFilters(e.subjFilters.value),o=e.paginator.pageSize;return e.odataService.getExerciseItemUserScores(o,o*e.paginator.pageIndex,t)}),Object(x.a)(function(t){return e.isLoadingResults=!1,e.resultsLength=t.totalCount?t.totalCount:0,t.items}),Object(C.a)(function(){return e.isLoadingResults=!1,Object(g.a)([])})).subscribe(function(t){return e.dataSource=t||[]})}},{key:"onAddFilter",value:function(){this.filters.push(new k.n)}},{key:"onRemoveFilter",value:function(e){this.filters.splice(e,1),0===this.filters.length&&this.onAddFilter()}},{key:"onFieldSelectionChanged",value:function(e){this.allFields.forEach(function(t){t.value===e.fieldName&&(e.valueType=t.valueType)})}},{key:"prepareFilters",value:function(e){var t="";e.sort(function(e,t){return e.fieldName.localeCompare(t.fieldName)});var o=e.map(function(e){return e.fieldName});return(o=Array.from(new Set(o))).forEach(function(o){var a="";e.forEach(function(e){e.fieldName===o&&("Content"===e.fieldName?e.operator===k.o.Equal?a=a?"".concat(a," or ").concat(e.fieldName," eq '").concat(e.lowValue,"'"):"".concat(e.fieldName," eq '").concat(e.lowValue,"'"):e.operator===k.o.Like&&(a=a?"".concat(a," or contains(").concat(e.fieldName,",'").concat(e.lowValue,"')"):"contains(".concat(e.fieldName,",'").concat(e.lowValue,"')")):"Score"===e.fieldName||"RefID"===e.fieldName?e.operator===k.o.Equal?a=a?"".concat(a," or ").concat(e.fieldName," eq ").concat(e.lowValue):"".concat(e.fieldName," eq ").concat(e.lowValue):e.operator===k.o.LargerEqual?a=a?"".concat(a," or ").concat(e.fieldName," ge ").concat(e.lowValue):"".concat(e.fieldName," ge ").concat(e.lowValue):e.operator===k.o.LargerThan?a=a?"".concat(a," or ").concat(e.fieldName," gt ").concat(e.lowValue):"".concat(e.fieldName," gt ").concat(e.lowValue):e.operator===k.o.LessEqual?a=a?"".concat(a," or ").concat(e.fieldName," le ").concat(e.lowValue):"".concat(e.fieldName," le ").concat(e.lowValue):e.operator===k.o.LessThan?a=a?"".concat(a," or ").concat(e.fieldName," lt ").concat(e.lowValue):"".concat(e.fieldName," lt ").concat(e.lowValue):e.operator===k.o.NotEqual&&(a=a?"".concat(a," or ").concat(e.fieldName," ne ").concat(e.lowValue):"".concat(e.fieldName," ne ").concat(e.lowValue)):"TakenDate"===e.fieldName&&(e.operator===k.o.Equal?a=a?"".concat(a," or date(").concat(e.fieldName,") eq ").concat(e.lowValue):"date(".concat(e.fieldName,") eq ").concat(e.lowValue):e.operator===k.o.LargerEqual?a=a?"".concat(a," or date(").concat(e.fieldName,") ge ").concat(e.lowValue):"date(".concat(e.fieldName,") ge ").concat(e.lowValue):e.operator===k.o.LargerThan?a=a?"".concat(a," or date(").concat(e.fieldName,") gt ").concat(e.lowValue):"date(".concat(e.fieldName,") gt ").concat(e.lowValue):e.operator===k.o.LessEqual?a=a?"".concat(a," or date(").concat(e.fieldName,") le ").concat(e.lowValue):"date(".concat(e.fieldName,") le ").concat(e.lowValue):e.operator===k.o.LessThan?a=a?"".concat(a," or date(").concat(e.fieldName,") lt ").concat(e.lowValue):"date(".concat(e.fieldName,") lt ").concat(e.lowValue):e.operator===k.o.NotEqual&&(a=a?"".concat(a," or date(").concat(e.fieldName,") ne ").concat(e.lowValue):"date(".concat(e.fieldName,") ne ").concat(e.lowValue))))}),t=t?"".concat(t," and ").concat(a):""+a}),t}},{key:"onSearch",value:function(){var e=[];this.filters.forEach(function(t){var o={};switch(o.valueType=+t.valueType,t.valueType){case k.p.boolean:break;case k.p.date:o.fieldName=t.fieldName,o.operator=+t.operator,o.lowValue=Be()(t.value[0]).format("YYYY-MM-DD"),o.highValue=t.operator===k.o.Between?Be()(t.value[1]).format("YYYY-MM-DD"):"";break;case k.p.number:o.fieldName=t.fieldName,o.operator=+t.operator,o.lowValue=+t.value[0],o.highValue=t.operator===k.o.Between?+t.value[1]:"";break;case k.p.string:o.fieldName=t.fieldName,o.operator=+t.operator,o.lowValue=t.value[0],o.highValue=t.operator===k.o.Between?t.value[1]:""}e.push(o)}),this.subjFilters.next(e)}},{key:"onGoToExerciseItems",value:function(){this.uiUtilSrv.navigateExerciseItemListPage()}},{key:"onDisplayExerciseItem",value:function(e){this.uiUtilSrv.navigateExerciseItemDisplayPage(e)}},{key:"onChangeExerciseItem",value:function(e){this.uiUtilSrv.navigateKnowledgeItemChangePage(e)}},{key:"onDeleteItem",value:function(e){var t=this;this.odataService.deleteExerciseItemUserScore(e).subscribe({next:function(e){t.uiUtilSrv.showSnackInfo("DONE"),t.onRefreshList()},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})}},{key:"onGoToPreview",value:function(){var e=[];this.dataSource.forEach(function(t){e.push({refType:k.D.ExerciseItem,refId:t.RefID})}),this.uiUtilSrv.navigatePreviewPage(e)}},{key:"onRefreshList",value:function(){this.refreshEvent.emit()}},{key:"resetPaging",value:function(){this.paginator.pageIndex=0}}]),t}(),pt.\u0275fac=function(e){return new(e||pt)(m.Qb(R.d),m.Qb(R.f))},pt.\u0275cmp=m.Kb({type:pt,selectors:[["app-exercise-item-score"]],viewQuery:function(e,t){var o;1&e&&(m.Kc(p.a,1),m.Kc(f.a,1)),2&e&&(m.uc(o=m.fc())&&(t.paginator=o.first),m.uc(o=m.fc())&&(t.sort=o.first))},decls:47,vars:27,consts:[[1,"toolbar-spacer"],["mat-raised-button","",3,"disabled","matTooltip","click"],[2,"margin","8px"],["fxLayout","row","fxLayoutGap","10px","class","control-full-width",4,"ngFor","ngForOf"],[1,"control-full-width"],["mat-button","","aria-label","Search","color","primary",3,"click"],["mat-icon-button","","color","accent",3,"disabled","matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"example-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","refid"],["matColumnDef","takendate"],["matColumnDef","score"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],["fxLayout","row","fxLayoutGap","10px",1,"control-full-width"],["fxFlex","30"],[3,"placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","15"],[3,"placeholder","ngModel","ngModelChange"],["fxFlex","50","fxLayout","row",3,"ngSwitch"],["fxLayout","row","fxLayoutGap","5px",4,"ngSwitchCase"],["fxLayout","row",4,"ngSwitchCase"],["fxLayout","row",4,"ngSwitchDefault"],["mat-button","","mat-icon-button","","aria-label","Add",3,"click"],["mat-button","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["fxLayout","row","fxLayoutGap","5px"],["matInput","","type","number","name","lvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","","type","number","name","hvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","",3,"ngModel","matDatepicker","placeholder","ngModelChange"],["matSuffix","",3,"for"],["lvpicker",""],["hvpicker",""],["fxLayout","row"],[3,"ngModel","ngModelChange"],["matInput","","type","text","name","lvalue_2",3,"placeholder","ngModel","ngModelChange"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"disabled","matTooltip","click"],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(m.Wb(0,"mat-toolbar-row"),m.Wb(1,"span"),m.Wb(2,"h1"),m.Fc(3),m.jc(4,"transloco"),m.Vb(),m.Vb(),m.Rb(5,"span",0),m.Wb(6,"section"),m.Wb(7,"button",1),m.ec("click",function(){return t.onGoToExerciseItems()}),m.jc(8,"transloco"),m.Fc(9),m.jc(10,"transloco"),m.Vb(),m.Vb(),m.Vb(),m.Wb(11,"div",2),m.Ec(12,at,21,17,"div",3),m.Wb(13,"div",4),m.Wb(14,"button",5),m.ec("click",function(){return t.onSearch()}),m.Wb(15,"mat-icon"),m.Fc(16,"search"),m.Vb(),m.Fc(17),m.jc(18,"transloco"),m.Vb(),m.Vb(),m.Vb(),m.Wb(19,"mat-toolbar-row"),m.Wb(20,"section"),m.Wb(21,"button",6),m.ec("click",function(){return t.onGoToPreview()}),m.jc(22,"transloco"),m.Wb(23,"mat-icon"),m.Fc(24,"slideshow"),m.Vb(),m.Vb(),m.Wb(25,"button",6),m.ec("click",function(){return t.onRefreshList()}),m.jc(26,"transloco"),m.Wb(27,"mat-icon"),m.Fc(28,"refresh"),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(29,"div",7),m.Wb(30,"div",8),m.Wb(31,"table",9),m.ec("matSortChange",function(){return t.resetPaging()}),m.Ub(32,10),m.Ec(33,ct,2,0,"th",11),m.Ec(34,nt,6,5,"td",12),m.Tb(),m.Ub(35,13),m.Ec(36,it,3,3,"th",11),m.Ec(37,rt,10,9,"td",12),m.Tb(),m.Ub(38,14),m.Ec(39,lt,3,3,"th",11),m.Ec(40,st,3,4,"td",12),m.Tb(),m.Ub(41,15),m.Ec(42,bt,3,3,"th",11),m.Ec(43,ut,3,3,"td",12),m.Tb(),m.Ec(44,dt,1,0,"tr",16),m.Ec(45,mt,1,0,"tr",17),m.Vb(),m.Vb(),m.Rb(46,"mat-paginator",18),m.Vb()),2&e&&(m.Eb(3),m.Gc(m.kc(4,15,"PracticeHistories")),m.Eb(4),m.pc("matTooltip",m.kc(8,17,"ExerciseItem")),m.oc("disabled",!t.isExpertMode),m.Eb(2),m.Gc(m.kc(10,19,"ExerciseItem")),m.Eb(3),m.oc("ngForOf",t.filters),m.Eb(5),m.Hc(" ",m.kc(18,21,"Common.Search")," "),m.Eb(4),m.pc("matTooltip",m.kc(22,23,"Common.Preview")),m.oc("disabled",!t.isExpertMode||t.dataSource.length<=0),m.Eb(4),m.pc("matTooltip",m.kc(26,25,"Common.Refresh")),m.oc("disabled",!t.isExpertMode),m.Eb(6),m.oc("dataSource",t.dataSource),m.Eb(13),m.oc("matHeaderRowDef",t.displayedColumns),m.Eb(1),m.oc("matRowDefColumns",t.displayedColumns),m.Eb(1),m.oc("length",t.resultsLength)("pageSize",20))},directives:[G.c,M.b,P.a,n.l,U.a,$.j,f.a,$.c,$.e,$.b,$.g,$.i,p.a,se.c,se.d,W.c,se.a,re.a,i.n,i.q,n.o,n.p,n.q,be.n,I.b,i.r,i.c,ke.d,ke.f,W.i,ke.c,ye.a,$.d,$.a,$.f,$.h],pipes:[s.d,we.a,n.e],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.mat-column-id[_ngcontent-%COMP%]{max-width:300px;width:250px}.mat-column-itemtype[_ngcontent-%COMP%]{max-width:120px;width:120px}.mat-column-tags[_ngcontent-%COMP%]{max-width:250px;width:150px}.mat-column-created[_ngcontent-%COMP%]{max-width:120px;width:120px}.success-score[_ngcontent-%COMP%]{color:green;font-size:16px}.fail-score[_ngcontent-%COMP%]{color:red;font-size:16px}"]}),pt)}],vt=((ft=function t(){e(this,t)}).\u0275fac=function(e){return new(e||ft)},ft.\u0275mod=m.Ob({type:ft}),ft.\u0275inj=m.Nb({imports:[[d.e.forChild(gt)],d.e]}),ft),Et=c("iasb"),Vt=((ht=function t(){e(this,t)}).\u0275fac=function(e){return new(e||ht)},ht.\u0275mod=m.Ob({type:ht}),ht.\u0275inj=m.Nb({providers:[],imports:[[n.c,i.i,i.s,b.a,u.a,r.b,l.b.forChild(),vt,s.c,Et.a]]}),ht)}}])}();