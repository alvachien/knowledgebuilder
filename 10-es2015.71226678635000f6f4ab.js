(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"82/d":function(t,e,o){"use strict";o.r(e),o.d(e,"AwardModule",function(){return oo});var c=o("ofXK"),n=o("3Pt+"),i=o("QPBi"),a=o("jIBr"),r=o("iasb"),l=o("tyNb"),s=o("0IaG"),b=o("wd/R"),d=o.n(b),m=o("VHTt"),u=o("fXoL"),h=o("o0su"),p=o("/t3+"),f=o("bTqV"),g=o("Qu3c"),E=o("NFeN"),C=o("+0xr"),W=o("M9IT"),V=o("f0Cb"),v=o("kmnG"),D=o("qFsG"),w=o("iadO");function F(t,e){1&t&&(u.Wb(0,"th",15),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.TargetUser")))}function k(t,e){if(1&t&&(u.Wb(0,"td",16),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.targetUser)}}function T(t,e){1&t&&(u.Wb(0,"th",15),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Quiz.Date")))}function y(t,e){if(1&t&&(u.Wb(0,"td",16),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.getRecordDateDisplayString())}}function S(t,e){1&t&&(u.Wb(0,"th",15),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.Point")))}function G(t,e){if(1&t){const t=u.Xb();u.Wb(0,"td",16),u.Fc(1),u.Wb(2,"button",17),u.ec("click",function(){u.xc(t);const o=e.$implicit;return u.ic().onGetPoints(o.targetUser,o.recordDate)}),u.jc(3,"transloco"),u.Wb(4,"mat-icon"),u.Fc(5,"visibility"),u.Vb(),u.Vb(),u.Vb()}if(2&t){const t=e.$implicit;u.Eb(1),u.Hc(" ",t.point," | "),u.Eb(1),u.pc("matTooltip",u.kc(3,2,"Award.Point"))}}function R(t,e){1&t&&(u.Wb(0,"th",15),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.AggregatedPoints")))}function U(t,e){if(1&t&&(u.Wb(0,"td",16),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.aggPoint)}}function M(t,e){1&t&&u.Rb(0,"tr",18)}function x(t,e){1&t&&u.Rb(0,"tr",19)}function P(t,e){1&t&&(u.Wb(0,"th",15),u.Fc(1,"#"),u.Vb())}function I(t,e){if(1&t){const t=u.Xb();u.Wb(0,"td",16),u.Wb(1,"button",24),u.ec("click",function(){u.xc(t);const o=e.$implicit;return u.ic(2).onDeletePoint(o.id)}),u.jc(2,"transloco"),u.Wb(3,"mat-icon"),u.Fc(4,"remove_circle"),u.Vb(),u.Vb(),u.Vb()}if(2&t){const t=e.$implicit;u.Eb(1),u.pc("matTooltip",u.kc(2,2,"Common.Delete")),u.oc("disabled",t.matchedRuleID)}}function A(t,e){1&t&&(u.Wb(0,"th",15),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.TargetUser")))}function j(t,e){if(1&t&&(u.Wb(0,"td",16),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.targetUser)}}function O(t,e){1&t&&(u.Wb(0,"th",15),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Quiz.Date")))}function $(t,e){if(1&t&&(u.Wb(0,"td",16),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.getRecordDateDisplayString())}}function H(t,e){1&t&&(u.Wb(0,"th",15),u.Fc(1,"Rule ID"),u.Vb())}function N(t,e){if(1&t&&(u.Wb(0,"td",16),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.matchedRuleID)}}function B(t,e){1&t&&(u.Wb(0,"th",15),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.ContinuousDays")))}function _(t,e){if(1&t&&(u.Wb(0,"td",16),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.countOfDay)}}function q(t,e){1&t&&(u.Wb(0,"th",15),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.Point")))}function Q(t,e){if(1&t&&(u.Wb(0,"td",16),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.point)}}function L(t,e){1&t&&(u.Wb(0,"th",15),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Common.Comment")))}function K(t,e){if(1&t&&(u.Wb(0,"td",16),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.comment)}}function z(t,e){1&t&&u.Rb(0,"tr",18)}function X(t,e){1&t&&u.Rb(0,"tr",19)}function Y(t,e){if(1&t){const t=u.Xb();u.Wb(0,"div"),u.Wb(1,"mat-toolbar"),u.Wb(2,"h3"),u.Fc(3),u.jc(4,"transloco"),u.Vb(),u.Rb(5,"div",0),u.Wb(6,"button",17),u.ec("click",function(){return u.xc(t),u.ic().onHidePoints()}),u.jc(7,"transloco"),u.Wb(8,"mat-icon"),u.Fc(9,"visibility_off"),u.Vb(),u.Vb(),u.Vb(),u.Wb(10,"div",2),u.Wb(11,"div",3),u.Wb(12,"table",4),u.Ub(13,20),u.Ec(14,P,2,0,"th",6),u.Ec(15,I,5,4,"td",7),u.Tb(),u.Ub(16,5),u.Ec(17,A,3,3,"th",6),u.Ec(18,j,2,1,"td",7),u.Tb(),u.Ub(19,8),u.Ec(20,O,3,3,"th",6),u.Ec(21,$,2,1,"td",7),u.Tb(),u.Ub(22,21),u.Ec(23,H,2,0,"th",6),u.Ec(24,N,2,1,"td",7),u.Tb(),u.Ub(25,22),u.Ec(26,B,3,3,"th",6),u.Ec(27,_,2,1,"td",7),u.Tb(),u.Ub(28,9),u.Ec(29,q,3,3,"th",6),u.Ec(30,Q,2,1,"td",7),u.Tb(),u.Ub(31,23),u.Ec(32,L,3,3,"th",6),u.Ec(33,K,2,1,"td",7),u.Tb(),u.Ec(34,z,1,0,"tr",11),u.Ec(35,X,1,0,"tr",12),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){const t=u.ic();u.Eb(3),u.Jc("",u.kc(4,7,"Award.Point"),", ",t.selectedUser,", ",t.selectedDate,""),u.Eb(3),u.pc("matTooltip",u.kc(7,9,"Common.Hide")),u.Eb(6),u.oc("dataSource",t.dataSourcePoints),u.Eb(22),u.oc("matHeaderRowDef",t.displayedPointColumns),u.Eb(1),u.oc("matRowDefColumns",t.displayedPointColumns)}}const J="table[_ngcontent-%COMP%]{width:100%}.example-form[_ngcontent-%COMP%]{min-width:250px;max-width:500px;width:100%}.example-margin[_ngcontent-%COMP%]{margin:0 10px}";let Z=(()=>{class t{constructor(t,e,o){this.oDataSrv=t,this.dialog=e,this.uiUtilSrv=o,this.dataSource=[],this.dataSourcePoints=[],this.recordCount=0,this.displayedColumns=["targetUser","recordDate","point","aggpoint"],this.displayedPointColumns=["action","targetUser","recordDate","matchedRuleID","countOfDay","point","comment"],this.selectedUser="",this.selectedDate="",this.isPointShow=!1}ngOnInit(){this.oDataSrv.getAwardUsers().subscribe(),this.refreshList()}get isExpertMode(){return this.oDataSrv.expertMode}onCreateAward(){this.dialog.open(tt,{width:"600px",closeOnNavigation:!1,data:new m.c}).afterClosed().subscribe(t=>{console.log("The dialog was closed with result: "+t),t&&this.oDataSrv.createAwardPoint(t).subscribe({next:t=>{this.refreshList()},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})})}refreshList(){this.oDataSrv.getAwardPointReports(100,0).subscribe({next:t=>{this.dataSource=t.items.slice(),this.recordCount=t.totalCount},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})}onGetPoints(t,e){this.oDataSrv.getAwardPoints(100,0,void 0,`TargetUser eq '${t}' AND RecordDate eq ${e.format(m.N)}`).subscribe({next:o=>{this.selectedUser=t,this.selectedDate=e.format(m.N),this.dataSourcePoints=[],this.dataSourcePoints=o.items.slice(),this.isPointShow=!0},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})}onHidePoints(){this.selectedDate="",this.selectedUser="",this.dataSourcePoints=[],this.isPointShow=!1}onDeletePoint(t){this.oDataSrv.deleteAwardPoint(t).subscribe({next:t=>{this.onGetPoints(this.selectedUser,d()(this.selectedDate))},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(h.b),u.Qb(s.b),u.Qb(h.d))},t.\u0275cmp=u.Kb({type:t,selectors:[["app-overview"]],decls:29,vars:13,consts:[[1,"toolbar-spacer"],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","targetUser"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","recordDate"],["matColumnDef","point"],["matColumnDef","aggpoint"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""],["matColumnDef","action"],["matColumnDef","matchedRuleID"],["matColumnDef","countOfDay"],["matColumnDef","comment"],["mat-icon-button","","color","warn",3,"disabled","matTooltip","click"]],template:function(t,e){1&t&&(u.Wb(0,"mat-toolbar"),u.Wb(1,"h3"),u.Fc(2),u.jc(3,"transloco"),u.Vb(),u.Rb(4,"div",0),u.Wb(5,"button",1),u.ec("click",function(){return e.onCreateAward()}),u.jc(6,"transloco"),u.Wb(7,"mat-icon"),u.Fc(8,"add_circle"),u.Vb(),u.Vb(),u.Vb(),u.Wb(9,"div",2),u.Wb(10,"div",3),u.Wb(11,"table",4),u.Ub(12,5),u.Ec(13,F,3,3,"th",6),u.Ec(14,k,2,1,"td",7),u.Tb(),u.Ub(15,8),u.Ec(16,T,3,3,"th",6),u.Ec(17,y,2,1,"td",7),u.Tb(),u.Ub(18,9),u.Ec(19,S,3,3,"th",6),u.Ec(20,G,6,4,"td",7),u.Tb(),u.Ub(21,10),u.Ec(22,R,3,3,"th",6),u.Ec(23,U,2,1,"td",7),u.Tb(),u.Ec(24,M,1,0,"tr",11),u.Ec(25,x,1,0,"tr",12),u.Vb(),u.Vb(),u.Rb(26,"mat-paginator",13),u.Vb(),u.Rb(27,"mat-divider"),u.Ec(28,Y,36,11,"div",14)),2&t&&(u.Eb(2),u.Gc(u.kc(3,9,"Award.Overview")),u.Eb(3),u.pc("matTooltip",u.kc(6,11,"Common.Create")),u.oc("disabled",!e.isExpertMode),u.Eb(6),u.oc("dataSource",e.dataSource),u.Eb(13),u.oc("matHeaderRowDef",e.displayedColumns),u.Eb(1),u.oc("matRowDefColumns",e.displayedColumns),u.Eb(1),u.oc("length",e.recordCount)("pageSize",20),u.Eb(2),u.oc("ngIf",e.isPointShow))},directives:[p.a,f.b,g.a,E.a,C.j,C.c,C.e,C.b,C.g,C.i,W.a,V.a,c.m,C.d,C.a,C.f,C.h],pipes:[i.d],styles:[J]}),t})(),tt=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}onNoClick(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(s.g),u.Qb(s.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["app-overview-award-point-crtdlg"]],decls:32,vars:20,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"example-form"],["appearance","fill",1,"control-full-width"],["matInput","","name","targetuser",3,"ngModel","ngModelChange"],["appearance","fill"],["matInput","","name","recorddate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["matInput","","type","number","name","point",3,"ngModel","ngModelChange"],["matInput","","name","comment",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"disabled","mat-dialog-close"]],template:function(t,e){if(1&t&&(u.Wb(0,"h1",0),u.Fc(1,"CREATE AWARD POINT"),u.Vb(),u.Wb(2,"div",1),u.Wb(3,"form",2),u.Wb(4,"mat-form-field",3),u.Wb(5,"mat-label"),u.Fc(6),u.jc(7,"transloco"),u.Vb(),u.Wb(8,"input",4),u.ec("ngModelChange",function(t){return e.data.targetUser=t}),u.Vb(),u.Vb(),u.Wb(9,"mat-form-field",5),u.Wb(10,"mat-label"),u.Fc(11),u.jc(12,"transloco"),u.Vb(),u.Wb(13,"input",6),u.ec("ngModelChange",function(t){return e.data.recordDate=t}),u.Vb(),u.Rb(14,"mat-datepicker-toggle",7),u.Rb(15,"mat-datepicker",null,8),u.Vb(),u.Wb(17,"mat-form-field",3),u.Wb(18,"mat-label"),u.Fc(19),u.jc(20,"transloco"),u.Vb(),u.Wb(21,"input",9),u.ec("ngModelChange",function(t){return e.data.point=t}),u.Vb(),u.Vb(),u.Wb(22,"mat-form-field",3),u.Wb(23,"mat-label"),u.Fc(24),u.jc(25,"transloco"),u.Vb(),u.Wb(26,"input",10),u.ec("ngModelChange",function(t){return e.data.comment=t}),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(27,"div",11),u.Wb(28,"button",12),u.ec("click",function(){return e.onNoClick()}),u.Fc(29,"No Thanks"),u.Vb(),u.Wb(30,"button",13),u.Fc(31,"OK"),u.Vb(),u.Vb()),2&t){const t=u.vc(16);u.Eb(6),u.Gc(u.kc(7,12,"Award.TargetUser")),u.Eb(2),u.oc("ngModel",e.data.targetUser),u.Eb(3),u.Gc(u.kc(12,14,"Quiz.Date")),u.Eb(2),u.oc("matDatepicker",t)("ngModel",e.data.recordDate),u.Eb(1),u.oc("for",t),u.Eb(5),u.Gc(u.kc(20,16,"Award.Point")),u.Eb(2),u.oc("ngModel",e.data.point),u.Eb(3),u.Gc(u.kc(25,18,"Common.Comment")),u.Eb(2),u.oc("ngModel",e.data.comment),u.Eb(4),u.oc("disabled",!e.data.isValid())("mat-dialog-close",e.data)}},directives:[s.h,s.e,n.v,n.o,n.p,v.c,v.g,D.b,n.c,n.n,n.q,w.d,w.f,v.i,w.c,n.r,s.c,f.b,s.d],pipes:[i.d],styles:[J]}),t})();var et=o("tPNy");function ot(t,e){1&t&&(u.Wb(0,"th",15),u.Fc(1,"#"),u.Vb())}function ct(t,e){if(1&t){const t=u.Xb();u.Wb(0,"td",16),u.Fc(1),u.Wb(2,"button",17),u.ec("click",function(){u.xc(t);const o=e.$implicit;return u.ic().onDisplayRuleGroup(o.id)}),u.jc(3,"transloco"),u.Wb(4,"mat-icon"),u.Fc(5,"launch"),u.Vb(),u.Vb(),u.Wb(6,"button",18),u.ec("click",function(){u.xc(t);const o=e.$implicit;return u.ic().onDeleteRuleGroup(o.id)}),u.jc(7,"transloco"),u.Wb(8,"mat-icon"),u.Fc(9,"remove_circle"),u.Vb(),u.Vb(),u.Vb()}if(2&t){const t=e.$implicit;u.Eb(1),u.Hc("",t.id," | "),u.Eb(1),u.pc("matTooltip",u.kc(3,3,"Common.Display")),u.Eb(4),u.pc("matTooltip",u.kc(7,5,"Common.Delete"))}}function nt(t,e){1&t&&(u.Wb(0,"th",15),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.TargetUser")))}function it(t,e){if(1&t&&(u.Wb(0,"td",16),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.targetUser)}}function at(t,e){1&t&&(u.Wb(0,"th",15),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Type")))}function rt(t,e){if(1&t&&(u.Wb(0,"td",16),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t){const t=e.$implicit,o=u.ic();u.Eb(1),u.Gc(u.kc(2,1,o.getAwardRuleTypeName(t.ruleType)))}}function lt(t,e){1&t&&(u.Wb(0,"th",15),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.Validity")))}function st(t,e){if(1&t&&(u.Wb(0,"td",16),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.validity)}}function bt(t,e){1&t&&(u.Wb(0,"th",15),u.Fc(1,"Desp"),u.Vb())}function dt(t,e){if(1&t&&(u.Wb(0,"td",16),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.desp)}}function mt(t,e){1&t&&u.Rb(0,"tr",19)}function ut(t,e){1&t&&u.Rb(0,"tr",20)}let ht=(()=>{class t{constructor(t,e,o){this.odataSrv=t,this.dialog=e,this.uiUtilSrv=o,this.dataSource=[],this.displayedColumns=["id","targetUser","ruleType","validity","desp"],this.recordCount=0}ngOnInit(){this.odataSrv.getAwardUsers().subscribe(),this.refreshList()}get isExpertMode(){return this.odataSrv.expertMode}getAwardRuleTypeName(t){return Object(et.i)(t)}onCreateRuleGroup(){this.uiUtilSrv.navigateAwardRuleGenerationPage()}refreshList(){this.odataSrv.getAwardRuleGroups(100,0,void 0).subscribe({next:t=>{this.dataSource=t.items.slice(),this.recordCount=t.totalCount},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})}onCopyRuleGroup(t){}onDeleteRuleGroup(t){this.odataSrv.deleteAwardRuleGroup(t).subscribe({next:t=>{this.refreshList()},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})}onDisplayRuleGroup(t){this.uiUtilSrv.navigateAwardRuleGroupDisplayPage(t)}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(h.b),u.Qb(s.b),u.Qb(h.d))},t.\u0275cmp=u.Kb({type:t,selectors:[["app-award-rule"]],decls:30,vars:12,consts:[[1,"toolbar-spacer"],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","targetUser"],["matColumnDef","ruleType"],["matColumnDef","validity"],["matColumnDef","desp"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"matTooltip","click"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(u.Wb(0,"mat-toolbar"),u.Wb(1,"h3"),u.Fc(2),u.jc(3,"transloco"),u.Vb(),u.Rb(4,"div",0),u.Wb(5,"button",1),u.ec("click",function(){return e.onCreateRuleGroup()}),u.jc(6,"transloco"),u.Wb(7,"mat-icon"),u.Fc(8,"add_circle"),u.Vb(),u.Vb(),u.Vb(),u.Wb(9,"div",2),u.Wb(10,"div",3),u.Wb(11,"table",4),u.Ub(12,5),u.Ec(13,ot,2,0,"th",6),u.Ec(14,ct,10,7,"td",7),u.Tb(),u.Ub(15,8),u.Ec(16,nt,3,3,"th",6),u.Ec(17,it,2,1,"td",7),u.Tb(),u.Ub(18,9),u.Ec(19,at,3,3,"th",6),u.Ec(20,rt,3,3,"td",7),u.Tb(),u.Ub(21,10),u.Ec(22,lt,3,3,"th",6),u.Ec(23,st,2,1,"td",7),u.Tb(),u.Ub(24,11),u.Ec(25,bt,2,0,"th",6),u.Ec(26,dt,2,1,"td",7),u.Tb(),u.Ec(27,mt,1,0,"tr",12),u.Ec(28,ut,1,0,"tr",13),u.Vb(),u.Vb(),u.Rb(29,"mat-paginator",14),u.Vb()),2&t&&(u.Eb(2),u.Gc(u.kc(3,8,"Award.Rules")),u.Eb(3),u.pc("matTooltip",u.kc(6,10,"Common.Create")),u.oc("disabled",!e.isExpertMode),u.Eb(6),u.oc("dataSource",e.dataSource),u.Eb(16),u.oc("matHeaderRowDef",e.displayedColumns),u.Eb(1),u.oc("matRowDefColumns",e.displayedColumns),u.Eb(1),u.oc("length",e.recordCount)("pageSize",20))},directives:[p.a,f.b,g.a,E.a,C.j,C.c,C.e,C.b,C.g,C.i,W.a,C.d,C.a,C.f,C.h],pipes:[i.d],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),t})();var pt=o("bSwM"),ft=o("d3UM"),gt=o("FKr1");function Et(t,e){1&t&&u.Rb(0,"th",23)}function Ct(t,e){if(1&t){const t=u.Xb();u.Wb(0,"td",24),u.Wb(1,"button",25),u.ec("click",function(){u.xc(t);const o=e.$implicit;return u.ic().onGetPoints(o.targetUser,o.recordDate)}),u.jc(2,"transloco"),u.Wb(3,"mat-icon"),u.Fc(4,"visibility"),u.Vb(),u.Vb(),u.Wb(5,"button",26),u.ec("click",function(){u.xc(t);const o=e.$implicit;return u.ic().onDeleteTrace(o.targetUser,o.recordDate)}),u.jc(6,"transloco"),u.Wb(7,"mat-icon"),u.Fc(8,"remove_circle"),u.Vb(),u.Vb(),u.Vb()}2&t&&(u.Eb(1),u.pc("matTooltip",u.kc(2,2,"Award.Point")),u.Eb(4),u.pc("matTooltip",u.kc(6,4,"Common.Delete")))}function Wt(t,e){1&t&&(u.Wb(0,"th",23),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.TargetUser")))}function Vt(t,e){if(1&t&&(u.Wb(0,"td",24),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.targetUser)}}function vt(t,e){1&t&&(u.Wb(0,"th",23),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Quiz.Date")))}function Dt(t,e){if(1&t&&(u.Wb(0,"td",24),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.getRecordDateDisplayString())}}function wt(t,e){1&t&&(u.Wb(0,"th",23),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.SchoolWorkTime")))}function Ft(t,e){if(1&t&&(u.Wb(0,"td",24),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.schoolWorkTime)}}function kt(t,e){1&t&&(u.Wb(0,"th",23),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.GoToBedTime")))}function Tt(t,e){if(1&t&&(u.Wb(0,"td",24),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.goToBedTime)}}function yt(t,e){1&t&&(u.Wb(0,"th",23),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.HomeworkCount")))}function St(t,e){if(1&t&&(u.Wb(0,"td",24),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.homeWorkCount)}}function Gt(t,e){1&t&&(u.Wb(0,"th",23),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.BodyExerciseCount")))}function Rt(t,e){if(1&t&&(u.Wb(0,"td",24),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.bodyExerciseCount)}}function Ut(t,e){1&t&&(u.Wb(0,"th",23),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.ErrorsCollection")))}function Mt(t,e){if(1&t&&(u.Wb(0,"td",24),u.Wb(1,"mat-checkbox",27),u.ec("ngModelChange",function(t){return e.$implicit.errorsCollection=t}),u.Vb(),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.oc("ngModel",t.errorsCollection)}}function xt(t,e){1&t&&(u.Wb(0,"th",23),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.HandWriting")))}function Pt(t,e){if(1&t&&(u.Wb(0,"td",24),u.Wb(1,"mat-checkbox",27),u.ec("ngModelChange",function(t){return e.$implicit.handWriting=t}),u.Vb(),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.oc("ngModel",t.handWriting)}}function It(t,e){1&t&&(u.Wb(0,"th",23),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.CleanDesk")))}function At(t,e){if(1&t&&(u.Wb(0,"td",24),u.Wb(1,"mat-checkbox",27),u.ec("ngModelChange",function(t){return e.$implicit.cleanDesk=t}),u.Vb(),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.oc("ngModel",t.cleanDesk)}}function jt(t,e){1&t&&(u.Wb(0,"th",23),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.HouseKeepingCount")))}function Ot(t,e){if(1&t&&(u.Wb(0,"td",24),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.houseKeepingCount)}}function $t(t,e){1&t&&(u.Wb(0,"th",23),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.PoliteBehavior")))}function Ht(t,e){if(1&t&&(u.Wb(0,"td",24),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.politeBehavior)}}function Nt(t,e){1&t&&u.Rb(0,"tr",28)}function Bt(t,e){1&t&&u.Rb(0,"tr",29)}function _t(t,e){1&t&&(u.Wb(0,"th",23),u.Fc(1,"#"),u.Vb())}function qt(t,e){if(1&t){const t=u.Xb();u.Wb(0,"td",24),u.Fc(1),u.Wb(2,"button",34),u.ec("click",function(){u.xc(t);const o=e.$implicit;return u.ic(2).onDeletePoint(o.id)}),u.jc(3,"transloco"),u.Wb(4,"mat-icon"),u.Fc(5,"remove_circle"),u.Vb(),u.Vb(),u.Vb()}if(2&t){const t=e.$implicit;u.Eb(1),u.Hc(" ",t.id," | "),u.Eb(1),u.pc("matTooltip",u.kc(3,3,"Common.Delete")),u.oc("disabled",t.matchedRuleID)}}function Qt(t,e){1&t&&(u.Wb(0,"th",23),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.TargetUser")))}function Lt(t,e){if(1&t&&(u.Wb(0,"td",24),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.targetUser)}}function Kt(t,e){1&t&&(u.Wb(0,"th",23),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Quiz.Date")))}function zt(t,e){if(1&t&&(u.Wb(0,"td",24),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.getRecordDateDisplayString())}}function Xt(t,e){1&t&&(u.Wb(0,"th",23),u.Fc(1,"Rule ID"),u.Vb())}function Yt(t,e){if(1&t&&(u.Wb(0,"td",24),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.matchedRuleID)}}function Jt(t,e){1&t&&(u.Wb(0,"th",23),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.ContinuousDays")))}function Zt(t,e){if(1&t&&(u.Wb(0,"td",24),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.countOfDay)}}function te(t,e){1&t&&(u.Wb(0,"th",23),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Award.Point")))}function ee(t,e){if(1&t&&(u.Wb(0,"td",24),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.point)}}function oe(t,e){1&t&&(u.Wb(0,"th",23),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t&&(u.Eb(1),u.Gc(u.kc(2,1,"Common.Comment")))}function ce(t,e){if(1&t&&(u.Wb(0,"td",24),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.comment)}}function ne(t,e){1&t&&u.Rb(0,"tr",28)}function ie(t,e){1&t&&u.Rb(0,"tr",29)}function ae(t,e){if(1&t){const t=u.Xb();u.Wb(0,"div"),u.Wb(1,"mat-toolbar"),u.Wb(2,"h3"),u.Fc(3),u.jc(4,"transloco"),u.Vb(),u.Rb(5,"div",0),u.Wb(6,"button",25),u.ec("click",function(){return u.xc(t),u.ic().onHidePoints()}),u.jc(7,"transloco"),u.Wb(8,"mat-icon"),u.Fc(9,"visibility_off"),u.Vb(),u.Vb(),u.Vb(),u.Wb(10,"div",2),u.Wb(11,"div",3),u.Wb(12,"table",4),u.Ub(13,5),u.Ec(14,_t,2,0,"th",6),u.Ec(15,qt,6,5,"td",7),u.Tb(),u.Ub(16,8),u.Ec(17,Qt,3,3,"th",6),u.Ec(18,Lt,2,1,"td",7),u.Tb(),u.Ub(19,9),u.Ec(20,Kt,3,3,"th",6),u.Ec(21,zt,2,1,"td",7),u.Tb(),u.Ub(22,30),u.Ec(23,Xt,2,0,"th",6),u.Ec(24,Yt,2,1,"td",7),u.Tb(),u.Ub(25,31),u.Ec(26,Jt,3,3,"th",6),u.Ec(27,Zt,2,1,"td",7),u.Tb(),u.Ub(28,32),u.Ec(29,te,3,3,"th",6),u.Ec(30,ee,2,1,"td",7),u.Tb(),u.Ub(31,33),u.Ec(32,oe,3,3,"th",6),u.Ec(33,ce,2,1,"td",7),u.Tb(),u.Ec(34,ne,1,0,"tr",19),u.Ec(35,ie,1,0,"tr",20),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){const t=u.ic();u.Eb(3),u.Jc("",u.kc(4,7,"Award.Point"),", ",t.selectedUser,", ",t.selectedDate,""),u.Eb(3),u.pc("matTooltip",u.kc(7,9,"Common.Hide")),u.Eb(6),u.oc("dataSource",t.dataSourcePoints),u.Eb(22),u.oc("matHeaderRowDef",t.displayedPointColumns),u.Eb(1),u.oc("matRowDefColumns",t.displayedPointColumns)}}function re(t,e){if(1&t&&(u.Wb(0,"mat-option",22),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.oc("value",t.targetUser),u.Eb(1),u.Gc(t.targetUser)}}const le="table[_ngcontent-%COMP%]{width:100%}.example-form[_ngcontent-%COMP%]{min-width:250px;max-width:500px;width:100%}.example-margin[_ngcontent-%COMP%]{margin:0 10px}td[_ngcontent-%COMP%]{padding-right:8px}";let se=(()=>{class t{constructor(t,e,o){this.odataSrv=t,this.dialog=e,this.uiUtilSrv=o,this.dataSourceTrace=[],this.dataSourcePoints=[],this.traceLength=0,this.displayedColumns=["action","targetUser","recordDate","schoolWorkTime","goToBedTime","homeWorkCount","bodyExerciseCount","errorsCollection","handWriting","cleanDesk","houseKeepingCount","politeBehavior"],this.displayedPointColumns=["action","targetUser","recordDate","matchedRuleID","countOfDay","point","comment"],this.selectedUser="",this.selectedDate="",this.isPointShow=!1}ngOnInit(){this.odataSrv.getAwardUsers().subscribe(),this.refreshList()}get isExpertMode(){return this.odataSrv.expertMode}onCreateTrace(){this.dialog.open(be,{width:"600px",closeOnNavigation:!1,data:new m.j}).afterClosed().subscribe(t=>{console.log("The dialog was closed with result: "+t),t&&this.odataSrv.createDailyTrace(t).subscribe({next:t=>{this.refreshList()},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})})}refreshList(){this.odataSrv.getDailyTrace(100,0).subscribe({next:t=>{this.dataSourceTrace=t.items.slice(),this.traceLength=t.totalCount},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})}onGetPoints(t,e){this.odataSrv.getAwardPoints(100,0,void 0,`TargetUser eq '${t}' AND RecordDate eq ${e.format(m.N)}`).subscribe({next:o=>{this.selectedUser=t,this.selectedDate=e.format(m.N),this.dataSourcePoints=[],this.dataSourcePoints=o.items.slice(),this.isPointShow=!0},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})}onDeleteTrace(t,e){this.odataSrv.deleteDailyTrace(t,e).subscribe({next:t=>{this.isPointShow=!1,this.refreshList()},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})}onHidePoints(){this.selectedDate="",this.selectedUser="",this.dataSourcePoints=[],this.isPointShow=!1}onDeletePoint(t){this.odataSrv.deleteAwardPoint(t).subscribe({next:t=>{this.onGetPoints(this.selectedUser,d()(this.selectedDate))},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(h.b),u.Qb(s.b),u.Qb(h.d))},t.\u0275cmp=u.Kb({type:t,selectors:[["app-daily-trace"]],decls:53,vars:13,consts:[[1,"toolbar-spacer"],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","targetUser"],["matColumnDef","recordDate"],["matColumnDef","schoolWorkTime"],["matColumnDef","goToBedTime"],["matColumnDef","homeWorkCount"],["matColumnDef","bodyExerciseCount"],["matColumnDef","errorsCollection"],["matColumnDef","handWriting"],["matColumnDef","cleanDesk"],["matColumnDef","houseKeepingCount"],["matColumnDef","politeBehavior"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"matTooltip","click"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["disabled","",3,"ngModel","ngModelChange"],["mat-header-row",""],["mat-row",""],["matColumnDef","matchedRuleID"],["matColumnDef","countOfDay"],["matColumnDef","point"],["matColumnDef","comment"],["mat-icon-button","","color","warn",3,"disabled","matTooltip","click"]],template:function(t,e){1&t&&(u.Wb(0,"mat-toolbar"),u.Wb(1,"h3"),u.Fc(2),u.jc(3,"transloco"),u.Vb(),u.Rb(4,"div",0),u.Wb(5,"button",1),u.ec("click",function(){return e.onCreateTrace()}),u.jc(6,"transloco"),u.Wb(7,"mat-icon"),u.Fc(8,"add_circle"),u.Vb(),u.Vb(),u.Vb(),u.Wb(9,"div",2),u.Wb(10,"div",3),u.Wb(11,"table",4),u.Ub(12,5),u.Ec(13,Et,1,0,"th",6),u.Ec(14,Ct,9,6,"td",7),u.Tb(),u.Ub(15,8),u.Ec(16,Wt,3,3,"th",6),u.Ec(17,Vt,2,1,"td",7),u.Tb(),u.Ub(18,9),u.Ec(19,vt,3,3,"th",6),u.Ec(20,Dt,2,1,"td",7),u.Tb(),u.Ub(21,10),u.Ec(22,wt,3,3,"th",6),u.Ec(23,Ft,2,1,"td",7),u.Tb(),u.Ub(24,11),u.Ec(25,kt,3,3,"th",6),u.Ec(26,Tt,2,1,"td",7),u.Tb(),u.Ub(27,12),u.Ec(28,yt,3,3,"th",6),u.Ec(29,St,2,1,"td",7),u.Tb(),u.Ub(30,13),u.Ec(31,Gt,3,3,"th",6),u.Ec(32,Rt,2,1,"td",7),u.Tb(),u.Ub(33,14),u.Ec(34,Ut,3,3,"th",6),u.Ec(35,Mt,2,1,"td",7),u.Tb(),u.Ub(36,15),u.Ec(37,xt,3,3,"th",6),u.Ec(38,Pt,2,1,"td",7),u.Tb(),u.Ub(39,16),u.Ec(40,It,3,3,"th",6),u.Ec(41,At,2,1,"td",7),u.Tb(),u.Ub(42,17),u.Ec(43,jt,3,3,"th",6),u.Ec(44,Ot,2,1,"td",7),u.Tb(),u.Ub(45,18),u.Ec(46,$t,3,3,"th",6),u.Ec(47,Ht,2,1,"td",7),u.Tb(),u.Ec(48,Nt,1,0,"tr",19),u.Ec(49,Bt,1,0,"tr",20),u.Vb(),u.Vb(),u.Rb(50,"mat-paginator",21),u.Vb(),u.Rb(51,"mat-divider"),u.Ec(52,ae,36,11,"div",22)),2&t&&(u.Eb(2),u.Gc(u.kc(3,9,"Award.DailyTrace")),u.Eb(3),u.pc("matTooltip",u.kc(6,11,"Common.Create")),u.oc("disabled",!e.isExpertMode),u.Eb(6),u.oc("dataSource",e.dataSourceTrace),u.Eb(37),u.oc("matHeaderRowDef",e.displayedColumns),u.Eb(1),u.oc("matRowDefColumns",e.displayedColumns),u.Eb(1),u.oc("length",e.traceLength)("pageSize",20),u.Eb(2),u.oc("ngIf",e.isPointShow))},directives:[p.a,f.b,g.a,E.a,C.j,C.c,C.e,C.b,C.g,C.i,W.a,V.a,c.m,C.d,C.a,pt.a,n.n,n.q,C.f,C.h],pipes:[i.d],styles:[le]}),t})(),be=(()=>{class t{constructor(t,e,o){this.dialogRef=t,this.odataSrv=e,this.data=o}get arTargetUsers(){return this.odataSrv.bufferedAwardUser.filter(t=>t.supervisor===this.odataSrv.currentUser)}onNoClick(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(s.g),u.Qb(h.b),u.Qb(s.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["app-daily-trace-create-dialog"]],decls:61,vars:46,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"example-form"],["appearance","fill",1,"control-full-width"],["required","","name","targetuser",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill"],["matInput","","name","recorddate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["matInput","","type","number","name","schoolworktime",3,"ngModel","ngModelChange"],["matInput","","type","number","name","gotobedtime",3,"ngModel","ngModelChange"],["matInput","","type","number","name","homeworkcount",3,"ngModel","ngModelChange"],["matInput","","type","number","name","bodyexercisecount",3,"ngModel","ngModelChange"],["name","errorcollection",1,"example-margin",3,"ngModel","ngModelChange"],["name","handwriting",1,"example-margin",3,"ngModel","ngModelChange"],["name","cleandesk",1,"example-margin",3,"ngModel","ngModelChange"],["matInput","","type","number","name","housekeepingcount",3,"ngModel","ngModelChange"],["matInput","","type","number","name","politebehavior",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"disabled","mat-dialog-close"],[3,"value"]],template:function(t,e){if(1&t&&(u.Wb(0,"h1",0),u.Fc(1,"CREATE DAILY TRACE"),u.Vb(),u.Wb(2,"div",1),u.Wb(3,"form",2),u.Wb(4,"mat-form-field",3),u.Wb(5,"mat-label"),u.Fc(6),u.jc(7,"transloco"),u.Vb(),u.Wb(8,"mat-select",4),u.ec("ngModelChange",function(t){return e.data.targetUser=t}),u.Ec(9,re,2,2,"mat-option",5),u.Vb(),u.Vb(),u.Wb(10,"mat-form-field",6),u.Wb(11,"mat-label"),u.Fc(12,"Record Date"),u.Vb(),u.Wb(13,"input",7),u.ec("ngModelChange",function(t){return e.data.recordDate=t}),u.Vb(),u.Rb(14,"mat-datepicker-toggle",8),u.Rb(15,"mat-datepicker",null,9),u.Vb(),u.Wb(17,"mat-form-field",3),u.Wb(18,"mat-label"),u.Fc(19),u.jc(20,"transloco"),u.Vb(),u.Wb(21,"input",10),u.ec("ngModelChange",function(t){return e.data.schoolWorkTime=t}),u.Vb(),u.Vb(),u.Wb(22,"mat-form-field",3),u.Wb(23,"mat-label"),u.Fc(24),u.jc(25,"transloco"),u.Vb(),u.Wb(26,"input",11),u.ec("ngModelChange",function(t){return e.data.goToBedTime=t}),u.Vb(),u.Vb(),u.Wb(27,"mat-form-field",3),u.Wb(28,"mat-label"),u.Fc(29),u.jc(30,"transloco"),u.Vb(),u.Wb(31,"input",12),u.ec("ngModelChange",function(t){return e.data.homeWorkCount=t}),u.Vb(),u.Vb(),u.Wb(32,"mat-form-field",3),u.Wb(33,"mat-label"),u.Fc(34),u.jc(35,"transloco"),u.Vb(),u.Wb(36,"input",13),u.ec("ngModelChange",function(t){return e.data.bodyExerciseCount=t}),u.Vb(),u.Vb(),u.Wb(37,"mat-checkbox",14),u.ec("ngModelChange",function(t){return e.data.errorsCollection=t}),u.Fc(38),u.jc(39,"transloco"),u.Vb(),u.Wb(40,"mat-checkbox",15),u.ec("ngModelChange",function(t){return e.data.handWriting=t}),u.Fc(41),u.jc(42,"transloco"),u.Vb(),u.Wb(43,"mat-checkbox",16),u.ec("ngModelChange",function(t){return e.data.cleanDesk=t}),u.Fc(44),u.jc(45,"transloco"),u.Vb(),u.Wb(46,"mat-form-field",3),u.Wb(47,"mat-label"),u.Fc(48),u.jc(49,"transloco"),u.Vb(),u.Wb(50,"input",17),u.ec("ngModelChange",function(t){return e.data.houseKeepingCount=t}),u.Vb(),u.Vb(),u.Wb(51,"mat-form-field",3),u.Wb(52,"mat-label"),u.Fc(53),u.jc(54,"transloco"),u.Vb(),u.Wb(55,"input",18),u.ec("ngModelChange",function(t){return e.data.politeBehavior=t}),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(56,"div",19),u.Wb(57,"button",20),u.ec("click",function(){return e.onNoClick()}),u.Fc(58,"NO THANKS"),u.Vb(),u.Wb(59,"button",21),u.Fc(60,"OK"),u.Vb(),u.Vb()),2&t){const t=u.vc(16);u.Eb(6),u.Gc(u.kc(7,26,"Award.TargetUser")),u.Eb(2),u.oc("ngModel",e.data.targetUser),u.Eb(1),u.oc("ngForOf",e.arTargetUsers),u.Eb(4),u.oc("matDatepicker",t)("ngModel",e.data.recordDate),u.Eb(1),u.oc("for",t),u.Eb(5),u.Gc(u.kc(20,28,"Award.SchoolWorkTime")),u.Eb(2),u.oc("ngModel",e.data.schoolWorkTime),u.Eb(3),u.Gc(u.kc(25,30,"Award.GoToBedTime")),u.Eb(2),u.oc("ngModel",e.data.goToBedTime),u.Eb(3),u.Gc(u.kc(30,32,"Award.HomeworkCount")),u.Eb(2),u.oc("ngModel",e.data.homeWorkCount),u.Eb(3),u.Gc(u.kc(35,34,"Award.BodyExerciseCount")),u.Eb(2),u.oc("ngModel",e.data.bodyExerciseCount),u.Eb(1),u.oc("ngModel",e.data.errorsCollection),u.Eb(1),u.Gc(u.kc(39,36,"Award.ErrorsCollection")),u.Eb(2),u.oc("ngModel",e.data.handWriting),u.Eb(1),u.Gc(u.kc(42,38,"Award.HandWriting")),u.Eb(2),u.oc("ngModel",e.data.cleanDesk),u.Eb(1),u.Gc(u.kc(45,40,"Award.CleanDesk")),u.Eb(4),u.Gc(u.kc(49,42,"Award.HouseKeepingCount")),u.Eb(2),u.oc("ngModel",e.data.houseKeepingCount),u.Eb(3),u.Gc(u.kc(54,44,"Award.PoliteBehavior")),u.Eb(2),u.oc("ngModel",e.data.politeBehavior),u.Eb(4),u.oc("disabled",!e.data.isValid())("mat-dialog-close",e.data)}},directives:[s.h,s.e,n.v,n.o,n.p,v.c,v.g,ft.a,n.t,n.n,n.q,c.l,D.b,w.d,n.c,w.f,v.i,w.c,n.r,pt.a,s.c,f.b,s.d,gt.n],pipes:[i.d],styles:[le]}),t})();var de=o("xHqg"),me=o("MutI");function ue(t,e){1&t&&u.Fc(0,"HEADER")}function he(t,e){if(1&t&&(u.Wb(0,"mat-option",30),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.oc("value",t.targetUser),u.Eb(1),u.Gc(t.targetUser)}}function pe(t,e){if(1&t&&(u.Wb(0,"mat-option",30),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t){const t=e.$implicit;u.oc("value",t.value),u.Eb(1),u.Gc(u.kc(2,2,t.i18nterm))}}function fe(t,e){1&t&&u.Fc(0,"DIMENSIONS")}function ge(t,e){if(1&t&&(u.Wb(0,"mat-list",31),u.Wb(1,"mat-list-item"),u.Fc(2),u.Vb(),u.Vb()),2&t){const t=e.$implicit;u.Eb(2),u.Gc(t.toString())}}function Ee(t,e){1&t&&u.Fc(0,"DAYS")}function Ce(t,e){if(1&t&&(u.Wb(0,"mat-list",31),u.Wb(1,"mat-list-item"),u.Fc(2),u.Vb(),u.Vb()),2&t){const t=e.$implicit;u.Eb(2),u.Gc(t.toString())}}function We(t,e){1&t&&u.Fc(0,"POINTS")}function Ve(t,e){1&t&&(u.Wb(0,"span"),u.Fc(1," DIMENSION "),u.Vb())}function ve(t,e){if(1&t&&(u.Wb(0,"span"),u.Fc(1),u.Vb()),2&t){const t=u.ic(2).$implicit,e=u.ic();u.Eb(1),u.Hc(" ",e.getColumnHeaderForDays(t)," ")}}function De(t,e){if(1&t&&(u.Wb(0,"th",35),u.Ec(1,Ve,2,0,"span",36),u.Ec(2,ve,2,1,"span",36),u.Vb()),2&t){const t=u.ic().$implicit;u.Eb(1),u.oc("ngIf","dimension"===t),u.Eb(1),u.oc("ngIf","dimension"!==t)}}function we(t,e){if(1&t&&(u.Wb(0,"span"),u.Fc(1),u.Vb()),2&t){const t=u.ic().$implicit;u.Eb(1),u.Hc(" ",t.dimInfo.toString()," ")}}function Fe(t,e){if(1&t){const t=u.Xb();u.Wb(0,"span"),u.Wb(1,"input",38),u.ec("ngModelChange",function(e){u.xc(t);const o=u.ic().$implicit,c=u.ic().$implicit;return o.points[c]=e})("ngModelChange",function(e){return u.xc(t),u.ic(3).onPointCellChanged(e)}),u.Vb(),u.Vb()}if(2&t){const t=u.ic().$implicit,e=u.ic().$implicit;u.Eb(1),u.oc("ngModel",t.points[e])}}function ke(t,e){if(1&t&&(u.Wb(0,"td",37),u.Ec(1,we,2,1,"span",36),u.Ec(2,Fe,2,1,"span",36),u.Vb()),2&t){const t=u.ic().$implicit;u.Eb(1),u.oc("ngIf","dimension"===t),u.Eb(1),u.oc("ngIf","dimension"!==t)}}function Te(t,e){1&t&&(u.Ub(0,32),u.Ec(1,De,3,2,"th",33),u.Ec(2,ke,3,2,"td",34),u.Tb()),2&t&&u.oc("matColumnDef",e.$implicit)}function ye(t,e){1&t&&u.Rb(0,"tr",39)}function Se(t,e){1&t&&u.Rb(0,"tr",40)}function Ge(t,e){1&t&&u.Fc(0,"DONE")}class Re{constructor(){this.from=0,this.to=0,this.typeIsNumber=!0,this.cond=!1}toString(){return this.typeIsNumber?`[${this.from} - ${this.to})`:this.cond.toString()}}class Ue{constructor(){this.from=0,this.to=0}toString(){return`[${this.from} - ${this.to})`}}class Me{constructor(t){this.points={},this.isEdit=!1,this.dimInfo=t}}let xe=(()=>{class t{constructor(t,e,o){this._formBuilder=t,this.uiUtilSrv=e,this.odataSrv=o,this.arRuleTypes=[],this.dimensions=[],this.contDays=[],this.displayedColumns=["dimension"],this.dataSource=[],this.pointCompleted=!1,this.createdGroupID=-1,this.arRuleTypes=Object(m.I)(),this.firstFormGroup=this._formBuilder.group({targetuserCtrl:["",n.u.required],validFromCtrl:[void 0,n.u.required],validToCtrl:[void 0,n.u.required],ruleTypeCtrl:[m.h.GoToBedTime,n.u.required],despCtrl:["",n.u.required]}),this.secondFormGroup=this._formBuilder.group({rawCtrl:["",n.u.required]}),this.thirdFormGroup=this._formBuilder.group({rawCtrl:["",n.u.required]})}get arTargetUsers(){return this.odataSrv.bufferedAwardUser.filter(t=>t.supervisor===this.odataSrv.currentUser)}get isExpertMode(){return this.odataSrv.expertMode}ngOnInit(){var t,e,o,c;this.odataSrv.getAwardUsers().subscribe(),null===(t=this.firstFormGroup.get("validFromCtrl"))||void 0===t||t.setValue(d()()),null===(e=this.firstFormGroup.get("validToCtrl"))||void 0===e||e.setValue(d()().add(1,"month")),null===(o=this.secondFormGroup.get("rawCtrl"))||void 0===o||o.valueChanges.subscribe(t=>{this.onDimensionChange(t)}),null===(c=this.thirdFormGroup.get("rawCtrl"))||void 0===c||c.valueChanges.subscribe(t=>{this.onContDayChange(t)})}get selectedRuleType(){var t;const e=null===(t=this.firstFormGroup.get("ruleTypeCtrl"))||void 0===t?void 0:t.value;return void 0!==e?e:m.h.GoToBedTime}onInitialDimensions(){var t,e;switch(this.selectedRuleType){case m.h.HandWritingHabit:case m.h.CleanDeakHabit:case m.h.ErrorCollectionHabit:null===(t=this.secondFormGroup.get("rawCtrl"))||void 0===t||t.disable();break;default:null===(e=this.secondFormGroup.get("rawCtrl"))||void 0===e||e.disable()}}onDimensionCompleted(){switch(this.selectedRuleType){case m.h.HandWritingHabit:case m.h.CleanDeakHabit:case m.h.ErrorCollectionHabit:{const t=new Re;t.typeIsNumber=!1,t.cond=!0,this.dimensions.push(t);const e=new Re;e.typeIsNumber=!1,e.cond=!1,this.dimensions.push(e);break}}}onDimensionChange(t){switch(this.dimensions=[],this.selectedRuleType){case m.h.BodyExerciseCount:case m.h.HomeWorkCount:case m.h.HouseKeepingCount:case m.h.PoliteBehavior:if(t){let e=t.split(";").map(t=>{if(t){const e=+t;if(!isNaN(e)&&e>0)return Math.trunc(e)}return 0});e=e.filter(t=>t>0),e.sort();let o=0;e.forEach(t=>{if(0!==o){const e=new Re;e.from=o,e.to=t,this.dimensions.push(e)}o=t});const c=new Re;c.from=o,c.to=9999,this.dimensions.push(c)}break;case m.h.HandWritingHabit:case m.h.CleanDeakHabit:case m.h.ErrorCollectionHabit:break;case m.h.GoToBedTime:case m.h.SchoolWorkTime:default:if(t){let e=t.split(";").map(t=>{if(t){const e=+t;if(!isNaN(e)&&e<=23.99&&e>0)return e}return 0});e=e.filter(t=>t>0),e.sort();let o=0;e.forEach(t=>{const e=new Re;e.from=o,e.to=t,this.dimensions.push(e),o=t});const c=new Re;c.from=o,c.to=24,this.dimensions.push(c)}}}onContDayChange(t){if(this.contDays=[],t){let e=t.split(";").map(t=>{if(t){const e=+t;if(!isNaN(e)&&e>0)return Math.trunc(e)}return 0});e=e.filter(t=>t>0),e.sort();let o=0;e.forEach(t=>{if(0!==o){const e=new Ue;e.from=o,e.to=t,this.contDays.push(e)}o=t});const c=new Ue;c.from=o,c.to=9999,this.contDays.push(c)}}onInitialRules(){this.dataSource=[],this.displayedColumns=["dimension"];const t=[];for(let e=0;e<this.contDays.length;e++)t.push("days"+e);this.displayedColumns.push(...t),this.dimensions.forEach(e=>{const o=new Me(e);t.forEach(t=>{o.points[t]=0}),this.dataSource.push(o)})}onPointCellChanged(t){let e=0;this.dataSource.forEach(t=>{Object.keys(t.points).forEach(o=>{(isNaN(t.points[o])||0===t.points[o])&&e++})}),this.pointCompleted=0===e}getColumnHeaderForDays(t){if(t&&t.startsWith("days")){const e=+t.replace("days","");return this.contDays[e].toString()}return""}onSave(){var t,e,o,c;const n=new m.g;switch(n.desp=null===(t=this.firstFormGroup.get("despCtrl"))||void 0===t?void 0:t.value,n.ruleType=this.selectedRuleType,n.targetUser=null===(e=this.firstFormGroup.get("targetuserCtrl"))||void 0===e?void 0:e.value,n.validFrom=null===(o=this.firstFormGroup.get("validFromCtrl"))||void 0===o?void 0:o.value,n.validTo=null===(c=this.firstFormGroup.get("validToCtrl"))||void 0===c?void 0:c.value,n.ruleType){case m.h.BodyExerciseCount:case m.h.HomeWorkCount:case m.h.HouseKeepingCount:case m.h.PoliteBehavior:this.dataSource.forEach(t=>{Object.keys(t.points).forEach(e=>{const o=new m.f;o.countOfFactLow=t.dimInfo.from,o.countOfFactHigh=t.dimInfo.to;const c=+e.replace("days","");o.daysFrom=this.contDays[c].from,this.contDays[c].to!==Number.POSITIVE_INFINITY&&(o.daysTo=this.contDays[c].to),o.point=t.points[e],n.rules.push(o)})});break;case m.h.HandWritingHabit:case m.h.CleanDeakHabit:case m.h.ErrorCollectionHabit:this.dataSource.forEach(t=>{Object.keys(t.points).forEach(e=>{const o=new m.f;o.doneOfFact=t.dimInfo.cond;const c=+e.replace("days","");o.daysFrom=this.contDays[c].from,o.daysTo=this.contDays[c].to,o.point=t.points[e],n.rules.push(o)})});break;case m.h.GoToBedTime:case m.h.SchoolWorkTime:default:this.dataSource.forEach(t=>{Object.keys(t.points).forEach(e=>{const o=new m.f;o.timeStart=t.dimInfo.from,o.timeEnd=t.dimInfo.to;const c=+e.replace("days","");o.daysFrom=this.contDays[c].from,o.daysTo=this.contDays[c].to,o.point=t.points[e],n.rules.push(o)})})}n.isValid()&&this.odataSrv.createAwardRuleGroup(n).subscribe({next:t=>{this.createdGroupID=t.id},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})}openGroup(){this.uiUtilSrv.navigateAwardRuleGroupDisplayPage(this.createdGroupID)}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(n.d),u.Qb(h.d),u.Qb(h.b))},t.\u0275cmp=u.Kb({type:t,selectors:[["app-award-rule-generation"]],decls:89,vars:31,consts:[[1,"toolbar-spacer"],["linear",""],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["appearance","fill",1,"control-full-width"],["required","","formControlName","targetuserCtrl"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill"],[3,"rangePicker"],["matStartDate","","formControlName","validFromCtrl","placeholder","Start date"],["matEndDate","","formControlName","validToCtrl","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],["required","","formControlName","ruleTypeCtrl"],["matInput","","required","","formControlName","despCtrl"],["mat-button","","color","primary","matStepperNext","",3,"click"],["matInput","","formControlName","rawCtrl"],["dense","",4,"ngFor","ngForOf"],["mat-button","","matStepperPrevious",""],[3,"completed"],["mat-raised-button",""],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-button","","color","primary","matStepperNext","",3,"disabled","click"],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"],[3,"value"],["dense",""],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],[4,"ngIf"],["mat-cell",""],["matInput","","type","number",3,"ngModel","ngModelChange"],["mat-header-row",""],["mat-row",""]],template:function(t,e){if(1&t){const t=u.Xb();u.Wb(0,"mat-toolbar"),u.Wb(1,"h3"),u.Fc(2,"AWARD RULE GENERATION"),u.Vb(),u.Rb(3,"div",0),u.Vb(),u.Wb(4,"mat-vertical-stepper",1,2),u.Wb(6,"mat-step",3),u.Wb(7,"form",4),u.Ec(8,ue,1,0,"ng-template",5),u.Wb(9,"mat-form-field",6),u.Wb(10,"mat-label"),u.Fc(11),u.jc(12,"transloco"),u.Vb(),u.Wb(13,"mat-select",7),u.Ec(14,he,2,2,"mat-option",8),u.Vb(),u.Vb(),u.Wb(15,"mat-form-field",9),u.Wb(16,"mat-label"),u.Fc(17),u.jc(18,"transloco"),u.Vb(),u.Wb(19,"mat-date-range-input",10),u.Rb(20,"input",11),u.Rb(21,"input",12),u.Vb(),u.Rb(22,"mat-datepicker-toggle",13),u.Rb(23,"mat-date-range-picker",null,14),u.Vb(),u.Wb(25,"mat-form-field",6),u.Wb(26,"mat-label"),u.Fc(27),u.jc(28,"transloco"),u.Vb(),u.Wb(29,"mat-select",15),u.Ec(30,pe,3,4,"mat-option",8),u.Vb(),u.Vb(),u.Wb(31,"mat-form-field",6),u.Wb(32,"mat-label"),u.Fc(33),u.jc(34,"transloco"),u.Vb(),u.Rb(35,"input",16),u.Vb(),u.Wb(36,"div"),u.Wb(37,"button",17),u.ec("click",function(){return e.onInitialDimensions()}),u.Fc(38,"NEXT"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(39,"mat-step",3),u.Wb(40,"form",4),u.Ec(41,fe,1,0,"ng-template",5),u.Wb(42,"mat-form-field"),u.Wb(43,"mat-label"),u.Fc(44,"Dimension"),u.Vb(),u.Rb(45,"input",18),u.Vb(),u.Ec(46,ge,3,1,"mat-list",19),u.Wb(47,"div"),u.Wb(48,"button",20),u.Fc(49,"BACK"),u.Vb(),u.Wb(50,"button",17),u.ec("click",function(){return e.onDimensionCompleted()}),u.Fc(51,"NEXT"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(52,"mat-step",3),u.Wb(53,"form",4),u.Ec(54,Ee,1,0,"ng-template",5),u.Wb(55,"mat-form-field"),u.Wb(56,"mat-label"),u.Fc(57,"Continued Days"),u.Vb(),u.Rb(58,"input",18),u.Vb(),u.Ec(59,Ce,3,1,"mat-list",19),u.Wb(60,"div"),u.Wb(61,"button",20),u.Fc(62,"BACK"),u.Vb(),u.Wb(63,"button",17),u.ec("click",function(){return e.onInitialRules()}),u.Fc(64,"NEXT"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(65,"mat-step",21),u.Ec(66,We,1,0,"ng-template",5),u.Wb(67,"mat-toolbar"),u.Wb(68,"button",22),u.Fc(69,"RESET RULES"),u.Vb(),u.Vb(),u.Wb(70,"table",23),u.Ec(71,Te,3,1,"ng-container",24),u.Ec(72,ye,1,0,"tr",25),u.Ec(73,Se,1,0,"tr",26),u.Vb(),u.Wb(74,"button",20),u.Fc(75,"BACK"),u.Vb(),u.Wb(76,"button",27),u.ec("click",function(){return e.onSave()}),u.Fc(77,"NEXT"),u.Vb(),u.Vb(),u.Wb(78,"mat-step"),u.Ec(79,Ge,1,0,"ng-template",5),u.Wb(80,"p"),u.Fc(81),u.Vb(),u.Wb(82,"p"),u.Fc(83,"You can either open the group for review or create another one."),u.Vb(),u.Wb(84,"div"),u.Wb(85,"button",28),u.ec("click",function(){return e.openGroup()}),u.Fc(86,"OPEN"),u.Vb(),u.Wb(87,"button",29),u.ec("click",function(){return u.xc(t),u.vc(5).reset()}),u.Fc(88,"CREATE ANOTHER ONE"),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){const t=u.vc(24);u.Eb(6),u.oc("stepControl",e.firstFormGroup),u.Eb(1),u.oc("formGroup",e.firstFormGroup),u.Eb(4),u.Gc(u.kc(12,23,"Award.TargetUser")),u.Eb(3),u.oc("ngForOf",e.arTargetUsers),u.Eb(3),u.Gc(u.kc(18,25,"Award.Validity")),u.Eb(2),u.oc("rangePicker",t),u.Eb(3),u.oc("for",t),u.Eb(5),u.Gc(u.kc(28,27,"Type")),u.Eb(3),u.oc("ngForOf",e.arRuleTypes),u.Eb(3),u.Gc(u.kc(34,29,"Common.Description")),u.Eb(6),u.oc("stepControl",e.secondFormGroup),u.Eb(1),u.oc("formGroup",e.secondFormGroup),u.Eb(6),u.oc("ngForOf",e.dimensions),u.Eb(6),u.oc("stepControl",e.thirdFormGroup),u.Eb(1),u.oc("formGroup",e.thirdFormGroup),u.Eb(6),u.oc("ngForOf",e.contDays),u.Eb(6),u.oc("completed",e.pointCompleted),u.Eb(5),u.oc("dataSource",e.dataSource),u.Eb(1),u.oc("ngForOf",e.displayedColumns),u.Eb(1),u.oc("matHeaderRowDef",e.displayedColumns),u.Eb(1),u.oc("matRowDefColumns",e.displayedColumns),u.Eb(3),u.oc("disabled",!e.pointCompleted),u.Eb(5),u.Hc("Group ",e.createdGroupID," is just create done.")}},directives:[p.a,de.g,de.b,n.v,n.o,n.h,de.c,v.c,v.g,ft.a,n.t,n.n,n.f,c.l,w.a,w.h,n.c,w.g,w.f,v.i,w.b,D.b,f.b,de.e,de.f,C.j,C.g,C.i,gt.n,me.a,me.b,C.c,C.e,C.b,C.d,c.m,C.a,n.r,n.q,C.f,C.h],pipes:[i.d],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]{margin-left:8px}.mat-table[_ngcontent-%COMP%]{width:90%;min-height:500px}"]}),t})();var Pe=o("jtHE"),Ie=o("Wp6s"),Ae=o("7EHt");function je(t,e){if(1&t&&(u.Wb(0,"mat-option",28),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.oc("value",t.targetUser),u.Eb(1),u.Gc(t.targetUser)}}function Oe(t,e){if(1&t&&(u.Wb(0,"mat-option",28),u.Fc(1),u.jc(2,"transloco"),u.Vb()),2&t){const t=e.$implicit;u.oc("value",t.value),u.Eb(1),u.Gc(u.kc(2,2,t.i18nterm))}}function $e(t,e){1&t&&(u.Wb(0,"th",29),u.Fc(1,"#"),u.Vb())}function He(t,e){if(1&t&&(u.Wb(0,"td",30),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.id)}}function Ne(t,e){1&t&&(u.Wb(0,"th",29),u.Fc(1,"COUNT"),u.Vb())}function Be(t,e){if(1&t&&(u.Wb(0,"td",30),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.countString)}}function _e(t,e){1&t&&(u.Wb(0,"th",29),u.Fc(1,"DONE"),u.Vb())}function qe(t,e){if(1&t&&(u.Wb(0,"td",30),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.doneString)}}function Qe(t,e){1&t&&(u.Wb(0,"th",29),u.Fc(1,"TIME"),u.Vb())}function Le(t,e){if(1&t&&(u.Wb(0,"td",30),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.timeString)}}function Ke(t,e){1&t&&(u.Wb(0,"th",29),u.Fc(1,"DAYS"),u.Vb())}function ze(t,e){if(1&t&&(u.Wb(0,"td",30),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.dayString)}}function Xe(t,e){1&t&&(u.Wb(0,"th",29),u.Fc(1,"POINT"),u.Vb())}function Ye(t,e){if(1&t&&(u.Wb(0,"td",30),u.Fc(1),u.Vb()),2&t){const t=e.$implicit;u.Eb(1),u.Gc(t.point)}}function Je(t,e){1&t&&u.Rb(0,"tr",31)}function Ze(t,e){1&t&&u.Rb(0,"tr",32)}const to=[{path:"",component:Z},{path:"rules",component:ht},{path:"rule-group-display/:id",component:(()=>{class t{constructor(t,e,o,c){this.activateRoute=t,this.uiUtilSrv=e,this.odataSrv=o,this.formBuilder=c,this.routerID=-1,this.arRuleTypes=[],this.dataSource=[],this.displayedColumns=[],this.arRuleTypes=Object(m.I)(),this.headerFormGroup=this.formBuilder.group({targetuserCtrl:["",n.u.required],validFromCtrl:[void 0,n.u.required],validToCtrl:[void 0,n.u.required],ruleTypeCtrl:[m.h.GoToBedTime,n.u.required],despCtrl:["",n.u.required]})}get arTargetUsers(){return this.odataSrv.bufferedAwardUser.filter(t=>t.supervisor===this.odataSrv.currentUser)}get isExpertMode(){return this.odataSrv.expertMode}ngOnInit(){this.destroyed$=new Pe.a(1),this.odataSrv.getAwardUsers().subscribe(),this.activateRoute.url.subscribe({next:t=>{t instanceof Array&&t.length>0&&"rule-group-display"===t[0].path&&(this.routerID=+t[1].path),-1!==this.routerID&&this.odataSrv.readAwardRuleGroup(this.routerID).subscribe({next:t=>{var e,o,c,n,i;switch(null===(e=this.headerFormGroup.get("targetuserCtrl"))||void 0===e||e.setValue(t.targetUser),null===(o=this.headerFormGroup.get("despCtrl"))||void 0===o||o.setValue(t.desp),null===(c=this.headerFormGroup.get("validFromCtrl"))||void 0===c||c.setValue(t.validFrom),null===(n=this.headerFormGroup.get("validToCtrl"))||void 0===n||n.setValue(t.validTo),null===(i=this.headerFormGroup.get("ruleTypeCtrl"))||void 0===i||i.setValue(t.ruleType),this.headerFormGroup.disable(),t.ruleType){case m.h.BodyExerciseCount:case m.h.HomeWorkCount:case m.h.HouseKeepingCount:case m.h.PoliteBehavior:this.displayedColumns=["id","count","days","point"];break;case m.h.HandWritingHabit:case m.h.CleanDeakHabit:case m.h.ErrorCollectionHabit:this.displayedColumns=["id","done","days","point"];break;case m.h.GoToBedTime:case m.h.SchoolWorkTime:default:this.displayedColumns=["id","time","days","point"]}this.dataSource=t.rules.slice()},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})},error:t=>{this.uiUtilSrv.showSnackInfo(t)}})}ngOnDestroy(){this.destroyed$&&(this.destroyed$.complete(),this.destroyed$=void 0)}onReturnToList(){this.uiUtilSrv.navigateAwardRuleGroupListPage()}onCreateNewOne(){this.uiUtilSrv.navigateAwardRuleGenerationPage()}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(l.a),u.Qb(h.d),u.Qb(h.b),u.Qb(n.d))},t.\u0275cmp=u.Kb({type:t,selectors:[["app-award-rule-display"]],decls:78,vars:32,consts:[["multi","",1,"example-headers-align"],["expanded",""],[3,"formGroup"],["appearance","fill",1,"control-full-width"],["required","","formControlName","targetuserCtrl"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill"],[3,"rangePicker"],["matStartDate","","formControlName","validFromCtrl","placeholder","Start date"],["matEndDate","","formControlName","validToCtrl","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],["required","","formControlName","ruleTypeCtrl"],["matInput","","required","","formControlName","despCtrl"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","count"],["matColumnDef","done"],["matColumnDef","time"],["matColumnDef","days"],["matColumnDef","point"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-button","",3,"click"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){if(1&t&&(u.Wb(0,"mat-card"),u.Wb(1,"mat-card-header"),u.Wb(2,"mat-card-title"),u.Fc(3,"AWARD RULE DISPLAY"),u.Vb(),u.Vb(),u.Wb(4,"mat-card-content"),u.Wb(5,"mat-accordion",0),u.Wb(6,"mat-expansion-panel",1),u.Wb(7,"mat-expansion-panel-header"),u.Wb(8,"mat-panel-title"),u.Fc(9),u.jc(10,"transloco"),u.Vb(),u.Wb(11,"mat-panel-description"),u.Fc(12),u.jc(13,"transloco"),u.Wb(14,"mat-icon"),u.Fc(15,"public"),u.Vb(),u.Vb(),u.Vb(),u.Wb(16,"form",2),u.Wb(17,"mat-form-field",3),u.Wb(18,"mat-label"),u.Fc(19),u.jc(20,"transloco"),u.Vb(),u.Wb(21,"mat-select",4),u.Ec(22,je,2,2,"mat-option",5),u.Vb(),u.Vb(),u.Wb(23,"mat-form-field",6),u.Wb(24,"mat-label"),u.Fc(25),u.jc(26,"transloco"),u.Vb(),u.Wb(27,"mat-date-range-input",7),u.Rb(28,"input",8),u.Rb(29,"input",9),u.Vb(),u.Rb(30,"mat-datepicker-toggle",10),u.Rb(31,"mat-date-range-picker",null,11),u.Vb(),u.Wb(33,"mat-form-field",3),u.Wb(34,"mat-label"),u.Fc(35),u.jc(36,"transloco"),u.Vb(),u.Wb(37,"mat-select",12),u.Ec(38,Oe,3,4,"mat-option",5),u.Vb(),u.Vb(),u.Wb(39,"mat-form-field",3),u.Wb(40,"mat-label"),u.Fc(41),u.jc(42,"transloco"),u.Vb(),u.Rb(43,"input",13),u.Vb(),u.Vb(),u.Vb(),u.Wb(44,"mat-expansion-panel"),u.Wb(45,"mat-expansion-panel-header"),u.Wb(46,"mat-panel-title"),u.Fc(47,"RULES"),u.Vb(),u.Vb(),u.Wb(48,"div",14),u.Wb(49,"div",15),u.Wb(50,"table",16),u.Ub(51,17),u.Ec(52,$e,2,0,"th",18),u.Ec(53,He,2,1,"td",19),u.Tb(),u.Ub(54,20),u.Ec(55,Ne,2,0,"th",18),u.Ec(56,Be,2,1,"td",19),u.Tb(),u.Ub(57,21),u.Ec(58,_e,2,0,"th",18),u.Ec(59,qe,2,1,"td",19),u.Tb(),u.Ub(60,22),u.Ec(61,Qe,2,0,"th",18),u.Ec(62,Le,2,1,"td",19),u.Tb(),u.Ub(63,23),u.Ec(64,Ke,2,0,"th",18),u.Ec(65,ze,2,1,"td",19),u.Tb(),u.Ub(66,24),u.Ec(67,Xe,2,0,"th",18),u.Ec(68,Ye,2,1,"td",19),u.Tb(),u.Ec(69,Je,1,0,"tr",25),u.Ec(70,Ze,1,0,"tr",26),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(71,"mat-card-actions"),u.Wb(72,"button",27),u.ec("click",function(){return e.onReturnToList()}),u.Fc(73),u.jc(74,"transloco"),u.Vb(),u.Wb(75,"button",27),u.ec("click",function(){return e.onCreateNewOne()}),u.Fc(76),u.jc(77,"transloco"),u.Vb(),u.Vb(),u.Vb()),2&t){const t=u.vc(32);u.Eb(9),u.Gc(u.kc(10,16,"Header")),u.Eb(3),u.Gc(u.kc(13,18,"HeaderInfo")),u.Eb(4),u.oc("formGroup",e.headerFormGroup),u.Eb(3),u.Gc(u.kc(20,20,"Award.TargetUser")),u.Eb(3),u.oc("ngForOf",e.arTargetUsers),u.Eb(3),u.Gc(u.kc(26,22,"Award.Validity")),u.Eb(2),u.oc("rangePicker",t),u.Eb(3),u.oc("for",t),u.Eb(5),u.Gc(u.kc(36,24,"Type")),u.Eb(3),u.oc("ngForOf",e.arRuleTypes),u.Eb(3),u.Gc(u.kc(42,26,"Common.Description")),u.Eb(9),u.oc("dataSource",e.dataSource),u.Eb(19),u.oc("matHeaderRowDef",e.displayedColumns),u.Eb(1),u.oc("matRowDefColumns",e.displayedColumns),u.Eb(3),u.Gc(u.kc(74,28,"Common.ReturnToList")),u.Eb(3),u.Gc(u.kc(77,30,"Common.CreateAnotherOne"))}},directives:[Ie.a,Ie.d,Ie.g,Ie.c,Ae.a,Ae.c,Ae.e,Ae.f,Ae.d,E.a,n.v,n.o,n.h,v.c,v.g,ft.a,n.t,n.n,n.f,c.l,w.a,w.h,n.c,w.g,w.f,v.i,w.b,D.b,C.j,C.c,C.e,C.b,C.g,C.i,Ie.b,f.b,gt.n,C.d,C.a,C.f,C.h],pipes:[i.d],styles:[".example-headers-align[_ngcontent-%COMP%]{margin:8px}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%], .example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex-basis:0}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]{margin-left:8px}.example-headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}table[_ngcontent-%COMP%]{width:100%}"]}),t})()},{path:"rule-generation",component:xe},{path:"dailytrace",component:se}];let eo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.Ob({type:t}),t.\u0275inj=u.Nb({imports:[[l.e.forChild(to)],l.e]}),t})(),oo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.Ob({type:t}),t.\u0275inj=u.Nb({imports:[[c.c,n.i,n.s,a.a,i.c,r.a,eo]]}),t})()}}]);