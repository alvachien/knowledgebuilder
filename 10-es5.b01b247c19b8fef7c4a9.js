!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"82/d":function(e,n,a){"use strict";a.r(n),a.d(n,"AwardModule",function(){return fo});var c=a("ofXK"),i=a("3Pt+"),r=a("QPBi"),l=a("jIBr"),b=a("iasb"),s=a("tyNb"),u=a("0IaG"),d=a("wd/R"),m=a.n(d),f=a("VHTt"),p=a("fXoL"),h=a("o0su"),g=a("/t3+"),v=a("bTqV"),E=a("Qu3c"),C=a("NFeN"),W=a("+0xr"),k=a("M9IT"),V=a("f0Cb"),D=a("kmnG"),y=a("d3UM"),w=a("qFsG"),F=a("iadO"),G=a("FKr1");function T(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.TargetUser")))}function S(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit,n=p.ic();p.Eb(1),p.Ic("",n.getUserDisplayAs(o.targetUser)," (",o.targetUser,")")}}function U(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Quiz.Date")))}function R(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.getRecordDateDisplayString())}}function j(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.Point")))}function x(t,e){if(1&t){var o=p.Xb();p.Wb(0,"td",16),p.Fc(1),p.Wb(2,"button",17),p.ec("click",function(){p.xc(o);var t=e.$implicit;return p.ic().onGetPoints(t.targetUser,t.recordDate)}),p.jc(3,"transloco"),p.Wb(4,"mat-icon"),p.Fc(5,"visibility"),p.Vb(),p.Vb(),p.Vb()}if(2&t){var n=e.$implicit;p.Eb(1),p.Hc(" ",n.point," | "),p.Eb(1),p.pc("matTooltip",p.kc(3,2,"Award.Point"))}}function M(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.AggregatedPoints")))}function P(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.aggPoint)}}function A(t,e){1&t&&p.Rb(0,"tr",18)}function I(t,e){1&t&&p.Rb(0,"tr",19)}function O(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1,"#"),p.Vb())}function H(t,e){if(1&t){var o=p.Xb();p.Wb(0,"td",16),p.Wb(1,"button",24),p.ec("click",function(){p.xc(o);var t=e.$implicit;return p.ic(2).onDeletePoint(t.id)}),p.jc(2,"transloco"),p.Wb(3,"mat-icon"),p.Fc(4,"remove_circle"),p.Vb(),p.Vb(),p.Vb()}if(2&t){var n=e.$implicit;p.Eb(1),p.pc("matTooltip",p.kc(2,2,"Common.Delete")),p.oc("disabled",n.matchedRuleID)}}function $(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.TargetUser")))}function N(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit,n=p.ic(2);p.Eb(1),p.Ic("",n.getUserDisplayAs(o.targetUser)," (",o.targetUser,")")}}function _(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Quiz.Date")))}function B(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.getRecordDateDisplayString())}}function q(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1,"Rule ID"),p.Vb())}function Q(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.matchedRuleID)}}function L(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.ContinuousDays")))}function z(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.countOfDay)}}function K(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.Point")))}function X(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.point)}}function J(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Common.Comment")))}function Y(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.comment)}}function Z(t,e){1&t&&p.Rb(0,"tr",18)}function tt(t,e){1&t&&p.Rb(0,"tr",19)}function et(t,e){if(1&t){var o=p.Xb();p.Wb(0,"div"),p.Wb(1,"mat-toolbar"),p.Wb(2,"h3"),p.Fc(3),p.jc(4,"transloco"),p.Vb(),p.Rb(5,"div",0),p.Wb(6,"button",17),p.ec("click",function(){return p.xc(o),p.ic().onHidePoints()}),p.jc(7,"transloco"),p.Wb(8,"mat-icon"),p.Fc(9,"visibility_off"),p.Vb(),p.Vb(),p.Vb(),p.Wb(10,"div",2),p.Wb(11,"div",3),p.Wb(12,"table",4),p.Ub(13,20),p.Ec(14,O,2,0,"th",6),p.Ec(15,H,5,4,"td",7),p.Tb(),p.Ub(16,5),p.Ec(17,$,3,3,"th",6),p.Ec(18,N,2,2,"td",7),p.Tb(),p.Ub(19,8),p.Ec(20,_,3,3,"th",6),p.Ec(21,B,2,1,"td",7),p.Tb(),p.Ub(22,21),p.Ec(23,q,2,0,"th",6),p.Ec(24,Q,2,1,"td",7),p.Tb(),p.Ub(25,22),p.Ec(26,L,3,3,"th",6),p.Ec(27,z,2,1,"td",7),p.Tb(),p.Ub(28,9),p.Ec(29,K,3,3,"th",6),p.Ec(30,X,2,1,"td",7),p.Tb(),p.Ub(31,23),p.Ec(32,J,3,3,"th",6),p.Ec(33,Y,2,1,"td",7),p.Tb(),p.Ec(34,Z,1,0,"tr",11),p.Ec(35,tt,1,0,"tr",12),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){var n=p.ic();p.Eb(3),p.Jc("",p.kc(4,7,"Award.Point"),", ",n.selectedUser,", ",n.selectedDate,""),p.Eb(3),p.pc("matTooltip",p.kc(7,9,"Common.Hide")),p.Eb(6),p.oc("dataSource",n.dataSourcePoints),p.Eb(22),p.oc("matHeaderRowDef",n.displayedPointColumns),p.Eb(1),p.oc("matRowDefColumns",n.displayedPointColumns)}}function ot(t,e){if(1&t&&(p.Wb(0,"mat-option",15),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.oc("value",o.targetUser),p.Eb(1),p.Hc(" ",o.displayAs," ")}}var nt,at,ct="table[_ngcontent-%COMP%]{width:100%}.example-form[_ngcontent-%COMP%]{min-width:250px;max-width:500px;width:100%}.example-margin[_ngcontent-%COMP%]{margin:0 10px}",it=((at=function(){function e(o,n,a){t(this,e),this.oDataSrv=o,this.dialog=n,this.uiUtilSrv=a,this.dataSource=[],this.dataSourcePoints=[],this.recordCount=0,this.displayedColumns=["targetUser","recordDate","point","aggpoint"],this.displayedPointColumns=["action","targetUser","recordDate","matchedRuleID","countOfDay","point","comment"],this.selectedUser="",this.selectedDate="",this.isPointShow=!1}return o(e,[{key:"ngOnInit",value:function(){this.refreshList()}},{key:"isExpertMode",get:function(){return this.oDataSrv.isLoggedin}},{key:"getUserDisplayAs",value:function(t){if(t&&this.oDataSrv.currentUserDetail){var e=this.oDataSrv.currentUserDetail.awardUsers.findIndex(function(e){return e.targetUser===t});if(-1!==e)return this.oDataSrv.currentUserDetail.awardUsers[e].displayAs}return""}},{key:"onCreateAward",value:function(){var t=this;this.dialog.open(rt,{width:"600px",closeOnNavigation:!1,data:new f.c}).afterClosed().subscribe(function(e){console.log("The dialog was closed with result: "+e),e&&t.oDataSrv.createAwardPoint(e).subscribe({next:function(e){t.refreshList()},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})})}},{key:"refreshList",value:function(){var t=this;this.oDataSrv.getAwardPointReports(100,0).subscribe({next:function(e){t.dataSource=e.items.slice(),t.recordCount=e.totalCount},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})}},{key:"onGetPoints",value:function(t,e){var o=this;this.oDataSrv.getAwardPoints(100,0,void 0,"TargetUser eq '".concat(t,"' AND RecordDate eq ").concat(e.format(f.O))).subscribe({next:function(n){o.selectedUser=t,o.selectedDate=e.format(f.O),o.dataSourcePoints=[],o.dataSourcePoints=n.items.slice(),o.isPointShow=!0},error:function(t){o.uiUtilSrv.showSnackInfo(t)}})}},{key:"onHidePoints",value:function(){this.selectedDate="",this.selectedUser="",this.dataSourcePoints=[],this.isPointShow=!1}},{key:"onDeletePoint",value:function(t){var e=this;this.oDataSrv.deleteAwardPoint(t).subscribe({next:function(t){e.onGetPoints(e.selectedUser,m()(e.selectedDate))},error:function(t){e.uiUtilSrv.showSnackInfo(t)}})}}]),e}()).\u0275fac=function(t){return new(t||at)(p.Qb(h.d),p.Qb(u.b),p.Qb(h.f))},at.\u0275cmp=p.Kb({type:at,selectors:[["app-overview"]],decls:29,vars:13,consts:[[1,"toolbar-spacer"],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","targetUser"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","recordDate"],["matColumnDef","point"],["matColumnDef","aggpoint"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""],["matColumnDef","action"],["matColumnDef","matchedRuleID"],["matColumnDef","countOfDay"],["matColumnDef","comment"],["mat-icon-button","","color","warn",3,"disabled","matTooltip","click"]],template:function(t,e){1&t&&(p.Wb(0,"mat-toolbar"),p.Wb(1,"h1"),p.Fc(2),p.jc(3,"transloco"),p.Vb(),p.Rb(4,"div",0),p.Wb(5,"button",1),p.ec("click",function(){return e.onCreateAward()}),p.jc(6,"transloco"),p.Wb(7,"mat-icon"),p.Fc(8,"add_circle"),p.Vb(),p.Vb(),p.Vb(),p.Wb(9,"div",2),p.Wb(10,"div",3),p.Wb(11,"table",4),p.Ub(12,5),p.Ec(13,T,3,3,"th",6),p.Ec(14,S,2,2,"td",7),p.Tb(),p.Ub(15,8),p.Ec(16,U,3,3,"th",6),p.Ec(17,R,2,1,"td",7),p.Tb(),p.Ub(18,9),p.Ec(19,j,3,3,"th",6),p.Ec(20,x,6,4,"td",7),p.Tb(),p.Ub(21,10),p.Ec(22,M,3,3,"th",6),p.Ec(23,P,2,1,"td",7),p.Tb(),p.Ec(24,A,1,0,"tr",11),p.Ec(25,I,1,0,"tr",12),p.Vb(),p.Vb(),p.Rb(26,"mat-paginator",13),p.Vb(),p.Rb(27,"mat-divider"),p.Ec(28,et,36,11,"div",14)),2&t&&(p.Eb(2),p.Gc(p.kc(3,9,"Award.Overview")),p.Eb(3),p.pc("matTooltip",p.kc(6,11,"Common.Create")),p.oc("disabled",!e.isExpertMode),p.Eb(6),p.oc("dataSource",e.dataSource),p.Eb(13),p.oc("matHeaderRowDef",e.displayedColumns),p.Eb(1),p.oc("matRowDefColumns",e.displayedColumns),p.Eb(1),p.oc("length",e.recordCount)("pageSize",20),p.Eb(2),p.oc("ngIf",e.isPointShow))},directives:[g.a,v.b,E.a,C.a,W.j,W.c,W.e,W.b,W.g,W.i,k.a,V.a,c.m,W.d,W.a,W.f,W.h],pipes:[r.d],styles:[ct]}),at),rt=((nt=function(){function e(o,n,a){t(this,e),this.dialogRef=o,this.oDataSrv=n,this.data=a}return o(e,[{key:"onNoClick",value:function(){this.dialogRef.close()}}]),e}()).\u0275fac=function(t){return new(t||nt)(p.Qb(u.g),p.Qb(h.d),p.Qb(u.a))},nt.\u0275cmp=p.Kb({type:nt,selectors:[["app-overview-award-point-crtdlg"]],decls:33,vars:21,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"example-form"],["appearance","fill",1,"control-full-width"],["name","targetuser",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill"],["matInput","","name","recorddate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["matInput","","type","number","name","point",3,"ngModel","ngModelChange"],["matInput","","name","comment",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"disabled","mat-dialog-close"],[3,"value"]],template:function(t,e){if(1&t&&(p.Wb(0,"h1",0),p.Fc(1,"CREATE AWARD POINT"),p.Vb(),p.Wb(2,"div",1),p.Wb(3,"form",2),p.Wb(4,"mat-form-field",3),p.Wb(5,"mat-label"),p.Fc(6),p.jc(7,"transloco"),p.Vb(),p.Wb(8,"mat-select",4),p.ec("ngModelChange",function(t){return e.data.targetUser=t}),p.Ec(9,ot,2,2,"mat-option",5),p.Vb(),p.Vb(),p.Wb(10,"mat-form-field",6),p.Wb(11,"mat-label"),p.Fc(12),p.jc(13,"transloco"),p.Vb(),p.Wb(14,"input",7),p.ec("ngModelChange",function(t){return e.data.recordDate=t}),p.Vb(),p.Rb(15,"mat-datepicker-toggle",8),p.Rb(16,"mat-datepicker",null,9),p.Vb(),p.Wb(18,"mat-form-field",3),p.Wb(19,"mat-label"),p.Fc(20),p.jc(21,"transloco"),p.Vb(),p.Wb(22,"input",10),p.ec("ngModelChange",function(t){return e.data.point=t}),p.Vb(),p.Vb(),p.Wb(23,"mat-form-field",3),p.Wb(24,"mat-label"),p.Fc(25),p.jc(26,"transloco"),p.Vb(),p.Wb(27,"input",11),p.ec("ngModelChange",function(t){return e.data.comment=t}),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(28,"div",12),p.Wb(29,"button",13),p.ec("click",function(){return e.onNoClick()}),p.Fc(30,"No Thanks"),p.Vb(),p.Wb(31,"button",14),p.Fc(32,"OK"),p.Vb(),p.Vb()),2&t){var o=p.vc(17);p.Eb(6),p.Gc(p.kc(7,13,"Award.TargetUser")),p.Eb(2),p.oc("ngModel",e.data.targetUser),p.Eb(1),p.oc("ngForOf",null==e.oDataSrv.currentUserDetail?null:e.oDataSrv.currentUserDetail.awardUsers),p.Eb(3),p.Gc(p.kc(13,15,"Quiz.Date")),p.Eb(2),p.oc("matDatepicker",o)("ngModel",e.data.recordDate),p.Eb(1),p.oc("for",o),p.Eb(5),p.Gc(p.kc(21,17,"Award.Point")),p.Eb(2),p.oc("ngModel",e.data.point),p.Eb(3),p.Gc(p.kc(26,19,"Common.Comment")),p.Eb(2),p.oc("ngModel",e.data.comment),p.Eb(4),p.oc("disabled",!e.data.isValid())("mat-dialog-close",e.data)}},directives:[u.h,u.e,i.v,i.o,i.p,D.c,D.g,y.a,i.n,i.q,c.l,w.b,F.d,i.c,F.f,D.i,F.c,i.r,u.c,v.b,u.d,G.n],pipes:[r.d],styles:[ct]}),nt),lt=a("tPNy");function bt(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1,"#"),p.Vb())}function st(t,e){if(1&t){var o=p.Xb();p.Wb(0,"td",16),p.Fc(1),p.Wb(2,"button",17),p.ec("click",function(){p.xc(o);var t=e.$implicit;return p.ic().onDisplayRuleGroup(t.id)}),p.jc(3,"transloco"),p.Wb(4,"mat-icon"),p.Fc(5,"launch"),p.Vb(),p.Vb(),p.Wb(6,"button",18),p.ec("click",function(){p.xc(o);var t=e.$implicit;return p.ic().onDeleteRuleGroup(t.id)}),p.jc(7,"transloco"),p.Wb(8,"mat-icon"),p.Fc(9,"remove_circle"),p.Vb(),p.Vb(),p.Vb()}if(2&t){var n=e.$implicit;p.Eb(1),p.Hc("",n.id," | "),p.Eb(1),p.pc("matTooltip",p.kc(3,3,"Common.Display")),p.Eb(4),p.pc("matTooltip",p.kc(7,5,"Common.Delete"))}}function ut(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.TargetUser")))}function dt(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit,n=p.ic();p.Eb(1),p.Ic("",n.getUserDisplayAs(o.targetUser)," (",o.targetUser,")")}}function mt(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Type")))}function ft(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t){var o=e.$implicit,n=p.ic();p.Eb(1),p.Gc(p.kc(2,1,n.getAwardRuleTypeName(o.ruleType)))}}function pt(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.Validity")))}function ht(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.validity)}}function gt(t,e){1&t&&(p.Wb(0,"th",15),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Common.Description")))}function vt(t,e){if(1&t&&(p.Wb(0,"td",16),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.desp)}}function Et(t,e){1&t&&p.Rb(0,"tr",19)}function Ct(t,e){1&t&&p.Rb(0,"tr",20)}var Wt,kt=((Wt=function(){function e(o,n,a){t(this,e),this.odataSrv=o,this.dialog=n,this.uiUtilSrv=a,this.dataSource=[],this.displayedColumns=["id","targetUser","ruleType","validity","desp"],this.recordCount=0}return o(e,[{key:"ngOnInit",value:function(){this.refreshList()}},{key:"isExpertMode",get:function(){return this.odataSrv.isLoggedin}},{key:"getAwardRuleTypeName",value:function(t){return Object(lt.i)(t)}},{key:"getUserDisplayAs",value:function(t){if(t&&this.odataSrv.currentUserDetail){var e=this.odataSrv.currentUserDetail.awardUsers.findIndex(function(e){return e.targetUser===t});if(-1!==e)return this.odataSrv.currentUserDetail.awardUsers[e].displayAs}return""}},{key:"onCreateRuleGroup",value:function(){this.uiUtilSrv.navigateAwardRuleGenerationPage()}},{key:"refreshList",value:function(){var t=this;this.odataSrv.getAwardRuleGroups(100,0,void 0).subscribe({next:function(e){t.dataSource=e.items.slice(),t.recordCount=e.totalCount},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})}},{key:"onDeleteRuleGroup",value:function(t){var e=this;this.odataSrv.deleteAwardRuleGroup(t).subscribe({next:function(t){e.refreshList()},error:function(t){e.uiUtilSrv.showSnackInfo(t)}})}},{key:"onDisplayRuleGroup",value:function(t){this.uiUtilSrv.navigateAwardRuleGroupDisplayPage(t)}}]),e}()).\u0275fac=function(t){return new(t||Wt)(p.Qb(h.d),p.Qb(u.b),p.Qb(h.f))},Wt.\u0275cmp=p.Kb({type:Wt,selectors:[["app-award-rule"]],decls:30,vars:12,consts:[[1,"toolbar-spacer"],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","targetUser"],["matColumnDef","ruleType"],["matColumnDef","validity"],["matColumnDef","desp"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"matTooltip","click"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(p.Wb(0,"mat-toolbar"),p.Wb(1,"h1"),p.Fc(2),p.jc(3,"transloco"),p.Vb(),p.Rb(4,"div",0),p.Wb(5,"button",1),p.ec("click",function(){return e.onCreateRuleGroup()}),p.jc(6,"transloco"),p.Wb(7,"mat-icon"),p.Fc(8,"add_circle"),p.Vb(),p.Vb(),p.Vb(),p.Wb(9,"div",2),p.Wb(10,"div",3),p.Wb(11,"table",4),p.Ub(12,5),p.Ec(13,bt,2,0,"th",6),p.Ec(14,st,10,7,"td",7),p.Tb(),p.Ub(15,8),p.Ec(16,ut,3,3,"th",6),p.Ec(17,dt,2,2,"td",7),p.Tb(),p.Ub(18,9),p.Ec(19,mt,3,3,"th",6),p.Ec(20,ft,3,3,"td",7),p.Tb(),p.Ub(21,10),p.Ec(22,pt,3,3,"th",6),p.Ec(23,ht,2,1,"td",7),p.Tb(),p.Ub(24,11),p.Ec(25,gt,3,3,"th",6),p.Ec(26,vt,2,1,"td",7),p.Tb(),p.Ec(27,Et,1,0,"tr",12),p.Ec(28,Ct,1,0,"tr",13),p.Vb(),p.Vb(),p.Rb(29,"mat-paginator",14),p.Vb()),2&t&&(p.Eb(2),p.Gc(p.kc(3,8,"Award.Rules")),p.Eb(3),p.pc("matTooltip",p.kc(6,10,"Common.Create")),p.oc("disabled",!e.isExpertMode),p.Eb(6),p.oc("dataSource",e.dataSource),p.Eb(16),p.oc("matHeaderRowDef",e.displayedColumns),p.Eb(1),p.oc("matRowDefColumns",e.displayedColumns),p.Eb(1),p.oc("length",e.recordCount)("pageSize",20))},directives:[g.a,v.b,E.a,C.a,W.j,W.c,W.e,W.b,W.g,W.i,k.a,W.d,W.a,W.f,W.h],pipes:[r.d],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),Wt),Vt=a("bSwM");function Dt(t,e){1&t&&p.Rb(0,"th",23)}function yt(t,e){if(1&t){var o=p.Xb();p.Wb(0,"td",24),p.Wb(1,"button",25),p.ec("click",function(){p.xc(o);var t=e.$implicit;return p.ic().onGetPoints(t.targetUser,t.recordDate)}),p.jc(2,"transloco"),p.Wb(3,"mat-icon"),p.Fc(4,"visibility"),p.Vb(),p.Vb(),p.Wb(5,"button",26),p.ec("click",function(){p.xc(o);var t=e.$implicit;return p.ic().onDeleteTrace(t.targetUser,t.recordDate)}),p.jc(6,"transloco"),p.Wb(7,"mat-icon"),p.Fc(8,"remove_circle"),p.Vb(),p.Vb(),p.Vb()}2&t&&(p.Eb(1),p.pc("matTooltip",p.kc(2,2,"Award.Point")),p.Eb(4),p.pc("matTooltip",p.kc(6,4,"Common.Delete")))}function wt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.TargetUser")))}function Ft(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit,n=p.ic();p.Eb(1),p.Ic("",n.getUserDisplayAs(o.targetUser)," (",o.targetUser,")")}}function Gt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Quiz.Date")))}function Tt(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.getRecordDateDisplayString())}}function St(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.SchoolWorkTime")))}function Ut(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.schoolWorkTime)}}function Rt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.GoToBedTime")))}function jt(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.goToBedTime)}}function xt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.HomeworkCount")))}function Mt(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.homeWorkCount)}}function Pt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.BodyExerciseCount")))}function At(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.bodyExerciseCount)}}function It(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.ErrorsCollection")))}function Ot(t,e){if(1&t&&(p.Wb(0,"td",24),p.Wb(1,"mat-checkbox",27),p.ec("ngModelChange",function(t){return e.$implicit.errorsCollection=t}),p.Vb(),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.oc("ngModel",o.errorsCollection)}}function Ht(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.HandWriting")))}function $t(t,e){if(1&t&&(p.Wb(0,"td",24),p.Wb(1,"mat-checkbox",27),p.ec("ngModelChange",function(t){return e.$implicit.handWriting=t}),p.Vb(),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.oc("ngModel",o.handWriting)}}function Nt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.CleanDesk")))}function _t(t,e){if(1&t&&(p.Wb(0,"td",24),p.Wb(1,"mat-checkbox",27),p.ec("ngModelChange",function(t){return e.$implicit.cleanDesk=t}),p.Vb(),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.oc("ngModel",o.cleanDesk)}}function Bt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.HouseKeepingCount")))}function qt(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.houseKeepingCount)}}function Qt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.PoliteBehavior")))}function Lt(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.politeBehavior)}}function zt(t,e){1&t&&p.Rb(0,"tr",28)}function Kt(t,e){1&t&&p.Rb(0,"tr",29)}function Xt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1,"#"),p.Vb())}function Jt(t,e){if(1&t){var o=p.Xb();p.Wb(0,"td",24),p.Fc(1),p.Wb(2,"button",34),p.ec("click",function(){p.xc(o);var t=e.$implicit;return p.ic(2).onDeletePoint(t.id)}),p.jc(3,"transloco"),p.Wb(4,"mat-icon"),p.Fc(5,"remove_circle"),p.Vb(),p.Vb(),p.Vb()}if(2&t){var n=e.$implicit;p.Eb(1),p.Hc(" ",n.id," | "),p.Eb(1),p.pc("matTooltip",p.kc(3,3,"Common.Delete")),p.oc("disabled",n.matchedRuleID)}}function Yt(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.TargetUser")))}function Zt(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.targetUser)}}function te(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Quiz.Date")))}function ee(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.getRecordDateDisplayString())}}function oe(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1,"Rule ID"),p.Vb())}function ne(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.matchedRuleID)}}function ae(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.ContinuousDays")))}function ce(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.countOfDay)}}function ie(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.Point")))}function re(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.point)}}function le(t,e){1&t&&(p.Wb(0,"th",23),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Common.Comment")))}function be(t,e){if(1&t&&(p.Wb(0,"td",24),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.comment)}}function se(t,e){1&t&&p.Rb(0,"tr",28)}function ue(t,e){1&t&&p.Rb(0,"tr",29)}function de(t,e){if(1&t){var o=p.Xb();p.Wb(0,"div"),p.Wb(1,"mat-toolbar"),p.Wb(2,"h3"),p.Fc(3),p.jc(4,"transloco"),p.Vb(),p.Rb(5,"div",0),p.Wb(6,"button",25),p.ec("click",function(){return p.xc(o),p.ic().onHidePoints()}),p.jc(7,"transloco"),p.Wb(8,"mat-icon"),p.Fc(9,"visibility_off"),p.Vb(),p.Vb(),p.Vb(),p.Wb(10,"div",2),p.Wb(11,"div",3),p.Wb(12,"table",4),p.Ub(13,5),p.Ec(14,Xt,2,0,"th",6),p.Ec(15,Jt,6,5,"td",7),p.Tb(),p.Ub(16,8),p.Ec(17,Yt,3,3,"th",6),p.Ec(18,Zt,2,1,"td",7),p.Tb(),p.Ub(19,9),p.Ec(20,te,3,3,"th",6),p.Ec(21,ee,2,1,"td",7),p.Tb(),p.Ub(22,30),p.Ec(23,oe,2,0,"th",6),p.Ec(24,ne,2,1,"td",7),p.Tb(),p.Ub(25,31),p.Ec(26,ae,3,3,"th",6),p.Ec(27,ce,2,1,"td",7),p.Tb(),p.Ub(28,32),p.Ec(29,ie,3,3,"th",6),p.Ec(30,re,2,1,"td",7),p.Tb(),p.Ub(31,33),p.Ec(32,le,3,3,"th",6),p.Ec(33,be,2,1,"td",7),p.Tb(),p.Ec(34,se,1,0,"tr",19),p.Ec(35,ue,1,0,"tr",20),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){var n=p.ic();p.Eb(3),p.Jc("",p.kc(4,7,"Award.Point"),", ",n.selectedUser,", ",n.selectedDate,""),p.Eb(3),p.pc("matTooltip",p.kc(7,9,"Common.Hide")),p.Eb(6),p.oc("dataSource",n.dataSourcePoints),p.Eb(22),p.oc("matHeaderRowDef",n.displayedPointColumns),p.Eb(1),p.oc("matRowDefColumns",n.displayedPointColumns)}}function me(t,e){if(1&t&&(p.Wb(0,"mat-option",22),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.oc("value",o.targetUser),p.Eb(1),p.Gc(o.displayAs)}}var fe,pe,he=((pe=function(){function e(o,n,a){t(this,e),this.odataSrv=o,this.dialog=n,this.uiUtilSrv=a,this.dataSourceTrace=[],this.dataSourcePoints=[],this.traceLength=0,this.displayedColumns=["action","targetUser","recordDate","schoolWorkTime","goToBedTime","homeWorkCount","bodyExerciseCount","errorsCollection","handWriting","cleanDesk","houseKeepingCount","politeBehavior"],this.displayedPointColumns=["action","targetUser","recordDate","matchedRuleID","countOfDay","point","comment"],this.selectedUser="",this.selectedDate="",this.isPointShow=!1}return o(e,[{key:"ngOnInit",value:function(){this.refreshList()}},{key:"isExpertMode",get:function(){return this.odataSrv.isLoggedin}},{key:"getUserDisplayAs",value:function(t){if(t&&this.odataSrv.currentUserDetail){var e=this.odataSrv.currentUserDetail.awardUsers.findIndex(function(e){return e.targetUser===t});if(-1!==e)return this.odataSrv.currentUserDetail.awardUsers[e].displayAs}return""}},{key:"onCreateTrace",value:function(){var t=this;this.dialog.open(ge,{width:"600px",closeOnNavigation:!1,data:new f.i}).afterClosed().subscribe(function(e){console.log("The dialog was closed with result: "+e),e&&t.odataSrv.createDailyTrace(e).subscribe({next:function(e){t.refreshList()},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})})}},{key:"refreshList",value:function(){var t=this;this.odataSrv.getDailyTrace(100,0).subscribe({next:function(e){t.dataSourceTrace=e.items.slice(),t.traceLength=e.totalCount},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})}},{key:"onGetPoints",value:function(t,e){var o=this;this.odataSrv.getAwardPoints(100,0,void 0,"TargetUser eq '".concat(t,"' AND RecordDate eq ").concat(e.format(f.O))).subscribe({next:function(n){o.selectedUser=t,o.selectedDate=e.format(f.O),o.dataSourcePoints=[],o.dataSourcePoints=n.items.slice(),o.isPointShow=!0},error:function(t){o.uiUtilSrv.showSnackInfo(t)}})}},{key:"onDeleteTrace",value:function(t,e){var o=this;this.odataSrv.deleteDailyTrace(t,e).subscribe({next:function(t){o.isPointShow=!1,o.refreshList()},error:function(t){o.uiUtilSrv.showSnackInfo(t)}})}},{key:"onHidePoints",value:function(){this.selectedDate="",this.selectedUser="",this.dataSourcePoints=[],this.isPointShow=!1}},{key:"onDeletePoint",value:function(t){var e=this;this.odataSrv.deleteAwardPoint(t).subscribe({next:function(t){e.onGetPoints(e.selectedUser,m()(e.selectedDate))},error:function(t){e.uiUtilSrv.showSnackInfo(t)}})}}]),e}()).\u0275fac=function(t){return new(t||pe)(p.Qb(h.d),p.Qb(u.b),p.Qb(h.f))},pe.\u0275cmp=p.Kb({type:pe,selectors:[["app-daily-trace"]],decls:53,vars:13,consts:[[1,"toolbar-spacer"],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","targetUser"],["matColumnDef","recordDate"],["matColumnDef","schoolWorkTime"],["matColumnDef","goToBedTime"],["matColumnDef","homeWorkCount"],["matColumnDef","bodyExerciseCount"],["matColumnDef","errorsCollection"],["matColumnDef","handWriting"],["matColumnDef","cleanDesk"],["matColumnDef","houseKeepingCount"],["matColumnDef","politeBehavior"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"matTooltip","click"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["disabled","",3,"ngModel","ngModelChange"],["mat-header-row",""],["mat-row",""],["matColumnDef","matchedRuleID"],["matColumnDef","countOfDay"],["matColumnDef","point"],["matColumnDef","comment"],["mat-icon-button","","color","warn",3,"disabled","matTooltip","click"]],template:function(t,e){1&t&&(p.Wb(0,"mat-toolbar"),p.Wb(1,"h1"),p.Fc(2),p.jc(3,"transloco"),p.Vb(),p.Rb(4,"div",0),p.Wb(5,"button",1),p.ec("click",function(){return e.onCreateTrace()}),p.jc(6,"transloco"),p.Wb(7,"mat-icon"),p.Fc(8,"add_circle"),p.Vb(),p.Vb(),p.Vb(),p.Wb(9,"div",2),p.Wb(10,"div",3),p.Wb(11,"table",4),p.Ub(12,5),p.Ec(13,Dt,1,0,"th",6),p.Ec(14,yt,9,6,"td",7),p.Tb(),p.Ub(15,8),p.Ec(16,wt,3,3,"th",6),p.Ec(17,Ft,2,2,"td",7),p.Tb(),p.Ub(18,9),p.Ec(19,Gt,3,3,"th",6),p.Ec(20,Tt,2,1,"td",7),p.Tb(),p.Ub(21,10),p.Ec(22,St,3,3,"th",6),p.Ec(23,Ut,2,1,"td",7),p.Tb(),p.Ub(24,11),p.Ec(25,Rt,3,3,"th",6),p.Ec(26,jt,2,1,"td",7),p.Tb(),p.Ub(27,12),p.Ec(28,xt,3,3,"th",6),p.Ec(29,Mt,2,1,"td",7),p.Tb(),p.Ub(30,13),p.Ec(31,Pt,3,3,"th",6),p.Ec(32,At,2,1,"td",7),p.Tb(),p.Ub(33,14),p.Ec(34,It,3,3,"th",6),p.Ec(35,Ot,2,1,"td",7),p.Tb(),p.Ub(36,15),p.Ec(37,Ht,3,3,"th",6),p.Ec(38,$t,2,1,"td",7),p.Tb(),p.Ub(39,16),p.Ec(40,Nt,3,3,"th",6),p.Ec(41,_t,2,1,"td",7),p.Tb(),p.Ub(42,17),p.Ec(43,Bt,3,3,"th",6),p.Ec(44,qt,2,1,"td",7),p.Tb(),p.Ub(45,18),p.Ec(46,Qt,3,3,"th",6),p.Ec(47,Lt,2,1,"td",7),p.Tb(),p.Ec(48,zt,1,0,"tr",19),p.Ec(49,Kt,1,0,"tr",20),p.Vb(),p.Vb(),p.Rb(50,"mat-paginator",21),p.Vb(),p.Rb(51,"mat-divider"),p.Ec(52,de,36,11,"div",22)),2&t&&(p.Eb(2),p.Gc(p.kc(3,9,"Award.DailyTrace")),p.Eb(3),p.pc("matTooltip",p.kc(6,11,"Common.Create")),p.oc("disabled",!e.isExpertMode),p.Eb(6),p.oc("dataSource",e.dataSourceTrace),p.Eb(37),p.oc("matHeaderRowDef",e.displayedColumns),p.Eb(1),p.oc("matRowDefColumns",e.displayedColumns),p.Eb(1),p.oc("length",e.traceLength)("pageSize",20),p.Eb(2),p.oc("ngIf",e.isPointShow))},directives:[g.a,v.b,E.a,C.a,W.j,W.c,W.e,W.b,W.g,W.i,k.a,V.a,c.m,W.d,W.a,Vt.a,i.n,i.q,W.f,W.h],pipes:[r.d],styles:["table[_ngcontent-%COMP%]{width:100%}.example-form[_ngcontent-%COMP%]{min-width:250px;max-width:500px;width:100%}.example-margin[_ngcontent-%COMP%]{margin:0 10px}td[_ngcontent-%COMP%]{padding-right:8px}"]}),pe),ge=((fe=function(){function e(o,n,a){t(this,e),this.dialogRef=o,this.odataSrv=n,this.data=a}return o(e,[{key:"arTargetUsers",get:function(){return this.odataSrv.currentUserDetail?this.odataSrv.currentUserDetail.awardUsers:[]}},{key:"onNoClick",value:function(){this.dialogRef.close()}}]),e}()).\u0275fac=function(t){return new(t||fe)(p.Qb(u.g),p.Qb(h.d),p.Qb(u.a))},fe.\u0275cmp=p.Kb({type:fe,selectors:[["app-daily-trace-create-dialog"]],decls:63,vars:52,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"example-form"],["appearance","fill",1,"control-full-width"],["required","","name","targetuser",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill"],["matInput","","name","recorddate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["matInput","","type","number","name","schoolworktime",3,"ngModel","ngModelChange"],["matInput","","type","number","name","gotobedtime",3,"ngModel","ngModelChange"],["matInput","","type","number","name","homeworkcount",3,"ngModel","ngModelChange"],["matInput","","type","number","name","bodyexercisecount",3,"ngModel","ngModelChange"],["name","errorcollection",1,"example-margin",3,"ngModel","ngModelChange"],["name","handwriting",1,"example-margin",3,"ngModel","ngModelChange"],["name","cleandesk",1,"example-margin",3,"ngModel","ngModelChange"],["matInput","","type","number","name","housekeepingcount",3,"ngModel","ngModelChange"],["matInput","","type","number","name","politebehavior",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"disabled","mat-dialog-close"],[3,"value"]],template:function(t,e){if(1&t&&(p.Wb(0,"h1",0),p.Fc(1,"CREATE DAILY TRACE"),p.Vb(),p.Wb(2,"div",1),p.Wb(3,"form",2),p.Wb(4,"mat-form-field",3),p.Wb(5,"mat-label"),p.Fc(6),p.jc(7,"transloco"),p.Vb(),p.Wb(8,"mat-select",4),p.ec("ngModelChange",function(t){return e.data.targetUser=t}),p.Ec(9,me,2,2,"mat-option",5),p.Vb(),p.Vb(),p.Wb(10,"mat-form-field",6),p.Wb(11,"mat-label"),p.Fc(12),p.jc(13,"transloco"),p.Vb(),p.Wb(14,"input",7),p.ec("ngModelChange",function(t){return e.data.recordDate=t}),p.Vb(),p.Rb(15,"mat-datepicker-toggle",8),p.Rb(16,"mat-datepicker",null,9),p.Vb(),p.Wb(18,"mat-form-field",3),p.Wb(19,"mat-label"),p.Fc(20),p.jc(21,"transloco"),p.Vb(),p.Wb(22,"input",10),p.ec("ngModelChange",function(t){return e.data.schoolWorkTime=t}),p.Vb(),p.Vb(),p.Wb(23,"mat-form-field",3),p.Wb(24,"mat-label"),p.Fc(25),p.jc(26,"transloco"),p.Vb(),p.Wb(27,"input",11),p.ec("ngModelChange",function(t){return e.data.goToBedTime=t}),p.Vb(),p.Vb(),p.Wb(28,"mat-form-field",3),p.Wb(29,"mat-label"),p.Fc(30),p.jc(31,"transloco"),p.Vb(),p.Wb(32,"input",12),p.ec("ngModelChange",function(t){return e.data.homeWorkCount=t}),p.Vb(),p.Vb(),p.Wb(33,"mat-form-field",3),p.Wb(34,"mat-label"),p.Fc(35),p.jc(36,"transloco"),p.Vb(),p.Wb(37,"input",13),p.ec("ngModelChange",function(t){return e.data.bodyExerciseCount=t}),p.Vb(),p.Vb(),p.Wb(38,"mat-checkbox",14),p.ec("ngModelChange",function(t){return e.data.errorsCollection=t}),p.Fc(39),p.jc(40,"transloco"),p.Vb(),p.Wb(41,"mat-checkbox",15),p.ec("ngModelChange",function(t){return e.data.handWriting=t}),p.Fc(42),p.jc(43,"transloco"),p.Vb(),p.Wb(44,"mat-checkbox",16),p.ec("ngModelChange",function(t){return e.data.cleanDesk=t}),p.Fc(45),p.jc(46,"transloco"),p.Vb(),p.Wb(47,"mat-form-field",3),p.Wb(48,"mat-label"),p.Fc(49),p.jc(50,"transloco"),p.Vb(),p.Wb(51,"input",17),p.ec("ngModelChange",function(t){return e.data.houseKeepingCount=t}),p.Vb(),p.Vb(),p.Wb(52,"mat-form-field",3),p.Wb(53,"mat-label"),p.Fc(54),p.jc(55,"transloco"),p.Vb(),p.Wb(56,"input",18),p.ec("ngModelChange",function(t){return e.data.politeBehavior=t}),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(57,"div",19),p.Wb(58,"button",20),p.ec("click",function(){return e.onNoClick()}),p.Fc(59),p.jc(60,"transloco"),p.Vb(),p.Wb(61,"button",21),p.Fc(62,"OK"),p.Vb(),p.Vb()),2&t){var o=p.vc(17);p.Eb(6),p.Gc(p.kc(7,28,"Award.TargetUser")),p.Eb(2),p.oc("ngModel",e.data.targetUser),p.Eb(1),p.oc("ngForOf",e.arTargetUsers),p.Eb(3),p.Gc(p.kc(13,30,"Quiz.Date")),p.Eb(2),p.oc("matDatepicker",o)("ngModel",e.data.recordDate),p.Eb(1),p.oc("for",o),p.Eb(5),p.Gc(p.kc(21,32,"Award.SchoolWorkTime")),p.Eb(2),p.oc("ngModel",e.data.schoolWorkTime),p.Eb(3),p.Gc(p.kc(26,34,"Award.GoToBedTime")),p.Eb(2),p.oc("ngModel",e.data.goToBedTime),p.Eb(3),p.Gc(p.kc(31,36,"Award.HomeworkCount")),p.Eb(2),p.oc("ngModel",e.data.homeWorkCount),p.Eb(3),p.Gc(p.kc(36,38,"Award.BodyExerciseCount")),p.Eb(2),p.oc("ngModel",e.data.bodyExerciseCount),p.Eb(1),p.oc("ngModel",e.data.errorsCollection),p.Eb(1),p.Gc(p.kc(40,40,"Award.ErrorsCollection")),p.Eb(2),p.oc("ngModel",e.data.handWriting),p.Eb(1),p.Gc(p.kc(43,42,"Award.HandWriting")),p.Eb(2),p.oc("ngModel",e.data.cleanDesk),p.Eb(1),p.Gc(p.kc(46,44,"Award.CleanDesk")),p.Eb(4),p.Gc(p.kc(50,46,"Award.HouseKeepingCount")),p.Eb(2),p.oc("ngModel",e.data.houseKeepingCount),p.Eb(3),p.Gc(p.kc(55,48,"Award.PoliteBehavior")),p.Eb(2),p.oc("ngModel",e.data.politeBehavior),p.Eb(3),p.Gc(p.kc(60,50,"Common.NoThanks")),p.Eb(2),p.oc("disabled",!e.data.isValid())("mat-dialog-close",e.data)}},directives:[u.h,u.e,i.v,i.o,i.p,D.c,D.g,y.a,i.t,i.n,i.q,c.l,w.b,F.d,i.c,F.f,D.i,F.c,i.r,Vt.a,u.c,v.b,u.d,G.n],pipes:[r.d],encapsulation:2}),fe),ve=a("xHqg"),Ee=a("MutI");function Ce(t,e){1&t&&(p.Fc(0),p.jc(1,"transloco")),2&t&&p.Gc(p.kc(1,1,"Header"))}function We(t,e){if(1&t&&(p.Wb(0,"mat-option",30),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.oc("value",o.targetUser),p.Eb(1),p.Gc(o.displayAs)}}function ke(t,e){if(1&t&&(p.Wb(0,"mat-option",30),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t){var o=e.$implicit;p.oc("value",o.value),p.Eb(1),p.Gc(p.kc(2,2,o.i18nterm))}}function Ve(t,e){1&t&&(p.Fc(0),p.jc(1,"transloco")),2&t&&p.Gc(p.kc(1,1,"Dimension"))}function De(t,e){if(1&t&&(p.Wb(0,"mat-list",31),p.Wb(1,"mat-list-item"),p.Fc(2),p.Vb(),p.Vb()),2&t){var o=e.$implicit;p.Eb(2),p.Gc(o.toString())}}function ye(t,e){1&t&&(p.Fc(0),p.jc(1,"transloco")),2&t&&p.Gc(p.kc(1,1,"Award.ContinuousDays"))}function we(t,e){if(1&t&&(p.Wb(0,"mat-list",31),p.Wb(1,"mat-list-item"),p.Fc(2),p.Vb(),p.Vb()),2&t){var o=e.$implicit;p.Eb(2),p.Gc(o.toString())}}function Fe(t,e){1&t&&(p.Fc(0),p.jc(1,"transloco")),2&t&&p.Gc(p.kc(1,1,"Award.Point"))}function Ge(t,e){1&t&&(p.Wb(0,"span"),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Hc(" ",p.kc(2,1,"Dimension")," "))}function Te(t,e){if(1&t&&(p.Wb(0,"span"),p.Fc(1),p.Vb()),2&t){var o=p.ic(2).$implicit,n=p.ic();p.Eb(1),p.Hc(" ",n.getColumnHeaderForDays(o)," ")}}function Se(t,e){if(1&t&&(p.Wb(0,"th",35),p.Ec(1,Ge,3,3,"span",36),p.Ec(2,Te,2,1,"span",36),p.Vb()),2&t){var o=p.ic().$implicit;p.Eb(1),p.oc("ngIf","dimension"===o),p.Eb(1),p.oc("ngIf","dimension"!==o)}}function Ue(t,e){if(1&t&&(p.Wb(0,"span"),p.Fc(1),p.Vb()),2&t){var o=p.ic().$implicit;p.Eb(1),p.Hc(" ",o.dimInfo.toString()," ")}}function Re(t,e){if(1&t){var o=p.Xb();p.Wb(0,"span"),p.Wb(1,"input",38),p.ec("ngModelChange",function(t){p.xc(o);var e=p.ic().$implicit,n=p.ic().$implicit;return e.points[n]=t})("ngModelChange",function(t){return p.xc(o),p.ic(3).onPointCellChanged(t)}),p.Vb(),p.Vb()}if(2&t){var n=p.ic().$implicit,a=p.ic().$implicit;p.Eb(1),p.oc("ngModel",n.points[a])}}function je(t,e){if(1&t&&(p.Wb(0,"td",37),p.Ec(1,Ue,2,1,"span",36),p.Ec(2,Re,2,1,"span",36),p.Vb()),2&t){var o=p.ic().$implicit;p.Eb(1),p.oc("ngIf","dimension"===o),p.Eb(1),p.oc("ngIf","dimension"!==o)}}function xe(t,e){1&t&&(p.Ub(0,32),p.Ec(1,Se,3,2,"th",33),p.Ec(2,je,3,2,"td",34),p.Tb()),2&t&&p.oc("matColumnDef",e.$implicit)}function Me(t,e){1&t&&p.Rb(0,"tr",39)}function Pe(t,e){1&t&&p.Rb(0,"tr",40)}function Ae(t,e){1&t&&(p.Fc(0),p.jc(1,"transloco")),2&t&&p.Gc(p.kc(1,1,"Common.Done"))}var Ie,Oe=function(){function e(){t(this,e),this.from=0,this.to=0,this.typeIsNumber=!0,this.cond=!1}return o(e,[{key:"toString",value:function(){return this.typeIsNumber?"[".concat(this.from," - ").concat(this.to,")"):this.cond.toString()}}]),e}(),He=function(){function e(){t(this,e),this.from=0,this.to=0}return o(e,[{key:"toString",value:function(){return"[".concat(this.from," - ").concat(this.to,")")}}]),e}(),$e=function e(o){t(this,e),this.points={},this.isEdit=!1,this.dimInfo=o},Ne=((Ie=function(){function e(o,n,a){t(this,e),this._formBuilder=o,this.uiUtilSrv=n,this.odataSrv=a,this.arRuleTypes=[],this.dimensions=[],this.contDays=[],this.displayedColumns=["dimension"],this.dataSource=[],this.pointCompleted=!1,this.createdGroupID=-1,this.arRuleTypes=Object(f.J)(),this.firstFormGroup=this._formBuilder.group({targetuserCtrl:["",i.u.required],validFromCtrl:[void 0,i.u.required],validToCtrl:[void 0,i.u.required],ruleTypeCtrl:[f.h.GoToBedTime,i.u.required],despCtrl:["",i.u.required]}),this.secondFormGroup=this._formBuilder.group({rawCtrl:["",i.u.required]}),this.thirdFormGroup=this._formBuilder.group({rawCtrl:["",i.u.required]})}return o(e,[{key:"arTargetUsers",get:function(){return this.odataSrv.currentUserDetail?this.odataSrv.currentUserDetail.awardUsers:[]}},{key:"getUserDisplayAs",value:function(t){if(t&&this.odataSrv.currentUserDetail){var e=this.odataSrv.currentUserDetail.awardUsers.findIndex(function(e){return e.targetUser===t});if(-1!==e)return this.odataSrv.currentUserDetail.awardUsers[e].displayAs}return""}},{key:"isExpertMode",get:function(){return this.odataSrv.isLoggedin}},{key:"ngOnInit",value:function(){var t,e,o,n,a=this;null===(t=this.firstFormGroup.get("validFromCtrl"))||void 0===t||t.setValue(m()()),null===(e=this.firstFormGroup.get("validToCtrl"))||void 0===e||e.setValue(m()().add(1,"month")),null===(o=this.secondFormGroup.get("rawCtrl"))||void 0===o||o.valueChanges.subscribe(function(t){a.onDimensionChange(t)}),null===(n=this.thirdFormGroup.get("rawCtrl"))||void 0===n||n.valueChanges.subscribe(function(t){a.onContDayChange(t)})}},{key:"selectedRuleType",get:function(){var t,e=null===(t=this.firstFormGroup.get("ruleTypeCtrl"))||void 0===t?void 0:t.value;return void 0!==e?e:f.h.GoToBedTime}},{key:"onInitialDimensions",value:function(){var t,e;switch(this.selectedRuleType){case f.h.HandWritingHabit:case f.h.CleanDeakHabit:case f.h.ErrorCollectionHabit:null===(t=this.secondFormGroup.get("rawCtrl"))||void 0===t||t.disable();break;default:null===(e=this.secondFormGroup.get("rawCtrl"))||void 0===e||e.enable()}}},{key:"onDimensionCompleted",value:function(){switch(this.selectedRuleType){case f.h.HandWritingHabit:case f.h.CleanDeakHabit:case f.h.ErrorCollectionHabit:var t=new Oe;t.typeIsNumber=!1,t.cond=!0,this.dimensions.push(t);var e=new Oe;e.typeIsNumber=!1,e.cond=!1,this.dimensions.push(e)}}},{key:"onDimensionChange",value:function(t){var e=this;switch(this.dimensions=[],this.selectedRuleType){case f.h.BodyExerciseCount:case f.h.HomeWorkCount:case f.h.HouseKeepingCount:case f.h.PoliteBehavior:if(t){var o=t.split(";").map(function(t){if(t){var e=+t;if(!isNaN(e)&&e>0)return Math.trunc(e)}return 0});(o=o.filter(function(t){return t>0})).sort();var n=0;o.forEach(function(t){if(0!==n){var o=new Oe;o.from=n,o.to=t,e.dimensions.push(o)}n=t});var a=new Oe;a.from=n,a.to=9999,this.dimensions.push(a)}break;case f.h.HandWritingHabit:case f.h.CleanDeakHabit:case f.h.ErrorCollectionHabit:break;case f.h.GoToBedTime:case f.h.SchoolWorkTime:default:if(t){var c=t.split(";").map(function(t){if(t){var e=+t;if(!isNaN(e)&&e<=23.99&&e>0)return e}return 0});(c=c.filter(function(t){return t>0})).sort();var i=0;c.forEach(function(t){var o=new Oe;o.from=i,o.to=t,e.dimensions.push(o),i=t});var r=new Oe;r.from=i,r.to=24,this.dimensions.push(r)}}}},{key:"onContDayChange",value:function(t){var e=this;if(this.contDays=[],t){var o=t.split(";").map(function(t){if(t){var e=+t;if(!isNaN(e)&&e>0)return Math.trunc(e)}return 0});(o=o.filter(function(t){return t>0})).sort();var n=0;o.forEach(function(t){if(0!==n){var o=new He;o.from=n,o.to=t,e.contDays.push(o)}n=t});var a=new He;a.from=n,a.to=9999,this.contDays.push(a)}}},{key:"onInitialRules",value:function(){var t,e=this;this.dataSource=[],this.displayedColumns=["dimension"];for(var o=[],n=0;n<this.contDays.length;n++)o.push("days"+n);(t=this.displayedColumns).push.apply(t,o),this.dimensions.forEach(function(t){var n=new $e(t);o.forEach(function(t){n.points[t]=0}),e.dataSource.push(n)})}},{key:"onPointCellChanged",value:function(t){var e=0;this.dataSource.forEach(function(t){Object.keys(t.points).forEach(function(o){(isNaN(t.points[o])||0===t.points[o])&&e++})}),this.pointCompleted=0===e}},{key:"getColumnHeaderForDays",value:function(t){if(t&&t.startsWith("days")){var e=+t.replace("days","");return this.contDays[e].toString()}return""}},{key:"onSave",value:function(){var t,e,o,n,a=this,c=new f.g;switch(c.desp=null===(t=this.firstFormGroup.get("despCtrl"))||void 0===t?void 0:t.value,c.ruleType=this.selectedRuleType,c.targetUser=null===(e=this.firstFormGroup.get("targetuserCtrl"))||void 0===e?void 0:e.value,c.validFrom=null===(o=this.firstFormGroup.get("validFromCtrl"))||void 0===o?void 0:o.value,c.validTo=null===(n=this.firstFormGroup.get("validToCtrl"))||void 0===n?void 0:n.value,c.ruleType){case f.h.BodyExerciseCount:case f.h.HomeWorkCount:case f.h.HouseKeepingCount:case f.h.PoliteBehavior:this.dataSource.forEach(function(t){Object.keys(t.points).forEach(function(e){var o=new f.f;o.countOfFactLow=t.dimInfo.from,o.countOfFactHigh=t.dimInfo.to;var n=+e.replace("days","");o.daysFrom=a.contDays[n].from,a.contDays[n].to!==Number.POSITIVE_INFINITY&&(o.daysTo=a.contDays[n].to),o.point=t.points[e],c.rules.push(o)})});break;case f.h.HandWritingHabit:case f.h.CleanDeakHabit:case f.h.ErrorCollectionHabit:this.dataSource.forEach(function(t){Object.keys(t.points).forEach(function(e){var o=new f.f;o.doneOfFact=t.dimInfo.cond;var n=+e.replace("days","");o.daysFrom=a.contDays[n].from,o.daysTo=a.contDays[n].to,o.point=t.points[e],c.rules.push(o)})});break;case f.h.GoToBedTime:case f.h.SchoolWorkTime:default:this.dataSource.forEach(function(t){Object.keys(t.points).forEach(function(e){var o=new f.f;o.timeStart=t.dimInfo.from,o.timeEnd=t.dimInfo.to;var n=+e.replace("days","");o.daysFrom=a.contDays[n].from,o.daysTo=a.contDays[n].to,o.point=t.points[e],c.rules.push(o)})})}c.isValid()&&this.odataSrv.createAwardRuleGroup(c).subscribe({next:function(t){a.createdGroupID=t.id},error:function(t){a.uiUtilSrv.showSnackInfo(t)}})}},{key:"openGroup",value:function(){this.uiUtilSrv.navigateAwardRuleGroupDisplayPage(this.createdGroupID)}}]),e}()).\u0275fac=function(t){return new(t||Ie)(p.Qb(i.d),p.Qb(h.f),p.Qb(h.d))},Ie.\u0275cmp=p.Kb({type:Ie,selectors:[["app-award-rule-generation"]],decls:103,vars:73,consts:[[1,"toolbar-spacer"],["linear",""],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["appearance","fill",1,"control-full-width"],["required","","formControlName","targetuserCtrl"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill"],[3,"rangePicker"],["matStartDate","","formControlName","validFromCtrl","placeholder","Start date"],["matEndDate","","formControlName","validToCtrl","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],["required","","formControlName","ruleTypeCtrl"],["matInput","","required","","formControlName","despCtrl"],["mat-button","","color","primary","matStepperNext","",3,"click"],["matInput","","formControlName","rawCtrl"],["dense","",4,"ngFor","ngForOf"],["mat-button","","matStepperPrevious",""],[3,"completed"],["mat-raised-button","","disabled",""],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-button","","color","primary","matStepperNext","",3,"disabled","click"],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"],[3,"value"],["dense",""],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],[4,"ngIf"],["mat-cell",""],["matInput","","type","number",3,"ngModel","ngModelChange"],["mat-header-row",""],["mat-row",""]],template:function(t,e){if(1&t){var o=p.Xb();p.Wb(0,"mat-toolbar"),p.Wb(1,"h1"),p.Fc(2),p.jc(3,"transloco"),p.Vb(),p.Rb(4,"div",0),p.Vb(),p.Wb(5,"mat-vertical-stepper",1,2),p.Wb(7,"mat-step",3),p.Wb(8,"form",4),p.Ec(9,Ce,2,3,"ng-template",5),p.Wb(10,"mat-form-field",6),p.Wb(11,"mat-label"),p.Fc(12),p.jc(13,"transloco"),p.Vb(),p.Wb(14,"mat-select",7),p.Ec(15,We,2,2,"mat-option",8),p.Vb(),p.Vb(),p.Wb(16,"mat-form-field",9),p.Wb(17,"mat-label"),p.Fc(18),p.jc(19,"transloco"),p.Vb(),p.Wb(20,"mat-date-range-input",10),p.Rb(21,"input",11),p.Rb(22,"input",12),p.Vb(),p.Rb(23,"mat-datepicker-toggle",13),p.Rb(24,"mat-date-range-picker",null,14),p.Vb(),p.Wb(26,"mat-form-field",6),p.Wb(27,"mat-label"),p.Fc(28),p.jc(29,"transloco"),p.Vb(),p.Wb(30,"mat-select",15),p.Ec(31,ke,3,4,"mat-option",8),p.Vb(),p.Vb(),p.Wb(32,"mat-form-field",6),p.Wb(33,"mat-label"),p.Fc(34),p.jc(35,"transloco"),p.Vb(),p.Rb(36,"input",16),p.Vb(),p.Wb(37,"div"),p.Wb(38,"button",17),p.ec("click",function(){return e.onInitialDimensions()}),p.Fc(39),p.jc(40,"transloco"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(41,"mat-step",3),p.Wb(42,"form",4),p.Ec(43,Ve,2,3,"ng-template",5),p.Wb(44,"mat-form-field"),p.Wb(45,"mat-label"),p.Fc(46),p.jc(47,"transloco"),p.Vb(),p.Rb(48,"input",18),p.Vb(),p.Ec(49,De,3,1,"mat-list",19),p.Wb(50,"div"),p.Wb(51,"button",20),p.Fc(52),p.jc(53,"transloco"),p.Vb(),p.Wb(54,"button",17),p.ec("click",function(){return e.onDimensionCompleted()}),p.Fc(55),p.jc(56,"transloco"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(57,"mat-step",3),p.Wb(58,"form",4),p.Ec(59,ye,2,3,"ng-template",5),p.Wb(60,"mat-form-field"),p.Wb(61,"mat-label"),p.Fc(62),p.jc(63,"transloco"),p.Vb(),p.Rb(64,"input",18),p.Vb(),p.Ec(65,we,3,1,"mat-list",19),p.Wb(66,"div"),p.Wb(67,"button",20),p.Fc(68),p.jc(69,"transloco"),p.Vb(),p.Wb(70,"button",17),p.ec("click",function(){return e.onInitialRules()}),p.Fc(71),p.jc(72,"transloco"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(73,"mat-step",21),p.Ec(74,Fe,2,3,"ng-template",5),p.Wb(75,"mat-toolbar"),p.Wb(76,"button",22),p.Fc(77,"RESET RULES"),p.Vb(),p.Vb(),p.Wb(78,"table",23),p.Ec(79,xe,3,1,"ng-container",24),p.Ec(80,Me,1,0,"tr",25),p.Ec(81,Pe,1,0,"tr",26),p.Vb(),p.Wb(82,"button",20),p.Fc(83),p.jc(84,"transloco"),p.Vb(),p.Wb(85,"button",27),p.ec("click",function(){return e.onSave()}),p.Fc(86),p.jc(87,"transloco"),p.Vb(),p.Vb(),p.Wb(88,"mat-step"),p.Ec(89,Ae,2,3,"ng-template",5),p.Wb(90,"p"),p.Fc(91),p.jc(92,"transloco"),p.Vb(),p.Wb(93,"p"),p.Fc(94),p.jc(95,"transloco"),p.Vb(),p.Wb(96,"div"),p.Wb(97,"button",28),p.ec("click",function(){return e.openGroup()}),p.Fc(98),p.jc(99,"transloco"),p.Vb(),p.Wb(100,"button",29),p.ec("click",function(){return p.xc(o),p.vc(6).reset()}),p.Fc(101),p.jc(102,"transloco"),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){var n=p.vc(25);p.Eb(2),p.Gc(p.kc(3,37,"Award.RuleGeneration")),p.Eb(5),p.oc("stepControl",e.firstFormGroup),p.Eb(1),p.oc("formGroup",e.firstFormGroup),p.Eb(4),p.Gc(p.kc(13,39,"Award.TargetUser")),p.Eb(3),p.oc("ngForOf",e.arTargetUsers),p.Eb(3),p.Gc(p.kc(19,41,"Award.Validity")),p.Eb(2),p.oc("rangePicker",n),p.Eb(3),p.oc("for",n),p.Eb(5),p.Gc(p.kc(29,43,"Type")),p.Eb(3),p.oc("ngForOf",e.arRuleTypes),p.Eb(3),p.Gc(p.kc(35,45,"Common.Description")),p.Eb(5),p.Gc(p.kc(40,47,"Common.Next")),p.Eb(2),p.oc("stepControl",e.secondFormGroup),p.Eb(1),p.oc("formGroup",e.secondFormGroup),p.Eb(4),p.Gc(p.kc(47,49,"Dimension")),p.Eb(3),p.oc("ngForOf",e.dimensions),p.Eb(3),p.Gc(p.kc(53,51,"Common.Previous")),p.Eb(3),p.Gc(p.kc(56,53,"Common.Next")),p.Eb(2),p.oc("stepControl",e.thirdFormGroup),p.Eb(1),p.oc("formGroup",e.thirdFormGroup),p.Eb(4),p.Gc(p.kc(63,55,"Award.ContinuousDays")),p.Eb(3),p.oc("ngForOf",e.contDays),p.Eb(3),p.Gc(p.kc(69,57,"Common.Previous")),p.Eb(3),p.Gc(p.kc(72,59,"Common.Next")),p.Eb(2),p.oc("completed",e.pointCompleted),p.Eb(5),p.oc("dataSource",e.dataSource),p.Eb(1),p.oc("ngForOf",e.displayedColumns),p.Eb(1),p.oc("matHeaderRowDef",e.displayedColumns),p.Eb(1),p.oc("matRowDefColumns",e.displayedColumns),p.Eb(2),p.Gc(p.kc(84,61,"Common.Previous")),p.Eb(2),p.oc("disabled",!e.pointCompleted),p.Eb(1),p.Gc(p.kc(87,63,"Common.Next")),p.Eb(5),p.Ic("",p.kc(92,65,"AwardRuleGroupCreatedInfo1"),", ID: ",e.createdGroupID," "),p.Eb(3),p.Gc(p.kc(95,67,"AwardRuleGroupCreatedInfo2")),p.Eb(4),p.Gc(p.kc(99,69,"Common.Display")),p.Eb(3),p.Gc(p.kc(102,71,"Common.CreateAnotherOne"))}},directives:[g.a,ve.g,ve.b,i.v,i.o,i.h,ve.c,D.c,D.g,y.a,i.t,i.n,i.f,c.l,F.a,F.h,i.c,F.g,F.f,D.i,F.b,w.b,v.b,ve.e,ve.f,W.j,W.g,W.i,G.n,Ee.a,Ee.b,W.c,W.e,W.b,W.d,c.m,W.a,i.r,i.q,W.f,W.h],pipes:[r.d],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]{margin-left:8px}.mat-table[_ngcontent-%COMP%]{width:90%;min-height:500px}"]}),Ie),_e=a("jtHE"),Be=a("Wp6s"),qe=a("7EHt");function Qe(t,e){if(1&t&&(p.Wb(0,"mat-option",28),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.oc("value",o.targetUser),p.Eb(1),p.Gc(o.displayAs)}}function Le(t,e){if(1&t&&(p.Wb(0,"mat-option",28),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t){var o=e.$implicit;p.oc("value",o.value),p.Eb(1),p.Gc(p.kc(2,2,o.i18nterm))}}function ze(t,e){1&t&&(p.Wb(0,"th",29),p.Fc(1,"#"),p.Vb())}function Ke(t,e){if(1&t&&(p.Wb(0,"td",30),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.id)}}function Xe(t,e){1&t&&(p.Wb(0,"th",29),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.CountRange")))}function Je(t,e){if(1&t&&(p.Wb(0,"td",30),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.countString)}}function Ye(t,e){1&t&&(p.Wb(0,"th",29),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Common.Done")))}function Ze(t,e){if(1&t&&(p.Wb(0,"td",30),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.doneString)}}function to(t,e){1&t&&(p.Wb(0,"th",29),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.TimeRange")))}function eo(t,e){if(1&t&&(p.Wb(0,"td",30),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.timeString)}}function oo(t,e){1&t&&(p.Wb(0,"th",29),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.ContinuousDays")))}function no(t,e){if(1&t&&(p.Wb(0,"td",30),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.dayString)}}function ao(t,e){1&t&&(p.Wb(0,"th",29),p.Fc(1),p.jc(2,"transloco"),p.Vb()),2&t&&(p.Eb(1),p.Gc(p.kc(2,1,"Award.Point")))}function co(t,e){if(1&t&&(p.Wb(0,"td",30),p.Fc(1),p.Vb()),2&t){var o=e.$implicit;p.Eb(1),p.Gc(o.point)}}function io(t,e){1&t&&p.Rb(0,"tr",31)}function ro(t,e){1&t&&p.Rb(0,"tr",32)}var lo,bo,so,uo=[{path:"",component:it},{path:"rules",component:kt},{path:"rule-group-display/:id",component:(lo=function(){function e(o,n,a,c){t(this,e),this.activateRoute=o,this.uiUtilSrv=n,this.odataSrv=a,this.formBuilder=c,this.routerID=-1,this.arRuleTypes=[],this.dataSource=[],this.displayedColumns=[],this.arRuleTypes=Object(f.J)(),this.headerFormGroup=this.formBuilder.group({targetuserCtrl:["",i.u.required],validFromCtrl:[void 0,i.u.required],validToCtrl:[void 0,i.u.required],ruleTypeCtrl:[f.h.GoToBedTime,i.u.required],despCtrl:["",i.u.required]})}return o(e,[{key:"arTargetUsers",get:function(){return this.odataSrv.currentUserDetail?this.odataSrv.currentUserDetail.awardUsers:[]}},{key:"getUserDisplayAs",value:function(t){if(t&&this.odataSrv.currentUserDetail){var e=this.odataSrv.currentUserDetail.awardUsers.findIndex(function(e){return e.targetUser===t});if(-1!==e)return this.odataSrv.currentUserDetail.awardUsers[e].displayAs}return""}},{key:"isExpertMode",get:function(){return this.odataSrv.isLoggedin}},{key:"ngOnInit",value:function(){var t=this;this.destroyed$=new _e.a(1),this.activateRoute.url.subscribe({next:function(e){e instanceof Array&&e.length>0&&"rule-group-display"===e[0].path&&(t.routerID=+e[1].path),-1!==t.routerID&&t.odataSrv.readAwardRuleGroup(t.routerID).subscribe({next:function(e){var o,n,a,c,i;switch(null===(o=t.headerFormGroup.get("targetuserCtrl"))||void 0===o||o.setValue(e.targetUser),null===(n=t.headerFormGroup.get("despCtrl"))||void 0===n||n.setValue(e.desp),null===(a=t.headerFormGroup.get("validFromCtrl"))||void 0===a||a.setValue(e.validFrom),null===(c=t.headerFormGroup.get("validToCtrl"))||void 0===c||c.setValue(e.validTo),null===(i=t.headerFormGroup.get("ruleTypeCtrl"))||void 0===i||i.setValue(e.ruleType),t.headerFormGroup.disable(),e.ruleType){case f.h.BodyExerciseCount:case f.h.HomeWorkCount:case f.h.HouseKeepingCount:case f.h.PoliteBehavior:t.displayedColumns=["id","count","days","point"];break;case f.h.HandWritingHabit:case f.h.CleanDeakHabit:case f.h.ErrorCollectionHabit:t.displayedColumns=["id","done","days","point"];break;case f.h.GoToBedTime:case f.h.SchoolWorkTime:default:t.displayedColumns=["id","time","days","point"]}t.dataSource=e.rules.slice()},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})},error:function(e){t.uiUtilSrv.showSnackInfo(e)}})}},{key:"ngOnDestroy",value:function(){this.destroyed$&&(this.destroyed$.complete(),this.destroyed$=void 0)}},{key:"onReturnToList",value:function(){this.uiUtilSrv.navigateAwardRuleGroupListPage()}},{key:"onCreateNewOne",value:function(){this.uiUtilSrv.navigateAwardRuleGenerationPage()}}]),e}(),lo.\u0275fac=function(t){return new(t||lo)(p.Qb(s.a),p.Qb(h.f),p.Qb(h.d),p.Qb(i.d))},lo.\u0275cmp=p.Kb({type:lo,selectors:[["app-award-rule-display"]],decls:80,vars:38,consts:[["multi","",1,"example-headers-align"],["expanded",""],[3,"formGroup"],["appearance","fill",1,"control-full-width"],["required","","formControlName","targetuserCtrl"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill"],[3,"rangePicker"],["matStartDate","","formControlName","validFromCtrl","placeholder","Start date"],["matEndDate","","formControlName","validToCtrl","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],["required","","formControlName","ruleTypeCtrl"],["matInput","","required","","formControlName","despCtrl"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","count"],["matColumnDef","done"],["matColumnDef","time"],["matColumnDef","days"],["matColumnDef","point"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-button","",3,"click"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){if(1&t&&(p.Wb(0,"mat-card"),p.Wb(1,"mat-card-header"),p.Wb(2,"mat-card-title"),p.Fc(3),p.jc(4,"transloco"),p.Vb(),p.Vb(),p.Wb(5,"mat-card-content"),p.Wb(6,"mat-accordion",0),p.Wb(7,"mat-expansion-panel",1),p.Wb(8,"mat-expansion-panel-header"),p.Wb(9,"mat-panel-title"),p.Fc(10),p.jc(11,"transloco"),p.Vb(),p.Wb(12,"mat-panel-description"),p.Fc(13),p.jc(14,"transloco"),p.Wb(15,"mat-icon"),p.Fc(16,"public"),p.Vb(),p.Vb(),p.Vb(),p.Wb(17,"form",2),p.Wb(18,"mat-form-field",3),p.Wb(19,"mat-label"),p.Fc(20),p.jc(21,"transloco"),p.Vb(),p.Wb(22,"mat-select",4),p.Ec(23,Qe,2,2,"mat-option",5),p.Vb(),p.Vb(),p.Wb(24,"mat-form-field",6),p.Wb(25,"mat-label"),p.Fc(26),p.jc(27,"transloco"),p.Vb(),p.Wb(28,"mat-date-range-input",7),p.Rb(29,"input",8),p.Rb(30,"input",9),p.Vb(),p.Rb(31,"mat-datepicker-toggle",10),p.Rb(32,"mat-date-range-picker",null,11),p.Vb(),p.Wb(34,"mat-form-field",3),p.Wb(35,"mat-label"),p.Fc(36),p.jc(37,"transloco"),p.Vb(),p.Wb(38,"mat-select",12),p.Ec(39,Le,3,4,"mat-option",5),p.Vb(),p.Vb(),p.Wb(40,"mat-form-field",3),p.Wb(41,"mat-label"),p.Fc(42),p.jc(43,"transloco"),p.Vb(),p.Rb(44,"input",13),p.Vb(),p.Vb(),p.Vb(),p.Wb(45,"mat-expansion-panel"),p.Wb(46,"mat-expansion-panel-header"),p.Wb(47,"mat-panel-title"),p.Fc(48),p.jc(49,"transloco"),p.Vb(),p.Vb(),p.Wb(50,"div",14),p.Wb(51,"div",15),p.Wb(52,"table",16),p.Ub(53,17),p.Ec(54,ze,2,0,"th",18),p.Ec(55,Ke,2,1,"td",19),p.Tb(),p.Ub(56,20),p.Ec(57,Xe,3,3,"th",18),p.Ec(58,Je,2,1,"td",19),p.Tb(),p.Ub(59,21),p.Ec(60,Ye,3,3,"th",18),p.Ec(61,Ze,2,1,"td",19),p.Tb(),p.Ub(62,22),p.Ec(63,to,3,3,"th",18),p.Ec(64,eo,2,1,"td",19),p.Tb(),p.Ub(65,23),p.Ec(66,oo,3,3,"th",18),p.Ec(67,no,2,1,"td",19),p.Tb(),p.Ub(68,24),p.Ec(69,ao,3,3,"th",18),p.Ec(70,co,2,1,"td",19),p.Tb(),p.Ec(71,io,1,0,"tr",25),p.Ec(72,ro,1,0,"tr",26),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(73,"mat-card-actions"),p.Wb(74,"button",27),p.ec("click",function(){return e.onReturnToList()}),p.Fc(75),p.jc(76,"transloco"),p.Vb(),p.Wb(77,"button",27),p.ec("click",function(){return e.onCreateNewOne()}),p.Fc(78),p.jc(79,"transloco"),p.Vb(),p.Vb(),p.Vb()),2&t){var o=p.vc(33);p.Eb(3),p.Gc(p.kc(4,18,"Award.Rules")),p.Eb(7),p.Gc(p.kc(11,20,"Header")),p.Eb(3),p.Gc(p.kc(14,22,"HeaderInfo")),p.Eb(4),p.oc("formGroup",e.headerFormGroup),p.Eb(3),p.Gc(p.kc(21,24,"Award.TargetUser")),p.Eb(3),p.oc("ngForOf",e.arTargetUsers),p.Eb(3),p.Gc(p.kc(27,26,"Award.Validity")),p.Eb(2),p.oc("rangePicker",o),p.Eb(3),p.oc("for",o),p.Eb(5),p.Gc(p.kc(37,28,"Type")),p.Eb(3),p.oc("ngForOf",e.arRuleTypes),p.Eb(3),p.Gc(p.kc(43,30,"Common.Description")),p.Eb(6),p.Gc(p.kc(49,32,"Award.Rules")),p.Eb(4),p.oc("dataSource",e.dataSource),p.Eb(19),p.oc("matHeaderRowDef",e.displayedColumns),p.Eb(1),p.oc("matRowDefColumns",e.displayedColumns),p.Eb(3),p.Gc(p.kc(76,34,"Common.ReturnToList")),p.Eb(3),p.Gc(p.kc(79,36,"Common.CreateAnotherOne"))}},directives:[Be.a,Be.d,Be.g,Be.c,qe.a,qe.c,qe.e,qe.f,qe.d,C.a,i.v,i.o,i.h,D.c,D.g,y.a,i.t,i.n,i.f,c.l,F.a,F.h,i.c,F.g,F.f,D.i,F.b,w.b,W.j,W.c,W.e,W.b,W.g,W.i,Be.b,v.b,G.n,W.d,W.a,W.f,W.h],pipes:[r.d],styles:[".example-headers-align[_ngcontent-%COMP%]{margin:8px}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%], .example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex-basis:0}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]{margin-left:8px}.example-headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}table[_ngcontent-%COMP%]{width:100%}"]}),lo)},{path:"rule-generation",component:Ne},{path:"dailytrace",component:he}],mo=((so=function e(){t(this,e)}).\u0275fac=function(t){return new(t||so)},so.\u0275mod=p.Ob({type:so}),so.\u0275inj=p.Nb({imports:[[s.e.forChild(uo)],s.e]}),so),fo=((bo=function e(){t(this,e)}).\u0275fac=function(t){return new(t||bo)},bo.\u0275mod=p.Ob({type:bo}),bo.\u0275inj=p.Nb({imports:[[c.c,i.i,i.s,l.a,r.c,b.a,mo]]}),bo)}}])}();