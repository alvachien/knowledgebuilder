!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"U+IK":function(t,n,i){"use strict";i.r(n),i.d(n,"KnowledgeItemsModule",function(){return Le});var a=i("ofXK"),c=i("3Pt+"),r=i("0LvA"),l=i("lR5k"),u=i("QPBi"),b=i("jIBr"),d=i("dcRk"),s=i("tyNb"),m=i("fXoL"),h=i("M9IT"),p=i("Dh3D"),f=i("VRyK"),g=i("LRne"),v=i("JX91"),C=i("eIep"),D=i("lJxs"),y=i("JIr8"),T=i("VHTt"),w=i("o0su"),U=i("/t3+"),I=i("bTqV"),k=i("+0xr");function M(e,t){1&e&&(m.Ub(0,"th",16),m.Dc(1,"#"),m.Tb())}function x(e,t){if(1&e){var o=m.Vb();m.Ub(0,"td",17),m.Ub(1,"div"),m.Dc(2),m.Ub(3,"a",18),m.Dc(4),m.hc(5,"transloco"),m.Tb(),m.Ub(6,"a",18),m.Dc(7),m.hc(8,"transloco"),m.Tb(),m.Ub(9,"a",19),m.cc("click",function(){m.vc(o);var e=t.$implicit;return m.gc().onDeleteItem(e.ID)}),m.Dc(10),m.hc(11,"transloco"),m.Tb(),m.Tb(),m.Tb()}if(2&e){var n=t.$implicit,i=m.gc();m.Db(2),m.Fc(" ",n.ID," "),m.Db(1),m.oc("routerLink","display/",n.ID,""),m.mc("disabled",!i.isExpertMode),m.Db(1),m.Ec(m.ic(5,9,"Common.Display")),m.Db(2),m.oc("routerLink","edit/",n.ID,""),m.mc("disabled",!i.isExpertMode),m.Db(1),m.Ec(m.ic(8,11,"Common.Change")),m.Db(2),m.mc("disabled",!i.isExpertMode),m.Db(1),m.Ec(m.ic(11,13,"Common.Delete"))}}function O(e,t){1&e&&(m.Ub(0,"th",16),m.Dc(1),m.hc(2,"transloco"),m.Tb()),2&e&&(m.Db(1),m.Ec(m.ic(2,1,"Category")))}function F(e,t){if(1&e&&(m.Ub(0,"td",17),m.Dc(1),m.hc(2,"transloco"),m.Tb()),2&e){var o=t.$implicit,n=m.gc();m.Db(1),m.Ec(m.ic(2,1,n.getKnowledgeItemCategoryName(o.ItemCategory)))}}function E(e,t){1&e&&(m.Ub(0,"th",16),m.Dc(1),m.hc(2,"transloco"),m.Tb()),2&e&&(m.Db(1),m.Ec(m.ic(2,1,"Title")))}function S(e,t){if(1&e&&(m.Ub(0,"td",17),m.Dc(1),m.Tb()),2&e){var o=t.$implicit;m.Db(1),m.Ec(o.Title)}}function P(e,t){1&e&&(m.Ub(0,"th",20),m.Dc(1),m.hc(2,"transloco"),m.Tb()),2&e&&(m.Db(1),m.Ec(m.ic(2,1,"CreatedAt")))}function R(e,t){if(1&e&&(m.Ub(0,"td",17),m.Dc(1),m.hc(2,"date"),m.Tb()),2&e){var o=t.$implicit;m.Db(1),m.Ec(m.jc(2,1,o.CreatedAt,"yyyy-M-d HH:mm:ss"))}}function j(e,t){1&e&&m.Pb(0,"tr",21)}function G(e,t){1&e&&m.Pb(0,"tr",22)}var L,$=((L=function(){function t(o,n){e(this,t),this.odataService=o,this.router=n,this.displayedColumns=["id","category","title","createdat"],this.dataSource=[],this.resultsLength=0,this.isLoadingResults=!0,this.refreshEvent=new m.o}return o(t,[{key:"getKnowledgeItemCategoryName",value:function(e){return Object(T.C)(e)}},{key:"isExpertMode",get:function(){return this.odataService.expertMode}},{key:"ngAfterViewInit",value:function(){var e=this;this.sort.sortChange.subscribe(function(){return e.paginator.pageIndex=0}),Object(f.a)(this.sort.sortChange,this.paginator.page,this.refreshEvent).pipe(Object(v.a)({}),Object(C.a)(function(){e.isLoadingResults=!0;var t=e.paginator.pageSize;return e.odataService.getKnowledgeItems(t,t*e.paginator.pageIndex,e.sort.active,e.sort.direction)}),Object(D.a)(function(t){return e.isLoadingResults=!1,e.resultsLength=t.totalCount,t.items}),Object(y.a)(function(){return e.isLoadingResults=!1,Object(g.a)([])})).subscribe(function(t){return e.dataSource=t})}},{key:"onGoToPreview",value:function(){var e=[];this.dataSource.forEach(function(t){e.push({refType:T.y.KnowledgeItem,refId:t.ID})}),this.odataService.previewObjList=e,this.router.navigate(["preview"])}},{key:"onGoToSearch",value:function(){this.router.navigate(["knowledge-item","search"])}},{key:"onDeleteItem",value:function(e){var t=this;this.odataService.deleteExerciseItem(e).subscribe({next:function(e){t.onRefreshList()},error:function(e){console.error(e)}})}},{key:"onRefreshList",value:function(){this.refreshEvent.emit()}},{key:"resetPaging",value:function(){this.paginator.pageIndex=0}}]),t}()).\u0275fac=function(e){return new(e||L)(m.Ob(w.b),m.Ob(s.b))},L.\u0275cmp=m.Ib({type:L,selectors:[["app-knowledge-items"]],viewQuery:function(e,t){var o;1&e&&(m.Ic(h.a,1),m.Ic(p.a,1)),2&e&&(m.sc(o=m.dc())&&(t.paginator=o.first),m.sc(o=m.dc())&&(t.sort=o.first))},decls:36,vars:24,consts:[[1,"toolbar-spacer"],["mat-stroked-button","","routerLink","create",3,"disabled"],["mat-stroked-button","",3,"disabled","click"],[1,"example-container","mat-elevation-z8"],[1,"example-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","title"],["matColumnDef","createdat"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-button","",3,"disabled","routerLink"],["mat-button","",3,"disabled","click"],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(m.Ub(0,"mat-toolbar-row"),m.Ub(1,"span"),m.Dc(2),m.hc(3,"transloco"),m.Tb(),m.Pb(4,"span",0),m.Ub(5,"section"),m.Ub(6,"a",1),m.Dc(7),m.hc(8,"transloco"),m.Tb(),m.Ub(9,"a",2),m.cc("click",function(){return t.onGoToSearch()}),m.Dc(10),m.hc(11,"transloco"),m.Tb(),m.Ub(12,"a",2),m.cc("click",function(){return t.onGoToPreview()}),m.Dc(13),m.hc(14,"transloco"),m.Tb(),m.Ub(15,"a",2),m.cc("click",function(){return t.onRefreshList()}),m.Dc(16),m.hc(17,"transloco"),m.Tb(),m.Tb(),m.Tb(),m.Ub(18,"div",3),m.Ub(19,"div",4),m.Ub(20,"table",5),m.cc("matSortChange",function(){return t.resetPaging()}),m.Sb(21,6),m.Cc(22,M,2,0,"th",7),m.Cc(23,x,12,15,"td",8),m.Rb(),m.Sb(24,9),m.Cc(25,O,3,3,"th",7),m.Cc(26,F,3,3,"td",8),m.Rb(),m.Sb(27,10),m.Cc(28,E,3,3,"th",7),m.Cc(29,S,2,1,"td",8),m.Rb(),m.Sb(30,11),m.Cc(31,P,3,3,"th",12),m.Cc(32,R,3,4,"td",8),m.Rb(),m.Cc(33,j,1,0,"tr",13),m.Cc(34,G,1,0,"tr",14),m.Tb(),m.Tb(),m.Pb(35,"mat-paginator",15),m.Tb()),2&e&&(m.Db(2),m.Ec(m.ic(3,14,"KnowledgeItem")),m.Db(4),m.mc("disabled",!t.isExpertMode),m.Db(1),m.Ec(m.ic(8,16,"Common.Create")),m.Db(2),m.mc("disabled",!t.isExpertMode||t.dataSource.length<=0),m.Db(1),m.Ec(m.ic(11,18,"Common.Search")),m.Db(2),m.mc("disabled",!t.isExpertMode||t.dataSource.length<=0),m.Db(1),m.Ec(m.ic(14,20,"Common.Preview")),m.Db(2),m.mc("disabled",!t.isExpertMode),m.Db(1),m.Ec(m.ic(17,22,"Common.Refresh")),m.Db(4),m.mc("dataSource",t.dataSource),m.Db(13),m.mc("matHeaderRowDef",t.displayedColumns),m.Db(1),m.mc("matRowDefColumns",t.displayedColumns),m.Db(1),m.mc("length",t.resultsLength)("pageSize",20))},directives:[U.c,I.a,s.c,k.j,p.a,k.c,k.e,k.b,k.g,k.i,h.a,k.d,k.a,p.b,k.f,k.h],pipes:[u.d,a.e],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.example-container[_ngcontent-%COMP%]{position:relative;min-height:500px}.example-table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.mat-column-id[_ngcontent-%COMP%]{max-width:100px}.mat-column-createdat[_ngcontent-%COMP%]{max-width:124px}"]}),L),V=i("jtHE"),K=i("FtGj"),N=i("rCpU"),A=i("HKRH"),_=i("0IaG"),H=i("Wp6s"),z=i("kmnG"),q=i("qFsG"),B=i("d3UM"),J=i("A5z7"),X=i("XiUz"),Q=i("FKr1"),W=i("NFeN");function Y(e,t){if(1&e&&(m.Ub(0,"mat-option",21),m.Dc(1),m.hc(2,"transloco"),m.Tb()),2&e){var o=t.$implicit;m.mc("value",o.value),m.Db(1),m.Ec(m.ic(2,2,o.i18nterm))}}function Z(e,t){1&e&&(m.Ub(0,"mat-icon",24),m.Dc(1,"cancel"),m.Tb())}function ee(e,t){if(1&e){var o=m.Vb();m.Ub(0,"mat-chip",22),m.cc("removed",function(){m.vc(o);var e=t.$implicit;return m.gc().removeTag(e)}),m.Dc(1),m.Cc(2,Z,2,0,"mat-icon",23),m.Tb()}if(2&e){var n=t.$implicit,i=m.gc();m.mc("selectable",i.selectable)("removable",i.isEditable),m.Db(1),m.Fc(" ",n," "),m.Db(1),m.mc("ngIf",i.isEditable)}}function te(e,t){if(1&e&&(m.Ub(0,"div",25),m.Ub(1,"div",26),m.Ub(2,"mat-form-field",6),m.Ub(3,"mat-label"),m.Dc(4),m.hc(5,"transloco"),m.Tb(),m.Pb(6,"input",27),m.hc(7,"transloco"),m.hc(8,"date"),m.Tb(),m.Tb(),m.Ub(9,"div",26),m.Ub(10,"mat-form-field",6),m.Ub(11,"mat-label"),m.Dc(12),m.hc(13,"transloco"),m.Tb(),m.Pb(14,"input",27),m.hc(15,"transloco"),m.hc(16,"date"),m.Tb(),m.Tb(),m.Tb()),2&e){var o=m.gc();m.Db(4),m.Ec(m.ic(5,6,"CreatedAt")),m.Db(2),m.nc("placeholder",m.ic(7,8,"CreatedAt")),m.mc("ngModel",m.jc(8,10,o.currentItem.CreatedAt,"yyyy-M-d HH:mm:ss")),m.Db(6),m.Ec(m.ic(13,13,"ModifiedAt")),m.Db(2),m.nc("placeholder",m.ic(15,15,"ModifiedAt")),m.mc("ngModel",m.jc(16,17,o.currentItem.ModifiedAt,"yyyy-M-d HH:mm:ss"))}}function oe(e,t){if(1&e){var o=m.Vb();m.Ub(0,"mat-toolbar"),m.Ub(1,"h3"),m.Dc(2),m.hc(3,"transloco"),m.Tb(),m.Pb(4,"div",28),m.Ub(5,"button",29),m.cc("click",function(){return m.vc(o),m.gc().openUploadDialog()}),m.Ub(6,"mat-icon"),m.Dc(7,"file_upload"),m.Tb(),m.Tb(),m.Tb()}2&e&&(m.Db(2),m.Ec(m.ic(3,1,"Content")))}function ne(e,t){if(1&e){var o=m.Vb();m.Ub(0,"div",26),m.Ub(1,"ngx-monaco-editor",30),m.cc("ngModelChange",function(e){return m.vc(o),m.gc().content=e}),m.Tb(),m.Tb()}if(2&e){var n=m.gc();m.Db(1),m.mc("options",n.editorOptions)("ngModel",n.content)}}var ie,ae=((ie=function(){function t(o,n,i,a){e(this,t),this.dialog=o,this.activateRoute=n,this.router=i,this.odataService=a,this.routerID=-1,this.uiMode=N.b.Create,this.currentMode="",this.editorOptions={theme:"vs-dark",wordWrap:"on"},this.content="New Knowledge Item",this.mathOptions={displayMode:!0,throwOnError:!1,errorColor:"#cc0000"},this.selectable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[K.g,K.c],this.tags=[],this.arKnowledgeCtgies=[],this.arKnowledgeCtgies=Object(T.D)(),this.itemFormGroup=new c.f({idControl:new c.d({value:null,disabled:!0}),titleControl:new c.d("",c.t.required),ctgyControl:new c.d({value:T.o.Concept}),tagControl:new c.d})}return o(t,[{key:"isDisplayMode",get:function(){return this.uiMode===N.b.Display}},{key:"isCreateMode",get:function(){return this.uiMode===N.b.Create}},{key:"isUpdateMode",get:function(){return this.uiMode===N.b.Update}},{key:"isEditable",get:function(){return this.uiMode===N.b.Create||this.uiMode===N.b.Update}},{key:"ngOnInit",value:function(){var e=this;this.destroyed$=new V.a(1),this.activateRoute.url.subscribe({next:function(t){var o,n;t instanceof Array&&t.length>0&&("create"===t[0].path?(e.routerID=-1,e.uiMode=N.b.Create,e.currentMode="Common.Create"):"edit"===t[0].path?(e.routerID=+t[1].path,e.uiMode=N.b.Update,e.currentMode="Common.Change"):"display"===t[0].path&&(e.routerID=+t[1].path,e.uiMode=N.b.Display,e.currentMode="Common.Display")),-1!==e.routerID?e.odataService.readKnowledgeItem(e.routerID,e.uiMode===N.b.Update).subscribe({next:function(t){var o,n,i;null===(o=e.itemFormGroup.get("idControl"))||void 0===o||o.setValue(t.ID),null===(n=e.itemFormGroup.get("titleControl"))||void 0===n||n.setValue(t.Title),null===(i=e.itemFormGroup.get("ctgyControl"))||void 0===i||i.setValue(+t.ItemCategory),e.content=t.Content,e.tags=t.Tags,e.currentItem=t,e.isDisplayMode?e.itemFormGroup.disable():e.itemFormGroup.markAsPristine()},error:function(e){console.error(e)}}):(null===(o=e.itemFormGroup.get("idControl"))||void 0===o||o.setValue("NEW"),null===(n=e.itemFormGroup.get("idControl"))||void 0===n||n.disable(),e.itemFormGroup.markAsPristine(),e.itemFormGroup.markAsUntouched())},error:function(e){console.error(e)}})}},{key:"ngOnDestroy",value:function(){this.destroyed$&&(this.destroyed$.complete(),this.destroyed$=void 0)}},{key:"onOK",value:function(){var e,t,o,n,i=this;if(this.isCreateMode){if(!this.itemFormGroup.valid)return void(this.itemFormGroup.errors&&console.log(this.itemFormGroup.errors));var a=new T.n;a.ItemCategory=null===(e=this.itemFormGroup.get("ctgyControl"))||void 0===e?void 0:e.value,a.Content=this.content,a.Title=null===(t=this.itemFormGroup.get("titleControl"))||void 0===t?void 0:t.value,a.Tags=this.tags,this.odataService.createKnowledgeItem(a).subscribe({next:function(e){i.router.navigate(["knowledge-item/display",e.ID])},error:function(e){console.error(e)}})}else if(this.isUpdateMode){if(!this.itemFormGroup.valid)return void(this.itemFormGroup.errors&&console.log(this.itemFormGroup.errors));this.currentItem&&(this.currentItem.ItemCategory=null===(o=this.itemFormGroup.get("ctgyControl"))||void 0===o?void 0:o.value,this.currentItem.Content=this.content,this.currentItem.Title=null===(n=this.itemFormGroup.get("titleControl"))||void 0===n?void 0:n.value,this.currentItem.Tags=this.tags,this.odataService.changeKnowledgeItem(this.currentItem).subscribe({next:function(e){i.router.navigate(["knowledge-item/display",e.ID])},error:function(e){console.error(e)}}))}}},{key:"openUploadDialog",value:function(){var e=this;this.dialog.open(A.a,{width:"50%",height:"50%"}).afterClosed().subscribe({next:function(t){console.log(t),t.forEach(function(t){e.content+="\n![Img](".concat(t.url,")\n          ")})}})}},{key:"addTag",value:function(e){var t=e.input,o=e.value;(o||"").trim()&&this.tags.push(o.trim()),t&&(t.value="")}},{key:"removeTag",value:function(e){var t=this.tags.indexOf(e);t>=0&&this.tags.splice(t,1)}},{key:"onReturnToList",value:function(){this.router.navigate(["knowledge-item"])}},{key:"onCreateNewOne",value:function(){this.router.navigate(["knowledge-item","create"])}}]),t}()).\u0275fac=function(e){return new(e||ie)(m.Ob(_.b),m.Ob(s.a),m.Ob(s.b),m.Ob(w.b))},ie.\u0275cmp=m.Ib({type:ie,selectors:[["app-knowledge-item-detail"]],decls:50,vars:38,consts:[[3,"formGroup"],[1,"control-full-width"],["matInput","","type","text","placeholder","#","formControlName","idControl"],["matInput","","type","text","formControlName","titleControl","required","","name","title","maxlength","30",3,"placeholder"],["title",""],["align","end"],["appearance","fill",1,"control-full-width"],["required","","formControlName","ctgyControl"],[3,"value",4,"ngFor","ngForOf"],["formControlName","tagControl"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","New tag...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["fxLayout","row","class","control-full-width",4,"ngIf"],[4,"ngIf"],["fxLayout","row",1,"control-full-width",2,"height","500px"],["fxFlex","50",4,"ngIf"],["fxFlex","",2,"height","100%","overflow-y","scroll"],["katex","",3,"data","katexOptions"],["mat-button","",3,"disabled","click"],["mat-button","",3,"click"],[3,"value"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],["fxLayout","row",1,"control-full-width"],["fxFlex","50"],["matInput","","type","text","disabled","",3,"placeholder","ngModel"],[1,"toolbar-spacer"],["mat-raised-button","",3,"click"],[2,"height","100%",3,"options","ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(m.Ub(0,"mat-card"),m.Ub(1,"mat-card-header"),m.Ub(2,"mat-card-title"),m.Dc(3),m.hc(4,"transloco"),m.Tb(),m.Ub(5,"mat-card-subtitle"),m.Dc(6),m.hc(7,"transloco"),m.Tb(),m.Tb(),m.Ub(8,"mat-card-content"),m.Ub(9,"form",0),m.Ub(10,"mat-form-field",1),m.Ub(11,"mat-label"),m.Dc(12,"#"),m.Tb(),m.Pb(13,"input",2),m.Tb(),m.Ub(14,"mat-form-field",1),m.Pb(15,"input",3,4),m.hc(17,"transloco"),m.Ub(18,"mat-hint",5),m.Dc(19),m.Tb(),m.Tb(),m.Ub(20,"mat-form-field",6),m.Ub(21,"mat-label"),m.Dc(22),m.hc(23,"transloco"),m.Tb(),m.Ub(24,"mat-select",7),m.Cc(25,Y,3,4,"mat-option",8),m.Tb(),m.Tb(),m.Ub(26,"mat-form-field",6),m.Ub(27,"mat-label"),m.Dc(28),m.hc(29,"transloco"),m.Tb(),m.Ub(30,"mat-chip-list",9,10),m.Cc(32,ee,3,4,"mat-chip",11),m.Ub(33,"input",12),m.cc("matChipInputTokenEnd",function(e){return t.addTag(e)}),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Cc(34,te,17,20,"div",13),m.Cc(35,oe,8,3,"mat-toolbar",14),m.Ub(36,"div",15),m.Cc(37,ne,2,2,"div",16),m.Ub(38,"div",17),m.Pb(39,"markdown",18),m.Tb(),m.Tb(),m.Tb(),m.Ub(40,"mat-card-actions"),m.Ub(41,"button",19),m.cc("click",function(){return t.onOK()}),m.Dc(42),m.hc(43,"transloco"),m.Tb(),m.Ub(44,"button",20),m.cc("click",function(){return t.onReturnToList()}),m.Dc(45),m.hc(46,"transloco"),m.Tb(),m.Ub(47,"button",19),m.cc("click",function(){return t.onCreateNewOne()}),m.Dc(48),m.hc(49,"transloco"),m.Tb(),m.Tb(),m.Tb()),2&e){var o=m.tc(16),n=m.tc(31);m.Db(3),m.Ec(m.ic(4,22,"KnowledgeItem")),m.Db(3),m.Ec(m.ic(7,24,t.currentMode)),m.Db(3),m.mc("formGroup",t.itemFormGroup),m.Db(6),m.nc("placeholder",m.ic(17,26,"Title")),m.Db(4),m.Fc("",o.value.length," / 30"),m.Db(3),m.Ec(m.ic(23,28,"Category")),m.Db(3),m.mc("ngForOf",t.arKnowledgeCtgies),m.Db(3),m.Ec(m.ic(29,30,"Tags")),m.Db(4),m.mc("ngForOf",t.tags),m.Db(1),m.mc("matChipInputFor",n)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes)("matChipInputAddOnBlur",t.addOnBlur),m.Db(1),m.mc("ngIf",!t.isCreateMode&&t.currentItem),m.Db(1),m.mc("ngIf",t.isCreateMode),m.Db(2),m.mc("ngIf",!t.isDisplayMode),m.Db(2),m.mc("data",t.content)("katexOptions",t.mathOptions),m.Db(2),m.mc("disabled",!(t.isEditable&&t.itemFormGroup.valid)),m.Db(1),m.Ec(m.ic(43,32,"Save")),m.Db(3),m.Ec(m.ic(46,34,"Common.ReturnToList")),m.Db(2),m.mc("disabled",!t.isDisplayMode),m.Db(1),m.Ec(m.ic(49,36,"Common.CreateAnotherOne"))}},directives:[H.a,H.d,H.g,H.f,H.c,c.u,c.n,c.g,z.c,z.g,q.b,c.c,c.m,c.e,c.s,c.i,z.f,B.a,a.l,J.c,J.b,a.m,X.c,X.a,l.a,H.b,I.b,Q.n,J.a,W.a,J.d,c.p,U.a,r.a],pipes:[u.d,a.e],styles:[".example-form[_ngcontent-%COMP%]{margin:8px;min-width:150px;max-width:500px;width:100%}.mat-card-actions[_ngcontent-%COMP%]{margin-top:50px}"]}),ie),ce=i("2Vo4"),re=i("nYR2"),le=i("f0Cb"),ue=i("iadO"),be=i("bSwM"),de=i("pFkP");function se(e,t){if(1&e&&(m.Ub(0,"mat-option",25),m.Dc(1),m.hc(2,"transloco"),m.Tb()),2&e){var o=t.$implicit;m.mc("value",o.value),m.Db(1),m.Fc(" ",m.ic(2,2,o.displayas)," ")}}function me(e,t){if(1&e&&(m.Ub(0,"mat-option",25),m.Dc(1),m.hc(2,"transloco"),m.Tb()),2&e){var o=t.$implicit;m.mc("value",o.value),m.Db(1),m.Fc(" ",m.ic(2,2,o.i18nterm)," ")}}function he(e,t){if(1&e){var o=m.Vb();m.Ub(0,"mat-form-field"),m.Ub(1,"input",26),m.cc("ngModelChange",function(e){return m.vc(o),m.gc().$implicit.value[0]=e}),m.hc(2,"transloco"),m.Tb(),m.Tb()}if(2&e){var n=m.gc().$implicit;m.Db(1),m.nc("placeholder",m.ic(2,2,"Value")),m.mc("ngModel",n.value[0])}}function pe(e,t){if(1&e){var o=m.Vb();m.Ub(0,"mat-form-field"),m.Ub(1,"input",27),m.cc("ngModelChange",function(e){return m.vc(o),m.gc().$implicit.value[1]=e}),m.hc(2,"transloco"),m.Tb(),m.Tb()}if(2&e){var n=m.gc().$implicit;m.Db(1),m.nc("placeholder",m.ic(2,2,"Value")),m.mc("ngModel",n.value[1])}}function fe(e,t){if(1&e){var o=m.Vb();m.Ub(0,"mat-form-field"),m.Ub(1,"input",28),m.cc("ngModelChange",function(e){return m.vc(o),m.gc().$implicit.value[0]=e}),m.hc(2,"transloco"),m.Tb(),m.Tb()}if(2&e){var n=m.gc().$implicit;m.Db(1),m.nc("placeholder",m.ic(2,2,"Value")),m.mc("ngModel",n.value[0])}}function ge(e,t){if(1&e){var o=m.Vb();m.Ub(0,"mat-form-field"),m.Ub(1,"input",29),m.cc("ngModelChange",function(e){return m.vc(o),m.gc().$implicit.value[0]=e}),m.hc(2,"transloco"),m.Tb(),m.Pb(3,"mat-datepicker-toggle",30),m.Pb(4,"mat-datepicker",null,31),m.Tb()}if(2&e){var n=m.tc(5),i=m.gc().$implicit;m.Db(1),m.nc("placeholder",m.ic(2,4,"Value")),m.mc("ngModel",i.value[0])("matDatepicker",n),m.Db(2),m.mc("for",n)}}function ve(e,t){if(1&e){var o=m.Vb();m.Ub(0,"mat-form-field"),m.Ub(1,"input",29),m.cc("ngModelChange",function(e){return m.vc(o),m.gc().$implicit.value[1]=e}),m.hc(2,"transloco"),m.Tb(),m.Pb(3,"mat-datepicker-toggle",30),m.Pb(4,"mat-datepicker",null,32),m.Tb()}if(2&e){var n=m.tc(5),i=m.gc().$implicit;m.Db(1),m.nc("placeholder",m.ic(2,4,"Value")),m.mc("ngModel",i.value[1])("matDatepicker",n),m.Db(2),m.mc("for",n)}}function Ce(e,t){if(1&e){var o=m.Vb();m.Ub(0,"div",33),m.Ub(1,"mat-checkbox",34),m.cc("ngModelChange",function(e){return m.vc(o),m.gc().$implicit.value[0]=e}),m.Tb(),m.Tb()}if(2&e){var n=m.gc().$implicit;m.Db(1),m.mc("ngModel",n.value[0])}}function De(e,t){if(1&e){var o=m.Vb();m.Ub(0,"div",17),m.Ub(1,"mat-form-field"),m.Ub(2,"mat-select",18),m.cc("ngModelChange",function(e){return t.$implicit.fieldName=e})("selectionChange",function(){m.vc(o);var e=t.$implicit;return m.gc().onFieldSelectionChanged(e)}),m.hc(3,"transloco"),m.Cc(4,se,3,4,"mat-option",19),m.Tb(),m.Tb(),m.Ub(5,"mat-form-field"),m.Ub(6,"mat-select",20),m.cc("ngModelChange",function(e){return t.$implicit.operator=e}),m.hc(7,"transloco"),m.Cc(8,me,3,4,"mat-option",19),m.hc(9,"operatorFilter"),m.Tb(),m.Tb(),m.Cc(10,he,3,4,"mat-form-field",21),m.Cc(11,pe,3,4,"mat-form-field",21),m.Cc(12,fe,3,4,"mat-form-field",21),m.Cc(13,ge,6,6,"mat-form-field",21),m.Cc(14,ve,6,6,"mat-form-field",21),m.Cc(15,Ce,2,1,"div",22),m.Ub(16,"button",23),m.cc("click",function(){return m.vc(o),m.gc().onAddFilter()}),m.Ub(17,"mat-icon"),m.Dc(18,"add"),m.Tb(),m.Tb(),m.Ub(19,"button",24),m.cc("click",function(){m.vc(o);var e=t.index;return m.gc().onRemoveFilter(e)}),m.Ub(20,"mat-icon"),m.Dc(21,"close"),m.Tb(),m.Tb(),m.Tb()}if(2&e){var n=t.$implicit,i=m.gc();m.Db(2),m.nc("placeholder",m.ic(3,12,"Field")),m.mc("ngModel",n.fieldName),m.Db(2),m.mc("ngForOf",i.allFields),m.Db(2),m.nc("placeholder",m.ic(7,14,"Operator")),m.mc("ngModel",n.operator),m.Db(2),m.mc("ngForOf",m.jc(9,16,i.allOperators,n.valueType)),m.Db(2),m.mc("ngIf",1===n.valueType),m.Db(1),m.mc("ngIf",1===n.valueType),m.Db(1),m.mc("ngIf",2===n.valueType),m.Db(1),m.mc("ngIf",3===n.valueType),m.Db(1),m.mc("ngIf",3===n.valueType),m.Db(1),m.mc("ngIf",4===n.valueType)}}function ye(e,t){1&e&&(m.Ub(0,"th",35),m.Dc(1,"#"),m.Tb())}function Te(e,t){if(1&e){var o=m.Vb();m.Ub(0,"td",36),m.Ub(1,"div"),m.Dc(2),m.Ub(3,"a",37),m.cc("click",function(){m.vc(o);var e=t.$implicit;return m.gc().onDisplayItem(e.ID)}),m.Dc(4),m.hc(5,"transloco"),m.Tb(),m.Tb(),m.Tb()}if(2&e){var n=t.$implicit;m.Db(2),m.Fc(" ",n.ID," "),m.Db(2),m.Ec(m.ic(5,2,"Common.Display"))}}function we(e,t){1&e&&(m.Ub(0,"th",35),m.Dc(1),m.hc(2,"transloco"),m.Tb()),2&e&&(m.Db(1),m.Ec(m.ic(2,1,"Category")))}function Ue(e,t){if(1&e&&(m.Ub(0,"td",36),m.Dc(1),m.hc(2,"transloco"),m.Tb()),2&e){var o=t.$implicit,n=m.gc();m.Db(1),m.Ec(m.ic(2,1,n.getKnowledgeItemCategoryName(o.ItemCategory)))}}function Ie(e,t){1&e&&(m.Ub(0,"th",35),m.Dc(1),m.hc(2,"transloco"),m.Tb()),2&e&&(m.Db(1),m.Ec(m.ic(2,1,"Title")))}function ke(e,t){if(1&e&&(m.Ub(0,"td",36),m.Dc(1),m.Tb()),2&e){var o=t.$implicit;m.Db(1),m.Ec(o.Title)}}function Me(e,t){1&e&&(m.Ub(0,"th",35),m.Dc(1),m.hc(2,"transloco"),m.Tb()),2&e&&(m.Db(1),m.Ec(m.ic(2,1,"CreatedAt")))}function xe(e,t){if(1&e&&(m.Ub(0,"td",36),m.Dc(1),m.hc(2,"date"),m.Tb()),2&e){var o=t.$implicit;m.Db(1),m.Ec(m.jc(2,1,o.CreatedAt,"yyyy-M-d HH:mm:ss"))}}function Oe(e,t){1&e&&m.Pb(0,"tr",38)}function Fe(e,t){1&e&&m.Pb(0,"tr",39)}var Ee,Se,Pe,Re=[{path:"",component:$},{path:"create",component:ae},{path:"display/:id",component:ae},{path:"edit/:id",component:ae},{path:"search",component:(Ee=function(){function t(o,n){e(this,t),this.odataService=o,this.router=n,this.filters=[],this.allOperators=[],this.allFields=[],this.filterEditable=!0,this.pageSize=20,this.pageSizeOptions=[20,40,60,100],this.isLoadingResults=!1,this.subjFilters=new ce.a([]),this.displayedColumns=["id","category","title","createdat"],this.dataSource=[],this.resultsLength=0,this.allOperators=T.z.getGeneralFilterOperatorDisplayStrings(),this.allFields=[{displayas:"Content",value:"Content",valueType:2}]}return o(t,[{key:"ngOnInit",value:function(){this.onAddFilter()}},{key:"ngAfterViewInit",value:function(){var e=this;this.subjFilters.subscribe(function(){return e.paginator.pageIndex=0}),Object(f.a)(this.subjFilters,this.paginator.page).pipe(Object(v.a)({}),Object(C.a)(function(){if(e.subjFilters.value.length<=0)return Object(g.a)([]);e.isLoadingResults=!0;var t=e.prepareFilters(e.subjFilters.value),o=e.paginator.pageSize;return e.odataService.getKnowledgeItems(o,o*e.paginator.pageIndex,void 0,void 0,t)}),Object(re.a)(function(){return e.isLoadingResults=!1}),Object(D.a)(function(t){return e.resultsLength=t.totalCount,t.items}),Object(y.a)(function(){return Object(g.a)(void 0)})).subscribe({next:function(t){return e.dataSource=t},error:function(e){return console.log(e)}})}},{key:"getKnowledgeItemCategoryName",value:function(e){return Object(T.C)(e)}},{key:"onAddFilter",value:function(){this.filters.push(new T.j)}},{key:"onRemoveFilter",value:function(e){this.filters.splice(e,1),0===this.filters.length&&this.onAddFilter()}},{key:"onFieldSelectionChanged",value:function(e){this.allFields.forEach(function(t){t.value===e.fieldName&&(e.valueType=t.valueType)})}},{key:"prepareFilters",value:function(e){var t="";return e.sort(function(e,t){return e.fieldName.localeCompare(t.fieldName)}),e.forEach(function(e){"Content"===e.fieldName&&(e.operator===T.k.Equal?t=t?"".concat(t," and ").concat(e.fieldName," eq '").concat(e.lowValue,"'"):"".concat(e.fieldName," eq '").concat(e.lowValue,"'"):e.operator===T.k.Like&&(t=t?"".concat(t," and contains(").concat(e.fieldName,",'").concat(e.lowValue,"')"):"contains(".concat(e.fieldName,",'").concat(e.lowValue,"')")))}),t}},{key:"onSearch",value:function(){var e=[];this.filters.forEach(function(t){var o={};switch(o.valueType=+t.valueType,t.valueType){case T.l.boolean:case T.l.date:case T.l.number:break;case T.l.string:o.fieldName=t.fieldName,o.operator=+t.operator,o.lowValue=t.value[0],o.highValue=t.operator===T.k.Between?t.value[1]:""}e.push(o)}),this.subjFilters.next(e)}},{key:"onDisplayItem",value:function(e){this.router.navigate(["knowledge-item","display",e.toString()])}},{key:"onGoToPreview",value:function(){var e=[];this.dataSource.forEach(function(t){e.push({refType:T.y.KnowledgeItem,refId:t.ID})}),this.odataService.previewObjList=e,this.router.navigate(["preview"])}}]),t}(),Ee.\u0275fac=function(e){return new(e||Ee)(m.Ob(w.b),m.Ob(s.b))},Ee.\u0275cmp=m.Ib({type:Ee,selectors:[["app-knowledge-item-search"]],viewQuery:function(e,t){var o;1&e&&m.Ic(h.a,3),2&e&&m.sc(o=m.dc())&&(t.paginator=o.first)},decls:41,vars:18,consts:[["class","demo-full-width",4,"ngFor","ngForOf"],[1,"control-full-width"],["mat-button","","aria-label","Search",3,"click"],[1,"table-container","mat-elevation-z8"],["color","primary"],["mat-flat-button","","color","primary",3,"click"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","title"],["matColumnDef","createdat"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[1,"demo-full-width"],[3,"placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"placeholder","ngModel","ngModelChange"],[4,"ngIf"],["class","typechkbox",4,"ngIf"],["mat-button","","mat-icon-button","","aria-label","Add",3,"click"],["mat-button","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["matInput","","type","number","name","lvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","","type","number","name","hvalue_1",3,"placeholder","ngModel","ngModelChange"],["matInput","","type","text","name","lvalue_2",3,"placeholder","ngModel","ngModelChange"],["matInput","",3,"ngModel","matDatepicker","placeholder","ngModelChange"],["matSuffix","",3,"for"],["lvpicker",""],["hvpicker",""],[1,"typechkbox"],[3,"ngModel","ngModelChange"],["mat-header-cell",""],["mat-cell",""],["mat-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(m.Ub(0,"mat-card"),m.Ub(1,"mat-card-header"),m.Ub(2,"mat-card-title"),m.Dc(3),m.hc(4,"transloco"),m.Tb(),m.Ub(5,"mat-card-subtitle"),m.Dc(6),m.hc(7,"transloco"),m.Tb(),m.Tb(),m.Ub(8,"mat-card-content"),m.Ub(9,"div"),m.Cc(10,De,22,19,"div",0),m.Ub(11,"div",1),m.Ub(12,"button",2),m.cc("click",function(){return t.onSearch()}),m.Ub(13,"mat-icon"),m.Dc(14,"search"),m.Tb(),m.Dc(15),m.hc(16,"transloco"),m.Tb(),m.Tb(),m.Tb(),m.Pb(17,"mat-divider"),m.Ub(18,"div",3),m.Ub(19,"mat-toolbar",4),m.Ub(20,"mat-toolbar-row"),m.Ub(21,"button",5),m.cc("click",function(){return t.onGoToPreview()}),m.Dc(22),m.hc(23,"transloco"),m.Tb(),m.Tb(),m.Tb(),m.Ub(24,"div",6),m.Ub(25,"table",7),m.Sb(26,8),m.Cc(27,ye,2,0,"th",9),m.Cc(28,Te,6,4,"td",10),m.Rb(),m.Sb(29,11),m.Cc(30,we,3,3,"th",9),m.Cc(31,Ue,3,3,"td",10),m.Rb(),m.Sb(32,12),m.Cc(33,Ie,3,3,"th",9),m.Cc(34,ke,2,1,"td",10),m.Rb(),m.Sb(35,13),m.Cc(36,Me,3,3,"th",9),m.Cc(37,xe,3,4,"td",10),m.Rb(),m.Cc(38,Oe,1,0,"tr",14),m.Cc(39,Fe,1,0,"tr",15),m.Tb(),m.Tb(),m.Pb(40,"mat-paginator",16),m.Tb(),m.Tb(),m.Tb()),2&e&&(m.Db(3),m.Ec(m.ic(4,10,"KnowledgeItem")),m.Db(3),m.Ec(m.ic(7,12,"Common.Search")),m.Db(4),m.mc("ngForOf",t.filters),m.Db(5),m.Fc(" ",m.ic(16,14,"Common.Search")," "),m.Db(7),m.Ec(m.ic(23,16,"Common.Preview")),m.Db(3),m.mc("dataSource",t.dataSource),m.Db(13),m.mc("matHeaderRowDef",t.displayedColumns),m.Db(1),m.mc("matRowDefColumns",t.displayedColumns),m.Db(1),m.mc("length",t.resultsLength)("pageSize",20))},directives:[H.a,H.d,H.g,H.f,H.c,a.l,I.b,W.a,le.a,U.a,U.c,k.j,k.c,k.e,k.b,k.g,k.i,h.a,z.c,B.a,c.m,c.p,a.m,Q.n,q.b,c.q,c.c,ue.d,ue.f,z.i,ue.c,be.a,k.d,k.a,I.a,k.f,k.h],pipes:[u.d,de.a,a.e],styles:[".table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;margin-top:16px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.data-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.mat-column-id[_ngcontent-%COMP%]{max-width:300px;width:250px}.mat-column-itemtype[_ngcontent-%COMP%]{max-width:120px;width:120px}.mat-column-tags[_ngcontent-%COMP%]{max-width:250px;width:150px}.mat-column-created[_ngcontent-%COMP%]{max-width:120px;width:120px}"]}),Ee)}],je=((Se=function t(){e(this,t)}).\u0275fac=function(e){return new(e||Se)},Se.\u0275mod=m.Mb({type:Se}),Se.\u0275inj=m.Lb({imports:[[s.d.forChild(Re)],s.d]}),Se),Ge=i("iasb"),Le=((Pe=function t(){e(this,t)}).\u0275fac=function(e){return new(e||Pe)},Pe.\u0275mod=m.Mb({type:Pe}),Pe.\u0275inj=m.Lb({providers:[],imports:[[a.c,c.h,c.r,b.a,d.a,r.b,l.b.forChild(),je,u.c,Ge.a]]}),Pe)}}])}();