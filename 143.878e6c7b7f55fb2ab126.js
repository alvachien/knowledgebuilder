"use strict";(self.webpackChunkknowledgebuilder=self.webpackChunkknowledgebuilder||[]).push([[143],{4143:(Do,B,c)=>{c.r(B),c.d(B,{HabitBuilderModule:()=>vo});var A=c(8583),l=c(3679),x=c(4043),dt=c(6721),gt=c(558),$=c(7822),P=c(3423),t=c(7716),M=c(9692),y=c(1494),_t=c(6738),q=c.n(_t),E=c(6682),V=c(5917),j=c(9761),z=c(3190),X=c(8939),K=c(8002),W=c(5304),u=c(3186),b=c(984),H=c(2238),k=c(2522),D=c(1095),J=c(1436),Q=c(6627),s=c(2091);function Ct(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1,"#"),t.qZA())}function ft(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"td",19),t._uU(1),t.TgZ(2,"button",1),t.NdJ("click",function(){const r=t.CHM(o).$implicit;return t.oxw().onDisplayHabit(r.ID)}),t.ALo(3,"transloco"),t.TgZ(4,"mat-icon"),t._uU(5,"launch"),t.qZA(),t.qZA(),t.TgZ(6,"button",20),t.NdJ("click",function(){const r=t.CHM(o).$implicit;return t.oxw().onDeleteHabit(r.ID)}),t.ALo(7,"transloco"),t.TgZ(8,"mat-icon"),t._uU(9,"remove_circle"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=a.$implicit;t.xp6(1),t.hij("",o.ID," | "),t.xp6(1),t.s9C("matTooltip",t.lcZ(3,3,"Common.Display")),t.xp6(4),t.s9C("matTooltip",t.lcZ(7,5,"Common.Delete"))}}function ht(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.TargetUser")))}function Zt(e,a){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const o=a.$implicit,i=t.oxw();t.xp6(1),t.AsE("",i.getUserDisplayAs(o.targetUser)," (",o.targetUser,")")}}function bt(e,a){1&e&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Common.Name")))}function Tt(e,a){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.name)}}function At(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Type")))}function qt(e,a){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const o=a.$implicit,i=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,i.getHabitCategoryName(o.category)))}}function vt(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Habit.Frequency")))}function Ut(e,a){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const o=a.$implicit,i=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,i.getHabitFrequencyName(o.frequency)))}}function xt(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Habit.CompleteCategory")))}function Ht(e,a){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const o=a.$implicit,i=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,i.getHabitCompleteCategoryName(o.completeCategory)))}}function Dt(e,a){1&e&&(t.TgZ(0,"th",18),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.Validity")))}function yt(e,a){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.validity)}}function wt(e,a){1&e&&t._UZ(0,"tr",22)}function Nt(e,a){1&e&&t._UZ(0,"tr",23)}let tt=(()=>{class e{constructor(o,i,n){this.odataSrv=o,this.dialog=i,this.uiUtilSrv=n,this.dataSource=[],this.displayedColumns=["id","targetUser","name","category","frequency","compCategory","validity"],this.recordCount=0,this.isLoadingResults=!1,this.refreshEvent=new t.vpe}ngOnInit(){this.refreshList()}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,E.T)(this.sort.sortChange,this.paginator.page,this.refreshEvent).pipe((0,j.O)({}),(0,z.w)(()=>{const o=this.paginator.pageSize,i=o*this.paginator.pageIndex;let n=q()().format(u.Jt);return this.odataSrv.getUserHabits(o,i,this.sort.active,this.sort.direction,`ValidFrom le ${n} and ValidTo ge ${n}`)}),(0,X.x)(()=>this.isLoadingResults=!1),(0,K.U)(o=>(this.recordCount=o.totalCount,o.items)),(0,W.K)(()=>(0,V.of)([]))).subscribe({next:o=>this.dataSource=o,error:o=>this.uiUtilSrv.showSnackInfo(o)})}getHabitCategoryName(o){return(0,u.xk)(o)}getHabitCompleteCategoryName(o){return(0,u.E0)(o)}getHabitFrequencyName(o){return(0,u.lC)(o)}getUserDisplayAs(o){if(o&&this.odataSrv.currentUserDetail){const i=this.odataSrv.currentUserDetail.awardUsers.findIndex(n=>n.targetUser===o);if(-1!==i)return this.odataSrv.currentUserDetail.awardUsers[i].displayAs}return""}onCreateHabit(){this.uiUtilSrv.navigateHabitCreatePage()}resetPaging(){this.paginator.pageIndex=0}refreshList(){this.refreshEvent.emit()}onDeleteHabit(o){this.odataSrv.deleteUserHabit(o).subscribe({next:i=>{this.refreshList()},error:i=>{this.uiUtilSrv.showSnackInfo(i)}})}onDisplayHabit(o){this.uiUtilSrv.navigateHabitDisplayPage(o)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(b.CB),t.Y36(H.uw),t.Y36(b.dM))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-habit-list"]],viewQuery:function(o,i){if(1&o&&(t.Gf(M.NW,5),t.Gf(y.YE,5)),2&o){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},decls:36,vars:11,consts:[[1,"toolbar-spacer"],["mat-icon-button","","color","primary",3,"matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","targetUser"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","category"],["matColumnDef","frequency"],["matColumnDef","compCategory"],["matColumnDef","validity"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"matTooltip","click"],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row",""]],template:function(o,i){1&o&&(t.TgZ(0,"mat-toolbar"),t.TgZ(1,"h1"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t._UZ(4,"div",0),t.TgZ(5,"button",1),t.NdJ("click",function(){return i.onCreateHabit()}),t.ALo(6,"transloco"),t.TgZ(7,"mat-icon"),t._uU(8,"add_circle"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"div",2),t.TgZ(10,"div",3),t.TgZ(11,"table",4),t.NdJ("matSortChange",function(){return i.resetPaging()}),t.ynx(12,5),t.YNc(13,Ct,2,0,"th",6),t.YNc(14,ft,10,7,"td",7),t.BQk(),t.ynx(15,8),t.YNc(16,ht,3,3,"th",6),t.YNc(17,Zt,2,2,"td",7),t.BQk(),t.ynx(18,9),t.YNc(19,bt,3,3,"th",10),t.YNc(20,Tt,2,1,"td",7),t.BQk(),t.ynx(21,11),t.YNc(22,At,3,3,"th",6),t.YNc(23,qt,3,3,"td",7),t.BQk(),t.ynx(24,12),t.YNc(25,vt,3,3,"th",6),t.YNc(26,Ut,3,3,"td",7),t.BQk(),t.ynx(27,13),t.YNc(28,xt,3,3,"th",6),t.YNc(29,Ht,3,3,"td",7),t.BQk(),t.ynx(30,14),t.YNc(31,Dt,3,3,"th",6),t.YNc(32,yt,2,1,"td",7),t.BQk(),t.YNc(33,wt,1,0,"tr",15),t.YNc(34,Nt,1,0,"tr",16),t.qZA(),t.qZA(),t._UZ(35,"mat-paginator",17),t.qZA()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"Habit.Habits")),t.xp6(3),t.s9C("matTooltip",t.lcZ(6,9,"Common.Create")),t.xp6(6),t.Q6J("dataSource",i.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("length",i.recordCount)("pageSize",20))},directives:[k.Ye,D.lW,J.gM,Q.Hw,s.BZ,y.YE,s.w1,s.fO,s.Dz,s.as,s.nj,M.NW,s.ge,s.ev,y.nU,s.XQ,s.Gk],pipes:[x.Ot],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}"]}),e})();var f=c(2937),T=c(3738),_=c(8295),w=c(7441),R=c(9983),C=c(3220),N=c(2458);function Lt(e,a){if(1&e&&(t.TgZ(0,"mat-option",17),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.targetUser),t.xp6(1),t.Oqu(o.displayAs)}}function Ot(e,a){if(1&e&&(t.TgZ(0,"mat-option",17),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.value),t.xp6(1),t.Oqu(t.lcZ(2,2,o.i18nterm))}}function St(e,a){if(1&e&&(t.TgZ(0,"mat-option",17),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.value),t.xp6(1),t.hij("",t.lcZ(2,2,o.i18nterm)," ")}}let et=(()=>{class e{constructor(o,i,n,r){this.activateRoute=o,this._formBuilder=i,this.uiUtilSrv=n,this.odataSrv=r,this.routerID=-1,this.uiMode=f.sk.Display,this.currentMode="Common.Display",this.arCategories=[],this.arFrequencies=[],this.arCompleteCategories=[],this.currentObject=null,this.arCategories=(0,u.ZP)(),this.arFrequencies=(0,u.AX)(),this.arCompleteCategories=(0,u.nX)(),this.detailFormGroup=this._formBuilder.group({targetuserCtrl:["",l.kI.required],nameCtrl:["",l.kI.required],ctgyCtrl:[u.cb.Positive,l.kI.required],validFromCtrl:[void 0,l.kI.required],validToCtrl:[void 0,l.kI.required],freqCtrl:[u.Hs.Daily,l.kI.required],compCtgyCtrl:[u.Kd.NumberOfTimes,l.kI.required],compCondCtrl:[0],startDateCtrl:[void 0]})}get arTargetUsers(){return this.odataSrv.currentUserDetail?this.odataSrv.currentUserDetail.awardUsers:[]}getUserDisplayAs(o){if(o&&this.odataSrv.currentUserDetail){const i=this.odataSrv.currentUserDetail.awardUsers.findIndex(n=>n.targetUser===o);if(-1!==i)return this.odataSrv.currentUserDetail.awardUsers[i].displayAs}return""}get isDisplayMode(){return this.uiMode===f.sk.Display}get isUpdateMode(){return this.uiMode===f.sk.Update}get isEditable(){return this.uiMode===f.sk.Update}ngOnInit(){this.activateRoute.url.subscribe({next:o=>{o instanceof Array&&o.length>0&&("display"===o[0].path?(this.uiMode=f.sk.Display,this.currentMode="Common.Display",this.routerID=+o[1].path):"edit"===o[0].path&&(this.uiMode=f.sk.Update,this.currentMode="Common.Change",this.routerID=+o[1].path)),-1!==this.routerID&&this.odataSrv.readUserHabit(this.routerID).subscribe({next:i=>{var n,r,m,d,p,h,Z,U;this.currentObject=i,null===(n=this.detailFormGroup.get("targetuserCtrl"))||void 0===n||n.setValue(this.currentObject.targetUser),null===(r=this.detailFormGroup.get("nameCtrl"))||void 0===r||r.setValue(this.currentObject.name),null===(m=this.detailFormGroup.get("validFromCtrl"))||void 0===m||m.setValue(this.currentObject.validFrom),null===(d=this.detailFormGroup.get("validToCtrl"))||void 0===d||d.setValue(this.currentObject.validTo),null===(p=this.detailFormGroup.get("freqCtrl"))||void 0===p||p.setValue(this.currentObject.frequency),null===(h=this.detailFormGroup.get("compCtgyCtrl"))||void 0===h||h.setValue(this.currentObject.completeCategory),null===(Z=this.detailFormGroup.get("compCondCtrl"))||void 0===Z||Z.setValue(this.currentObject.completeCondition),null===(U=this.detailFormGroup.get("startDateCtrl"))||void 0===U||U.setValue(this.currentObject.startDate),this.uiMode===f.sk.Display?this.detailFormGroup.disable():(this.detailFormGroup.enable(),this.detailFormGroup.markAsPristine())},error:i=>{}})},error:o=>{this.uiUtilSrv.showSnackInfo(o)}})}onSave(){}onBackToList(){this.uiUtilSrv.navigateHabitListPage()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(P.gz),t.Y36(l.qu),t.Y36(b.dM),t.Y36(b.CB))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-habit-detail"]],decls:70,vars:46,consts:[[3,"formGroup"],["appearance","fill",1,"control-full-width"],["required","","formControlName","targetuserCtrl"],[3,"value",4,"ngFor","ngForOf"],["matInput","","required","","formControlName","nameCtrl"],["appearance","fill"],[3,"rangePicker"],["matStartDate","","formControlName","validFromCtrl","placeholder","Start date"],["matEndDate","","formControlName","validToCtrl","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],["required","","formControlName","freqCtrl"],["required","","formControlName","compCtgyCtrl"],["matInput","","required","","type","number","formControlName","compCondCtrl"],["matInput","","required","","type","number","formControlName","startDateCtrl"],["mat-button","","color","primary",3,"disabled","click"],["mat-button","",3,"click"],[3,"value"]],template:function(o,i){if(1&o&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-header"),t.TgZ(2,"mat-card-title"),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.ALo(7,"transloco"),t.qZA(),t.qZA(),t.TgZ(8,"mat-card-content"),t.TgZ(9,"form",0),t.TgZ(10,"mat-form-field",1),t.TgZ(11,"mat-label"),t._uU(12),t.ALo(13,"transloco"),t.qZA(),t.TgZ(14,"mat-select",2),t.YNc(15,Lt,2,2,"mat-option",3),t.qZA(),t.qZA(),t.TgZ(16,"mat-form-field",1),t.TgZ(17,"mat-label"),t._uU(18),t.ALo(19,"transloco"),t.qZA(),t._UZ(20,"input",4),t.qZA(),t.TgZ(21,"mat-form-field",5),t.TgZ(22,"mat-label"),t._uU(23),t.ALo(24,"transloco"),t.qZA(),t.TgZ(25,"mat-date-range-input",6),t._UZ(26,"input",7),t._UZ(27,"input",8),t.qZA(),t._UZ(28,"mat-datepicker-toggle",9),t._UZ(29,"mat-date-range-picker",null,10),t.qZA(),t.TgZ(31,"mat-form-field",1),t.TgZ(32,"mat-label"),t._uU(33),t.ALo(34,"transloco"),t.qZA(),t.TgZ(35,"mat-select",11),t.YNc(36,Ot,3,4,"mat-option",3),t.qZA(),t.TgZ(37,"mat-hint"),t._uU(38),t.ALo(39,"transloco"),t.qZA(),t.qZA(),t.TgZ(40,"mat-form-field",1),t.TgZ(41,"mat-label"),t._uU(42),t.ALo(43,"transloco"),t.qZA(),t.TgZ(44,"mat-select",12),t.YNc(45,St,3,4,"mat-option",3),t.qZA(),t.TgZ(46,"mat-hint"),t._uU(47),t.ALo(48,"transloco"),t.qZA(),t.qZA(),t.TgZ(49,"mat-form-field",1),t.TgZ(50,"mat-label"),t._uU(51),t.ALo(52,"transloco"),t.qZA(),t._UZ(53,"input",13),t.TgZ(54,"mat-hint"),t._uU(55),t.ALo(56,"transloco"),t.qZA(),t.qZA(),t.TgZ(57,"mat-form-field",1),t.TgZ(58,"mat-label"),t._uU(59),t.ALo(60,"transloco"),t.qZA(),t._UZ(61,"input",14),t.TgZ(62,"mat-hint"),t._uU(63),t.ALo(64,"transloco"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(65,"mat-card-actions"),t.TgZ(66,"button",15),t.NdJ("click",function(){return i.onSave()}),t._uU(67,"SAVE"),t.qZA(),t.TgZ(68,"button",16),t.NdJ("click",function(){return i.onBackToList()}),t._uU(69,"BACK TO LIST"),t.qZA(),t.qZA(),t.qZA()),2&o){const n=t.MAs(30);t.xp6(3),t.Oqu(t.lcZ(4,20,"Habit.Habit")),t.xp6(3),t.Oqu(t.lcZ(7,22,i.currentMode)),t.xp6(3),t.Q6J("formGroup",i.detailFormGroup),t.xp6(3),t.Oqu(t.lcZ(13,24,"Award.TargetUser")),t.xp6(3),t.Q6J("ngForOf",i.arTargetUsers),t.xp6(3),t.Oqu(t.lcZ(19,26,"Common.Name")),t.xp6(5),t.Oqu(t.lcZ(24,28,"Award.Validity")),t.xp6(2),t.Q6J("rangePicker",n),t.xp6(3),t.Q6J("for",n),t.xp6(5),t.Oqu(t.lcZ(34,30,"Habit.Frequency")),t.xp6(3),t.Q6J("ngForOf",i.arFrequencies),t.xp6(2),t.Oqu(t.lcZ(39,32,"Habit.FrequencyHint")),t.xp6(4),t.Oqu(t.lcZ(43,34,"Habit.CompleteCategory")),t.xp6(3),t.Q6J("ngForOf",i.arCompleteCategories),t.xp6(2),t.Oqu(t.lcZ(48,36,"Habit.CompleteCategoryHint")),t.xp6(4),t.Oqu(t.lcZ(52,38,"Habit.CompleteCondition")),t.xp6(4),t.Oqu(t.lcZ(56,40,"Habit.CompleteConditionHint")),t.xp6(4),t.Oqu(t.lcZ(60,42,"Habit.StartDate")),t.xp6(4),t.Oqu(t.lcZ(64,44,"Habit.StartDateHint")),t.xp6(3),t.Q6J("disabled",i.isDisplayMode)}},directives:[T.a8,T.dk,T.n5,T.$j,T.dn,l._Y,l.JL,l.sg,_.KE,_.hX,w.gD,l.Q7,l.JJ,l.u,A.sg,R.Nt,l.Fj,C.wx,C.zY,C.By,C.nW,_.R9,C._g,_.bx,l.wV,T.hq,D.lW,N.ey],pipes:[x.Ot],styles:[""]}),e})();var v=c(4553),ot=c(7746);function kt(e,a){1&e&&(t._uU(0),t.ALo(1,"transloco")),2&e&&t.Oqu(t.lcZ(1,1,"Habit.Habit"))}function Rt(e,a){if(1&e&&(t.TgZ(0,"mat-option",38),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.targetUser),t.xp6(1),t.Oqu(o.displayAs)}}function Ft(e,a){if(1&e&&(t.TgZ(0,"mat-option",38),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.value),t.xp6(1),t.Oqu(t.lcZ(2,2,o.i18nterm))}}function Pt(e,a){if(1&e&&(t.TgZ(0,"mat-option",38),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.value),t.xp6(1),t.hij("",t.lcZ(2,2,o.i18nterm)," ")}}function Mt(e,a){1&e&&(t._uU(0),t.ALo(1,"transloco")),2&e&&t.Oqu(t.lcZ(1,1,"Award.ContinuousDays"))}function It(e,a){if(1&e&&(t.TgZ(0,"mat-list",39),t.TgZ(1,"mat-list-item"),t._uU(2),t.qZA(),t.qZA()),2&e){const o=a.$implicit;t.xp6(2),t.Oqu(o.toString())}}function Yt(e,a){1&e&&(t._uU(0),t.ALo(1,"transloco")),2&e&&t.Oqu(t.lcZ(1,1,"Award.Point"))}function Jt(e,a){1&e&&(t.TgZ(0,"th",40),t._uU(1,"ID"),t.qZA())}function Qt(e,a){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.ruleID)}}function Gt(e,a){1&e&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.ContinuousDays")))}function Bt(e,a){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.continuousDays)}}function $t(e,a){1&e&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.Point")))}function Et(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"td",41),t.TgZ(1,"mat-form-field",42),t.TgZ(2,"input",43),t.NdJ("ngModelChange",function(n){return t.CHM(o).$implicit.point=n})("ngModelChange",function(n){return t.CHM(o),t.oxw().onPointCellChanged(n)}),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=a.$implicit;t.xp6(2),t.Q6J("ngModel",o.point)}}function Vt(e,a){1&e&&t._UZ(0,"tr",44)}function jt(e,a){1&e&&t._UZ(0,"tr",45)}function zt(e,a){1&e&&(t._uU(0),t.ALo(1,"transloco")),2&e&&t.Oqu(t.lcZ(1,1,"Common.Done"))}class it{constructor(){this.from=0,this.to=0}toString(){return`[${this.from} - ${this.to})`}}const at=e=>{var a,o,i,n,r,m,d,p,h,Z,U,L,F,O,S;const g=new u.ke;switch(g.category=u.cb.Positive,g.targetUser=null===(a=e.get("targetuserCtrl"))||void 0===a?void 0:a.value,g.validFrom=q()(null===(o=e.get("validFromCtrl"))||void 0===o?void 0:o.value),g.validTo=q()(null===(i=e.get("validToCtrl"))||void 0===i?void 0:i.value),g.name=null===(n=e.get("nameCtrl"))||void 0===n?void 0:n.value,g.frequency=null===(r=e.get("freqCtrl"))||void 0===r?void 0:r.value,g.completeCategory=null===(m=e.get("compCtgyCtrl"))||void 0===m?void 0:m.value,g.frequency){case u.Hs.Weekly:switch(g.completeCategory){case u.Kd.NumberOfCount:g.startDate=null===(d=e.get("startDateCtrl"))||void 0===d?void 0:d.value,g.completeCondition=null===(p=e.get("compCondCtrl"))||void 0===p?void 0:p.value;break;case u.Kd.NumberOfTimes:default:g.startDate=null===(h=e.get("startDateCtrl"))||void 0===h?void 0:h.value,g.completeCondition=null===(Z=e.get("compCondCtrl"))||void 0===Z?void 0:Z.value}break;case u.Hs.Monthly:switch(g.completeCategory){case u.Kd.NumberOfCount:g.startDate=null===(U=e.get("startDateCtrl"))||void 0===U?void 0:U.value,g.completeCondition=null===(L=e.get("compCondCtrl"))||void 0===L?void 0:L.value;break;case u.Kd.NumberOfTimes:default:g.startDate=null===(F=e.get("startDateCtrl"))||void 0===F?void 0:F.value,g.completeCondition=null===(O=e.get("compCondCtrl"))||void 0===O?void 0:O.value}break;case u.Hs.Daily:default:switch(g.completeCategory){case u.Kd.NumberOfCount:g.startDate=void 0,g.completeCondition=null===(S=e.get("compCondCtrl"))||void 0===S?void 0:S.value;break;case u.Kd.NumberOfTimes:default:g.startDate=void 0,g.completeCondition=1}}return g},Xt=e=>at(e).isValid?null:{invalidInputs:!0};let Kt=(()=>{class e{constructor(o,i,n){this._formBuilder=o,this.uiUtilSrv=i,this.odataSrv=n,this.arRuleTypes=[],this.contDays=[],this.arRules=[],this.displayedColumns=["ruleID","continuousDays","point"],this.pointCompleted=!1,this.createdHabitID=-1,this.arCategories=[],this.arFrequencies=[],this.arCompleteCategories=[],this.arCategories=(0,u.ZP)(),this.arFrequencies=(0,u.AX)(),this.arCompleteCategories=(0,u.nX)(),this.currentObject=new u.ke,this.firstFormGroup=this._formBuilder.group({targetuserCtrl:new l.NI(""),nameCtrl:new l.NI("",l.kI.required),validFromCtrl:new l.NI(q()(),l.kI.required),validToCtrl:new l.NI(q()(),l.kI.required),freqCtrl:new l.NI(u.Hs.Weekly,l.kI.required),compCtgyCtrl:new l.NI(u.Kd.NumberOfTimes,l.kI.required),compCondCtrl:new l.NI,startDateCtrl:new l.NI},{validators:Xt}),this.secondFormGroup=this._formBuilder.group({rawCtrl:new l.NI("",l.kI.required)})}get arTargetUsers(){return this.odataSrv.currentUserDetail?this.odataSrv.currentUserDetail.awardUsers:[]}getUserDisplayAs(o){if(o&&this.odataSrv.currentUserDetail){const i=this.odataSrv.currentUserDetail.awardUsers.findIndex(n=>n.targetUser===o);if(-1!==i)return this.odataSrv.currentUserDetail.awardUsers[i].displayAs}return""}ngOnInit(){var o,i,n;null===(o=this.firstFormGroup.get("freqCtrl"))||void 0===o||o.valueChanges.subscribe(r=>{this.onFreqencyAndCompleteCategoryChange(r)}),null===(i=this.firstFormGroup.get("compCtgyCtrl"))||void 0===i||i.valueChanges.subscribe(r=>{this.onFreqencyAndCompleteCategoryChange(r)}),null===(n=this.secondFormGroup.get("rawCtrl"))||void 0===n||n.valueChanges.subscribe(r=>{this.onContDayChange(r)})}onFreqencyAndCompleteCategoryChange(o){var i,n,r,m,d,p,h;const Z=null===(i=this.firstFormGroup.get("compCtgyCtrl"))||void 0===i?void 0:i.value;(null===(n=this.firstFormGroup.get("freqCtrl"))||void 0===n?void 0:n.value)===u.Hs.Daily?(Z===u.Kd.NumberOfTimes?null===(r=this.firstFormGroup.get("compCondCtrl"))||void 0===r||r.disable():null===(m=this.firstFormGroup.get("compCondCtrl"))||void 0===m||m.enable(),null===(d=this.firstFormGroup.get("startDateCtrl"))||void 0===d||d.disable()):(null===(p=this.firstFormGroup.get("compCondCtrl"))||void 0===p||p.enable(),null===(h=this.firstFormGroup.get("startDateCtrl"))||void 0===h||h.enable())}onContDayChange(o){if(this.contDays=[],o){let n=o.split(";").map(d=>{if(d){const p=+d;if(!isNaN(p)&&p>0)return Math.trunc(p)}return 0});n=n.filter(d=>d>0),n.sort();let r=0;n.forEach(d=>{if(0!==r){const p=new it;p.from=r,p.to=d,this.contDays.push(p)}r=d});const m=new it;m.from=r,m.to=9999,this.contDays.push(m)}}onPointCellChanged(o){let i=0;this.arRules.forEach(n=>{(isNaN(n.point)||0===n.point)&&i++}),this.pointCompleted=0===i}onInitialRules(){this.arRules=[],this.contDays.forEach((o,i)=>{let n=new u.hp;n.ruleID=i+1,n.continuousRecordFrom=o.from,n.continuousRecordTo=o.to,this.arRules.push(n)})}onSave(){let o=at(this.firstFormGroup);!o.isValid||(this.arRules.forEach(i=>{o.arRules.push(i)}),this.odataSrv.createUserHabit(o).subscribe({next:i=>{i&&i.ID&&(this.createdHabitID=i.ID)},error:i=>{this.uiUtilSrv.showSnackInfo(i,1e3)}}))}onGoToList(){this.uiUtilSrv.navigateHabitListPage()}onDisplayHabit(){this.createdHabitID&&this.uiUtilSrv.navigateHabitDisplayPage(this.createdHabitID)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l.qu),t.Y36(b.dM),t.Y36(b.CB))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-habit-create"]],decls:126,vars:86,consts:[[1,"toolbar-spacer"],["linear",""],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["appearance","fill",1,"control-full-width"],["formControlName","targetuserCtrl"],[3,"value",4,"ngFor","ngForOf"],["matInput","","required","","formControlName","nameCtrl"],["appearance","fill"],[3,"rangePicker"],["matStartDate","","formControlName","validFromCtrl","placeholder","Start date"],["matEndDate","","formControlName","validToCtrl","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],["required","","formControlName","freqCtrl"],["required","","formControlName","compCtgyCtrl"],["matInput","","type","number","formControlName","compCondCtrl"],["matInput","","type","number","formControlName","startDateCtrl"],["mat-button","","color","primary","matStepperNext","",3,"disabled"],["matInput","","formControlName","rawCtrl"],["dense","",4,"ngFor","ngForOf"],["mat-button","","matStepperPrevious",""],["mat-button","","color","primary","matStepperNext","",3,"click"],[3,"completed"],["mat-raised-button","","disabled",""],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","ruleID"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","continuousDays"],["matColumnDef","point"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-button","","color","primary","matStepperNext","",3,"disabled","click"],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"],[3,"value"],["dense",""],["mat-header-cell",""],["mat-cell",""],[1,"control-full-width"],["matInput","","type","number",1,"input-point",3,"ngModel","ngModelChange"],["mat-header-row",""],["mat-row",""]],template:function(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"mat-toolbar"),t.TgZ(1,"h1"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t._UZ(4,"div",0),t.TgZ(5,"h3"),t._uU(6),t.ALo(7,"transloco"),t.qZA(),t.qZA(),t.TgZ(8,"mat-vertical-stepper",1,2),t.TgZ(10,"mat-step",3),t.TgZ(11,"form",4),t.YNc(12,kt,2,3,"ng-template",5),t.TgZ(13,"mat-form-field",6),t.TgZ(14,"mat-label"),t._uU(15),t.ALo(16,"transloco"),t.qZA(),t.TgZ(17,"mat-select",7),t.YNc(18,Rt,2,2,"mat-option",8),t.qZA(),t.qZA(),t.TgZ(19,"mat-form-field",6),t.TgZ(20,"mat-label"),t._uU(21),t.ALo(22,"transloco"),t.qZA(),t._UZ(23,"input",9),t.qZA(),t.TgZ(24,"mat-form-field",10),t.TgZ(25,"mat-label"),t._uU(26),t.ALo(27,"transloco"),t.qZA(),t.TgZ(28,"mat-date-range-input",11),t._UZ(29,"input",12),t._UZ(30,"input",13),t.qZA(),t._UZ(31,"mat-datepicker-toggle",14),t._UZ(32,"mat-date-range-picker",null,15),t.qZA(),t.TgZ(34,"mat-form-field",6),t.TgZ(35,"mat-label"),t._uU(36),t.ALo(37,"transloco"),t.qZA(),t.TgZ(38,"mat-select",16),t.YNc(39,Ft,3,4,"mat-option",8),t.qZA(),t.TgZ(40,"mat-hint"),t._uU(41),t.ALo(42,"transloco"),t.qZA(),t.qZA(),t.TgZ(43,"mat-form-field",6),t.TgZ(44,"mat-label"),t._uU(45),t.ALo(46,"transloco"),t.qZA(),t.TgZ(47,"mat-select",17),t.YNc(48,Pt,3,4,"mat-option",8),t.qZA(),t.TgZ(49,"mat-hint"),t._uU(50),t.ALo(51,"transloco"),t.qZA(),t.qZA(),t.TgZ(52,"mat-form-field",6),t.TgZ(53,"mat-label"),t._uU(54),t.ALo(55,"transloco"),t.qZA(),t._UZ(56,"input",18),t.TgZ(57,"mat-hint"),t._uU(58),t.ALo(59,"transloco"),t.qZA(),t.qZA(),t.TgZ(60,"mat-form-field",6),t.TgZ(61,"mat-label"),t._uU(62),t.ALo(63,"transloco"),t.qZA(),t._UZ(64,"input",19),t.TgZ(65,"mat-hint"),t._uU(66),t.ALo(67,"transloco"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"div"),t.TgZ(69,"button",20),t._uU(70),t.ALo(71,"transloco"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(72,"mat-step",3),t.TgZ(73,"form",4),t.YNc(74,Mt,2,3,"ng-template",5),t.TgZ(75,"mat-form-field",6),t.TgZ(76,"mat-label"),t._uU(77),t.ALo(78,"transloco"),t.qZA(),t._UZ(79,"input",21),t.qZA(),t.qZA(),t.YNc(80,It,3,1,"mat-list",22),t.TgZ(81,"div"),t.TgZ(82,"button",23),t._uU(83),t.ALo(84,"transloco"),t.qZA(),t.TgZ(85,"button",24),t.NdJ("click",function(){return i.onInitialRules()}),t._uU(86),t.ALo(87,"transloco"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(88,"mat-step",25),t.YNc(89,Yt,2,3,"ng-template",5),t.TgZ(90,"mat-toolbar"),t.TgZ(91,"button",26),t._uU(92,"RESET RULES"),t.qZA(),t.qZA(),t.TgZ(93,"table",27),t.ynx(94,28),t.YNc(95,Jt,2,0,"th",29),t.YNc(96,Qt,2,1,"td",30),t.BQk(),t.ynx(97,31),t.YNc(98,Gt,3,3,"th",29),t.YNc(99,Bt,2,1,"td",30),t.BQk(),t.ynx(100,32),t.YNc(101,$t,3,3,"th",29),t.YNc(102,Et,3,1,"td",30),t.BQk(),t.YNc(103,Vt,1,0,"tr",33),t.YNc(104,jt,1,0,"tr",34),t.qZA(),t.TgZ(105,"button",23),t._uU(106),t.ALo(107,"transloco"),t.qZA(),t.TgZ(108,"button",35),t.NdJ("click",function(){return i.onSave()}),t._uU(109),t.ALo(110,"transloco"),t.qZA(),t.qZA(),t.TgZ(111,"mat-step"),t.YNc(112,zt,2,3,"ng-template",5),t.TgZ(113,"p"),t._uU(114),t.ALo(115,"transloco"),t.qZA(),t.TgZ(116,"p"),t._uU(117),t.ALo(118,"transloco"),t.qZA(),t.TgZ(119,"div"),t.TgZ(120,"button",36),t.NdJ("click",function(){return i.onDisplayHabit()}),t._uU(121),t.ALo(122,"transloco"),t.qZA(),t.TgZ(123,"button",37),t.NdJ("click",function(){return t.CHM(n),t.MAs(9).reset()}),t._uU(124),t.ALo(125,"transloco"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const n=t.MAs(33);t.xp6(2),t.Oqu(t.lcZ(3,40,"Habit.Habit")),t.xp6(4),t.Oqu(t.lcZ(7,42,"Common.Create")),t.xp6(4),t.Q6J("stepControl",i.firstFormGroup),t.xp6(1),t.Q6J("formGroup",i.firstFormGroup),t.xp6(4),t.Oqu(t.lcZ(16,44,"Award.TargetUser")),t.xp6(3),t.Q6J("ngForOf",i.arTargetUsers),t.xp6(3),t.Oqu(t.lcZ(22,46,"Common.Name")),t.xp6(5),t.Oqu(t.lcZ(27,48,"Award.Validity")),t.xp6(2),t.Q6J("rangePicker",n),t.xp6(3),t.Q6J("for",n),t.xp6(5),t.Oqu(t.lcZ(37,50,"Habit.Frequency")),t.xp6(3),t.Q6J("ngForOf",i.arFrequencies),t.xp6(2),t.Oqu(t.lcZ(42,52,"Habit.FrequencyHint")),t.xp6(4),t.Oqu(t.lcZ(46,54,"Habit.CompleteCategory")),t.xp6(3),t.Q6J("ngForOf",i.arCompleteCategories),t.xp6(2),t.Oqu(t.lcZ(51,56,"Habit.CompleteCategoryHint")),t.xp6(4),t.Oqu(t.lcZ(55,58,"Habit.CompleteCondition")),t.xp6(4),t.Oqu(t.lcZ(59,60,"Habit.CompleteConditionHint")),t.xp6(4),t.Oqu(t.lcZ(63,62,"Habit.StartDate")),t.xp6(4),t.Oqu(t.lcZ(67,64,"Habit.StartDateHint")),t.xp6(3),t.Q6J("disabled",!i.firstFormGroup.valid),t.xp6(1),t.Oqu(t.lcZ(71,66,"Common.Next")),t.xp6(2),t.Q6J("stepControl",i.secondFormGroup),t.xp6(1),t.Q6J("formGroup",i.secondFormGroup),t.xp6(4),t.Oqu(t.lcZ(78,68,"Award.ContinuousDays")),t.xp6(3),t.Q6J("ngForOf",i.contDays),t.xp6(3),t.Oqu(t.lcZ(84,70,"Common.Previous")),t.xp6(3),t.Oqu(t.lcZ(87,72,"Common.Next")),t.xp6(2),t.Q6J("completed",i.pointCompleted),t.xp6(5),t.Q6J("dataSource",i.arRules),t.xp6(10),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Oqu(t.lcZ(107,74,"Common.Previous")),t.xp6(2),t.Q6J("disabled",!i.pointCompleted),t.xp6(1),t.Oqu(t.lcZ(110,76,"Common.Next")),t.xp6(5),t.AsE("",t.lcZ(115,78,"AwardRuleGroupCreatedInfo1"),", ID: ",i.createdHabitID," "),t.xp6(3),t.Oqu(t.lcZ(118,80,"AwardRuleGroupCreatedInfo2")),t.xp6(4),t.Oqu(t.lcZ(122,82,"Common.Display")),t.xp6(3),t.Oqu(t.lcZ(125,84,"Common.CreateAnotherOne"))}},directives:[k.Ye,v.Vq,v.C0,l._Y,l.JL,l.sg,v.VY,_.KE,_.hX,w.gD,l.JJ,l.u,A.sg,R.Nt,l.Fj,l.Q7,C.wx,C.zY,C.By,C.nW,_.R9,C._g,_.bx,l.wV,D.lW,v.Ic,v.fd,s.BZ,s.w1,s.fO,s.Dz,s.as,s.nj,N.ey,ot.i$,ot.Tg,s.ge,s.ev,l.On,s.XQ,s.Gk],pipes:[x.Ot],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.input-point[_ngcontent-%COMP%]{text-align:center}"]}),e})();function Wt(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.TargetUser")))}function te(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const o=a.$implicit,i=t.oxw();t.xp6(1),t.AsE("",i.getUserDisplayAs(o.targetUser)," (",o.targetUser,")")}}function ee(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Common.Name")))}function oe(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.habitName," ")}}function ie(e,a){1&e&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Quiz.Date")))}function ae(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.recordDateString)}}function ne(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1,"Sub ID"),t.qZA())}function re(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"td",20),t._uU(1),t.TgZ(2,"button",1),t.NdJ("click",function(){const r=t.CHM(o).$implicit;return t.oxw().onDisplayRecord(r)}),t.ALo(3,"transloco"),t.TgZ(4,"mat-icon"),t._uU(5,"launch"),t.qZA(),t.qZA(),t.TgZ(6,"button",22),t.NdJ("click",function(){const r=t.CHM(o).$implicit;return t.oxw().onDeleteRecord(r)}),t.ALo(7,"transloco"),t.TgZ(8,"mat-icon"),t._uU(9,"remove_circle"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.subID," "),t.xp6(1),t.s9C("matTooltip",t.lcZ(3,3,"Common.Display")),t.xp6(4),t.s9C("matTooltip",t.lcZ(7,5,"Common.Delete"))}}function le(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Habit.CompleteFact")))}function se(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.completeFact)}}function ce(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1,"Rule ID"),t.qZA())}function ue(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.ruleID)}}function me(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.ContinuousDays")))}function pe(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.continuousCount)}}function de(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Common.Comment")))}function ge(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.comment)}}function _e(e,a){1&e&&t._UZ(0,"tr",23)}function Ce(e,a){1&e&&t._UZ(0,"tr",24)}let nt=(()=>{class e{constructor(o,i,n){this.odataSrv=o,this.dialog=i,this.uiUtilSrv=n,this.arRecords=[],this.displayedColumns=["targetUser","habitname","recordDate","subID","completeFact","ruleID","contDays","comment"],this.recordCount=0,this.isLoadingResults=!1,this.refreshEvent=new t.vpe}getUserDisplayAs(o){if(o&&this.odataSrv.currentUserDetail){const i=this.odataSrv.currentUserDetail.awardUsers.findIndex(n=>n.targetUser===o);if(-1!==i)return this.odataSrv.currentUserDetail.awardUsers[i].displayAs}return""}ngOnInit(){}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,E.T)(this.sort.sortChange,this.paginator.page,this.refreshEvent).pipe((0,j.O)({}),(0,z.w)(()=>{const o=this.paginator.pageSize;return this.odataSrv.getUserHabitRecordViews(o,o*this.paginator.pageIndex,this.sort.active,this.sort.direction)}),(0,X.x)(()=>this.isLoadingResults=!1),(0,K.U)(o=>(this.recordCount=o.totalCount,o.items)),(0,W.K)(()=>(0,V.of)([]))).subscribe({next:o=>this.arRecords=o,error:o=>this.uiUtilSrv.showSnackInfo(o)})}onCreateRecord(){this.uiUtilSrv.navigateHabitRecordCreatePage()}onRefreshList(){this.refreshEvent.emit()}resetPaging(){this.paginator.pageIndex=0}onDisplayRecord(o){this.uiUtilSrv.currentUserHabitRecord=o,this.uiUtilSrv.navigateHabitRecordDisplayPage()}onDeleteRecord(o){this.odataSrv.deleteUserHabitRecord(o.habitID,o.recordDateString,o.subID).subscribe({next:i=>{this.uiUtilSrv.showSnackInfo("Delete successfully")},error:i=>{this.uiUtilSrv.showSnackInfo(i)}})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(b.CB),t.Y36(H.uw),t.Y36(b.dM))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-habit-record-list"]],viewQuery:function(o,i){if(1&o&&(t.Gf(M.NW,5),t.Gf(y.YE,5)),2&o){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},decls:39,vars:11,consts:[[1,"toolbar-spacer"],["mat-icon-button","","color","primary",3,"matTooltip","click"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","targetUser"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","habitname"],["matColumnDef","recordDate"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","subID"],["matColumnDef","completeFact"],["matColumnDef","ruleID"],["matColumnDef","contDays"],["matColumnDef","comment"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-icon-button","","color","warn",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""]],template:function(o,i){1&o&&(t.TgZ(0,"mat-toolbar"),t.TgZ(1,"h1"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t._UZ(4,"div",0),t.TgZ(5,"button",1),t.NdJ("click",function(){return i.onCreateRecord()}),t.ALo(6,"transloco"),t.TgZ(7,"mat-icon"),t._uU(8,"add_circle"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"div",2),t.TgZ(10,"div",3),t.TgZ(11,"table",4),t.NdJ("matSortChange",function(){return i.resetPaging()}),t.ynx(12,5),t.YNc(13,Wt,3,3,"th",6),t.YNc(14,te,2,2,"td",7),t.BQk(),t.ynx(15,8),t.YNc(16,ee,3,3,"th",6),t.YNc(17,oe,2,1,"td",7),t.BQk(),t.ynx(18,9),t.YNc(19,ie,3,3,"th",10),t.YNc(20,ae,2,1,"td",7),t.BQk(),t.ynx(21,11),t.YNc(22,ne,2,0,"th",6),t.YNc(23,re,10,7,"td",7),t.BQk(),t.ynx(24,12),t.YNc(25,le,3,3,"th",6),t.YNc(26,se,2,1,"td",7),t.BQk(),t.ynx(27,13),t.YNc(28,ce,2,0,"th",6),t.YNc(29,ue,2,1,"td",7),t.BQk(),t.ynx(30,14),t.YNc(31,me,3,3,"th",6),t.YNc(32,pe,2,1,"td",7),t.BQk(),t.ynx(33,15),t.YNc(34,de,3,3,"th",6),t.YNc(35,ge,2,1,"td",7),t.BQk(),t.YNc(36,_e,1,0,"tr",16),t.YNc(37,Ce,1,0,"tr",17),t.qZA(),t.qZA(),t._UZ(38,"mat-paginator",18),t.qZA()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"Habit.Records")),t.xp6(3),t.s9C("matTooltip",t.lcZ(6,9,"Common.Create")),t.xp6(6),t.Q6J("dataSource",i.arRecords),t.xp6(25),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("length",i.recordCount)("pageSize",20))},directives:[k.Ye,D.lW,J.gM,Q.Hw,s.BZ,y.YE,s.w1,s.fO,s.Dz,s.as,s.nj,M.NW,s.ge,s.ev,y.nU,s.XQ,s.Gk],pipes:[x.Ot],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}"]}),e})();function fe(e,a){if(1&e&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.targetUser),t.xp6(1),t.Oqu(o.displayAs)}}let rt=(()=>{class e{constructor(o,i,n,r){this._formBuilder=o,this.activateRoute=i,this.uiUtilSrv=n,this.odataSrv=r,this.uiMode=f.sk.Create,this.currentMode="Common.Display",this.currentObject=null,this.detailFormGroup=this._formBuilder.group({targetuserCtrl:new l.NI("",l.kI.required),habitIDCtrl:new l.NI(-1),dateCtrl:new l.NI(q()(),l.kI.required),subIDCtrl:new l.NI(1,l.kI.required),compFactCtrl:new l.NI(1,l.kI.required),commentCtrl:new l.NI("")})}get arTargetUsers(){return this.odataSrv.currentUserDetail?this.odataSrv.currentUserDetail.awardUsers:[]}getUserDisplayAs(o){if(o&&this.odataSrv.currentUserDetail){const i=this.odataSrv.currentUserDetail.awardUsers.findIndex(n=>n.targetUser===o);if(-1!==i)return this.odataSrv.currentUserDetail.awardUsers[i].displayAs}return""}get isDisplayMode(){return this.uiMode===f.sk.Display}get isCreateMode(){return this.uiMode===f.sk.Create}get isUpdateMode(){return this.uiMode===f.sk.Update}get isEditable(){return this.uiMode===f.sk.Create||this.uiMode===f.sk.Update}ngOnInit(){this.activateRoute.url.subscribe({next:o=>{var i,n,r,m,d,p;o instanceof Array&&o.length>0&&("record"===o[0].path&&"display"===o[1].path?(this.uiMode=f.sk.Display,this.currentMode="Common.Display"):"record"===o[0].path&&"edit"===o[1].path&&(this.uiMode=f.sk.Update,this.currentMode="Common.Change")),this.uiUtilSrv.currentUserHabitRecord?(null===(i=this.detailFormGroup.get("targetuserCtrl"))||void 0===i||i.setValue(this.uiUtilSrv.currentUserHabitRecord.targetUser),null===(n=this.detailFormGroup.get("habitIDCtrl"))||void 0===n||n.setValue(this.uiUtilSrv.currentUserHabitRecord.habitID),null===(r=this.detailFormGroup.get("dateCtrl"))||void 0===r||r.setValue(this.uiUtilSrv.currentUserHabitRecord.recordDate),null===(m=this.detailFormGroup.get("subIDCtrl"))||void 0===m||m.setValue(this.uiUtilSrv.currentUserHabitRecord.subID),null===(d=this.detailFormGroup.get("compFactCtrl"))||void 0===d||d.setValue(this.uiUtilSrv.currentUserHabitRecord.completeFact),null===(p=this.detailFormGroup.get("commentCtrl"))||void 0===p||p.setValue(this.uiUtilSrv.currentUserHabitRecord.comment),this.uiMode===f.sk.Display?this.detailFormGroup.disable():this.detailFormGroup.enable(),this.uiUtilSrv.clearHabitRecordDisplay()):(this.uiMode=f.sk.Invalid,this.detailFormGroup.disable())},error:o=>{this.uiUtilSrv.showSnackInfo(o)}})}onOK(){}onReturnToList(){this.uiUtilSrv.navigateHabitRecordListPage()}onCreateNewOne(){this.detailFormGroup.reset()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l.qu),t.Y36(P.gz),t.Y36(b.dM),t.Y36(b.CB))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-habit-record-detail"]],decls:59,vars:42,consts:[[3,"formGroup"],["appearance","fill",1,"control-full-width"],["required","","formControlName","targetuserCtrl"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","formControlName","habitIDCtrl"],["appearance","fill"],["matInput","","formControlName","dateCtrl",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["matInput","","type","number","formControlName","subIDCtrl"],["matInput","","type","number","formControlName","compFactCtrl"],["matInput","","type","string","formControlName","commentCtrl"],["mat-button","","color","primary",3,"disabled","click"],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"],[3,"value"]],template:function(o,i){if(1&o&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-header"),t.TgZ(2,"mat-card-title"),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.ALo(7,"transloco"),t.qZA(),t.qZA(),t.TgZ(8,"mat-card-content"),t.TgZ(9,"form",0),t.TgZ(10,"mat-form-field",1),t.TgZ(11,"mat-label"),t._uU(12),t.ALo(13,"transloco"),t.qZA(),t.TgZ(14,"mat-select",2),t.YNc(15,fe,2,2,"mat-option",3),t.qZA(),t.qZA(),t.TgZ(16,"mat-form-field",1),t.TgZ(17,"mat-label"),t._uU(18,"#"),t.qZA(),t._UZ(19,"input",4),t.qZA(),t.TgZ(20,"mat-form-field",5),t.TgZ(21,"mat-label"),t._uU(22),t.ALo(23,"transloco"),t.qZA(),t._UZ(24,"input",6),t._UZ(25,"mat-datepicker-toggle",7),t._UZ(26,"mat-datepicker",null,8),t.qZA(),t.TgZ(28,"mat-form-field",1),t.TgZ(29,"mat-label"),t._uU(30),t.ALo(31,"transloco"),t.qZA(),t._UZ(32,"input",9),t.TgZ(33,"mat-hint"),t._uU(34),t.ALo(35,"transloco"),t.qZA(),t.qZA(),t.TgZ(36,"mat-form-field",1),t.TgZ(37,"mat-label"),t._uU(38),t.ALo(39,"transloco"),t.qZA(),t._UZ(40,"input",10),t.TgZ(41,"mat-hint"),t._uU(42),t.ALo(43,"transloco"),t.qZA(),t.qZA(),t.TgZ(44,"mat-form-field",1),t.TgZ(45,"mat-label"),t._uU(46),t.ALo(47,"transloco"),t.qZA(),t._UZ(48,"input",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"mat-card-actions"),t.TgZ(50,"button",12),t.NdJ("click",function(){return i.onOK()}),t._uU(51),t.ALo(52,"transloco"),t.qZA(),t.TgZ(53,"button",13),t.NdJ("click",function(){return i.onReturnToList()}),t._uU(54),t.ALo(55,"transloco"),t.qZA(),t.TgZ(56,"button",14),t.NdJ("click",function(){return i.onCreateNewOne()}),t._uU(57),t.ALo(58,"transloco"),t.qZA(),t.qZA(),t.qZA()),2&o){const n=t.MAs(27);t.xp6(3),t.Oqu(t.lcZ(4,18,"Habit.Record")),t.xp6(3),t.Oqu(t.lcZ(7,20,i.currentMode)),t.xp6(3),t.Q6J("formGroup",i.detailFormGroup),t.xp6(3),t.Oqu(t.lcZ(13,22,"Award.TargetUser")),t.xp6(3),t.Q6J("ngForOf",i.arTargetUsers),t.xp6(7),t.Oqu(t.lcZ(23,24,"Quiz.Date")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(5),t.Oqu(t.lcZ(31,26,"Habit.SubID")),t.xp6(4),t.Oqu(t.lcZ(35,28,"Habit.SubIDHint")),t.xp6(4),t.Oqu(t.lcZ(39,30,"Habit.CompleteFact")),t.xp6(4),t.Oqu(t.lcZ(43,32,"Habit.CompleteFactHint")),t.xp6(4),t.Oqu(t.lcZ(47,34,"Common.Comment")),t.xp6(4),t.Q6J("disabled",!(i.isEditable&&i.detailFormGroup.valid)),t.xp6(1),t.Oqu(t.lcZ(52,36,"Save")),t.xp6(3),t.Oqu(t.lcZ(55,38,"Common.ReturnToList")),t.xp6(2),t.Q6J("disabled",!i.isDisplayMode),t.xp6(1),t.Oqu(t.lcZ(58,40,"Common.CreateAnotherOne"))}},directives:[T.a8,T.dk,T.n5,T.$j,T.dn,l._Y,l.JL,l.sg,_.KE,_.hX,w.gD,l.Q7,l.JJ,l.u,A.sg,R.Nt,l.wV,l.Fj,C.hl,C.nW,_.R9,C.Mq,_.bx,T.hq,D.lW,N.ey],pipes:[x.Ot],styles:[""]}),e})();var lt=c(5758),he=c(7539);function Ze(e,a){1&e&&(t._uU(0),t.ALo(1,"transloco")),2&e&&t.Oqu(t.lcZ(1,1,"Habit.PickAnUser"))}function be(e,a){if(1&e&&(t.TgZ(0,"mat-option",27),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.targetUser),t.xp6(1),t.Oqu(o.displayAs)}}function Te(e,a){1&e&&(t._uU(0),t.ALo(1,"transloco")),2&e&&t.Oqu(t.lcZ(1,1,"Habit.AvailableHabits"))}function Ae(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1,"ID"),t.qZA())}function qe(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.HabitID)}}function ve(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Common.Name")))}function Ue(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.HabitName)}}function xe(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Habit.Frequency")))}function He(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const o=a.$implicit,i=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,i.getHabitFrequencyName(o.Frequency)))}}function De(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Habit.CompleteCategory")))}function ye(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const o=a.$implicit,i=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,i.getHabitCompleteCategoryName(o.CompleteCategory)))}}function we(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1,"COMPLETE FACT"),t.qZA())}function Ne(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"mat-checkbox",33),t.NdJ("ngModelChange",function(n){return t.CHM(o),t.oxw().$implicit.CompleteFact=n}),t.qZA(),t.qZA()}if(2&e){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",o.CompleteFact)}}function Le(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"mat-form-field"),t.TgZ(2,"input",34),t.NdJ("ngModelChange",function(n){return t.CHM(o),t.oxw().$implicit.CompleteFact=n}),t.ALo(3,"transloco"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=t.oxw().$implicit;t.xp6(2),t.s9C("placeholder",t.lcZ(3,2,"Value")),t.Q6J("ngModel",o.CompleteFact)}}function Oe(e,a){1&e&&(t.TgZ(0,"div"),t._uU(1,"Nothing display"),t.qZA())}function Se(e,a){if(1&e&&(t.TgZ(0,"td",29),t.TgZ(1,"div",30),t.YNc(2,Ne,2,1,"div",31),t.YNc(3,Le,4,4,"div",31),t.YNc(4,Oe,2,0,"div",32),t.qZA(),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Q6J("ngSwitch",o.completeCategoryString),t.xp6(1),t.Q6J("ngSwitchCase",0),t.xp6(1),t.Q6J("ngSwitchCase",1)}}function ke(e,a){1&e&&t._UZ(0,"tr",35)}function Re(e,a){1&e&&t._UZ(0,"tr",36)}function Fe(e,a){1&e&&(t._uU(0),t.ALo(1,"transloco")),2&e&&t.Oqu(t.lcZ(1,1,"Common.Done"))}class Pe{constructor(){this.HabitID=void 0,this.HabitName="",this.Frequency=u.Hs.Daily,this.CompleteCategory=u.Kd.NumberOfTimes,this.CompleteFact=null}get completeCategoryString(){return(+this.CompleteCategory).toString()}}let Me=(()=>{class e{constructor(o,i,n){this._formBuilder=o,this.uiUtilSrv=i,this.odataSrv=n,this.currentObject=null,this.arHabits=[],this.displayedColumns=["hid","name","frequency","compCategory","compFact"],this.firstFormGroup=this._formBuilder.group({targetuserCtrl:new l.NI("",l.kI.required),dateCtrl:new l.NI(q()(),l.kI.required)})}get arTargetUsers(){return this.odataSrv.currentUserDetail?this.odataSrv.currentUserDetail.awardUsers:[]}getUserDisplayAs(o){if(o&&this.odataSrv.currentUserDetail){const i=this.odataSrv.currentUserDetail.awardUsers.findIndex(n=>n.targetUser===o);if(-1!==i)return this.odataSrv.currentUserDetail.awardUsers[i].displayAs}return""}getHabitCompleteCategoryName(o){return(0,u.E0)(o)}getHabitFrequencyName(o){return(0,u.lC)(o)}ngOnInit(){}onUserSelected(){var o,i;let n=null===(o=this.firstFormGroup.get("targetuserCtrl"))||void 0===o?void 0:o.value,r=null===(i=this.firstFormGroup.get("dateCtrl"))||void 0===i?void 0:i.value.format(u.Jt);this.odataSrv.getUserHabits(100,0,void 0,`TargetUser eq '${n}' and ValidFrom le ${r} and ValidTo ge ${r}`).subscribe({next:m=>{this.arHabits=[],m.items.forEach(d=>{let p=new Pe;p.HabitID=d.ID,p.HabitName=d.name,p.Frequency=d.frequency,p.CompleteCategory=d.completeCategory,p.CompleteFact=null,this.arHabits.push(p)})},error:m=>{this.uiUtilSrv.showSnackInfo(m,1500)}})}get isHabitStepCompleted(){if(!this.arHabits)return!1;let o=!1;return this.arHabits.forEach(i=>{i.CompleteFact&&(o=!0)}),o}onSaveRecord(){let o=[];this.arHabits.forEach(i=>{var n;if(null!==i.CompleteFact){console.log(`${i.HabitID}, ${i.CompleteFact}`);const r=new u.Dh;r.completeFact=+i.CompleteFact,r.habitID=i.HabitID,r.recordDate=null===(n=this.firstFormGroup.get("dateCtrl"))||void 0===n?void 0:n.value,o.push(this.odataSrv.createUserHabitRecord(r))}}),(0,lt.D)(o).subscribe({next:i=>{console.log(i)},error:i=>{this.uiUtilSrv.showSnackInfo(i,1500)}})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l.qu),t.Y36(b.dM),t.Y36(b.CB))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-habit-record-create"]],decls:64,vars:35,consts:[[1,"toolbar-spacer"],["linear",""],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["appearance","fill",1,"control-full-width"],["required","","formControlName","targetuserCtrl"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill"],["matInput","","formControlName","dateCtrl",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["mat-button","","color","primary","matStepperNext","",3,"disabled","click"],[3,"completed"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","hid"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","frequency"],["matColumnDef","compCategory"],["matColumnDef","compFact"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-button","","matStepperPrevious",""],["mat-button","","color","warn",3,"click"],[3,"value"],["mat-header-cell",""],["mat-cell",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"ngModel","ngModelChange"],["matInput","","type","number","name","compfact_num",3,"placeholder","ngModel","ngModelChange"],["mat-header-row",""],["mat-row",""]],template:function(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"mat-toolbar"),t.TgZ(1,"h1"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t._UZ(4,"div",0),t.qZA(),t.TgZ(5,"mat-vertical-stepper",1,2),t.TgZ(7,"mat-step",3),t.TgZ(8,"form",4),t.YNc(9,Ze,2,3,"ng-template",5),t.TgZ(10,"mat-form-field",6),t.TgZ(11,"mat-label"),t._uU(12),t.ALo(13,"transloco"),t.qZA(),t.TgZ(14,"mat-select",7),t.YNc(15,be,2,2,"mat-option",8),t.qZA(),t.qZA(),t.TgZ(16,"mat-form-field",9),t.TgZ(17,"mat-label"),t._uU(18),t.ALo(19,"transloco"),t.qZA(),t._UZ(20,"input",10),t._UZ(21,"mat-datepicker-toggle",11),t._UZ(22,"mat-datepicker",null,12),t.qZA(),t.qZA(),t.TgZ(24,"div"),t.TgZ(25,"button",13),t.NdJ("click",function(){return i.onUserSelected()}),t._uU(26),t.ALo(27,"transloco"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"mat-step",14),t.YNc(29,Te,2,3,"ng-template",5),t.TgZ(30,"table",15),t.ynx(31,16),t.YNc(32,Ae,2,0,"th",17),t.YNc(33,qe,2,1,"td",18),t.BQk(),t.ynx(34,19),t.YNc(35,ve,3,3,"th",17),t.YNc(36,Ue,2,1,"td",18),t.BQk(),t.ynx(37,20),t.YNc(38,xe,3,3,"th",17),t.YNc(39,He,3,3,"td",18),t.BQk(),t.ynx(40,21),t.YNc(41,De,3,3,"th",17),t.YNc(42,ye,3,3,"td",18),t.BQk(),t.ynx(43,22),t.YNc(44,we,2,0,"th",17),t.YNc(45,Se,5,3,"td",18),t.BQk(),t.YNc(46,ke,1,0,"tr",23),t.YNc(47,Re,1,0,"tr",24),t.qZA(),t.TgZ(48,"div"),t.TgZ(49,"button",25),t._uU(50),t.ALo(51,"transloco"),t.qZA(),t.TgZ(52,"button",13),t.NdJ("click",function(){return i.onSaveRecord()}),t._uU(53),t.ALo(54,"transloco"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"mat-step"),t.YNc(56,Fe,2,3,"ng-template",5),t.TgZ(57,"p"),t._uU(58),t.ALo(59,"transloco"),t.qZA(),t.TgZ(60,"div"),t.TgZ(61,"button",26),t.NdJ("click",function(){return t.CHM(n),t.MAs(6).reset()}),t._uU(62),t.ALo(63,"transloco"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const n=t.MAs(23);t.xp6(2),t.Oqu(t.lcZ(3,19,"Habit.Records")),t.xp6(5),t.Q6J("stepControl",i.firstFormGroup),t.xp6(1),t.Q6J("formGroup",i.firstFormGroup),t.xp6(4),t.Oqu(t.lcZ(13,21,"Award.TargetUser")),t.xp6(3),t.Q6J("ngForOf",i.arTargetUsers),t.xp6(3),t.Oqu(t.lcZ(19,23,"Quiz.Date")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(4),t.Q6J("disabled",!i.firstFormGroup.valid),t.xp6(1),t.Oqu(t.lcZ(27,25,"Common.Next")),t.xp6(2),t.Q6J("completed",i.isHabitStepCompleted),t.xp6(2),t.Q6J("dataSource",i.arHabits),t.xp6(16),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(3),t.Oqu(t.lcZ(51,27,"Common.Previous")),t.xp6(2),t.Q6J("disabled",!i.isHabitStepCompleted),t.xp6(1),t.Oqu(t.lcZ(54,29,"Common.Next")),t.xp6(5),t.Oqu(t.lcZ(59,31,"Habit.HabitRecordCreatedInfo")),t.xp6(4),t.Oqu(t.lcZ(63,33,"Common.CreateAnotherOne"))}},directives:[k.Ye,v.Vq,v.C0,l._Y,l.JL,l.sg,v.VY,_.KE,_.hX,w.gD,l.Q7,l.JJ,l.u,A.sg,R.Nt,l.Fj,C.hl,C.nW,_.R9,C.Mq,D.lW,v.Ic,s.BZ,s.w1,s.fO,s.Dz,s.as,s.nj,v.fd,N.ey,s.ge,s.ev,A.RF,A.n9,A.ED,he.oG,l.On,l.wV,s.XQ,s.Gk],pipes:[x.Ot],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}"]}),e})();var Ie=c(1769);function Ye(e,a){if(1&e&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.targetUser),t.xp6(1),t.Oqu(o.displayAs)}}function Je(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1,"#"),t.qZA())}function Qe(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"td",24),t._uU(1),t.TgZ(2,"button",25),t.NdJ("click",function(){const r=t.CHM(o).$implicit;return t.oxw(2).onDeleteManualPoint(r.ID)}),t.ALo(3,"transloco"),t.TgZ(4,"mat-icon"),t._uU(5,"remove_circle"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=a.$implicit;t.xp6(1),t.hij("",o.ID," | "),t.xp6(1),t.s9C("matTooltip",t.lcZ(3,2,"Common.Delete"))}}function Ge(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.TargetUser")))}function Be(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit,i=t.oxw(2);t.xp6(1),t.AsE("",i.getUserDisplayAs(o.targetUser)," (",o.targetUser,")")}}function $e(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Quiz.Date")))}function Ee(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.recordDateString)}}function Ve(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.Point")))}function je(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.point)}}function ze(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Common.Comment")))}function Xe(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.comment)}}function Ke(e,a){1&e&&t._UZ(0,"tr",26)}function We(e,a){1&e&&t._UZ(0,"tr",27)}function to(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"div",11),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"h3"),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t._UZ(5,"div",0),t.TgZ(6,"button",7),t.NdJ("click",function(){return t.CHM(o),t.oxw().onHideManualPoints()}),t.ALo(7,"transloco"),t.TgZ(8,"mat-icon"),t._uU(9,"visibility_off"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",12),t.TgZ(11,"table",13),t.ynx(12,14),t.YNc(13,Je,2,0,"th",15),t.YNc(14,Qe,6,4,"td",16),t.BQk(),t.ynx(15,17),t.YNc(16,Ge,3,3,"th",15),t.YNc(17,Be,2,2,"td",16),t.BQk(),t.ynx(18,18),t.YNc(19,$e,3,3,"th",15),t.YNc(20,Ee,2,1,"td",16),t.BQk(),t.ynx(21,19),t.YNc(22,Ve,3,3,"th",15),t.YNc(23,je,2,1,"td",16),t.BQk(),t.ynx(24,20),t.YNc(25,ze,3,3,"th",15),t.YNc(26,Xe,2,1,"td",16),t.BQk(),t.YNc(27,Ke,1,0,"tr",21),t.YNc(28,We,1,0,"tr",22),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,5,"Award.Point")),t.xp6(3),t.s9C("matTooltip",t.lcZ(7,7,"Common.Hide")),t.xp6(5),t.Q6J("dataSource",o.dataSourceManualPoints),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumnsManualPoint),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumnsManualPoint)}}function eo(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.TargetUser")))}function oo(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit,i=t.oxw(2);t.xp6(1),t.AsE("",i.getUserDisplayAs(o.targetUser)," (",o.targetUser,")")}}function io(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Quiz.Date")))}function ao(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.recordDateString)}}function no(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1,"ID"),t.qZA())}function ro(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.habitID)}}function lo(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Common.Name")))}function so(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.habitName)}}function co(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1,"From"),t.qZA())}function uo(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.ruleDaysFrom)}}function mo(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1,"To"),t.qZA())}function po(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.ruleDaysTo)}}function go(e,a){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Award.Point")))}function _o(e,a){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.rulePoint)}}function Co(e,a){1&e&&t._UZ(0,"tr",26)}function fo(e,a){1&e&&t._UZ(0,"tr",27)}function ho(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"div",11),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"h3"),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t._UZ(5,"div",0),t.TgZ(6,"button",7),t.NdJ("click",function(){return t.CHM(o),t.oxw().onHideHabitPoints()}),t.ALo(7,"transloco"),t.TgZ(8,"mat-icon"),t._uU(9,"visibility_off"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",12),t.TgZ(11,"table",13),t.ynx(12,17),t.YNc(13,eo,3,3,"th",15),t.YNc(14,oo,2,2,"td",16),t.BQk(),t.ynx(15,18),t.YNc(16,io,3,3,"th",15),t.YNc(17,ao,2,1,"td",16),t.BQk(),t.ynx(18,28),t.YNc(19,no,2,0,"th",15),t.YNc(20,ro,2,1,"td",16),t.BQk(),t.ynx(21,29),t.YNc(22,lo,3,3,"th",15),t.YNc(23,so,2,1,"td",16),t.BQk(),t.ynx(24,30),t.YNc(25,co,2,0,"th",15),t.YNc(26,uo,2,1,"td",16),t.BQk(),t.ynx(27,31),t.YNc(28,mo,2,0,"th",15),t.YNc(29,po,2,1,"td",16),t.BQk(),t.ynx(30,19),t.YNc(31,go,3,3,"th",15),t.YNc(32,_o,2,1,"td",16),t.BQk(),t.YNc(33,Co,1,0,"tr",21),t.YNc(34,fo,1,0,"tr",22),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,5,"Award.Point")),t.xp6(3),t.s9C("matTooltip",t.lcZ(7,7,"Common.Hide")),t.xp6(5),t.Q6J("dataSource",o.dataSourceHabitPoints),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumnsHabitPoint),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumnsHabitPoint)}}function Zo(e,a){if(1&e&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.targetUser),t.xp6(1),t.hij(" ",o.displayAs," ")}}let bo=(()=>{class e{constructor(o,i,n){this.odataSrv=o,this.dialog=i,this.uiUtilSrv=n,this.displayedColumnsManualPoint=["id","targetUser","recordDate","point","comment"],this.dataSourceManualPoints=[],this.displayedColumnsHabitPoint=["targetUser","recordDate","habitid","habitName","ruleDaysFrom","ruleDaysTo","point"],this.dataSourceHabitPoints=[],this.selectedUser=null,this.selectedPeriod="2",this.showManualPointResult=!1,this.showHabitPointResult=!1}get arTargetUsers(){return this.odataSrv.currentUserDetail?this.odataSrv.currentUserDetail.awardUsers:[]}getUserDisplayAs(o){if(o&&this.odataSrv.currentUserDetail){const i=this.odataSrv.currentUserDetail.awardUsers.findIndex(n=>n.targetUser===o);if(-1!==i)return this.odataSrv.currentUserDetail.awardUsers[i].displayAs}return""}ngOnInit(){this.selectedPeriod="2"}onReportParameterSelectionChange(o){null!==this.selectedUser&&this.refreshData()}refreshData(){let o=q()(),i=q().duration(1,"months").asDays();"1"===this.selectedPeriod&&(i=q().duration(1,"weeks").asDays());let n=o.clone().subtract(i,"days"),r=[];const m=i;for(;i>=0;)r.push(o.clone().subtract(i,"days").format(u.Jt)),i--;let d=`TargetUser eq '${this.selectedUser}' and RecordDate ge ${n.format(u.Jt)} and RecordDate le ${o.format(u.Jt)}`,p=[],h=[];h.push(this.odataSrv.getHabitOpeningPointsByUserDate(this.selectedUser,m)),h.push(this.odataSrv.getHabitPointsByUserDateReport(d)),h.push(this.odataSrv.getUserOpeningPointReport(this.selectedUser,m)),h.push(this.odataSrv.getUserHabitPointReports(d)),(0,lt.D)(h).subscribe({next:Z=>{let L=Z[1],O=Z[3],S=[],g=[],st=[],I=0,Y=0,ct=Z[0]+Z[2];r.forEach(ut=>{let mt=L.findIndex(G=>G.recordDateString===ut);I=-1!==mt?L[mt].point:0,S.push(I);let pt=O.findIndex(G=>G.recordDateString===ut);-1!==pt?Y+=O[pt].point:Y=0,g.push(Y),ct+=I+Y,st.push(ct)}),p.push({name:"Points from Habits",type:"bar",emphasis:{focus:"series"},data:S}),p.push({name:"Manual Points",type:"bar",emphasis:{focus:"series"},data:g}),p.push({name:"Total Points",type:"bar",emphasis:{focus:"series"},data:st}),this.chartOption={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:r}],yAxis:[{type:"value"}],series:p}},error:Z=>{this.uiUtilSrv.showSnackInfo(Z)}})}onChartClick(o){0===o.seriesIndex?(this.showHabitPointResult=!0,this.dataSourceHabitPoints=[],this.odataSrv.getUserHabitRecordViews(100,0,void 0,void 0,`RecordDate eq ${o.name} and TargetUser eq '${this.selectedUser}'`).subscribe({next:n=>{n.items.forEach(r=>{r.ruleID&&this.dataSourceHabitPoints.push(r)})},error:n=>{this.uiUtilSrv.showSnackInfo(n)}})):1===o.seriesIndex&&o.name&&(this.showManualPointResult=!0,this.dataSourceManualPoints=[],this.odataSrv.getHabitPoints(`RecordDate eq ${o.name} and TargetUser eq '${this.selectedUser}'`).subscribe({next:n=>{this.dataSourceManualPoints=n},error:n=>{this.uiUtilSrv.showSnackInfo(n)}}))}onHideManualPoints(){this.showManualPointResult=!1}onHideHabitPoints(){this.showHabitPointResult=!1}onDeleteManualPoint(o){this.odataSrv.deleteHabitPoint(o).subscribe({next:i=>{this.uiUtilSrv.showSnackInfo("DONE"),this.showManualPointResult=!1,this.refreshData()},error:i=>{this.uiUtilSrv.showSnackInfo(i)}})}onCreatePoint(){this.dialog.open(To,{width:"600px",closeOnNavigation:!1,data:new u._Y}).afterClosed().subscribe(i=>{i&&this.odataSrv.createHabitPoint(i).subscribe({next:n=>{this.refreshData()},error:n=>{this.uiUtilSrv.showSnackInfo(n)}})})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(b.CB),t.Y36(H.uw),t.Y36(b.dM))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-habit-points-list"]],decls:30,vars:24,consts:[[1,"toolbar-spacer"],[1,"form-field-item"],["required","",3,"ngModel","ngModelChange","selectionChange"],["value","1"],["value","2"],[1,"form-field-user"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary",3,"matTooltip","click"],["echarts","",1,"demo-chart",2,"width","100%","height","450px",3,"options","chartClick"],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"value"],[1,"example-container","mat-elevation-z8"],[1,"table-container"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","targetUser"],["matColumnDef","recordDate"],["matColumnDef","point"],["matColumnDef","comment"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""],["matColumnDef","habitid"],["matColumnDef","habitName"],["matColumnDef","ruleDaysFrom"],["matColumnDef","ruleDaysTo"]],template:function(o,i){1&o&&(t.TgZ(0,"mat-toolbar"),t.TgZ(1,"h1"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t._UZ(4,"div",0),t.TgZ(5,"mat-form-field",1),t.TgZ(6,"mat-label"),t._uU(7),t.ALo(8,"transloco"),t.qZA(),t.TgZ(9,"mat-select",2),t.NdJ("ngModelChange",function(r){return i.selectedPeriod=r})("selectionChange",function(r){return i.onReportParameterSelectionChange(r)}),t.TgZ(10,"mat-option",3),t._uU(11),t.ALo(12,"transloco"),t.qZA(),t.TgZ(13,"mat-option",4),t._uU(14),t.ALo(15,"transloco"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"mat-form-field",5),t.TgZ(17,"mat-label"),t._uU(18),t.ALo(19,"transloco"),t.qZA(),t.TgZ(20,"mat-select",2),t.NdJ("ngModelChange",function(r){return i.selectedUser=r})("selectionChange",function(r){return i.onReportParameterSelectionChange(r)}),t.YNc(21,Ye,2,2,"mat-option",6),t.qZA(),t.qZA(),t.TgZ(22,"button",7),t.NdJ("click",function(){return i.onCreatePoint()}),t.ALo(23,"transloco"),t.TgZ(24,"mat-icon"),t._uU(25,"add_circle"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",8),t.NdJ("chartClick",function(r){return i.onChartClick(r)}),t.qZA(),t._UZ(27,"mat-divider"),t.YNc(28,to,29,9,"div",9),t.YNc(29,ho,35,9,"div",9)),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,12,"Award.Point")),t.xp6(5),t.Oqu(t.lcZ(8,14,"Habit.Frequency")),t.xp6(2),t.Q6J("ngModel",i.selectedPeriod),t.xp6(2),t.Oqu(t.lcZ(12,16,"Habit.ByWeek")),t.xp6(3),t.Oqu(t.lcZ(15,18,"Habit.ByMonth")),t.xp6(4),t.Oqu(t.lcZ(19,20,"Award.TargetUser")),t.xp6(2),t.Q6J("ngModel",i.selectedUser),t.xp6(1),t.Q6J("ngForOf",i.arTargetUsers),t.xp6(1),t.s9C("matTooltip",t.lcZ(23,22,"Common.Create")),t.xp6(4),t.Q6J("options",i.chartOption),t.xp6(2),t.Q6J("ngIf",i.showManualPointResult),t.xp6(1),t.Q6J("ngIf",i.showHabitPointResult))},directives:[k.Ye,_.KE,_.hX,w.gD,l.Q7,l.JJ,l.On,N.ey,A.sg,D.lW,J.gM,Q.Hw,$._w,Ie.d,A.O5,s.BZ,s.w1,s.fO,s.Dz,s.as,s.nj,s.ge,s.ev,s.XQ,s.Gk],pipes:[x.Ot],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;min-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%;height:100%}.form-field-item[_ngcontent-%COMP%]{width:100px}.form-field-user[_ngcontent-%COMP%]{width:200px}"]}),e})(),To=(()=>{class e{constructor(o,i,n){this.dialogRef=o,this.oDataSrv=i,this.data=n}onNoClick(){this.dialogRef.close()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(H.so),t.Y36(b.CB),t.Y36(H.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-habit-point-crtdlg"]],decls:33,vars:21,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"example-form"],["appearance","fill",1,"control-full-width"],["name","targetuser",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill"],["matInput","","name","recorddate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["matInput","","type","number","name","point",3,"ngModel","ngModelChange"],["matInput","","name","comment",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"disabled","mat-dialog-close"],[3,"value"]],template:function(o,i){if(1&o&&(t.TgZ(0,"h1",0),t._uU(1,"CREATE INCOMING/OUTGOING POINT"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"form",2),t.TgZ(4,"mat-form-field",3),t.TgZ(5,"mat-label"),t._uU(6),t.ALo(7,"transloco"),t.qZA(),t.TgZ(8,"mat-select",4),t.NdJ("ngModelChange",function(r){return i.data.targetUser=r}),t.YNc(9,Zo,2,2,"mat-option",5),t.qZA(),t.qZA(),t.TgZ(10,"mat-form-field",6),t.TgZ(11,"mat-label"),t._uU(12),t.ALo(13,"transloco"),t.qZA(),t.TgZ(14,"input",7),t.NdJ("ngModelChange",function(r){return i.data.recordDate=r}),t.qZA(),t._UZ(15,"mat-datepicker-toggle",8),t._UZ(16,"mat-datepicker",null,9),t.qZA(),t.TgZ(18,"mat-form-field",3),t.TgZ(19,"mat-label"),t._uU(20),t.ALo(21,"transloco"),t.qZA(),t.TgZ(22,"input",10),t.NdJ("ngModelChange",function(r){return i.data.point=r}),t.qZA(),t.qZA(),t.TgZ(23,"mat-form-field",3),t.TgZ(24,"mat-label"),t._uU(25),t.ALo(26,"transloco"),t.qZA(),t.TgZ(27,"input",11),t.NdJ("ngModelChange",function(r){return i.data.comment=r}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",12),t.TgZ(29,"button",13),t.NdJ("click",function(){return i.onNoClick()}),t._uU(30,"No Thanks"),t.qZA(),t.TgZ(31,"button",14),t._uU(32,"OK"),t.qZA(),t.qZA()),2&o){const n=t.MAs(17);t.xp6(6),t.Oqu(t.lcZ(7,13,"Award.TargetUser")),t.xp6(2),t.Q6J("ngModel",i.data.targetUser),t.xp6(1),t.Q6J("ngForOf",null==i.oDataSrv.currentUserDetail?null:i.oDataSrv.currentUserDetail.awardUsers),t.xp6(3),t.Oqu(t.lcZ(13,15,"Quiz.Date")),t.xp6(2),t.Q6J("matDatepicker",n)("ngModel",i.data.recordDate),t.xp6(1),t.Q6J("for",n),t.xp6(5),t.Oqu(t.lcZ(21,17,"Award.Point")),t.xp6(2),t.Q6J("ngModel",i.data.point),t.xp6(3),t.Oqu(t.lcZ(26,19,"Common.Comment")),t.xp6(2),t.Q6J("ngModel",i.data.comment),t.xp6(4),t.Q6J("disabled",!i.data.isValid)("mat-dialog-close",i.data)}},directives:[H.uh,H.xY,l._Y,l.JL,l.F,_.KE,_.hX,w.gD,l.JJ,l.On,A.sg,R.Nt,C.hl,l.Fj,C.nW,_.R9,C.Mq,l.wV,H.H8,D.lW,H.ZT,N.ey],pipes:[x.Ot],encapsulation:2}),e})();const Ao=[{path:"",component:tt},{path:"points",component:bo},{path:"list",component:tt},{path:"create",component:Kt},{path:"edit/:id",component:et},{path:"display/:id",component:et},{path:"record",component:nt},{path:"record/list",component:nt},{path:"record/create",component:Me},{path:"record/edit",component:rt},{path:"record/display",component:rt}];let qo=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[P.Bz.forChild(Ao)],P.Bz]}),e})(),vo=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[A.ez,l.u5,l.UX,dt.U,x.y4,gt.D,$.Ns,qo]]}),e})()}}]);